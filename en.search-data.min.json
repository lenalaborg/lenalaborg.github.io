[{"id":0,"href":"/docs/1.3.1/","title":"1.3.1","parent":"Documentation","content":""},{"id":1,"href":"/docs/1.3.1/1.3.1.2/","title":"1.3.1.2","parent":"1.3.1","content":" \u003c!DOCTYPE html\u003e Release Note Release Note LENA Support\nlena-support@lgcns.com\nversion 1.3.1.2 Table of Contents LENA 1.3.1.2 (2021.08.13) Web Server WAS Management Monitoring(Diagnostics) Etc LENA 1.3.1.2 (2021.08.13) Web Server (LENA-6403) Windows에서 Web서버 상태체크 오류 수정\nWAS (LENA-6305) WAS clone 시 temp 디렉토리 제외 로직 추가\nManagement (LENA-6378) OPEN API 전용 계정 생성\n(LENA-6306) OPEN API 기능 개선 및 추가\n(LENA-6304) 내장 폰트 적용\n(LENA-5920) node stop 기능 제공\n(LENA-5922) 서버 재기동 필요 표시기능 개선\n(LENA-5642) 중복 로그인 제한\n(LENA-5640) 비밀번호 변경 주기 설정\nMonitoring(Diagnostics) (LENA-6561) Server Rule Setting/Peak Control Rule Setting의 UI변경(조건검색 영역 추가, 설정 전체 On/Off기능 추가)\n(LENA-5955) Event Dashboard UI변경(라인차트에서 막대차트로 변경, 과거 특정일자와 비교기능 추가)\nEtc (LENA-6386, LENA-6389, LENA-6391) OSS 엔진 버전 업그레이드\nVersion 1.3.1.2\nLast updated 2021-09-17 15:38:05 +0900 "},{"id":2,"href":"/docs/1.3.1/1.3.1.3/","title":"1.3.1.3","parent":"1.3.1","content":" \u003c!DOCTYPE html\u003e Release Note Release Note LENA Support\nlena-support@lgcns.com\nversion 1.3.1.3 Table of Contents LENA 1.3.1.1 (2022.) LENA 1.3.1.1 (2022.) Version 1.3.1.3\nLast updated 2022-04-28 12:58:50 +0900 "},{"id":3,"href":"/docs/1.3.1/1.3.1.4/","title":"1.3.1.4","parent":"1.3.1","content":" \u003c!DOCTYPE html\u003e Release Note Release Note LENA Support\nlena-support@lgcns.com\nversion 1.3.1.4 Table of Contents LENA 1.3.1.4 (2022.) Web Server Web Application Server Session Server Node Agent Management Container LENA 1.3.1.4 (2022.) Web Server (LENA-7219) CVE-2022-22719 초기화하지 않은 변수 사용으로 인해 발생하는 취약점 해결\n(LENA-7219) CVE-2022-22720 HTTP request 요청 과정 중 발생하는 취약점 해결\n(LENA-7219) CVE-2022-22721 버퍼오버플로우 취약점 해결\n(LENA-7219) CVE-2022-23943 Out-of-Bounds 읽기/쓰기 취약점 해결\n(LENA-7075) ubuntu 20.x 버전 지원\n(LENA-7182) oracle linux 8.x 버전 지원\n(LENA-6623) timezone에 따른 logrotate 적용\n(LENA-6687) mod_proxy DNS Lookup 처리 개선\nWeb Application Server (LENA-7049, LENA-7050, LENA-7060) OSS 엔진 업데이트\n(LENA-6834) LENA WAS 기동시 Port 를 바인딩하지 못하면 서버가 기동되지 않도록 개선\n(LENA-6623) timezone에 따른 logrotate 적용\nSession Server (LENA-6643) (Max)MetaspaceSize 명시적 적용\nNode Agent (LENA-6643) (Max)MetaspaceSize 명시적 적용\nManagement (LENA-7003) CVE-2022-22965 Spring4Shell 보안취약점 해결\n(LENA-6379) jquery 3.x 업데이트\n(LENA-6945) 다국어 처리 지원 기반 마련\n(LENA-7006) Event 데이터 관리 주기 변경 : Month → Day\nContainer (LENA-7063) Spring Boot 2.6 지원\n(LENA-6919) Jasypt 암복호화 기능 지원\nVersion 1.3.1.4\nLast updated 2022-05-03 13:34:11 +0900 "},{"id":4,"href":"/docs/1.3.2/","title":"1.3.2","parent":"Documentation","content":""},{"id":5,"href":"/docs/1.3.2/1.3.2.0/","title":"1.3.2.0","parent":"1.3.2","content":" \u003c!DOCTYPE html\u003e Release Note Release Note LENA Support\nlena-support@lgcns.com\nversion 1.3.2.0 Table of Contents LENA 1.3.2.0 (2022.12.02) Web Server Web Application Server Session Server Node Agent Management Container / Embedded LENA 1.3.2.0 (2022.12.02) Web Server (LENA-7480) CentOS Stream 9 및 Ubuntu 22.04 지원\n(LENA-7480) openssl 3.0 지원\n(LENA-7473) proxy failover/failback 모듈 추가\n(LENA-7311) OSS 엔진 업데이트\nWeb Application Server (LENA-7270) JDK 17 지원\n(LENA-7247) Java EE 8 / Jakarta EE 8 지원\n(LENA-7985) Servlet 6.0 및 JSP 3.1 지원\n(LENA-7716, LENA-7984, LENA-8013) OSS 엔진 업데이트\n(LENA-7583) DBCP 로깅기능 및 DB connection / validation / createDatasource 실패시 종료기능 개발\nSession Server Node Agent (LENA-6915) Agent, Manager CPU 사용률 개선\n(LENA-6856) Agent 기동 및 종료시 파일 로그 출력\nManagement (LENA-7247) 멀티 스펙 노드 지원\n(LENA-7617) TunA 번들링 지원\n(LENA-7689) Proxy 설정 UI 지원\n(LENA-7588) JK 설정 UI 변경\n(LENA-7591) Virtual Host Tab 화면 수정\n(LENA-6915) Agent, Manager CPU 사용률 개선\n(LENA-7256) Event 외부 SNS Alarm 기능 개발\nContainer / Embedded (LENA-7254) Spring Boot 환경설정 정보 조회 및 점검 기능 개발\nVersion 1.3.2.0\nLast updated 2022-12-01 10:33:55 +0900 "},{"id":6,"href":"/categories/","title":"Categories","parent":"LENA Docs","content":""},{"id":7,"href":"/docs/","title":"Documentation","parent":"LENA Docs","content":""},{"id":8,"href":"/docs/1.3.1/1.3.1.2/installation/","title":"Installation","parent":"1.3.1.2","content":" \u003c!DOCTYPE html\u003e Installation Installation LENA Support\nlena-support@lgcns.com\nversion 1.3.1.2 Table of Contents 1. Overview 1.1. 구성요소 1.1.1. Server 1.1.2. Agent, Advertiser 1.1.3. Manager 1.2. Mechanism 2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource 2.1.2. 운영체제 2.1.3. 계정 2.1.4. 디렉토리 2.1.5. JVM 2.1.6. Network 3. Installation 3.1. LENA 설치 3.1.1. LENA Manager 설치/실행 3.1.2. Node 설치(Command Line) WAS Node 설치 Web Server Node 설치 LENA Manager와 Node의 연동(등록) 3.1.3. Node 원격 설치(LENA Manager Web UI) 3.1.4. WAS 설치/실행 3.1.5. Web Server 설치/실행 Web Server - WAS 연동 3.1.6. Session Server 설치 및 연동 Standalone 모드 설치와 WAS 연동 Embedded 모드 설치와 WAS 연동 3.1.7. Server 간 연동 확인 Topology 를 통한 확인 Sample Page 호출을 통한 확인 Sample Application 호출을 통한 확인 1. Overview 본문서는 일반적인 VM Host 기반 LENA Server를 운영하기 앞서 설치에 대해 기술한다.+ LENA 의 전체 기능 및 운영에대한 내용은 별도로 제공되는 운영자 매뉴얼을 참고한다.\n본 문서는 LENA 1.3.1 버전을 기준으로 기술하고, 다음과 같은 내용을 포함한다.\nLENA 설치\nLinux 기반\nWindows 기반 설치\n1.1. 구성요소 LENA는 Web Server, WAS(Web Application Server), Session Server와 Web Server의 Status를 확인하는 Node Agent, Application Server에 설치되어 Status정보를 제공하는 Advertiser와 관리자에게 제공되는 통합관리 도구인 Manager로 구성된다.\n1.1.1. Server LENA에서 제공되는 서버의 종류는 Web Server, Application Server, Session Server 3가지가 있다. 각 서버의 용도는 아래와 같다.\nWeb Server: 사용자 요청에 따라 Web Resource를 제공한다. Application Server가 제공하는 응용서비스의 Front역할을 수행하면서, 선택적으로 Load Balancing 및 보안 레이어(SSL)를 제공하는 역할을 수행한다.\nApplication Server: Java로 작성된 응용 서비스를 실행/제공 한다.\nSession Server: Application Server간 사용자의 세션을 유지한다.\n1.1.2. Agent, Advertiser Node, Server에 설치되어 제어 및 모니터링 기능을 담당하는 Agent 이다.\nNode Agent\nWeb Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\nAdvertiser\nApplication Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\n1.1.3. Manager Manager는 Node Agent와 Advertiser를 통하여 Node와 Server의 제어 및 모니터링 기능 등을 제공하는Web Application이다. 대표적으로 아래와 같은 기능을 제공한다.\nTable 1. LENA Manager 주요 기능 항목 설명 Dashboard\nServer, Server Cluster 현황\nNotification 확인\nServer\nSystem (논리적 Server 그룹) 등록/수정/삭제\nServer Cluster\nServer Cluster 등록/수정/삭제\nServer Cluster 에 등록할 Server 등록/삭제\nServer Cluster 에 등록한 Server 설정 비교 및 동기화\nServer Cluster 설정 백업 및 복원을 위한 Snapshot\nServer Cluster 에 등록한 Server 들의 Graceful Restart\nResource\nReosource의 조회 및 등록/수정/삭제\nDatabase / DataSource / MessageService(JMS) / Transaction(JTA) / Application / LoadBalancer(SLB)\nResource를 사용하는 Server 목록 조회 및 등록/수정/삭제\nDiagnostics + (모니터링)\nServer에 대한 이슈 현황 모니터링 기능\nServer에서 발생한 Event 조회 기능\nTopology\nSystem별 Server 구성현황 조회\nAdmin\n사용자 및 권한 관리, 사용자/권한/메뉴 매핑\n사용자 운영 이력 조회\n라이선스 관리, 현황 조회 및 업로드\n1.2. Mechanism LENA는 Manager를 통해서 Web Server/WAS 를 모니터링 및 통합관리하는 기능을 제공한다. 이를 위해 Node라는 단위로 Agent가 설치되는데 이를 Node Agent라고 한다. Node Agent는 Manager의 사용자 명령을 전달받아 Node에 설치된 Web Server/WAS 를 제어하며 Node가 설치된 Host/VM, Web Server 의 모니터링 정보를 Manager로 전송한다.\nFigure 1. LENA Manager의 모니터링 및 통합관리의 작동방식 LENA Manager, Web Server, WAS 외에도 Manager의 동작을 위해 사용되는 Manager Repository, Session Clustering을 위한 Sesssion Server, WAS의 모니터링 정보 수집을 위한 Advertiser가 작동하여 Manager를 통한 모니터링 및 통합관리가 가능하도록 한다.\n항목 설명 Manager\n서버에 배포되는 설정파일 관리 및 Server 모니터링 기능 제공\nManager Repository\nManager 운영을 위한 파일저장 Repository, 각종 설정정보 및 DB 정보를 포함함\nNode Agent\nWeb 서버 모니터링 데이터 취합 및 Manager에게 송신, Manager로부터 수신한 제어/설정 명령 실행\nApplication Server\nApplication Server Instance\nWeb Server\nWeb Server Instance\nSession Server\nSession Server Instance\nAdvertiser\n모니터링 데이터 취합 및 Manager에게 송신(Application Server에 통합)\n2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource CPU\n전적으로 구동하고자 하는 Web Application이 어느 정도의 성능을 요구하는지에 달려있다. 기본적인 LENA 서비스 구동에 필요한 CPU는 2 Core 이상을 권고한다.\nMemory\nMemory에 대해서는 아래 표를 참조한다. Web Server를 제외한 모든 Module은 JVM 기반으로 동작하므로 Heap Memory를 사용한다. LENA에서는 기본 Heap Memory 값을 미리 설정해 놓았으며, 설치 시에 해당 값으로 설치되나 필요에 따라 수정이 가능하다. 안정적인 운영을 위해 하나의 물리적 서버에 설치될 모든 모듈의 Heap Memory 설정 값의 합이 물리 서버의 잔여 메모리 용량보다 크지 않도록 유의한다.\nLENA Manager 및 각 Server 설치에 대한 최소 요구사항은 다음과 같다.\n구분 JVM Disk Space 최소 Memory 기본 Memory Manager\nJDK 1.8 \u0026#43;\n약 300 MB\n512 MB\n1 GB\nNode Agent\nJDK 1.8 \u0026#43;\n-\n64 MB\n256 MB\nApplication Server\nJDK 1.8 \u0026#43;\n약 100 MB\n512 MB\n2 GB\nWeb Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n-\nSession Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n1 GB\n각 Server 설치 시 기본 Memory 기준으로 설치 되며, Memory 설정은 최소 Memory 이상으로 설정값을 변경하여 적용할 수 있다.\n2.1.2. 운영체제 Linux\nRedhat (RHEL, CentOS) 6.5 이상 / Ubuntu 12.04 이상을 지원하며 가장 권고하는 운영체제이다. 일반적인 x86 아키텍처의 특성에 맞도록 대용량 통합서버 구성보다는 저용량 다수의 서버에 분산 설치하는 것을 권장한다.\nWindows\nWindows 7 이상을 지원한다. Linux/Unix 달리 Windows 특성에 따라 LENA Module을 Background로 띄우기 위해 Windows Service 등록 기능을 제공한다. 그렇지 않으면 LENA Module이 항상 Foreground로 실행된다.\nLinux/Unix에서는 기본적으로 LENA Module을 실행시키기 위한 스크립트를 제공한다.\n만약 OS Service로 등록이 필요할 시 서버 담당자가 OS 환경에 맞게 직접 설정해야 한다.\nUnix\nSolaris, HP-UX, AIX를 지원한다. Unix의 경우 Linux/Windows와 달리 신규 버전 및 Patch가 기본 제공되지 않으며, 필요 시 해당 OS의 버전 별 개별 검토를 통해 제작 및 배포되며 이는 통상적으로 약 2주의 소요시간이 필요하다.\n2.1.3. 계정 LENA를 설치하기 전 LENA 설치 및 기동에 이용한 계정이 필요하다. 적합한 이유가 없다면 보안 상 Root / Administrator 계정은 권고되지 않으며 이를 통해 LENA를 실행시킬 수 없으니 별도의 계정을 미리 생성하도록 한다.\nX86 아키텍처에서 권고되는 바는 아니지만, 만약 한 물리 서버에 서로 다른 다수의 업무 시스템이 운영되고 각 시스템 별로 담당 운영자가 구분되며 시스템 간 접근 통제를 위해 계정을 분리하여 사용한다고 가정하자. 이런 경우 운영자 계정 별(업무 시스템 별)로 Node를 구성/설치 하여 운영해야 하며 LENA Manager 또한 시스템 별로 구성하는 것을 권고한다. 2.1.4. 디렉토리 LENA 설치를 진행하기에 앞서 이전 단계에서 생성한 계정이 이용 가능한 설치 디렉토리를 준비하여야 한다. 아래 표는 LENA에서 제안하는 디렉토리 구성이며 사용자 별로 정책에 맞는 디렉토리 구성을 이용하면 된다. 아래 표는 Linux/Unix 기준으로 설명되었으나 Windows의 경우 C: 하위에 동일하게 디렉토리를 구성한다.\nTable 2. Directory Requirement 구분 Directory 비고 LENA WAS Node(Binary)\n/engn001/lena\nLENA WEB Node(Binary)\n/engn001/lenaw\nWeb Server, WAS Log\n/logs001\nlog경로 분리 필요 시 설정\nWeb Application Source\n/sorc001\n고려할 사항은 log 파일을 분리할 것인지 여부이다. log는 별도 분리 설정하지 않으면 LENA Node 가 설치되는 경로 하위에 기본 생성된다. log 확인을 손쉽게 하면서도 Disk 용량 관리를 편하게 하기 위해서는 log 디렉토리의 분리를 권장한다.\n가능하다면 별도 외장 disk 볼륨을 Node, log, source 디렉토리에 Mount하여 OS System 영역과 격리하는 것을 권장한다.\n2.1.5. JVM JDK의 경우 LENA 설치 진행하기 전 별도 Binary 형태로 혹은 OS에서 제공하는 Package 설치 관리자를 통해 설치가 되어 있어야 한다. LENA 1.3은 OracleJDK/OpenJDK 8이상을 지원하며 JDK 6,7의 경우 LENA 1.2에서 지원한다.\nOracleJDK의 경우 8u202 버전 까지만 무료로 이용할 수 있다.\n2.1.6. Network 아래 다이어그램은 LENA의 각 Module간 트래픽의 흐름을 나타낸 도표이다. LENA Management 관련 경로와 Web Service 관련 경로가 상세히 표현되어있다.\nFigure 2. LENA Network Traffic 위 다이어그램에 표현된 LENA 모듈간 트래픽 경로와 사용 Port는 아래 표와 같다. 명시된 Port 번호는 사전 정의된 기본값이며 각 Module 설치 시 별도로 지정할 수 있다. 아래 표를 참고하여 Port를 선정한 뒤, 사전에 방화벽을 Open 해 놓아야 한다.\nLENA에서 사용하는 Port는 보안 요건 상 1025이상의 Port를 이용한다. 단, 서비스 제공 시 80 Port 등의 Well-known Port를 이용해야 한다면 부록에서 제공되는 80포트 이용 가이드를 참고한다.\nTable 3. LENA Firewall Open Rule Src Dest Protocol Port 비고 운영자\nLENA Manager\nTCP\n7700\nManager Web UI 접속\nLENA Manager\nWEB Node Agent\nTCP\n16900\nWEB Node 제어\nWAS Node Agent\nTCP\n16800\nWAS Node 제어\nWEB Node Agent\nLENA Manager\nUDP\n16100\n모니터링 정보 송신\nWAS Node Agent\nWAS Advertiser\nSession Server\n유저/운영자\nWeb Server\nHTTP\n8000\nWEB 서비스 접속\nHTTPS\n8363\nWEB 서비스 보안(SSL) 접속\n(HTTP + 363 / 수정가능)\n운영자\nWAS\nHTTP\n8080\nWAS 서비스 접속\nWeb Server\nAJP\n8009\nWeb Server-WAS 연계\n(HTTP - 71 / 수정가능)\nWAS\nSession Server\nTCP\n5180\nSession Clustering\nSession Server\nWAS\nDB\nTCP\n3306\nWAS JDBC 접속\nLENA는 Web Server / WAS 설치 시 HTTP Port를 지정하여 설치하도록 하고있다. 이 HTTP Port를 기준으로 HTTPS 포트와 같은 Server 동작을 위한 다른 Port를 자동계산하여 설치하는데 그 예시가 위 표에서 이탤릭 체로 표시된 포트이다. 따라서, Web Server, WAS를 다수 설치하는 과정에서 이미 사용된 다른 Port 와의 충돌을 방지하기 위해서 1과 10의 자리는 Web Server나 WAS 별로 동일하게, 100의 자리는 변경하여 설치하는 것을 권장한다.\nTable 4. IP가 같은 장비에 Web Server, WAS 설치 시 HTTP Port 설정 예시 구분\nServer 명\nHTTP Port\n비고\nWAS\nee_01\n8080\n-\nee_02\n8180\nee_01의 HTTP Port 값 + 100\nWeb\nweb_01\n7180\n-\nweb_02\n7280\nweb_01의 HTTP Port 값 + 100\n또한 Dynamic Port Range를 전체 Port 범위로 사용하지 말 것을 권고한다. LENA 기동에 필요한 Port를 OS의 다른 Service가 Source Port로 점유하는 일이 발생할 가능성이 있다.\n3. Installation 3.1. LENA 설치 LENA 설치파일을 대상 서버의 준비된 디렉토리에 업로드한다. 설치파일을 통해 LENA Manager를 설치하고자 하는 Server에 LENA Manager를 설치하고 Web Server를 설치할 Server에 Web Server Node를, WAS를 설치할 Server에 WAS Node를 설치한다.\nLENA 설치를 진행 하기에 앞서 JVM 을 참조하여 JDK를 미리 설치하도록 한다.\nNode의 설치 후 Web Server와 WAS의 설치는 LENA Manager의 Web UI를 통해서 설치한다. LENA 설치 파일은 제품 구분과 용도에 따라 다음과 같이 구분된다.\nTable 5. LENA 설치 파일 구분 (OS: Linux/Windows 64bit / LENA: 1.3.1.0 기준) 제품 구분(Edition) OS 구분 설치 파일 비고 Enterprise\nLinux\nlena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz\nLENA Manager, WAS 설치용\nWindows\nlena-enterprise-win_na_x86_64-1.3.1.0.zip\nStandard\nLinux\nlena-standard-linux_na_x86_64-1.3.1.0.tar.gz\nWindows\nlena-standard-win_na_x86_64-1.3.1.0.zip\n-\nLinux\nlena-web-linux_na_x86_64-1.3.1.0.tar.gz\nWeb Server 설치용\nWindows\nlena-web-win-na_x86_65-1.3.1.0.zip\nEnterprise Edition과 Standard Edition의 차이는 운영자 매뉴얼의 Server Module 를 참고한다.\nLinux와 Windows 에서의 LENA 설치는 큰 흐름에서는 동일한 방식으로 진행된다. 본 문서에서는 Linux를 기준으로 설명한다.\n3.1.1. LENA Manager 설치/실행 LENA 설치 패키지는 압축파일 형식으로, 설치할 서버에 업로드 후에 압축을 해제하여 사용한다. LENA Manager는 WAS Node 설치파일에 포함되어 있으며 설치할 경로(예: /engn001/lena)에 설치파일을 업로드 후 압축을 푼다.\nLENA Manager는 WAS Node 설치파일에 포함되어 있다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.1.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz install.sh(예: /engn001/lena/1.3/bin/install.sh) 파일을 이용하여 설치하며\n다음과 같은 명령어를 사용하여 설치할 수 있다.\nLENA Manager 설치 [lena]# cd /engn001/lena/1.3/bin [lena]# ./install.sh create lena-manager ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------------- | 1. SERVICE_PORT is the port number used by Manager. | ex : 7700 | 2. MONITORING_PORT is the port number used by Manager for monitoring. | ex : 16100 | 3. RUN_USER is user running LENA Manager. | ex : lena, wasadm +------------------------------------------------------------------------------------- Input SERVICE_PORT for execution. (q:quit) Default value is '7700' 7700 LENA Manager 설치가 완료되면 install.sh 을 실행한 디렉토리에 LENA Manager 와 관련된 Script 파일이 생성된다.\nTable 6. LENA Manager 관리용 Script 파일 Script 파일명 설명 start-manager.sh\nLENA Manager 를 시작한다.\nps-manager.sh\nLENA Manager가 실행중인지 확인한다.\nstop-manager.sh\nLENA Manager 를 중지한다.\nstart-manager.sh 을 실행하여 LENA Manager를 시작한다.\n[lena]# ./start-manager.sh -------------------------------- LENA Manager -------------------------------- Using LENA_HOME : /engn001/lena/jadeu3/1.3 Using JRE_HOME : /engn001/java/jdk1.8.0_202 Using SERVER_PID : /engn001/lena/jadeu3/1.3/modules/lena-manager/lena-manager_solmanager.pid Using SERVER_HOME : /engn001/lena/jadeu3/1.3/modules/lena-manager Using SERVER_ID : lena-manager Using INSTANCE_NAME : lena-manager_solmanager LENA started. LENA Manager가 정상적으로 실행되면 해당 서버의 Service Port로 Manager에 접속할 수 있다.\nhttp://Server_IP:7700\nFigure 3. LENA 접속 화면 아래의 초기 접속 계정/비밀번호로 접속하면 초기 화면을 확인 할 수 있다.\n초기 접속 계정/비밀번호 admin / !admin1234\nFigure 4. LENA 초기화면(DASHBOARD) 3.1.2. Node 설치(Command Line) Node의 설치는 LENA 설치 패키지의 압축을 푸는 것과 같다. WAS, Web Server를 설치할 서버에 각 설치 패키지를 준비한 경로(예: /engn001/lena 또는 /engn001/lenaw)에 업로드 후 압축을 해제한다.\nNode를 설치하면 아래와 같이 Node Agent를 실행, 중지, 상태확인을 하기위한 script가 존재한다.\nTable 7. Node Agent 관리 Script script 경로 script 명 비고 Node 설치경로 하위 'bin'\n(예: /engn001/lena/1.3/bin)\nstart-agent.sh\nNode Agent 실행\nps-agent.sh\nNode Agent 프로세스 확인\nstop-agent.sh\nNode Agent 중지\nWAS Node 설치 WAS Node의 설치 시 고려할 수 있는 사항은 다음과 같다.\nLENA Manager와 WAS Node를 같은 Server에 설치\nLENA Manager와 WAS Node를 다른 Server에 설치(LENA Manager 독립 설치)\n1번의 경우 LENA Manager 설치/실행 에서 LENA Manager를 설치하기 위해 WAS Node 설치 패키지의 압축을 풀었으므로 이미 WAS Node가 설치되어 있는 상태이다.\n2번의 경우 WAS Node를 설치할 Server의 준비한 경로(예: /engn001/lena)에 LENA WAS 설치 패키지를 업로드 후 다음과 같이 압축을 풀어 설치한다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.1.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz Node를 설치했다면 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lena/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lena/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 Web Server Node 설치 Web Server를 설치할 Server에 LENA Web Server 설치용 패키지를 업로드 후 압축을 풀어 설치한다.\n경로 / 파일 확인 [lenaw]# cd /engn001/lenaw [lenaw]# ll -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 설치파일 압축 해제 / 디렉토리 명 변경 [lenaw]# tar -xvzf lena-web-linux_na_x86_64-1.3.1.tar.gz [lenaw]# mv lena-web-linux_na_x86_64-1.3.1 1.3 [lenaw]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\nNode를 설치 한 후 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lenaw/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lenaw/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 LENA Manager와 Node의 연동(등록) WAS Node와 Web Server Node를 설치하고 Agent를 기동하면 LENA Manager를 통해 Node를 등록할 수 있다.\nLENA Manager의 상단 'SERVER' 메뉴를 선택하면 Node List를 확인 할 수 있다.\nNode 등록을 위해 'Register' 버튼을 클릭하면 아래와 같이 Node를 등록하기 위한 Empty Row가 추가되며 각 입력 항목을 등록한다.\nFigure 5. SERVER 메뉴 초기화면 Node 등록 시 입력할 항목은 다음과 같다.\nNode Name: 등록할 Node의 명칭\nNode Type: Application / Web 중에 선택\nNode IP: Node가 설치된 Server의 IP Adress\nNode Port: Node 설치시 입력한 Node Port\nManager Address 항목의 경우 LENA Manager가 설치된 Server의 IP가 자동입력 되므로 별도 입력할 필요는 없다.\n입력 항목을 모두 입력한 뒤 'Save' 버튼으로 Node 등록을 완료하며 정상 처리 시 아래와 같은 화면을 확인할 수 있다.\nFigure 6. Node 정상 등록 예시 화면 3.1.3. Node 원격 설치(LENA Manager Web UI) Node의 설치는 Node 설치(Command Line) 에서 진행한 방법 외에도 LENA Manager를 통해 원격으로 설치할 수도 있다. 이를 위해서는 LENA (Manager)를 설치한 Server의 특정 디렉토리 안에 LENA 설치파일(WAS, Web Server)를 업로드 해 두어야 한다. 설치 패키지를 업로드 해 두어야 하는 경로의 예시는 다음과 같다.\nTable 8. Node 원격 설치를 위한 설치파일 업로드 경로(예시) LENA 설치경로 LENA 설치 패키지 업로드 경로 /engn001/lena/1.3 (LENA_HOME)\n[LENA_HOME]/repository/install-files/default\n해당 경로에 앞서 사용한 WAS, Web Server 설치파일을 업로드 한다.\n원격 설치를 위한 설치 패키지 확인 [lena]# cd /engn001/lena/1.310/repository/install-files/default [lena]# ll -rw-rw-r--. 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz -rw-rw-r--. 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 해당 경로에 설치 패키지를 업로드 했다면 LENA Manager의 'SERVER' 메뉴를 선택하고 하단의 'Install' 버튼을 클릭한다.\nFigure 7. WAS Node 원격 설치 예시 Node 원격 설치 시 입력해야 하는 항목은 다음과 같다.\nNode Type: Application / Web 중에 선택\nNode Name: 원격 Server에 설치할 Node의 명칭\nNode Address: Node를 설치할 원격 Server의 IP Adress\nNode Port: 원격 Server에서 Node가 사용할 Port\nUser: 원격 Server의 OS 계정\nPassword: 원격 Server의 OS 계정의 비밀번호\nSSH Port: 원격 Server의 SSH Port\nLENA Home: 원격 Server에 Node를 설치할 경로\nJava Home: 원격 Server에 설치되어있는 JAVA Home 경로\n원격 설치에서 입력하는 값을 토대로, LENA Manager는 앞서 미리 준비해둔 설치 패키지 파일을 원격 Server로 전송하고 Node를 설치하고, 설치한 Node의 Agent를 자동으로 실행하는 것으로 원격 설치는 완료된다. 이러한 진행 상황은 Popup 창을 통해 확인 할 수 있다.\nFigure 8. WAS Node 원격 설치 진행 확인 예시 설치가 정상적으로 완료되면 원격 설치한 Node는 LENA Manager에 자동으로 등록된다.\nFigure 9. Node 원격 설치 후 등록 완료된 상태 예시 Node의 원격 설치를 위해서는 LENA Manager가 설치된 Server와 원격 설치할 Server 간의 SSH Port 방화벽이 Open 되어있어야 한다.\n3.1.4. WAS 설치/실행 WAS Node를 설치, 등록까지 완료했다면 이제 LENA Manager Web UI를 통해 WAS 를 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 한 뒤 좌측에서 WAS 를 설치할 WAS Node를 선택하면 WAS List를 확인할 수 있다. 이 화면에서 'Install' 버튼을 클릭한다.\nFigure 10. WAS List 확인 Figure 11. WAS 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 WAS를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: WAS의 Type, Standard / Enterprise 중 택\nNode: WAS 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 WAS를 식별하기 위한 명칭\nService Port: WAS가 설치될 때 기준이 되는 HTTP Port를 의미\nRun User: WAS 의 기동 시 사용할 OS 계정(수정불가)\nInstall Root Path: WAS 가 설치될 경로(수정불가)\nLog Home: WAS Log의 경로\ndefault: [Install Root Path]/logs\ncutom: 사용자가 임의로 경로 지정\nJVM Route: Web Server와 연동 시 Web Server 가 WAS를 식별하기 위한 값\nauto: LENA에서 자동생성\nmanual: 사용자가 임의로 지정\nWAS 는 기동 시 HTTP, HTTPS, AJP 등 다양한 Port를 사용하는데 LENA 에서는 WAS 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWAS 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 WAS가 설치되며 WAS List 에서 설치한 WAS 를 확인 할 수 있다.\nFigure 12. WAS 정상 설치 후 WAS List 중지되어 있는 WAS 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 WAS 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWAS 기동 시에는 WAS 기동 Log(Application 이 배포되어 있다면 Application 기동 Log 도 함께)가 Popup 창으로 출력된다.\nFigure 13. WAS의 기동과 Log 3.1.5. Web Server 설치/실행 WAS 설치와 동일한 방식으로, LENA Manager Web UI를 통해 Web Server를 설치할 Web Server Node를 선택한 뒤 Web Server를 설치할 수 있다.\nFigure 14. Web Server List 확인 Figure 15. Web Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Web Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Web Server (고정)\nNode: Web Server 가 설치될 Node (수정불가)\nServer ID: LENA Manager 가 Web Server 를 식별하기 위한 명칭\nService Port: Web Server 가 사용할 HTTP Port\nRun User: Web Server 기동 시 사용할 OS 계정(수정불가)\nWeb Server Engine Path: Web Server 설치 시 사용할 Engine 경로(수정불가)\nInstall Root Path: Web Server 가 설치될 경로(수정불가)\nLog Home: Web Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nWeb Server 는 기동 시 HTTP, HTTPS 등 다양한 Port를 사용하는데 LENA 에서는 Web Server 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWeb Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Web Server가 설치되며 Web Server List 에서 확인할 수 있다.\nFigure 16. Web Server 정상 설치 후 Web Server List 중지되어 있는 Web Server 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 Web Server 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWeb Server 기동 시에는 Web Server 기동 Log가 Popup 창으로 출력된다.\nFigure 17. Web Server 의 기동과 Log Web Server - WAS 연동 Web Server와 WAS 간 연동 설정에 대해 알아본다. LENA Web Server 와 WAS 의 연동은 Web Server 설정 화면에서 할 수 있다. LENA Manager 상단의 'SERVER' 메뉴에서 설치한 Web Server 를 선택하여 설정 화면을 열고 설정 화면 내 상단의 'Connector' 탭을 선택한다.\nFigure 18. Web Server 초기 설정화면 Web Server 의 'Connector' 탭에서는 Web Server 와 WAS 간 연결에 대한 설정을 관리한다.\n'Connector' 탭 화면 하단의 WAS List 란에 연동할 WAS를 추가하면 기본적인 Web Server 와 WAS 간 연동이 완료된다.\nWAS 를 추가하기 위해서는 WAS List 란의 '+' 버튼을 클릭하면 열리는 팝업에서 설치되어 있는 WAS를 선택하고 'Save' 버튼을 클릭한다.\n팝업에서는 LENA Manager 에 등록되어있는 WAS Node 별로 WAS 목록을 확인 할 수 있으며 이미 'Connector' 에 등록한 WAS는 보이지 않는다.\nFigure 19. 연동할 WAS 추가 WAS List에 연동 설정할 WAS가 추가되면 우측 하단의 'Save' 버튼을 클릭하여 최종 저장한다.\nFigure 20. 연동할 WAS 목록 저장 3.1.6. Session Server 설치 및 연동 Session Server는 Session Clustering 을 적용 시에 설치하며 다음 두 가지 방법으로 설치할 수 있다.\nStandalone 모드: Session Server를 별도 Server 로 설치하는 방법\nEmbedded 모드: Session Server를 별도 Server 로 설치하지 않고 기존에 설치한 WAS 내에 Emebedded 형태로 설치하는 방법\nStandalone 모드 설치와 WAS 연동 Session Server 는 WAS Node에 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 후 Session Server 를 설치할 WAS Node를 선택한다. WAS List 하단에는 설치된 Session Server를 확인 할 수 있는 Session Server List 를 확인할 수 있다.\nFigure 21. Session Server List 확인 Figure 22. Session Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Session Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Standalone (고정)\nNode: Session Server 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 Session Server 를 식별하기 위한 명칭\nService Port: Session Server 가 사용할 Port\nMirror Server IP: 다른 하나의 Session Server 가 설치된 Node(등록한 Node 중에서 선택)\nMirror Server Port: 다른 하나의 Session Server 가 설치된 Node에서 Session Server 가 사용하는 Port\nRun User: Session Server 기동 시 사용할 OS의 계정(수정불가)\nInstall Root Path: Session Server 가 설치될 경로(수정불가)\nLog Home: Session Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nSession Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Session Server 가 설치되며 Session Server List 에서 확인 할 수 있다.\nSession Clustering 구성 시 Session Server는 2기를 설치하여 하나는 Primary, 다른 하나는 Secondary 이중화 구성을 한다.\n위 예시 그림에서는 'Mirror Server IP' 에 다른 하나의 WAS Node를 지정하였으며 해당 WAS Node 에도 아래와 같이 Session Server 를 설치한다.\nFigure 23. 다른 하나의 Session Server 설치 Session Server 를 모두 설치 한 뒤 WAS 와 연동하기 위해 WAS 설정 화면의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Client Mode 의 경우 별도로 설치한 Session Server 를 기동하고 이를 WAS 와 연동하여 Session Clustering 을 적용하는 방식이다.\nFigure 24. WAS 의 Client 모드 Session Server 설정 Client 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nPrimary Server Host: Primary 로 지정할 Session Server 가 설치된 Node 를 선택하고 Session Server 를 지정한다.\nSecondary Server Host: Secondary 로 지정할 Session Server 가 설치된 Node 와 Session Server 를 지정한다. Session Server 가 2기 설치되어 있고, Primary Server Host 를 선택하면 나머지 Session Server 가 자동으로 Secondary 로 지정된다.\nExternal Stored Session: Session Clustering 적용과 함께 WAS 와 Session Server(2기)에서 관리되는 Session 정보를 Session Server(2기) 에서만 관리할 지 여부를 선택한다. 주로 Cloud, Container 환경에서 구성 시 해당 옵션을 사용한다.(Default false)\nShare session in applications: WAS에 여러 Application 이 배포되는 경우 해당 Application 간 Session 정보를 공유할 지 여부를 선택한다.(Default false)\nMulti Login Control: 중복 로그인 제어 기능의 사용여부를 선택한다.(Default false)\nClient 모드 Session Server 의 경우 설정을 적용할 WAS 마다 위와 같은 설정을 적용해 주어야 한다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nEmbedded 모드 설치와 WAS 연동 Session Server 의 기능을 Embedded 모드로 사용할 WAS 를 선택하여 설정화면을 연 뒤, 상단의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Embedded Mode 의 경우 WAS 에 Session Server 기능이 WAS 에 Embedded 형태로 WAS 가 기동한다.\nFigure 25. WAS 의 Embedded 모드 Session Server 설정 Embedded 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nEmbedded Host: Embedded Mode 선택 시 현재 WAS 로 고정된다.\nEmbedded Port: Embedded Session Server 가 사용할 Port를 입력한다.\nSecondary Server Host: 다른 하나의 Embedded Session Server 를 사용할 WAS 를 지정한다. WAS 가 설치된 Node 를 선택 후 WAS 를 선택한다.\nSecondary Server Port: 다른 하나의 Embedded Session Server 가 사용할 Port 를 입력한다.\nMulti Login Contorl: 중복 로그인 제어 기능의 사용여부를 선택한다. (Default false)\n설정 값 입력, 선택을 마친 뒤 'Save' 버튼을 눌러 저장하면 Embedded Session 설정이 완료되며 Embedded Session 의 설정은 하나의 WAS 에서 진행하면 다른 하나의 WAS 에도 설정이 적용된다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nFigure 26. WAS 의 Embedded 모드 Session Server 설정의 완료 3.1.7. Server 간 연동 확인 앞서 Web Server - WAS 연동 과 Session Server 설치 및 연동 과정을 통해서 진행한 연동 설정을 확인하는 방법을 설명한다.\nLENA Manager 에서는 설치한 Server 의 구성을 간편하게 확인할 수 있도록 Topology View 를 제공하고 있다. 이 Topology 기능을 통해 연동이 정상적으로 확인 하는 방법과 Web Server, WAS 설치 시 기본 탑재되어 있는 LENA Sample 페이지를 통해 연동이 정상적으로 되어있는 지를 확인 할 수 있다.\nTopology 를 통한 확인 LENA Manager 상단의 'Topoolgy' 메뉴를 선택한다.\nFigure 27. Topology View Topology View 에서는 기본적으로 현재 등록되어 있는 Node 와 Node 별 설치한 Server 의 구성과 연동정보를 확인 할 수있다.\n위 그림에서는 Web Server 2기, WAS 2기 그리고 Session Server 2기가 설치되어 있으며 Web Server 와 WAS, WAS 와 Session Server 간 연동 설정이 연결선으로 표현되고 있으며 이를 통해 Server 간 연동이 정상적으로 되었는지 확인 할 수 있다.\nSample Page 호출을 통한 확인 LENA 의 Web Server 와 WAS 에는 기본 탑재된 Sample Page와 Sample Application 이 있다. 이는 초기 설치 후 정상 연동을 확인하는 용도로도 사용될 수 있다.\n먼저 Web Server 의 IP와 Port를 확인한 뒤 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.html\n그럼 아래와 같이 LENA 에서 제공하는 index.html 페이지가 호출되는 것을 확인 할 수 있으며 Web Server 가 정상호출 되는 것을 확인 할 수 있다.\nFigure 28. Web Server 호출 Test Sample Application 호출을 통한 확인 LENA WAS를 설치하면 LENA 에서 제공하는 기본 Application 이 탑재되어 있다. 이 Application의 index.jsp, session.jsp 를 호출하면 각각 WAS 호출 테스트, Session Clustering 기능 테스트를 수행할 수 있다.\nWeb Server 와 WAS 가 설치 초기상태로 설정되어 있다는 가정 하에 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.jsp\nWeb Server 와 WAS 가 정상 연결이 되어있다면 Web Server 의 IP와 Port 로 호출한 위 요청은 WAS로 전달되어 index.jsp 페이지를 요청하게 되고 다음과 같이 LENA Sample Application 에서 제공하는 index.jsp 페이지가 호출된다.\nFigure 29. index.jsp 호출 Test index.jsp 페이지를 호출하면 현재 요청을 어떤 WAS 가 처리하는지를 Server ID, Service Port, JvmRout 값을 통해 확인할 수 있다.\n이번에는 동일한 Web Server IP, Port 로 아래와 같이 session.jsp 를 호출한다.\nhttp://[Web Server IP]:[Web Server Port]/session.jsp\nsession.jsp 를 호출하면 현재 요청에 대한 Session 정보가 추가로 확인된다. 호출을 반복함에 따라 Session Count 의 수가 증가하며 두번째 호출 부터 발급된 Session ID가 표시된다. Session Clustering 이 정상 적용 되었는지를 확인 하기 위해서는 Session ID가 발급된 상태에서 현재 요청을 처리중인 WAS 를 중지하고 웹 브라우저를 새로고침하여 요청을 다시 보냈을 때, 기동중인 다른 WAS 가 요청을 처리하지만 Session ID 가 그대로 유지되며 Session Count 가 증가하는 것으로 확인할 수 있다.\nFigure 30. session.jsp 호출 Test Version 1.3.1.2\nLast updated 2021-10-05 16:39:54 +0900 "},{"id":9,"href":"/docs/1.3.1/1.3.1.3/installation/","title":"Installation","parent":"1.3.1.3","content":" \u003c!DOCTYPE html\u003e Installation Installation LENA Support\nlena-support@lgcns.com\nversion 1.3.1.3 Table of Contents 1. Overview 1.1. 구성요소 1.1.1. Server 1.1.2. Agent, Advertiser 1.1.3. Manager 1.2. Mechanism 2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource 2.1.2. 운영체제 2.1.3. 계정 2.1.4. 디렉토리 2.1.5. JVM 2.1.6. Network 3. Installation 3.1. LENA 설치 3.1.1. LENA Manager 설치/실행 3.1.2. Node 설치(Command Line) WAS Node 설치 Web Server Node 설치 LENA Manager와 Node의 연동(등록) 3.1.3. Node 원격 설치(LENA Manager Web UI) 3.1.4. WAS 설치/실행 3.1.5. Web Server 설치/실행 Web Server - WAS 연동 3.1.6. Session Server 설치 및 연동 Standalone 모드 설치와 WAS 연동 Embedded 모드 설치와 WAS 연동 3.1.7. Server 간 연동 확인 Topology 를 통한 확인 Sample Page 호출을 통한 확인 Sample Application 호출을 통한 확인 1. Overview 본문서는 일반적인 VM Host 기반 LENA Server를 운영하기 앞서 설치에 대해 기술한다.+ LENA 의 전체 기능 및 운영에대한 내용은 별도로 제공되는 운영자 매뉴얼을 참고한다.\n본 문서는 LENA 1.3.1 버전을 기준으로 기술하고, 다음과 같은 내용을 포함한다.\nLENA 설치\nLinux 기반\nWindows 기반 설치\n1.1. 구성요소 LENA는 Web Server, WAS(Web Application Server), Session Server와 Web Server의 Status를 확인하는 Node Agent, Application Server에 설치되어 Status정보를 제공하는 Advertiser와 관리자에게 제공되는 통합관리 도구인 Manager로 구성된다.\n1.1.1. Server LENA에서 제공되는 서버의 종류는 Web Server, Application Server, Session Server 3가지가 있다. 각 서버의 용도는 아래와 같다.\nWeb Server: 사용자 요청에 따라 Web Resource를 제공한다. Application Server가 제공하는 응용서비스의 Front역할을 수행하면서, 선택적으로 Load Balancing 및 보안 레이어(SSL)를 제공하는 역할을 수행한다.\nApplication Server: Java로 작성된 응용 서비스를 실행/제공 한다.\nSession Server: Application Server간 사용자의 세션을 유지한다.\n1.1.2. Agent, Advertiser Node, Server에 설치되어 제어 및 모니터링 기능을 담당하는 Agent 이다.\nNode Agent\nWeb Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\nAdvertiser\nApplication Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\n1.1.3. Manager Manager는 Node Agent와 Advertiser를 통하여 Node와 Server의 제어 및 모니터링 기능 등을 제공하는Web Application이다. 대표적으로 아래와 같은 기능을 제공한다.\nTable 1. LENA Manager 주요 기능 항목 설명 Dashboard\nServer, Server Cluster 현황\nNotification 확인\nServer\nSystem (논리적 Server 그룹) 등록/수정/삭제\nServer Cluster\nServer Cluster 등록/수정/삭제\nServer Cluster 에 등록할 Server 등록/삭제\nServer Cluster 에 등록한 Server 설정 비교 및 동기화\nServer Cluster 설정 백업 및 복원을 위한 Snapshot\nServer Cluster 에 등록한 Server 들의 Graceful Restart\nResource\nReosource의 조회 및 등록/수정/삭제\nDatabase / DataSource / MessageService(JMS) / Transaction(JTA) / Application / LoadBalancer(SLB)\nResource를 사용하는 Server 목록 조회 및 등록/수정/삭제\nDiagnostics + (모니터링)\nServer에 대한 이슈 현황 모니터링 기능\nServer에서 발생한 Event 조회 기능\nTopology\nSystem별 Server 구성현황 조회\nAdmin\n사용자 및 권한 관리, 사용자/권한/메뉴 매핑\n사용자 운영 이력 조회\n라이선스 관리, 현황 조회 및 업로드\n1.2. Mechanism LENA는 Manager를 통해서 Web Server/WAS 를 모니터링 및 통합관리하는 기능을 제공한다. 이를 위해 Node라는 단위로 Agent가 설치되는데 이를 Node Agent라고 한다. Node Agent는 Manager의 사용자 명령을 전달받아 Node에 설치된 Web Server/WAS 를 제어하며 Node가 설치된 Host/VM, Web Server 의 모니터링 정보를 Manager로 전송한다.\nFigure 1. LENA Manager의 모니터링 및 통합관리의 작동방식 LENA Manager, Web Server, WAS 외에도 Manager의 동작을 위해 사용되는 Manager Repository, Session Clustering을 위한 Sesssion Server, WAS의 모니터링 정보 수집을 위한 Advertiser가 작동하여 Manager를 통한 모니터링 및 통합관리가 가능하도록 한다.\n항목 설명 Manager\n서버에 배포되는 설정파일 관리 및 Server 모니터링 기능 제공\nManager Repository\nManager 운영을 위한 파일저장 Repository, 각종 설정정보 및 DB 정보를 포함함\nNode Agent\nWeb 서버 모니터링 데이터 취합 및 Manager에게 송신, Manager로부터 수신한 제어/설정 명령 실행\nApplication Server\nApplication Server Instance\nWeb Server\nWeb Server Instance\nSession Server\nSession Server Instance\nAdvertiser\n모니터링 데이터 취합 및 Manager에게 송신(Application Server에 통합)\n2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource CPU\n전적으로 구동하고자 하는 Web Application이 어느 정도의 성능을 요구하는지에 달려있다. 기본적인 LENA 서비스 구동에 필요한 CPU는 2 Core 이상을 권고한다.\nMemory\nMemory에 대해서는 아래 표를 참조한다. Web Server를 제외한 모든 Module은 JVM 기반으로 동작하므로 Heap Memory를 사용한다. LENA에서는 기본 Heap Memory 값을 미리 설정해 놓았으며, 설치 시에 해당 값으로 설치되나 필요에 따라 수정이 가능하다. 안정적인 운영을 위해 하나의 물리적 서버에 설치될 모든 모듈의 Heap Memory 설정 값의 합이 물리 서버의 잔여 메모리 용량보다 크지 않도록 유의한다.\nTable 2. LENA Edition 별 기본 설치 최소 요구 DiskSpace LENA Edition File Size LENA Enterprise Edition\n400 MB\nLENA Standard Edition\n200 MB\nLENA Edition 에 따른 기본 설치를 위한 Disk Space는 위 표와 같으며, LENA Manager 및 Server의 최소 요구사항은 다음과 같다.\nTable 3. LENA 구성 요소별 물리자원 요구사항 구분 JVM Disk Space 최소 Memory 기본 Memory Manager\nJDK 1.8 \u0026#43;\n약 450 MB\n512 MB\n1 GB\nNode Agent\nJDK 1.8 \u0026#43;\n-\n64 MB\n256 MB\nApplication Server\nJDK 1.8 \u0026#43;\n약 100 MB\n512 MB\n2 GB\nWeb Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n-\nSession Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n1 GB\n각 구성 각 Server 설치 시 기본 Memory 기준으로 설치 되며, Memory 설정은 최소 Memory 이상으로 설정값을 변경하여 적용할 수 있다.\n2.1.2. 운영체제 Table 4. LENA 설치 가능 OS OS CPU (2 core 이상 권장) Linux 계열 (Kernel 2.6이상)\nIntel x86 Series (64-bit)\nMS Windows 2008, 2012, 2016, 2019\nIntel x86 Series (64-bit)\nHP-UX 11.x, 11i, 11iV2, 11iV3\nPA-RISC\nIntel Itanium 64\nIBM AIX 5L, 6L, 7L\nPOWER Systems (64-bit)\nSolaris 9, 10, 11\nSPARC\nIntel X86 Series (64-bit)\nLinux\nRedhat (RHEL, CentOS) 6.5 이상 / Ubuntu 12.04 이상을 지원하며 가장 권고하는 운영체제이다. 일반적인 x86 아키텍처의 특성에 맞도록 대용량 통합서버 구성보다는 저용량 다수의 서버에 분산 설치하는 것을 권장한다.\nWindows\nWindows 7 이상을 지원한다. Linux/Unix 달리 Windows 특성에 따라 LENA Module을 Background로 띄우기 위해 Windows Service 등록 기능을 제공한다. 그렇지 않으면 LENA Module이 항상 Foreground로 실행된다.\nUnix\nSolaris, HP-UX, AIX를 지원한다. Unix의 경우 Linux/Windows와 달리 신규 버전 및 Patch가 기본 제공되지 않으며, 필요 시 해당 OS의 버전 별 개별 검토를 통해 제작 및 배포되며 이는 통상적으로 약 2주의 소요시간이 필요하다.\nLinux/Unix에서는 기본적으로 LENA Module을 실행시키기 위한 스크립트를 제공한다.\n만약 OS Service로 등록이 필요할 시 서버 담당자가 OS 환경에 맞게 직접 설정해야 한다.\n2.1.3. 계정 LENA를 설치하기 전 LENA 설치 및 기동에 이용한 계정이 필요하다. 적합한 이유가 없다면 보안 상 Root / Administrator 계정은 권고되지 않으며 이를 통해 LENA를 실행시킬 수 없으니 별도의 계정을 미리 생성하도록 한다.\nX86 아키텍처에서 권고되는 바는 아니지만, 만약 한 물리 서버에 서로 다른 다수의 업무 시스템이 운영되고 각 시스템 별로 담당 운영자가 구분되며 시스템 간 접근 통제를 위해 계정을 분리하여 사용한다고 가정하자. 이런 경우 운영자 계정 별(업무 시스템 별)로 Node를 구성/설치 하여 운영해야 하며 LENA Manager 또한 시스템 별로 구성하는 것을 권고한다. 2.1.4. 디렉토리 LENA 설치를 진행하기에 앞서 이전 단계에서 생성한 계정이 이용 가능한 설치 디렉토리를 준비하여야 한다. 아래 표는 LENA에서 제안하는 디렉토리 구성이며 사용자 별로 정책에 맞는 디렉토리 구성을 이용하면 된다. 아래 표는 Linux/Unix 기준으로 설명되었으나 Windows의 경우 C: 하위에 동일하게 디렉토리를 구성한다.\nTable 5. Directory Requirement 구분 Directory 비고 LENA WAS Node(Binary)\n/engn001/lena\nLENA WEB Node(Binary)\n/engn001/lenaw\nWeb Server, WAS Log\n/logs001\nlog경로 분리 필요 시 설정\nWeb Application Source\n/sorc001\n고려할 사항은 log 파일을 분리할 것인지 여부이다. log는 별도 분리 설정하지 않으면 LENA Node 가 설치되는 경로 하위에 기본 생성된다. log 확인을 손쉽게 하면서도 Disk 용량 관리를 편하게 하기 위해서는 log 디렉토리의 분리를 권장한다.\n가능하다면 별도 외장 disk 볼륨을 Node, log, source 디렉토리에 Mount하여 OS System 영역과 격리하는 것을 권장한다.\n2.1.5. JVM JDK의 경우 LENA 설치 진행하기 전 별도 Binary 형태로 혹은 OS에서 제공하는 Package 설치 관리자를 통해 설치가 되어 있어야 한다. LENA 1.3은 OracleJDK/OpenJDK 8이상을 지원하며 JDK 6,7의 경우 LENA 1.2에서 지원한다.\nOracleJDK의 경우 8u202 버전 까지만 무료로 이용할 수 있다.\n2.1.6. Network 아래 다이어그램은 LENA의 각 Module간 트래픽의 흐름을 나타낸 도표이다. LENA Management 관련 경로와 Web Service 관련 경로가 상세히 표현되어있다.\nFigure 2. LENA Network Traffic 위 다이어그램에 표현된 LENA 모듈간 트래픽 경로와 사용 Port는 아래 표와 같다. 명시된 Port 번호는 사전 정의된 기본값이며 각 Module 설치 시 별도로 지정할 수 있다. 아래 표를 참고하여 Port를 선정한 뒤, 사전에 방화벽을 Open 해 놓아야 한다.\nLENA에서 사용하는 Port는 보안 요건 상 1025이상의 Port를 이용한다. 단, 서비스 제공 시 80 Port 등의 Well-known Port를 이용해야 한다면 부록에서 제공되는 80포트 이용 가이드를 참고한다.\nTable 6. LENA Firewall Open Rule Src Dest Protocol Port 비고 운영자\nLENA Manager\nTCP\n7700\nManager Web UI 접속\nLENA Manager\nWEB Node Agent\nTCP\n16900\nWEB Node 제어\nWAS Node Agent\nTCP\n16800\nWAS Node 제어\nWEB Node Agent\nLENA Manager\nUDP\n16100\n모니터링 정보 송신\nWAS Node Agent\nWAS Advertiser\nSession Server\n유저/운영자\nWeb Server\nHTTP\n8000\nWEB 서비스 접속\nHTTPS\n8363\nWEB 서비스 보안(SSL) 접속\n(HTTP + 363 / 수정가능)\n운영자\nWAS\nHTTP\n8080\nWAS 서비스 접속\nWeb Server\nAJP\n8009\nWeb Server-WAS 연계\n(HTTP - 71 / 수정가능)\nWAS\nSession Server\nTCP\n5180\nSession Clustering\nSession Server\nWAS\nDB\nTCP\n3306\nWAS JDBC 접속\nLENA는 Web Server / WAS 설치 시 HTTP Port를 지정하여 설치하도록 하고있다. 이 HTTP Port를 기준으로 HTTPS 포트와 같은 Server 동작을 위한 다른 Port를 자동계산하여 설치하는데 그 예시가 위 표에서 이탤릭 체로 표시된 포트이다. 따라서, Web Server, WAS를 다수 설치하는 과정에서 이미 사용된 다른 Port 와의 충돌을 방지하기 위해서 1과 10의 자리는 Web Server나 WAS 별로 동일하게, 100의 자리는 변경하여 설치하는 것을 권장한다.\nTable 7. IP가 같은 장비에 Web Server, WAS 설치 시 HTTP Port 설정 예시 구분\nServer 명\nHTTP Port\n비고\nWAS\nee_01\n8080\n-\nee_02\n8180\nee_01의 HTTP Port 값 + 100\nWeb\nweb_01\n7180\n-\nweb_02\n7280\nweb_01의 HTTP Port 값 + 100\n또한 Dynamic Port Range를 전체 Port 범위로 사용하지 말 것을 권고한다. LENA 기동에 필요한 Port를 OS의 다른 Service가 Source Port로 점유하는 일이 발생할 가능성이 있다.\n3. Installation 3.1. LENA 설치 LENA 설치파일을 대상 서버의 준비된 디렉토리에 업로드한다. 설치파일을 통해 LENA Manager를 설치하고자 하는 Server에 LENA Manager를 설치하고 Web Server를 설치할 Server에 Web Server Node를, WAS를 설치할 Server에 WAS Node를 설치한다.\nLENA 설치를 진행 하기에 앞서 JVM 을 참조하여 JDK를 미리 설치하도록 한다.\nNode의 설치 후 Web Server와 WAS의 설치는 LENA Manager의 Web UI를 통해서 설치한다. LENA 설치 파일은 제품 구분과 용도에 따라 다음과 같이 구분된다.\nTable 8. LENA 설치 파일 구분 (OS: Linux/Windows 64bit / LENA: 1.3.1.0 기준) 제품 구분(Edition) OS 구분 설치 파일 비고 Enterprise\nLinux\nlena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz\nLENA Manager, WAS 설치용\nWindows\nlena-enterprise-win_na_x86_64-1.3.1.0.zip\nStandard\nLinux\nlena-standard-linux_na_x86_64-1.3.1.0.tar.gz\nWindows\nlena-standard-win_na_x86_64-1.3.1.0.zip\n-\nLinux\nlena-web-linux_na_x86_64-1.3.1.0.tar.gz\nWeb Server 설치용\nWindows\nlena-web-win-na_x86_65-1.3.1.0.zip\nEnterprise Edition과 Standard Edition의 차이는 운영자 매뉴얼의 Server Module 를 참고한다.\nLinux와 Windows 에서의 LENA 설치는 큰 흐름에서는 동일한 방식으로 진행된다. 본 문서에서는 Linux를 기준으로 설명한다.\n3.1.1. LENA Manager 설치/실행 LENA 설치 패키지는 압축파일 형식으로, 설치할 서버에 업로드 후에 압축을 해제하여 사용한다. LENA Manager는 WAS Node 설치파일에 포함되어 있으며 설치할 경로(예: /engn001/lena)에 설치파일을 업로드 후 압축을 푼다.\nLENA Manager는 WAS Node 설치파일에 포함되어 있다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.1.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz install.sh(예: /engn001/lena/1.3/bin/install.sh) 파일을 이용하여 설치하며\n다음과 같은 명령어를 사용하여 설치할 수 있다.\nLENA Manager 설치 [lena]# cd /engn001/lena/1.3/bin [lena]# ./install.sh create lena-manager ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------------- | 1. SERVICE_PORT is the port number used by Manager. | ex : 7700 | 2. MONITORING_PORT is the port number used by Manager for monitoring. | ex : 16100 | 3. RUN_USER is user running LENA Manager. | ex : lena, wasadm +------------------------------------------------------------------------------------- Input SERVICE_PORT for execution. (q:quit) Default value is '7700' 7700 LENA Manager 설치가 완료되면 install.sh 을 실행한 디렉토리에 LENA Manager 와 관련된 Script 파일이 생성된다.\nTable 9. LENA Manager 관리용 Script 파일 Script 파일명 설명 start-manager.sh\nLENA Manager 를 시작한다.\nps-manager.sh\nLENA Manager가 실행중인지 확인한다.\nstop-manager.sh\nLENA Manager 를 중지한다.\nstart-manager.sh 을 실행하여 LENA Manager를 시작한다.\n[lena]# ./start-manager.sh -------------------------------- LENA Manager -------------------------------- Using LENA_HOME : /engn001/lena/jadeu3/1.3 Using JRE_HOME : /engn001/java/jdk1.8.0_202 Using SERVER_PID : /engn001/lena/jadeu3/1.3/modules/lena-manager/lena-manager_solmanager.pid Using SERVER_HOME : /engn001/lena/jadeu3/1.3/modules/lena-manager Using SERVER_ID : lena-manager Using INSTANCE_NAME : lena-manager_solmanager LENA started. LENA Manager가 정상적으로 실행되면 해당 서버의 Service Port로 Manager에 접속할 수 있다.\nhttp://Server_IP:7700\nFigure 3. LENA 접속 화면 아래의 초기 접속 계정/비밀번호로 접속하면 초기 화면을 확인 할 수 있다.\n초기 접속 계정/비밀번호 admin / !admin1234\nFigure 4. LENA 초기화면(DASHBOARD) 3.1.2. Node 설치(Command Line) Node의 설치는 LENA 설치 패키지의 압축을 푸는 것과 같다. WAS, Web Server를 설치할 서버에 각 설치 패키지를 준비한 경로(예: /engn001/lena 또는 /engn001/lenaw)에 업로드 후 압축을 해제한다.\nNode를 설치하면 아래와 같이 Node Agent를 실행, 중지, 상태확인을 하기위한 script가 존재한다.\nTable 10. Node Agent 관리 Script script 경로 script 명 비고 Node 설치경로 하위 'bin'\n(예: /engn001/lena/1.3/bin)\nstart-agent.sh\nNode Agent 실행\nps-agent.sh\nNode Agent 프로세스 확인\nstop-agent.sh\nNode Agent 중지\nWAS Node 설치 WAS Node의 설치 시 고려할 수 있는 사항은 다음과 같다.\nLENA Manager와 WAS Node를 같은 Server에 설치\nLENA Manager와 WAS Node를 다른 Server에 설치(LENA Manager 독립 설치)\n1번의 경우 LENA Manager 설치/실행 에서 LENA Manager를 설치하기 위해 WAS Node 설치 패키지의 압축을 풀었으므로 이미 WAS Node가 설치되어 있는 상태이다.\n2번의 경우 WAS Node를 설치할 Server의 준비한 경로(예: /engn001/lena)에 LENA WAS 설치 패키지를 업로드 후 다음과 같이 압축을 풀어 설치한다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.1.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz Node를 설치했다면 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lena/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lena/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 Web Server Node 설치 Web Server를 설치할 Server에 LENA Web Server 설치용 패키지를 업로드 후 압축을 풀어 설치한다.\n경로 / 파일 확인 [lenaw]# cd /engn001/lenaw [lenaw]# ll -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 설치파일 압축 해제 / 디렉토리 명 변경 [lenaw]# tar -xvzf lena-web-linux_na_x86_64-1.3.1.tar.gz [lenaw]# mv lena-web-linux_na_x86_64-1.3.1 1.3 [lenaw]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\nNode를 설치 한 후 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lenaw/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lenaw/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 LENA Manager와 Node의 연동(등록) WAS Node와 Web Server Node를 설치하고 Agent를 기동하면 LENA Manager를 통해 Node를 등록할 수 있다.\nLENA Manager의 상단 'SERVER' 메뉴를 선택하면 Node List를 확인 할 수 있다.\nNode 등록을 위해 'Register' 버튼을 클릭하면 아래와 같이 Node를 등록하기 위한 Empty Row가 추가되며 각 입력 항목을 등록한다.\nFigure 5. SERVER 메뉴 초기화면 Node 등록 시 입력할 항목은 다음과 같다.\nNode Name: 등록할 Node의 명칭\nNode Type: Application / Web 중에 선택\nNode IP: Node가 설치된 Server의 IP Adress\nNode Port: Node 설치시 입력한 Node Port\nManager Address 항목의 경우 LENA Manager가 설치된 Server의 IP가 자동입력 되므로 별도 입력할 필요는 없다.\n입력 항목을 모두 입력한 뒤 'Save' 버튼으로 Node 등록을 완료하며 정상 처리 시 아래와 같은 화면을 확인할 수 있다.\nFigure 6. Node 정상 등록 예시 화면 3.1.3. Node 원격 설치(LENA Manager Web UI) Node의 설치는 Node 설치(Command Line) 에서 진행한 방법 외에도 LENA Manager를 통해 원격으로 설치할 수도 있다. 이를 위해서는 LENA (Manager)를 설치한 Server의 특정 디렉토리 안에 LENA 설치파일(WAS, Web Server)를 업로드 해 두어야 한다. 설치 패키지를 업로드 해 두어야 하는 경로의 예시는 다음과 같다.\nTable 11. Node 원격 설치를 위한 설치파일 업로드 경로(예시) LENA 설치경로 LENA 설치 패키지 업로드 경로 /engn001/lena/1.3 (LENA_HOME)\n[LENA_HOME]/repository/install-files/default\n해당 경로에 앞서 사용한 WAS, Web Server 설치파일을 업로드 한다.\n원격 설치를 위한 설치 패키지 확인 [lena]# cd /engn001/lena/1.310/repository/install-files/default [lena]# ll -rw-rw-r--. 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz -rw-rw-r--. 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 해당 경로에 설치 패키지를 업로드 했다면 LENA Manager의 'SERVER' 메뉴를 선택하고 하단의 'Install' 버튼을 클릭한다.\nFigure 7. WAS Node 원격 설치 예시 Node 원격 설치 시 입력해야 하는 항목은 다음과 같다.\nNode Type: Application / Web 중에 선택\nNode Name: 원격 Server에 설치할 Node의 명칭\nNode Address: Node를 설치할 원격 Server의 IP Adress\nNode Port: 원격 Server에서 Node가 사용할 Port\nUser: 원격 Server의 OS 계정\nPassword: 원격 Server의 OS 계정의 비밀번호\nSSH Port: 원격 Server의 SSH Port\nLENA Home: 원격 Server에 Node를 설치할 경로\nJava Home: 원격 Server에 설치되어있는 JAVA Home 경로\n원격 설치에서 입력하는 값을 토대로, LENA Manager는 앞서 미리 준비해둔 설치 패키지 파일을 원격 Server로 전송하고 Node를 설치하고, 설치한 Node의 Agent를 자동으로 실행하는 것으로 원격 설치는 완료된다. 이러한 진행 상황은 Popup 창을 통해 확인 할 수 있다.\nFigure 8. WAS Node 원격 설치 진행 확인 예시 설치가 정상적으로 완료되면 원격 설치한 Node는 LENA Manager에 자동으로 등록된다.\nFigure 9. Node 원격 설치 후 등록 완료된 상태 예시 Node의 원격 설치를 위해서는 LENA Manager가 설치된 Server와 원격 설치할 Server 간의 SSH Port 방화벽이 Open 되어있어야 한다.\n3.1.4. WAS 설치/실행 WAS Node를 설치, 등록까지 완료했다면 이제 LENA Manager Web UI를 통해 WAS 를 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 한 뒤 좌측에서 WAS 를 설치할 WAS Node를 선택하면 WAS List를 확인할 수 있다. 이 화면에서 'Install' 버튼을 클릭한다.\nFigure 10. WAS List 확인 Figure 11. WAS 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 WAS를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: WAS의 Type, Standard / Enterprise 중 택\nNode: WAS 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 WAS를 식별하기 위한 명칭\nService Port: WAS가 설치될 때 기준이 되는 HTTP Port를 의미\nRun User: WAS 의 기동 시 사용할 OS 계정(수정불가)\nInstall Root Path: WAS 가 설치될 경로(수정불가)\nLog Home: WAS Log의 경로\ndefault: [Install Root Path]/logs\ncutom: 사용자가 임의로 경로 지정\nJVM Route: Web Server와 연동 시 Web Server 가 WAS를 식별하기 위한 값\nauto: LENA에서 자동생성\nmanual: 사용자가 임의로 지정\nWAS 는 기동 시 HTTP, HTTPS, AJP 등 다양한 Port를 사용하는데 LENA 에서는 WAS 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWAS 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 WAS가 설치되며 WAS List 에서 설치한 WAS 를 확인 할 수 있다.\nFigure 12. WAS 정상 설치 후 WAS List 중지되어 있는 WAS 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 WAS 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWAS 기동 시에는 WAS 기동 Log(Application 이 배포되어 있다면 Application 기동 Log 도 함께)가 Popup 창으로 출력된다.\nFigure 13. WAS의 기동과 Log 3.1.5. Web Server 설치/실행 WAS 설치와 동일한 방식으로, LENA Manager Web UI를 통해 Web Server를 설치할 Web Server Node를 선택한 뒤 Web Server를 설치할 수 있다.\nFigure 14. Web Server List 확인 Figure 15. Web Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Web Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Web Server (고정)\nNode: Web Server 가 설치될 Node (수정불가)\nServer ID: LENA Manager 가 Web Server 를 식별하기 위한 명칭\nService Port: Web Server 가 사용할 HTTP Port\nRun User: Web Server 기동 시 사용할 OS 계정(수정불가)\nWeb Server Engine Path: Web Server 설치 시 사용할 Engine 경로(수정불가)\nInstall Root Path: Web Server 가 설치될 경로(수정불가)\nLog Home: Web Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nWeb Server 는 기동 시 HTTP, HTTPS 등 다양한 Port를 사용하는데 LENA 에서는 Web Server 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWeb Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Web Server가 설치되며 Web Server List 에서 확인할 수 있다.\nFigure 16. Web Server 정상 설치 후 Web Server List 중지되어 있는 Web Server 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 Web Server 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWeb Server 기동 시에는 Web Server 기동 Log가 Popup 창으로 출력된다.\nFigure 17. Web Server 의 기동과 Log Web Server - WAS 연동 Web Server와 WAS 간 연동 설정에 대해 알아본다. LENA Web Server 와 WAS 의 연동은 Web Server 설정 화면에서 할 수 있다. LENA Manager 상단의 'SERVER' 메뉴에서 설치한 Web Server 를 선택하여 설정 화면을 열고 설정 화면 내 상단의 'Connector' 탭을 선택한다.\nFigure 18. Web Server 초기 설정화면 Web Server 의 'Connector' 탭에서는 Web Server 와 WAS 간 연결에 대한 설정을 관리한다.\n'Connector' 탭 화면 하단의 WAS List 란에 연동할 WAS를 추가하면 기본적인 Web Server 와 WAS 간 연동이 완료된다.\nWAS 를 추가하기 위해서는 WAS List 란의 '+' 버튼을 클릭하면 열리는 팝업에서 설치되어 있는 WAS를 선택하고 'Save' 버튼을 클릭한다.\n팝업에서는 LENA Manager 에 등록되어있는 WAS Node 별로 WAS 목록을 확인 할 수 있으며 이미 'Connector' 에 등록한 WAS는 보이지 않는다.\nFigure 19. 연동할 WAS 추가 WAS List에 연동 설정할 WAS가 추가되면 우측 하단의 'Save' 버튼을 클릭하여 최종 저장한다.\nFigure 20. 연동할 WAS 목록 저장 3.1.6. Session Server 설치 및 연동 Session Server는 Session Clustering 을 적용 시에 설치하며 다음 두 가지 방법으로 설치할 수 있다.\nStandalone 모드: Session Server를 별도 Server 로 설치하는 방법\nEmbedded 모드: Session Server를 별도 Server 로 설치하지 않고 기존에 설치한 WAS 내에 Emebedded 형태로 설치하는 방법\nStandalone 모드 설치와 WAS 연동 Session Server 는 WAS Node에 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 후 Session Server 를 설치할 WAS Node를 선택한다. WAS List 하단에는 설치된 Session Server를 확인 할 수 있는 Session Server List 를 확인할 수 있다.\nFigure 21. Session Server List 확인 Figure 22. Session Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Session Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Standalone (고정)\nNode: Session Server 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 Session Server 를 식별하기 위한 명칭\nService Port: Session Server 가 사용할 Port\nMirror Server IP: 다른 하나의 Session Server 가 설치된 Node(등록한 Node 중에서 선택)\nMirror Server Port: 다른 하나의 Session Server 가 설치된 Node에서 Session Server 가 사용하는 Port\nRun User: Session Server 기동 시 사용할 OS의 계정(수정불가)\nInstall Root Path: Session Server 가 설치될 경로(수정불가)\nLog Home: Session Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nSession Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Session Server 가 설치되며 Session Server List 에서 확인 할 수 있다.\nSession Clustering 구성 시 Session Server는 2기를 설치하여 하나는 Primary, 다른 하나는 Secondary 이중화 구성을 한다.\n위 예시 그림에서는 'Mirror Server IP' 에 다른 하나의 WAS Node를 지정하였으며 해당 WAS Node 에도 아래와 같이 Session Server 를 설치한다.\nFigure 23. 다른 하나의 Session Server 설치 Session Server 를 모두 설치 한 뒤 WAS 와 연동하기 위해 WAS 설정 화면의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Client Mode 의 경우 별도로 설치한 Session Server 를 기동하고 이를 WAS 와 연동하여 Session Clustering 을 적용하는 방식이다.\nFigure 24. WAS 의 Client 모드 Session Server 설정 Client 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nPrimary Server Host: Primary 로 지정할 Session Server 가 설치된 Node 를 선택하고 Session Server 를 지정한다.\nSecondary Server Host: Secondary 로 지정할 Session Server 가 설치된 Node 와 Session Server 를 지정한다. Session Server 가 2기 설치되어 있고, Primary Server Host 를 선택하면 나머지 Session Server 가 자동으로 Secondary 로 지정된다.\nExternal Stored Session: Session Clustering 적용과 함께 WAS 와 Session Server(2기)에서 관리되는 Session 정보를 Session Server(2기) 에서만 관리할 지 여부를 선택한다. 주로 Cloud, Container 환경에서 구성 시 해당 옵션을 사용한다.(Default false)\nShare session in applications: WAS에 여러 Application 이 배포되는 경우 해당 Application 간 Session 정보를 공유할 지 여부를 선택한다.(Default false)\nMulti Login Control: 중복 로그인 제어 기능의 사용여부를 선택한다.(Default false)\nClient 모드 Session Server 의 경우 설정을 적용할 WAS 마다 위와 같은 설정을 적용해 주어야 한다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nEmbedded 모드 설치와 WAS 연동 Session Server 의 기능을 Embedded 모드로 사용할 WAS 를 선택하여 설정화면을 연 뒤, 상단의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Embedded Mode 의 경우 WAS 에 Session Server 기능이 WAS 에 Embedded 형태로 WAS 가 기동한다.\nFigure 25. WAS 의 Embedded 모드 Session Server 설정 Embedded 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nEmbedded Host: Embedded Mode 선택 시 현재 WAS 로 고정된다.\nEmbedded Port: Embedded Session Server 가 사용할 Port를 입력한다.\nSecondary Server Host: 다른 하나의 Embedded Session Server 를 사용할 WAS 를 지정한다. WAS 가 설치된 Node 를 선택 후 WAS 를 선택한다.\nSecondary Server Port: 다른 하나의 Embedded Session Server 가 사용할 Port 를 입력한다.\nMulti Login Contorl: 중복 로그인 제어 기능의 사용여부를 선택한다. (Default false)\n설정 값 입력, 선택을 마친 뒤 'Save' 버튼을 눌러 저장하면 Embedded Session 설정이 완료되며 Embedded Session 의 설정은 하나의 WAS 에서 진행하면 다른 하나의 WAS 에도 설정이 적용된다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nFigure 26. WAS 의 Embedded 모드 Session Server 설정의 완료 3.1.7. Server 간 연동 확인 앞서 Web Server - WAS 연동 과 Session Server 설치 및 연동 과정을 통해서 진행한 연동 설정을 확인하는 방법을 설명한다.\nLENA Manager 에서는 설치한 Server 의 구성을 간편하게 확인할 수 있도록 Topology View 를 제공하고 있다. 이 Topology 기능을 통해 연동이 정상적으로 확인 하는 방법과 Web Server, WAS 설치 시 기본 탑재되어 있는 LENA Sample 페이지를 통해 연동이 정상적으로 되어있는 지를 확인 할 수 있다.\nTopology 를 통한 확인 LENA Manager 상단의 'Topoolgy' 메뉴를 선택한다.\nFigure 27. Topology View Topology View 에서는 기본적으로 현재 등록되어 있는 Node 와 Node 별 설치한 Server 의 구성과 연동정보를 확인 할 수있다.\n위 그림에서는 Web Server 2기, WAS 2기 그리고 Session Server 2기가 설치되어 있으며 Web Server 와 WAS, WAS 와 Session Server 간 연동 설정이 연결선으로 표현되고 있으며 이를 통해 Server 간 연동이 정상적으로 되었는지 확인 할 수 있다.\nSample Page 호출을 통한 확인 LENA 의 Web Server 와 WAS 에는 기본 탑재된 Sample Page와 Sample Application 이 있다. 이는 초기 설치 후 정상 연동을 확인하는 용도로도 사용될 수 있다.\n먼저 Web Server 의 IP와 Port를 확인한 뒤 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.html\n그럼 아래와 같이 LENA 에서 제공하는 index.html 페이지가 호출되는 것을 확인 할 수 있으며 Web Server 가 정상호출 되는 것을 확인 할 수 있다.\nFigure 28. Web Server 호출 Test Sample Application 호출을 통한 확인 LENA WAS를 설치하면 LENA 에서 제공하는 기본 Application 이 탑재되어 있다. 이 Application의 index.jsp, session.jsp 를 호출하면 각각 WAS 호출 테스트, Session Clustering 기능 테스트를 수행할 수 있다.\nWeb Server 와 WAS 가 설치 초기상태로 설정되어 있다는 가정 하에 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.jsp\nWeb Server 와 WAS 가 정상 연결이 되어있다면 Web Server 의 IP와 Port 로 호출한 위 요청은 WAS로 전달되어 index.jsp 페이지를 요청하게 되고 다음과 같이 LENA Sample Application 에서 제공하는 index.jsp 페이지가 호출된다.\nFigure 29. index.jsp 호출 Test index.jsp 페이지를 호출하면 현재 요청을 어떤 WAS 가 처리하는지를 Server ID, Service Port, JvmRout 값을 통해 확인할 수 있다.\n이번에는 동일한 Web Server IP, Port 로 아래와 같이 session.jsp 를 호출한다.\nhttp://[Web Server IP]:[Web Server Port]/session.jsp\nsession.jsp 를 호출하면 현재 요청에 대한 Session 정보가 추가로 확인된다. 호출을 반복함에 따라 Session Count 의 수가 증가하며 두번째 호출 부터 발급된 Session ID가 표시된다. Session Clustering 이 정상 적용 되었는지를 확인 하기 위해서는 Session ID가 발급된 상태에서 현재 요청을 처리중인 WAS 를 중지하고 웹 브라우저를 새로고침하여 요청을 다시 보냈을 때, 기동중인 다른 WAS 가 요청을 처리하지만 Session ID 가 그대로 유지되며 Session Count 가 증가하는 것으로 확인할 수 있다.\nFigure 30. session.jsp 호출 Test Version 1.3.1.3\nLast updated 2022-04-28 12:58:50 +0900 "},{"id":10,"href":"/docs/1.3.1/1.3.1.4/installation/","title":"Installation","parent":"1.3.1.4","content":" \u003c!DOCTYPE html\u003e Installation Installation LENA Support\nlena-support@lgcns.com\nversion 1.3.1.4 Table of Contents 1. Overview 1.1. 구성요소 1.1.1. Server 1.1.2. Agent, Advertiser 1.1.3. Manager 1.2. Mechanism 2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource 2.1.2. 운영체제 2.1.3. 계정 2.1.4. 디렉토리 2.1.5. JVM 2.1.6. Network 3. Installation 3.1. LENA 설치 3.1.1. LENA Manager 설치/실행 3.1.2. Node 설치(Command Line) WAS Node 설치 Web Server Node 설치 LENA Manager와 Node의 연동(등록) 3.1.3. Node 원격 설치(LENA Manager Web UI) 3.1.4. WAS 설치/실행 3.1.5. Web Server 설치/실행 Web Server - WAS 연동 3.1.6. Session Server 설치 및 연동 Standalone 모드 설치와 WAS 연동 Embedded 모드 설치와 WAS 연동 3.1.7. Server 간 연동 확인 Topology 를 통한 확인 Sample Page 호출을 통한 확인 Sample Application 호출을 통한 확인 1. Overview 본문서는 일반적인 VM Host 기반 LENA Server를 운영하기 앞서 설치에 대해 기술한다.+ LENA 의 전체 기능 및 운영에대한 내용은 별도로 제공되는 운영자 매뉴얼을 참고한다.\n본 문서는 LENA 1.3.1 버전을 기준으로 기술하고, 다음과 같은 내용을 포함한다.\nLENA 설치\nLinux 기반\nWindows 기반 설치\n1.1. 구성요소 LENA는 Web Server, WAS(Web Application Server), Session Server와 Web Server의 Status를 확인하는 Node Agent, Application Server에 설치되어 Status정보를 제공하는 Advertiser와 관리자에게 제공되는 통합관리 도구인 Manager로 구성된다.\n1.1.1. Server LENA에서 제공되는 서버의 종류는 Web Server, Application Server, Session Server 3가지가 있다. 각 서버의 용도는 아래와 같다.\nWeb Server: 사용자 요청에 따라 Web Resource를 제공한다. Application Server가 제공하는 응용서비스의 Front역할을 수행하면서, 선택적으로 Load Balancing 및 보안 레이어(SSL)를 제공하는 역할을 수행한다.\nApplication Server: Java로 작성된 응용 서비스를 실행/제공 한다.\nSession Server: Application Server간 사용자의 세션을 유지한다.\n1.1.2. Agent, Advertiser Node, Server에 설치되어 제어 및 모니터링 기능을 담당하는 Agent 이다.\nNode Agent\nWeb Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\nAdvertiser\nApplication Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\n1.1.3. Manager Manager는 Node Agent와 Advertiser를 통하여 Node와 Server의 제어 및 모니터링 기능 등을 제공하는Web Application이다. 대표적으로 아래와 같은 기능을 제공한다.\nTable 1. LENA Manager 주요 기능 항목 설명 Dashboard\nServer, Server Cluster 현황\nNotification 확인\nServer\nSystem (논리적 Server 그룹) 등록/수정/삭제\nServer Cluster\nServer Cluster 등록/수정/삭제\nServer Cluster 에 등록할 Server 등록/삭제\nServer Cluster 에 등록한 Server 설정 비교 및 동기화\nServer Cluster 설정 백업 및 복원을 위한 Snapshot\nServer Cluster 에 등록한 Server 들의 Graceful Restart\nResource\nReosource의 조회 및 등록/수정/삭제\nDatabase / DataSource / MessageService(JMS) / Transaction(JTA) / Application / LoadBalancer(SLB)\nResource를 사용하는 Server 목록 조회 및 등록/수정/삭제\nDiagnostics + (모니터링)\nServer에 대한 이슈 현황 모니터링 기능\nServer에서 발생한 Event 조회 기능\nTopology\nSystem별 Server 구성현황 조회\nAdmin\n사용자 및 권한 관리, 사용자/권한/메뉴 매핑\n사용자 운영 이력 조회\n라이선스 관리, 현황 조회 및 업로드\n1.2. Mechanism LENA는 Manager를 통해서 Web Server/WAS 를 모니터링 및 통합관리하는 기능을 제공한다. 이를 위해 Node라는 단위로 Agent가 설치되는데 이를 Node Agent라고 한다. Node Agent는 Manager의 사용자 명령을 전달받아 Node에 설치된 Web Server/WAS 를 제어하며 Node가 설치된 Host/VM, Web Server 의 모니터링 정보를 Manager로 전송한다.\nFigure 1. LENA Manager의 모니터링 및 통합관리의 작동방식 LENA Manager, Web Server, WAS 외에도 Manager의 동작을 위해 사용되는 Manager Repository, Session Clustering을 위한 Sesssion Server, WAS의 모니터링 정보 수집을 위한 Advertiser가 작동하여 Manager를 통한 모니터링 및 통합관리가 가능하도록 한다.\n항목 설명 Manager\n서버에 배포되는 설정파일 관리 및 Server 모니터링 기능 제공\nManager Repository\nManager 운영을 위한 파일저장 Repository, 각종 설정정보 및 DB 정보를 포함함\nNode Agent\nWeb 서버 모니터링 데이터 취합 및 Manager에게 송신, Manager로부터 수신한 제어/설정 명령 실행\nApplication Server\nApplication Server Instance\nWeb Server\nWeb Server Instance\nSession Server\nSession Server Instance\nAdvertiser\n모니터링 데이터 취합 및 Manager에게 송신(Application Server에 통합)\n2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource CPU\n전적으로 구동하고자 하는 Web Application이 어느 정도의 성능을 요구하는지에 달려있다. 기본적인 LENA 서비스 구동에 필요한 CPU는 2 Core 이상을 권고한다.\nMemory\nMemory에 대해서는 아래 표를 참조한다. Web Server를 제외한 모든 Module은 JVM 기반으로 동작하므로 Heap Memory를 사용한다. LENA에서는 기본 Heap Memory 값을 미리 설정해 놓았으며, 설치 시에 해당 값으로 설치되나 필요에 따라 수정이 가능하다. 안정적인 운영을 위해 하나의 물리적 서버에 설치될 모든 모듈의 Heap Memory 설정 값의 합이 물리 서버의 잔여 메모리 용량보다 크지 않도록 유의한다.\nLENA Manager 및 각 Server 설치에 대한 최소 요구사항은 다음과 같다.\n구분 JVM Disk Space 최소 Memory 기본 Memory Manager\nJDK 1.8 \u0026#43;\n약 300 MB\n512 MB\n1 GB\nNode Agent\nJDK 1.8 \u0026#43;\n-\n64 MB\n256 MB\nApplication Server\nJDK 1.8 \u0026#43;\n약 100 MB\n512 MB\n2 GB\nWeb Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n-\nSession Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n1 GB\n각 Server 설치 시 기본 Memory 기준으로 설치 되며, Memory 설정은 최소 Memory 이상으로 설정값을 변경하여 적용할 수 있다.\n2.1.2. 운영체제 Linux\nRedhat (RHEL, CentOS) 6.5 이상 / Ubuntu 12.04 이상을 지원하며 가장 권고하는 운영체제이다. 일반적인 x86 아키텍처의 특성에 맞도록 대용량 통합서버 구성보다는 저용량 다수의 서버에 분산 설치하는 것을 권장한다.\nWindows\nWindows 7 이상을 지원한다. Linux/Unix 달리 Windows 특성에 따라 LENA Module을 Background로 띄우기 위해 Windows Service 등록 기능을 제공한다. 그렇지 않으면 LENA Module이 항상 Foreground로 실행된다.\nLinux/Unix에서는 기본적으로 LENA Module을 실행시키기 위한 스크립트를 제공한다.\n만약 OS Service로 등록이 필요할 시 서버 담당자가 OS 환경에 맞게 직접 설정해야 한다.\nUnix\nSolaris, HP-UX, AIX를 지원한다. Unix의 경우 Linux/Windows와 달리 신규 버전 및 Patch가 기본 제공되지 않으며, 필요 시 해당 OS의 버전 별 개별 검토를 통해 제작 및 배포되며 이는 통상적으로 약 2주의 소요시간이 필요하다.\n2.1.3. 계정 LENA를 설치하기 전 LENA 설치 및 기동에 이용한 계정이 필요하다. 적합한 이유가 없다면 보안 상 Root / Administrator 계정은 권고되지 않으며 이를 통해 LENA를 실행시킬 수 없으니 별도의 계정을 미리 생성하도록 한다.\nX86 아키텍처에서 권고되는 바는 아니지만, 만약 한 물리 서버에 서로 다른 다수의 업무 시스템이 운영되고 각 시스템 별로 담당 운영자가 구분되며 시스템 간 접근 통제를 위해 계정을 분리하여 사용한다고 가정하자. 이런 경우 운영자 계정 별(업무 시스템 별)로 Node를 구성/설치 하여 운영해야 하며 LENA Manager 또한 시스템 별로 구성하는 것을 권고한다. 2.1.4. 디렉토리 LENA 설치를 진행하기에 앞서 이전 단계에서 생성한 계정이 이용 가능한 설치 디렉토리를 준비하여야 한다. 아래 표는 LENA에서 제안하는 디렉토리 구성이며 사용자 별로 정책에 맞는 디렉토리 구성을 이용하면 된다. 아래 표는 Linux/Unix 기준으로 설명되었으나 Windows의 경우 C: 하위에 동일하게 디렉토리를 구성한다.\nTable 2. Directory Requirement 구분 Directory 비고 LENA WAS Node(Binary)\n/engn001/lena\nLENA WEB Node(Binary)\n/engn001/lenaw\nWeb Server, WAS Log\n/logs001\nlog경로 분리 필요 시 설정\nWeb Application Source\n/sorc001\n고려할 사항은 log 파일을 분리할 것인지 여부이다. log는 별도 분리 설정하지 않으면 LENA Node 가 설치되는 경로 하위에 기본 생성된다. log 확인을 손쉽게 하면서도 Disk 용량 관리를 편하게 하기 위해서는 log 디렉토리의 분리를 권장한다.\n가능하다면 별도 외장 disk 볼륨을 Node, log, source 디렉토리에 Mount하여 OS System 영역과 격리하는 것을 권장한다.\n2.1.5. JVM JDK의 경우 LENA 설치 진행하기 전 별도 Binary 형태로 혹은 OS에서 제공하는 Package 설치 관리자를 통해 설치가 되어 있어야 한다. LENA 1.3은 OracleJDK/OpenJDK 8이상을 지원하며 JDK 6,7의 경우 LENA 1.2에서 지원한다.\nOracleJDK의 경우 8u202 버전 까지만 무료로 이용할 수 있다.\n2.1.6. Network 아래 다이어그램은 LENA의 각 Module간 트래픽의 흐름을 나타낸 도표이다. LENA Management 관련 경로와 Web Service 관련 경로가 상세히 표현되어있다.\nFigure 2. LENA Network Traffic 위 다이어그램에 표현된 LENA 모듈간 트래픽 경로와 사용 Port는 아래 표와 같다. 명시된 Port 번호는 사전 정의된 기본값이며 각 Module 설치 시 별도로 지정할 수 있다. 아래 표를 참고하여 Port를 선정한 뒤, 사전에 방화벽을 Open 해 놓아야 한다.\nLENA에서 사용하는 Port는 보안 요건 상 1025이상의 Port를 이용한다. 단, 서비스 제공 시 80 Port 등의 Well-known Port를 이용해야 한다면 부록에서 제공되는 80포트 이용 가이드를 참고한다.\nTable 3. LENA Firewall Open Rule Src Dest Protocol Port 비고 운영자\nLENA Manager\nTCP\n7700\nManager Web UI 접속\nLENA Manager\nWEB Node Agent\nTCP\n16900\nWEB Node 제어\nWAS Node Agent\nTCP\n16800\nWAS Node 제어\nWEB Node Agent\nLENA Manager\nUDP\n16100\n모니터링 정보 송신\nWAS Node Agent\nWAS Advertiser\nSession Server\n유저/운영자\nWeb Server\nHTTP\n8000\nWEB 서비스 접속\nHTTPS\n8363\nWEB 서비스 보안(SSL) 접속\n(HTTP + 363 / 수정가능)\n운영자\nWAS\nHTTP\n8080\nWAS 서비스 접속\nWeb Server\nAJP\n8009\nWeb Server-WAS 연계\n(HTTP - 71 / 수정가능)\nWAS\nSession Server\nTCP\n5180\nSession Clustering\nSession Server\nWAS\nDB\nTCP\n3306\nWAS JDBC 접속\nLENA는 Web Server / WAS 설치 시 HTTP Port를 지정하여 설치하도록 하고있다. 이 HTTP Port를 기준으로 HTTPS 포트와 같은 Server 동작을 위한 다른 Port를 자동계산하여 설치하는데 그 예시가 위 표에서 이탤릭 체로 표시된 포트이다. 따라서, Web Server, WAS를 다수 설치하는 과정에서 이미 사용된 다른 Port 와의 충돌을 방지하기 위해서 1과 10의 자리는 Web Server나 WAS 별로 동일하게, 100의 자리는 변경하여 설치하는 것을 권장한다.\nTable 4. IP가 같은 장비에 Web Server, WAS 설치 시 HTTP Port 설정 예시 구분\nServer 명\nHTTP Port\n비고\nWAS\nee_01\n8080\n-\nee_02\n8180\nee_01의 HTTP Port 값 + 100\nWeb\nweb_01\n7180\n-\nweb_02\n7280\nweb_01의 HTTP Port 값 + 100\n또한 Dynamic Port Range를 전체 Port 범위로 사용하지 말 것을 권고한다. LENA 기동에 필요한 Port를 OS의 다른 Service가 Source Port로 점유하는 일이 발생할 가능성이 있다.\n3. Installation 3.1. LENA 설치 LENA 설치파일을 대상 서버의 준비된 디렉토리에 업로드한다. 설치파일을 통해 LENA Manager를 설치하고자 하는 Server에 LENA Manager를 설치하고 Web Server를 설치할 Server에 Web Server Node를, WAS를 설치할 Server에 WAS Node를 설치한다.\nLENA 설치를 진행 하기에 앞서 JVM 을 참조하여 JDK를 미리 설치하도록 한다.\nNode의 설치 후 Web Server와 WAS의 설치는 LENA Manager의 Web UI를 통해서 설치한다. LENA 설치 파일은 제품 구분과 용도에 따라 다음과 같이 구분된다.\nTable 5. LENA 설치 파일 구분 (OS: Linux/Windows 64bit / LENA: 1.3.1.0 기준) 제품 구분(Edition) OS 구분 설치 파일 비고 Enterprise\nLinux\nlena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz\nLENA Manager, WAS 설치용\nWindows\nlena-enterprise-win_na_x86_64-1.3.1.0.zip\nStandard\nLinux\nlena-standard-linux_na_x86_64-1.3.1.0.tar.gz\nWindows\nlena-standard-win_na_x86_64-1.3.1.0.zip\n-\nLinux\nlena-web-linux_na_x86_64-1.3.1.0.tar.gz\nWeb Server 설치용\nWindows\nlena-web-win-na_x86_65-1.3.1.0.zip\nEnterprise Edition과 Standard Edition의 차이는 운영자 매뉴얼의 Server Module 를 참고한다.\nLinux와 Windows 에서의 LENA 설치는 큰 흐름에서는 동일한 방식으로 진행된다. 본 문서에서는 Linux를 기준으로 설명한다.\n3.1.1. LENA Manager 설치/실행 LENA 설치 패키지는 압축파일 형식으로, 설치할 서버에 업로드 후에 압축을 해제하여 사용한다. LENA Manager는 WAS Node 설치파일에 포함되어 있으며 설치할 경로(예: /engn001/lena)에 설치파일을 업로드 후 압축을 푼다.\nLENA Manager는 WAS Node 설치파일에 포함되어 있다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.1.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz install.sh(예: /engn001/lena/1.3/bin/install.sh) 파일을 이용하여 설치하며\n다음과 같은 명령어를 사용하여 설치할 수 있다.\nLENA Manager 설치 [lena]# cd /engn001/lena/1.3/bin [lena]# ./install.sh create lena-manager ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------------- | 1. SERVICE_PORT is the port number used by Manager. | ex : 7700 | 2. MONITORING_PORT is the port number used by Manager for monitoring. | ex : 16100 | 3. RUN_USER is user running LENA Manager. | ex : lena, wasadm +------------------------------------------------------------------------------------- Input SERVICE_PORT for execution. (q:quit) Default value is '7700' 7700 LENA Manager 설치가 완료되면 install.sh 을 실행한 디렉토리에 LENA Manager 와 관련된 Script 파일이 생성된다.\nTable 6. LENA Manager 관리용 Script 파일 Script 파일명 설명 start-manager.sh\nLENA Manager 를 시작한다.\nps-manager.sh\nLENA Manager가 실행중인지 확인한다.\nstop-manager.sh\nLENA Manager 를 중지한다.\nstart-manager.sh 을 실행하여 LENA Manager를 시작한다.\n[lena]# ./start-manager.sh -------------------------------- LENA Manager -------------------------------- Using LENA_HOME : /engn001/lena/jadeu3/1.3 Using JRE_HOME : /engn001/java/jdk1.8.0_202 Using SERVER_PID : /engn001/lena/jadeu3/1.3/modules/lena-manager/lena-manager_solmanager.pid Using SERVER_HOME : /engn001/lena/jadeu3/1.3/modules/lena-manager Using SERVER_ID : lena-manager Using INSTANCE_NAME : lena-manager_solmanager LENA started. LENA Manager가 정상적으로 실행되면 해당 서버의 Service Port로 Manager에 접속할 수 있다.\nhttp://Server_IP:7700\nFigure 3. LENA 접속 화면 아래의 초기 접속 계정/비밀번호로 접속하면 초기 화면을 확인 할 수 있다.\n초기 접속 계정/비밀번호 admin / !admin1234\nFigure 4. LENA 초기화면(DASHBOARD) 3.1.2. Node 설치(Command Line) Node의 설치는 LENA 설치 패키지의 압축을 푸는 것과 같다. WAS, Web Server를 설치할 서버에 각 설치 패키지를 준비한 경로(예: /engn001/lena 또는 /engn001/lenaw)에 업로드 후 압축을 해제한다.\nNode를 설치하면 아래와 같이 Node Agent를 실행, 중지, 상태확인을 하기위한 script가 존재한다.\nTable 7. Node Agent 관리 Script script 경로 script 명 비고 Node 설치경로 하위 'bin'\n(예: /engn001/lena/1.3/bin)\nstart-agent.sh\nNode Agent 실행\nps-agent.sh\nNode Agent 프로세스 확인\nstop-agent.sh\nNode Agent 중지\nWAS Node 설치 WAS Node의 설치 시 고려할 수 있는 사항은 다음과 같다.\nLENA Manager와 WAS Node를 같은 Server에 설치\nLENA Manager와 WAS Node를 다른 Server에 설치(LENA Manager 독립 설치)\n1번의 경우 LENA Manager 설치/실행 에서 LENA Manager를 설치하기 위해 WAS Node 설치 패키지의 압축을 풀었으므로 이미 WAS Node가 설치되어 있는 상태이다.\n2번의 경우 WAS Node를 설치할 Server의 준비한 경로(예: /engn001/lena)에 LENA WAS 설치 패키지를 업로드 후 다음과 같이 압축을 풀어 설치한다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.1.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz Node를 설치했다면 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lena/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lena/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 Web Server Node 설치 Web Server를 설치할 Server에 LENA Web Server 설치용 패키지를 업로드 후 압축을 풀어 설치한다.\n경로 / 파일 확인 [lenaw]# cd /engn001/lenaw [lenaw]# ll -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 설치파일 압축 해제 / 디렉토리 명 변경 [lenaw]# tar -xvzf lena-web-linux_na_x86_64-1.3.1.tar.gz [lenaw]# mv lena-web-linux_na_x86_64-1.3.1 1.3 [lenaw]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\nNode를 설치 한 후 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lenaw/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lenaw/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 LENA Manager와 Node의 연동(등록) WAS Node와 Web Server Node를 설치하고 Agent를 기동하면 LENA Manager를 통해 Node를 등록할 수 있다.\nLENA Manager의 상단 'SERVER' 메뉴를 선택하면 Node List를 확인 할 수 있다.\nNode 등록을 위해 'Register' 버튼을 클릭하면 아래와 같이 Node를 등록하기 위한 Empty Row가 추가되며 각 입력 항목을 등록한다.\nFigure 5. SERVER 메뉴 초기화면 Node 등록 시 입력할 항목은 다음과 같다.\nNode Name: 등록할 Node의 명칭\nNode Type: Application / Web 중에 선택\nNode IP: Node가 설치된 Server의 IP Adress\nNode Port: Node 설치시 입력한 Node Port\nManager Address 항목의 경우 LENA Manager가 설치된 Server의 IP가 자동입력 되므로 별도 입력할 필요는 없다.\n입력 항목을 모두 입력한 뒤 'Save' 버튼으로 Node 등록을 완료하며 정상 처리 시 아래와 같은 화면을 확인할 수 있다.\nFigure 6. Node 정상 등록 예시 화면 3.1.3. Node 원격 설치(LENA Manager Web UI) Node의 설치는 Node 설치(Command Line) 에서 진행한 방법 외에도 LENA Manager를 통해 원격으로 설치할 수도 있다. 이를 위해서는 LENA (Manager)를 설치한 Server의 특정 디렉토리 안에 LENA 설치파일(WAS, Web Server)를 업로드 해 두어야 한다. 설치 패키지를 업로드 해 두어야 하는 경로의 예시는 다음과 같다.\nTable 8. Node 원격 설치를 위한 설치파일 업로드 경로(예시) LENA 설치경로 LENA 설치 패키지 업로드 경로 /engn001/lena/1.3 (LENA_HOME)\n[LENA_HOME]/repository/install-files/default\n해당 경로에 앞서 사용한 WAS, Web Server 설치파일을 업로드 한다.\n원격 설치를 위한 설치 패키지 확인 [lena]# cd /engn001/lena/1.310/repository/install-files/default [lena]# ll -rw-rw-r--. 1 lena lena lena-enterprise-linux_na_x86_64-1.3.1.0.tar.gz -rw-rw-r--. 1 lena lena lena-web-linux_na_x86_64-1.3.1.0.tar.gz 해당 경로에 설치 패키지를 업로드 했다면 LENA Manager의 'SERVER' 메뉴를 선택하고 하단의 'Install' 버튼을 클릭한다.\nFigure 7. WAS Node 원격 설치 예시 Node 원격 설치 시 입력해야 하는 항목은 다음과 같다.\nNode Type: Application / Web 중에 선택\nNode Name: 원격 Server에 설치할 Node의 명칭\nNode Address: Node를 설치할 원격 Server의 IP Adress\nNode Port: 원격 Server에서 Node가 사용할 Port\nUser: 원격 Server의 OS 계정\nPassword: 원격 Server의 OS 계정의 비밀번호\nSSH Port: 원격 Server의 SSH Port\nLENA Home: 원격 Server에 Node를 설치할 경로\nJava Home: 원격 Server에 설치되어있는 JAVA Home 경로\n원격 설치에서 입력하는 값을 토대로, LENA Manager는 앞서 미리 준비해둔 설치 패키지 파일을 원격 Server로 전송하고 Node를 설치하고, 설치한 Node의 Agent를 자동으로 실행하는 것으로 원격 설치는 완료된다. 이러한 진행 상황은 Popup 창을 통해 확인 할 수 있다.\nFigure 8. WAS Node 원격 설치 진행 확인 예시 설치가 정상적으로 완료되면 원격 설치한 Node는 LENA Manager에 자동으로 등록된다.\nFigure 9. Node 원격 설치 후 등록 완료된 상태 예시 Node의 원격 설치를 위해서는 LENA Manager가 설치된 Server와 원격 설치할 Server 간의 SSH Port 방화벽이 Open 되어있어야 한다.\n3.1.4. WAS 설치/실행 WAS Node를 설치, 등록까지 완료했다면 이제 LENA Manager Web UI를 통해 WAS 를 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 한 뒤 좌측에서 WAS 를 설치할 WAS Node를 선택하면 WAS List를 확인할 수 있다. 이 화면에서 'Install' 버튼을 클릭한다.\nFigure 10. WAS List 확인 Figure 11. WAS 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 WAS를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: WAS의 Type, Standard / Enterprise 중 택\nNode: WAS 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 WAS를 식별하기 위한 명칭\nService Port: WAS가 설치될 때 기준이 되는 HTTP Port를 의미\nRun User: WAS 의 기동 시 사용할 OS 계정(수정불가)\nInstall Root Path: WAS 가 설치될 경로(수정불가)\nLog Home: WAS Log의 경로\ndefault: [Install Root Path]/logs\ncutom: 사용자가 임의로 경로 지정\nJVM Route: Web Server와 연동 시 Web Server 가 WAS를 식별하기 위한 값\nauto: LENA에서 자동생성\nmanual: 사용자가 임의로 지정\nWAS 는 기동 시 HTTP, HTTPS, AJP 등 다양한 Port를 사용하는데 LENA 에서는 WAS 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWAS 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 WAS가 설치되며 WAS List 에서 설치한 WAS 를 확인 할 수 있다.\nFigure 12. WAS 정상 설치 후 WAS List 중지되어 있는 WAS 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 WAS 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWAS 기동 시에는 WAS 기동 Log(Application 이 배포되어 있다면 Application 기동 Log 도 함께)가 Popup 창으로 출력된다.\nFigure 13. WAS의 기동과 Log 3.1.5. Web Server 설치/실행 WAS 설치와 동일한 방식으로, LENA Manager Web UI를 통해 Web Server를 설치할 Web Server Node를 선택한 뒤 Web Server를 설치할 수 있다.\nFigure 14. Web Server List 확인 Figure 15. Web Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Web Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Web Server (고정)\nNode: Web Server 가 설치될 Node (수정불가)\nServer ID: LENA Manager 가 Web Server 를 식별하기 위한 명칭\nService Port: Web Server 가 사용할 HTTP Port\nRun User: Web Server 기동 시 사용할 OS 계정(수정불가)\nWeb Server Engine Path: Web Server 설치 시 사용할 Engine 경로(수정불가)\nInstall Root Path: Web Server 가 설치될 경로(수정불가)\nLog Home: Web Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nWeb Server 는 기동 시 HTTP, HTTPS 등 다양한 Port를 사용하는데 LENA 에서는 Web Server 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWeb Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Web Server가 설치되며 Web Server List 에서 확인할 수 있다.\nFigure 16. Web Server 정상 설치 후 Web Server List 중지되어 있는 Web Server 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 Web Server 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWeb Server 기동 시에는 Web Server 기동 Log가 Popup 창으로 출력된다.\nFigure 17. Web Server 의 기동과 Log Web Server - WAS 연동 Web Server와 WAS 간 연동 설정에 대해 알아본다. LENA Web Server 와 WAS 의 연동은 Web Server 설정 화면에서 할 수 있다. LENA Manager 상단의 'SERVER' 메뉴에서 설치한 Web Server 를 선택하여 설정 화면을 열고 설정 화면 내 상단의 'Connector' 탭을 선택한다.\nFigure 18. Web Server 초기 설정화면 Web Server 의 'Connector' 탭에서는 Web Server 와 WAS 간 연결에 대한 설정을 관리한다.\n'Connector' 탭 화면 하단의 WAS List 란에 연동할 WAS를 추가하면 기본적인 Web Server 와 WAS 간 연동이 완료된다.\nWAS 를 추가하기 위해서는 WAS List 란의 '+' 버튼을 클릭하면 열리는 팝업에서 설치되어 있는 WAS를 선택하고 'Save' 버튼을 클릭한다.\n팝업에서는 LENA Manager 에 등록되어있는 WAS Node 별로 WAS 목록을 확인 할 수 있으며 이미 'Connector' 에 등록한 WAS는 보이지 않는다.\nFigure 19. 연동할 WAS 추가 WAS List에 연동 설정할 WAS가 추가되면 우측 하단의 'Save' 버튼을 클릭하여 최종 저장한다.\nFigure 20. 연동할 WAS 목록 저장 3.1.6. Session Server 설치 및 연동 Session Server는 Session Clustering 을 적용 시에 설치하며 다음 두 가지 방법으로 설치할 수 있다.\nStandalone 모드: Session Server를 별도 Server 로 설치하는 방법\nEmbedded 모드: Session Server를 별도 Server 로 설치하지 않고 기존에 설치한 WAS 내에 Emebedded 형태로 설치하는 방법\nStandalone 모드 설치와 WAS 연동 Session Server 는 WAS Node에 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 후 Session Server 를 설치할 WAS Node를 선택한다. WAS List 하단에는 설치된 Session Server를 확인 할 수 있는 Session Server List 를 확인할 수 있다.\nFigure 21. Session Server List 확인 Figure 22. Session Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Session Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Standalone (고정)\nNode: Session Server 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 Session Server 를 식별하기 위한 명칭\nService Port: Session Server 가 사용할 Port\nMirror Server IP: 다른 하나의 Session Server 가 설치된 Node(등록한 Node 중에서 선택)\nMirror Server Port: 다른 하나의 Session Server 가 설치된 Node에서 Session Server 가 사용하는 Port\nRun User: Session Server 기동 시 사용할 OS의 계정(수정불가)\nInstall Root Path: Session Server 가 설치될 경로(수정불가)\nLog Home: Session Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nSession Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Session Server 가 설치되며 Session Server List 에서 확인 할 수 있다.\nSession Clustering 구성 시 Session Server는 2기를 설치하여 하나는 Primary, 다른 하나는 Secondary 이중화 구성을 한다.\n위 예시 그림에서는 'Mirror Server IP' 에 다른 하나의 WAS Node를 지정하였으며 해당 WAS Node 에도 아래와 같이 Session Server 를 설치한다.\nFigure 23. 다른 하나의 Session Server 설치 Session Server 를 모두 설치 한 뒤 WAS 와 연동하기 위해 WAS 설정 화면의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Client Mode 의 경우 별도로 설치한 Session Server 를 기동하고 이를 WAS 와 연동하여 Session Clustering 을 적용하는 방식이다.\nFigure 24. WAS 의 Client 모드 Session Server 설정 Client 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nPrimary Server Host: Primary 로 지정할 Session Server 가 설치된 Node 를 선택하고 Session Server 를 지정한다.\nSecondary Server Host: Secondary 로 지정할 Session Server 가 설치된 Node 와 Session Server 를 지정한다. Session Server 가 2기 설치되어 있고, Primary Server Host 를 선택하면 나머지 Session Server 가 자동으로 Secondary 로 지정된다.\nExternal Stored Session: Session Clustering 적용과 함께 WAS 와 Session Server(2기)에서 관리되는 Session 정보를 Session Server(2기) 에서만 관리할 지 여부를 선택한다. 주로 Cloud, Container 환경에서 구성 시 해당 옵션을 사용한다.(Default false)\nShare session in applications: WAS에 여러 Application 이 배포되는 경우 해당 Application 간 Session 정보를 공유할 지 여부를 선택한다.(Default false)\nMulti Login Control: 중복 로그인 제어 기능의 사용여부를 선택한다.(Default false)\nClient 모드 Session Server 의 경우 설정을 적용할 WAS 마다 위와 같은 설정을 적용해 주어야 한다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nEmbedded 모드 설치와 WAS 연동 Session Server 의 기능을 Embedded 모드로 사용할 WAS 를 선택하여 설정화면을 연 뒤, 상단의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Embedded Mode 의 경우 WAS 에 Session Server 기능이 WAS 에 Embedded 형태로 WAS 가 기동한다.\nFigure 25. WAS 의 Embedded 모드 Session Server 설정 Embedded 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nEmbedded Host: Embedded Mode 선택 시 현재 WAS 로 고정된다.\nEmbedded Port: Embedded Session Server 가 사용할 Port를 입력한다.\nSecondary Server Host: 다른 하나의 Embedded Session Server 를 사용할 WAS 를 지정한다. WAS 가 설치된 Node 를 선택 후 WAS 를 선택한다.\nSecondary Server Port: 다른 하나의 Embedded Session Server 가 사용할 Port 를 입력한다.\nMulti Login Contorl: 중복 로그인 제어 기능의 사용여부를 선택한다. (Default false)\n설정 값 입력, 선택을 마친 뒤 'Save' 버튼을 눌러 저장하면 Embedded Session 설정이 완료되며 Embedded Session 의 설정은 하나의 WAS 에서 진행하면 다른 하나의 WAS 에도 설정이 적용된다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nFigure 26. WAS 의 Embedded 모드 Session Server 설정의 완료 3.1.7. Server 간 연동 확인 앞서 Web Server - WAS 연동 과 Session Server 설치 및 연동 과정을 통해서 진행한 연동 설정을 확인하는 방법을 설명한다.\nLENA Manager 에서는 설치한 Server 의 구성을 간편하게 확인할 수 있도록 Topology View 를 제공하고 있다. 이 Topology 기능을 통해 연동이 정상적으로 확인 하는 방법과 Web Server, WAS 설치 시 기본 탑재되어 있는 LENA Sample 페이지를 통해 연동이 정상적으로 되어있는 지를 확인 할 수 있다.\nTopology 를 통한 확인 LENA Manager 상단의 'Topoolgy' 메뉴를 선택한다.\nFigure 27. Topology View Topology View 에서는 기본적으로 현재 등록되어 있는 Node 와 Node 별 설치한 Server 의 구성과 연동정보를 확인 할 수있다.\n위 그림에서는 Web Server 2기, WAS 2기 그리고 Session Server 2기가 설치되어 있으며 Web Server 와 WAS, WAS 와 Session Server 간 연동 설정이 연결선으로 표현되고 있으며 이를 통해 Server 간 연동이 정상적으로 되었는지 확인 할 수 있다.\nSample Page 호출을 통한 확인 LENA 의 Web Server 와 WAS 에는 기본 탑재된 Sample Page와 Sample Application 이 있다. 이는 초기 설치 후 정상 연동을 확인하는 용도로도 사용될 수 있다.\n먼저 Web Server 의 IP와 Port를 확인한 뒤 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.html\n그럼 아래와 같이 LENA 에서 제공하는 index.html 페이지가 호출되는 것을 확인 할 수 있으며 Web Server 가 정상호출 되는 것을 확인 할 수 있다.\nFigure 28. Web Server 호출 Test Sample Application 호출을 통한 확인 LENA WAS를 설치하면 LENA 에서 제공하는 기본 Application 이 탑재되어 있다. 이 Application의 index.jsp, session.jsp 를 호출하면 각각 WAS 호출 테스트, Session Clustering 기능 테스트를 수행할 수 있다.\nWeb Server 와 WAS 가 설치 초기상태로 설정되어 있다는 가정 하에 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.jsp\nWeb Server 와 WAS 가 정상 연결이 되어있다면 Web Server 의 IP와 Port 로 호출한 위 요청은 WAS로 전달되어 index.jsp 페이지를 요청하게 되고 다음과 같이 LENA Sample Application 에서 제공하는 index.jsp 페이지가 호출된다.\nFigure 29. index.jsp 호출 Test index.jsp 페이지를 호출하면 현재 요청을 어떤 WAS 가 처리하는지를 Server ID, Service Port, JvmRout 값을 통해 확인할 수 있다.\n이번에는 동일한 Web Server IP, Port 로 아래와 같이 session.jsp 를 호출한다.\nhttp://[Web Server IP]:[Web Server Port]/session.jsp\nsession.jsp 를 호출하면 현재 요청에 대한 Session 정보가 추가로 확인된다. 호출을 반복함에 따라 Session Count 의 수가 증가하며 두번째 호출 부터 발급된 Session ID가 표시된다. Session Clustering 이 정상 적용 되었는지를 확인 하기 위해서는 Session ID가 발급된 상태에서 현재 요청을 처리중인 WAS 를 중지하고 웹 브라우저를 새로고침하여 요청을 다시 보냈을 때, 기동중인 다른 WAS 가 요청을 처리하지만 Session ID 가 그대로 유지되며 Session Count 가 증가하는 것으로 확인할 수 있다.\nFigure 30. session.jsp 호출 Test Version 1.3.1.4\nLast updated 2022-05-03 13:34:11 +0900 "},{"id":11,"href":"/docs/1.3.2/1.3.2.0/installation/","title":"Installation","parent":"1.3.2.0","content":" \u003c!DOCTYPE html\u003e Installation Installation LENA Support\nlena-support@lgcns.com\nversion 1.3.2.0 Table of Contents 1. Overview 1.1. 구성요소 1.1.1. Server 1.1.2. Agent, Advertiser 1.1.3. Manager 1.2. Mechanism 2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource 2.1.2. 운영체제 2.1.3. 계정 2.1.4. 디렉토리 2.1.5. JVM 2.1.6. Network 3. Installation 3.1. LENA 설치 3.1.1. LENA Manager 설치/실행 3.1.2. Node 설치(Command Line) WAS Node 설치 WAS Node 설치 (스펙 변경시) Web Server Node 설치 LENA Manager와 Node의 연동(등록) 3.1.3. Node 원격 설치(LENA Manager Web UI) 3.1.4. WAS 설치/실행 3.1.5. Web Server 설치/실행 Web Server - WAS 연동 3.1.6. Session Server 설치 및 연동 Standalone 모드 설치와 WAS 연동 Embedded 모드 설치와 WAS 연동 3.1.7. Server 간 연동 확인 Topology 를 통한 확인 Sample Page 호출을 통한 확인 Sample Application 호출을 통한 확인 1. Overview 본문서는 일반적인 VM Host 기반 LENA Server를 운영하기 앞서 설치에 대해 기술한다.+ LENA 의 전체 기능 및 운영에대한 내용은 별도로 제공되는 운영자 매뉴얼을 참고한다.\n본 문서는 LENA 1.3.1 버전을 기준으로 기술하고, 다음과 같은 내용을 포함한다.\nLENA 설치\nLinux 기반\nWindows 기반 설치\n1.1. 구성요소 LENA는 Web Server, WAS(Web Application Server), Session Server와 Web Server의 Status를 확인하는 Node Agent, Application Server에 설치되어 Status정보를 제공하는 Advertiser와 관리자에게 제공되는 통합관리 도구인 Manager로 구성된다.\n1.1.1. Server LENA에서 제공되는 서버의 종류는 Web Server, Application Server, Session Server 3가지가 있다. 각 서버의 용도는 아래와 같다.\nWeb Server: 사용자 요청에 따라 Web Resource를 제공한다. Application Server가 제공하는 응용서비스의 Front역할을 수행하면서, 선택적으로 Load Balancing 및 보안 레이어(SSL)를 제공하는 역할을 수행한다.\nApplication Server: Java로 작성된 응용 서비스를 실행/제공 한다.\nSession Server: Application Server간 사용자의 세션을 유지한다.\n1.1.2. Agent, Advertiser Node, Server에 설치되어 제어 및 모니터링 기능을 담당하는 Agent 이다.\nNode Agent\nWeb Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\nAdvertiser\nApplication Server 상태 모니터링 데이터를 취합하여 Manager에게 제공한다.\n1.1.3. Manager Manager는 Node Agent와 Advertiser를 통하여 Node와 Server의 제어 및 모니터링 기능 등을 제공하는Web Application이다. 대표적으로 아래와 같은 기능을 제공한다.\nTable 1. LENA Manager 주요 기능 항목 설명 Dashboard\nServer, Server Cluster 현황\nNotification 확인\nServer\nSystem (논리적 Server 그룹) 등록/수정/삭제\nServer Cluster\nServer Cluster 등록/수정/삭제\nServer Cluster 에 등록할 Server 등록/삭제\nServer Cluster 에 등록한 Server 설정 비교 및 동기화\nServer Cluster 설정 백업 및 복원을 위한 Snapshot\nServer Cluster 에 등록한 Server 들의 Graceful Restart\nResource\nReosource의 조회 및 등록/수정/삭제\nDatabase / DataSource / MessageService(JMS) / Transaction(JTA) / Application / LoadBalancer(SLB)\nResource를 사용하는 Server 목록 조회 및 등록/수정/삭제\nDiagnostics + (모니터링)\nServer에 대한 이슈 현황 모니터링 기능\nServer에서 발생한 Event 조회 기능\nTopology\nSystem별 Server 구성현황 조회\nAdmin\n사용자 및 권한 관리, 사용자/권한/메뉴 매핑\n사용자 운영 이력 조회\n라이선스 관리, 현황 조회 및 업로드\n1.2. Mechanism LENA는 Manager를 통해서 Web Server/WAS 를 모니터링 및 통합관리하는 기능을 제공한다. 이를 위해 Node라는 단위로 Agent가 설치되는데 이를 Node Agent라고 한다. Node Agent는 Manager의 사용자 명령을 전달받아 Node에 설치된 Web Server/WAS 를 제어하며 Node가 설치된 Host/VM, Web Server 의 모니터링 정보를 Manager로 전송한다.\nFigure 1. LENA Manager의 모니터링 및 통합관리의 작동방식 LENA Manager, Web Server, WAS 외에도 Manager의 동작을 위해 사용되는 Manager Repository, Session Clustering을 위한 Sesssion Server, WAS의 모니터링 정보 수집을 위한 Advertiser가 작동하여 Manager를 통한 모니터링 및 통합관리가 가능하도록 한다.\n항목 설명 Manager\n서버에 배포되는 설정파일 관리 및 Server 모니터링 기능 제공\nManager Repository\nManager 운영을 위한 파일저장 Repository, 각종 설정정보 및 DB 정보를 포함함\nNode Agent\nWeb 서버 모니터링 데이터 취합 및 Manager에게 송신, Manager로부터 수신한 제어/설정 명령 실행\nApplication Server\nApplication Server Instance\nWeb Server\nWeb Server Instance\nSession Server\nSession Server Instance\nAdvertiser\n모니터링 데이터 취합 및 Manager에게 송신(Application Server에 통합)\n2. Installation Prerequisite 2.1. 시스템 요구사항 2.1.1. Hardware Resource CPU\n전적으로 구동하고자 하는 Web Application이 어느 정도의 성능을 요구하는지에 달려있다. 기본적인 LENA 서비스 구동에 필요한 CPU는 2 Core 이상을 권고한다.\nMemory\nMemory에 대해서는 아래 표를 참조한다. Web Server를 제외한 모든 Module은 JVM 기반으로 동작하므로 Heap Memory를 사용한다. LENA에서는 기본 Heap Memory 값을 미리 설정해 놓았으며, 설치 시에 해당 값으로 설치되나 필요에 따라 수정이 가능하다. 안정적인 운영을 위해 하나의 물리적 서버에 설치될 모든 모듈의 Heap Memory 설정 값의 합이 물리 서버의 잔여 메모리 용량보다 크지 않도록 유의한다.\nLENA Manager 및 각 Server 설치에 대한 최소 요구사항은 다음과 같다.\n구분 JVM Disk Space 최소 Memory 기본 Memory Manager\nJDK 1.8 \u0026#43;\n약 300 MB\n512 MB\n1 GB\nNode Agent\nJDK 1.8 \u0026#43;\n-\n64 MB\n256 MB\nApplication Server\nJDK 1.8 \u0026#43;\n약 100 MB\n512 MB\n2 GB\nWeb Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n-\nSession Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n1 GB\n각 Server 설치 시 기본 Memory 기준으로 설치 되며, Memory 설정은 최소 Memory 이상으로 설정값을 변경하여 적용할 수 있다.\n2.1.2. 운영체제 Linux\nRedhat (RHEL, CentOS) 6.5 이상 / Ubuntu 12.04 이상을 지원하며 가장 권고하는 운영체제이다. 일반적인 x86 아키텍처의 특성에 맞도록 대용량 통합서버 구성보다는 저용량 다수의 서버에 분산 설치하는 것을 권장한다.\nWindows\nWindows 7 이상을 지원한다. Linux/Unix 달리 Windows 특성에 따라 LENA Module을 Background로 띄우기 위해 Windows Service 등록 기능을 제공한다. 그렇지 않으면 LENA Module이 항상 Foreground로 실행된다.\nLinux/Unix에서는 기본적으로 LENA Module을 실행시키기 위한 스크립트를 제공한다.\n만약 OS Service로 등록이 필요할 시 서버 담당자가 OS 환경에 맞게 직접 설정해야 한다.\nUnix\nSolaris, HP-UX, AIX를 지원한다. Unix의 경우 Linux/Windows와 달리 신규 버전 및 Patch가 기본 제공되지 않으며, 필요 시 해당 OS의 버전 별 개별 검토를 통해 제작 및 배포되며 이는 통상적으로 약 2주의 소요시간이 필요하다.\n2.1.3. 계정 LENA를 설치하기 전 LENA 설치 및 기동에 이용한 계정이 필요하다. 적합한 이유가 없다면 보안 상 Root / Administrator 계정은 권고되지 않으며 이를 통해 LENA를 실행시킬 수 없으니 별도의 계정을 미리 생성하도록 한다.\nX86 아키텍처에서 권고되는 바는 아니지만, 만약 한 물리 서버에 서로 다른 다수의 업무 시스템이 운영되고 각 시스템 별로 담당 운영자가 구분되며 시스템 간 접근 통제를 위해 계정을 분리하여 사용한다고 가정하자. 이런 경우 운영자 계정 별(업무 시스템 별)로 Node를 구성/설치 하여 운영해야 하며 LENA Manager 또한 시스템 별로 구성하는 것을 권고한다. 2.1.4. 디렉토리 LENA 설치를 진행하기에 앞서 이전 단계에서 생성한 계정이 이용 가능한 설치 디렉토리를 준비하여야 한다. 아래 표는 LENA에서 제안하는 디렉토리 구성이며 사용자 별로 정책에 맞는 디렉토리 구성을 이용하면 된다. 아래 표는 Linux/Unix 기준으로 설명되었으나 Windows의 경우 C: 하위에 동일하게 디렉토리를 구성한다.\nTable 2. Directory Requirement 구분 Directory 비고 LENA WAS Node(Binary)\n/engn001/lena\nLENA WEB Node(Binary)\n/engn001/lenaw\nWeb Server, WAS Log\n/logs001\nlog경로 분리 필요 시 설정\nWeb Application Source\n/sorc001\n고려할 사항은 log 파일을 분리할 것인지 여부이다. log는 별도 분리 설정하지 않으면 LENA Node 가 설치되는 경로 하위에 기본 생성된다. log 확인을 손쉽게 하면서도 Disk 용량 관리를 편하게 하기 위해서는 log 디렉토리의 분리를 권장한다.\n가능하다면 별도 외장 disk 볼륨을 Node, log, source 디렉토리에 Mount하여 OS System 영역과 격리하는 것을 권장한다.\n2.1.5. JVM JDK의 경우 LENA 설치 진행하기 전 별도 Binary 형태로 혹은 OS에서 제공하는 Package 설치 관리자를 통해 설치가 되어 있어야 한다. LENA 1.3은 OracleJDK/OpenJDK 8이상을 지원하며 JDK 6,7의 경우 LENA 1.2에서 지원한다.\nOracleJDK의 경우 8u202 버전 까지만 무료로 이용할 수 있다.\n2.1.6. Network 아래 다이어그램은 LENA의 각 Module간 트래픽의 흐름을 나타낸 도표이다. LENA Management 관련 경로와 Web Service 관련 경로가 상세히 표현되어있다.\nFigure 2. LENA Network Traffic 위 다이어그램에 표현된 LENA 모듈간 트래픽 경로와 사용 Port는 아래 표와 같다. 명시된 Port 번호는 사전 정의된 기본값이며 각 Module 설치 시 별도로 지정할 수 있다. 아래 표를 참고하여 Port를 선정한 뒤, 사전에 방화벽을 Open 해 놓아야 한다.\nLENA에서 사용하는 Port는 보안 요건 상 1025이상의 Port를 이용한다. 단, 서비스 제공 시 80 Port 등의 Well-known Port를 이용해야 한다면 부록에서 제공되는 80포트 이용 가이드를 참고한다.\nTable 3. LENA Firewall Open Rule Src Dest Protocol Port 비고 운영자\nLENA Manager\nTCP\n7700\nManager Web UI 접속\nLENA Manager\nWEB Node Agent\nTCP\n16900\nWEB Node 제어\nWAS Node Agent\nTCP\n16800\nWAS Node 제어\nWEB Node Agent\nLENA Manager\nUDP\n16100\n모니터링 정보 송신\nWAS Node Agent\nWAS Advertiser\nSession Server\n유저/운영자\nWeb Server\nHTTP\n8000\nWEB 서비스 접속\nHTTPS\n8363\nWEB 서비스 보안(SSL) 접속\n(HTTP + 363 / 수정가능)\n운영자\nWAS\nHTTP\n8080\nWAS 서비스 접속\nWeb Server\nAJP\n8009\nWeb Server-WAS 연계\n(HTTP - 71 / 수정가능)\nWAS\nSession Server\nTCP\n5180\nSession Clustering\nSession Server\nWAS\nDB\nTCP\n3306\nWAS JDBC 접속\nLENA는 Web Server / WAS 설치 시 HTTP Port를 지정하여 설치하도록 하고있다. 이 HTTP Port를 기준으로 HTTPS 포트와 같은 Server 동작을 위한 다른 Port를 자동계산하여 설치하는데 그 예시가 위 표에서 이탤릭 체로 표시된 포트이다. 따라서, Web Server, WAS를 다수 설치하는 과정에서 이미 사용된 다른 Port 와의 충돌을 방지하기 위해서 1과 10의 자리는 Web Server나 WAS 별로 동일하게, 100의 자리는 변경하여 설치하는 것을 권장한다.\nTable 4. IP가 같은 장비에 Web Server, WAS 설치 시 HTTP Port 설정 예시 구분\nServer 명\nHTTP Port\n비고\nWAS\nee_01\n8080\n-\nee_02\n8180\nee_01의 HTTP Port 값 + 100\nWeb\nweb_01\n7180\n-\nweb_02\n7280\nweb_01의 HTTP Port 값 + 100\n또한 Dynamic Port Range를 전체 Port 범위로 사용하지 말 것을 권고한다. LENA 기동에 필요한 Port를 OS의 다른 Service가 Source Port로 점유하는 일이 발생할 가능성이 있다.\n3. Installation 3.1. LENA 설치 LENA 설치파일을 대상 서버의 준비된 디렉토리에 업로드한다. 설치파일을 통해 LENA Manager를 설치하고자 하는 Server에 LENA Manager를 설치하고 Web Server를 설치할 Server에 Web Server Node를, WAS를 설치할 Server에 WAS Node를 설치한다.\nLENA 설치를 진행 하기에 앞서 JVM 을 참조하여 JDK를 미리 설치하도록 한다.\nNode의 설치 후 Web Server와 WAS의 설치는 LENA Manager의 Web UI를 통해서 설치한다. LENA 설치 파일은 제품 구분과 용도에 따라 다음과 같이 구분된다.\nTable 5. LENA 설치 파일 구분 (OS: Linux/Windows 64bit / LENA: 1.3.2.0 기준) 제품 구분(Edition) OS 구분 설치 파일 비고 Enterprise\nLinux\nlena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz\nLENA Manager, WAS 설치용\nWindows\nlena-enterprise-win_na_x86_64-1.3.2.0.zip\nStandard\nLinux\nlena-standard-linux_na_x86_64-1.3.2.0.tar.gz\nWindows\nlena-standard-win_na_x86_64-1.3.2.0.zip\n-\nLinux\nlena-web-linux_na_x86_64-1.3.2.0.tar.gz\nWeb Server 설치용\nWindows\nlena-web-win-na_x86_65-1.3.2.0.zip\nEnterprise Edition과 Standard Edition의 차이는 운영자 매뉴얼의 Server Module 를 참고한다.\nLinux와 Windows 에서의 LENA 설치는 큰 흐름에서는 동일한 방식으로 진행된다. 본 문서에서는 Linux를 기준으로 설명한다.\n3.1.1. LENA Manager 설치/실행 LENA 설치 패키지는 압축파일 형식으로, 설치할 서버에 업로드 후에 압축을 해제하여 사용한다. LENA Manager는 WAS Node 설치파일에 포함되어 있으며 설치할 경로(예: /engn001/lena)에 설치파일을 업로드 후 압축을 푼다.\nLENA Manager는 WAS Node 설치파일에 포함되어 있다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.2.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz install.sh(예: /engn001/lena/1.3/bin/install.sh) 파일을 이용하여 설치하며\n다음과 같은 명령어를 사용하여 설치할 수 있다.\nLENA Manager 설치 [lena]# cd /engn001/lena/1.3/bin [lena]# ./install.sh create lena-manager ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------------- | 1. SERVICE_PORT is the port number used by Manager. | ex : 7700 | 2. MONITORING_PORT is the port number used by Manager for monitoring. | ex : 16100 | 3. RUN_USER is user running LENA Manager. | ex : lena, wasadm +------------------------------------------------------------------------------------- Input SERVICE_PORT for execution. (q:quit) Default value is '7700' 7700 LENA Manager 설치가 완료되면 install.sh 을 실행한 디렉토리에 LENA Manager 와 관련된 Script 파일이 생성된다.\nTable 6. LENA Manager 관리용 Script 파일 Script 파일명 설명 start-manager.sh\nLENA Manager 를 시작한다.\nps-manager.sh\nLENA Manager가 실행중인지 확인한다.\nstop-manager.sh\nLENA Manager 를 중지한다.\nstart-manager.sh 을 실행하여 LENA Manager를 시작한다.\n[lena]# ./start-manager.sh -------------------------------- LENA Manager -------------------------------- Using LENA_HOME : /engn001/lena/jadeu3/1.3 Using JRE_HOME : /engn001/java/jdk1.8.0_202 Using SERVER_PID : /engn001/lena/jadeu3/1.3/modules/lena-manager/lena-manager_solmanager.pid Using SERVER_HOME : /engn001/lena/jadeu3/1.3/modules/lena-manager Using SERVER_ID : lena-manager Using INSTANCE_NAME : lena-manager_solmanager LENA started. LENA Manager가 정상적으로 실행되면 해당 서버의 Service Port로 Manager에 접속할 수 있다.\nhttp://Server_IP:7700\nFigure 3. LENA 접속 화면 아래의 초기 접속 계정/비밀번호로 접속하면 초기 화면을 확인 할 수 있다.\n초기 접속 계정/비밀번호 admin / !admin1234\nFigure 4. LENA 초기화면(DASHBOARD) 3.1.2. Node 설치(Command Line) Node의 설치는 LENA 설치 패키지의 압축을 푸는 것과 같다. WAS, Web Server를 설치할 서버에 각 설치 패키지를 준비한 경로(예: /engn001/lena 또는 /engn001/lenaw)에 업로드 후 압축을 해제한다.\nNode를 설치하면 아래와 같이 Node Agent를 실행, 중지, 상태확인을 하기위한 script가 존재한다.\nTable 7. Node Agent 관리 Script script 경로 script 명 비고 Node 설치경로 하위 'bin'\n(예: /engn001/lena/1.3/bin)\nstart-agent.sh\nNode Agent 실행\nps-agent.sh\nNode Agent 프로세스 확인\nstop-agent.sh\nNode Agent 중지\nWAS Node 설치 WAS Node의 설치 시 고려할 수 있는 사항은 다음과 같다.\nLENA Manager와 WAS Node를 같은 Server에 설치\nLENA Manager와 WAS Node를 다른 Server에 설치(LENA Manager 독립 설치)\n1번의 경우 LENA Manager 설치/실행 에서 LENA Manager를 설치하기 위해 WAS Node 설치 패키지의 압축을 풀었으므로 이미 WAS Node가 설치되어 있는 상태이다.\n2번의 경우 WAS Node를 설치할 Server의 준비한 경로(예: /engn001/lena)에 LENA WAS 설치 패키지를 업로드 후 다음과 같이 압축을 풀어 설치한다.\n설치 경로 및 설치 파일 업로드 확인 [lena]# cd /engn001/lena [lena]# ll -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\n설치 파일 압축 해제 / 디렉토리 명 변경 [lena]# tar -xvzf lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz [lena]# mv lena-enterprise-linux_na_x86_64-1.3.2.0 1.3 [lena]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz Node를 설치했다면 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lena/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lena/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 WAS Node 설치 (스펙 변경시) WAS Node의 Spec을 변경하기 위한 절차는 다음과 같다.\n기본 설치 파일로 WAS Node설치를 진행한다.\n추가로 서버 설치를 진행하지 않은 상태에서 depot변경을 수행한다.\nLENA_HOME/bin/change-depot.sh \u0026lt;depot파일 경로\u0026gt;\n[lena]$ ./change-depot.sh ~/lena-depot-linux_na_x86_64-1.3.2.0-EN9.tar.gz ******************************* * LENA Depot Change ! * ******************************* ========================= Execution Result ======================== RESULT : Success MESSAGE : depot change succeeded from EN8 to EN9 =================================================================== Execution is completed.!! depot 파일 명의 규칙은 다음과 같다.\nlena-depot-{os name}-{lena version}-{engine number}\n예) lena-depot-linux_na_x86_64-1.3.2.0-EN9.tar.gz\nWeb Server Node 설치 Web Server를 설치할 Server에 LENA Web Server 설치용 패키지를 업로드 후 압축을 풀어 설치한다.\n경로 / 파일 확인 [lenaw]# cd /engn001/lenaw [lenaw]# ll -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.2.0.tar.gz 설치파일 압축 해제 / 디렉토리 명 변경 [lenaw]# tar -xvzf lena-web-linux_na_x86_64-1.3.1.tar.gz [lenaw]# mv lena-web-linux_na_x86_64-1.3.1 1.3 [lenaw]# ll drwxr-xr-x 12 lena lena 1.3 -rw-rw-r-- 1 lena lena lena-web-linux_na_x86_64-1.3.2.0.tar.gz 압축 해제 시 설치파일의 확장자 부분을 제외한 나머지 이름으로 디렉토리가 생성되는데\n이 디렉토리 명을 1.3 으로 간략하게 변경하여 사용한다.\nNode를 설치 한 후 start-agent.sh로 Node Agent를 실행한다.\nNode Agent 실행 [lena]# cd /engn001/lenaw/1.3/bin [lena]# ./start-agent.sh Input JAVA_HOME path for LENA. ( q: quit ) JAVA_HOME PATH : /engn001/java/jdk1.8.0_202 (1) Input Agent port for LENA Agent. ( q: quit ) Agent port (Default : 16800): 16800 (2) Input Agent user for LENA Agent. ( q: quit ) Agent user (Default : lena): lena (3) -------------------------------- LENA Agent -------------------------------- Using LENA_HOME : /engn001/lenaw/1.3 Using JAVA_HOME : /engn001/java/jdk1.8.0_202/jre Using CONF_FILE : /engn001/lena/1.3/conf/agent.conf Using LOG_HOME : /engn001/lena/1.3/logs/lena-agent Using RUN_USER : lena Using PORT : 16800 Using UUID : 98449860-0a9a-323b-9766-98c4292000df LENA Agent is started. Node Agent 실행 시 입력받는 항목은 다음과 같다.\n1 JAVA HOME (jdk) 경로 입력 2 Node Agent가 사용할 Port 입력 3 Node Agent 실행 OS 계정 입력 LENA Manager와 Node의 연동(등록) WAS Node와 Web Server Node를 설치하고 Agent를 기동하면 LENA Manager를 통해 Node를 등록할 수 있다.\nLENA Manager의 상단 'SERVER' 메뉴를 선택하면 Node List를 확인 할 수 있다.\nNode 등록을 위해 'Register' 버튼을 클릭하면 아래와 같이 Node를 등록하기 위한 Empty Row가 추가되며 각 입력 항목을 등록한다.\nFigure 5. SERVER 메뉴 초기화면 Node 등록 시 입력할 항목은 다음과 같다.\nNode Name: 등록할 Node의 명칭\nNode Type: Application / Web 중에 선택\nNode IP: Node가 설치된 Server의 IP Adress\nNode Port: Node 설치시 입력한 Node Port\nManager Address 항목의 경우 LENA Manager가 설치된 Server의 IP가 자동입력 되므로 별도 입력할 필요는 없다.\n입력 항목을 모두 입력한 뒤 'Save' 버튼으로 Node 등록을 완료하며 정상 처리 시 아래와 같은 화면을 확인할 수 있다.\nFigure 6. Node 정상 등록 예시 화면 3.1.3. Node 원격 설치(LENA Manager Web UI) Node의 설치는 Node 설치(Command Line) 에서 진행한 방법 외에도 LENA Manager를 통해 원격으로 설치할 수도 있다. 이를 위해서는 LENA (Manager)를 설치한 Server의 특정 디렉토리 안에 LENA 설치파일(WAS, Web Server)를 업로드 해 두어야 한다. 설치 패키지를 업로드 해 두어야 하는 경로의 예시는 다음과 같다.\nTable 8. Node 원격 설치를 위한 설치파일 업로드 경로(예시) LENA 설치경로 LENA 설치 패키지 업로드 경로 /engn001/lena/1.3 (LENA_HOME)\n[LENA_HOME]/repository/install-files/default\n해당 경로에 앞서 사용한 WAS, Web Server 설치파일을 업로드 한다.\n원격 설치를 위한 설치 패키지 확인 [lena]# cd /engn001/lena/1.3/repository/install-files/default [lena]# ll -rw-rw-r--. 1 lena lena lena-enterprise-linux_na_x86_64-1.3.2.0.tar.gz -rw-rw-r--. 1 lena lena lena-web-linux_na_x86_64-1.3.2.0.tar.gz 해당 경로에 설치 패키지를 업로드 했다면 LENA Manager의 'SERVER' 메뉴를 선택하고 하단의 'Install' 버튼을 클릭한다.\nFigure 7. WAS Node 원격 설치 예시 Node 원격 설치 시 입력해야 하는 항목은 다음과 같다.\nNode Type: Application / Web 중에 선택\nNode Name: 원격 Server에 설치할 Node의 명칭\nNode Address: Node를 설치할 원격 Server의 IP Adress\nNode Port: 원격 Server에서 Node가 사용할 Port\nUser: 원격 Server의 OS 계정\nPassword: 원격 Server의 OS 계정의 비밀번호\nSSH Port: 원격 Server의 SSH Port\nLENA Home: 원격 Server에 Node를 설치할 경로\nJava Home: 원격 Server에 설치되어있는 JAVA Home 경로\n원격 설치에서 입력하는 값을 토대로, LENA Manager는 앞서 미리 준비해둔 설치 패키지 파일을 원격 Server로 전송하고 Node를 설치하고, 설치한 Node의 Agent를 자동으로 실행하는 것으로 원격 설치는 완료된다. 이러한 진행 상황은 Popup 창을 통해 확인 할 수 있다.\nFigure 8. WAS Node 원격 설치 진행 확인 예시 설치가 정상적으로 완료되면 원격 설치한 Node는 LENA Manager에 자동으로 등록된다.\nFigure 9. Node 원격 설치 후 등록 완료된 상태 예시 Node의 원격 설치를 위해서는 LENA Manager가 설치된 Server와 원격 설치할 Server 간의 SSH Port 방화벽이 Open 되어있어야 한다.\n3.1.4. WAS 설치/실행 WAS Node를 설치, 등록까지 완료했다면 이제 LENA Manager Web UI를 통해 WAS 를 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 한 뒤 좌측에서 WAS 를 설치할 WAS Node를 선택하면 WAS List를 확인할 수 있다. 이 화면에서 'Install' 버튼을 클릭한다.\nFigure 10. WAS List 확인 Figure 11. WAS 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 WAS를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: WAS의 Type, Standard / Enterprise 중 택\nNode: WAS 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 WAS를 식별하기 위한 명칭\nService Port: WAS가 설치될 때 기준이 되는 HTTP Port를 의미\nRun User: WAS 의 기동 시 사용할 OS 계정(수정불가)\nInstall Root Path: WAS 가 설치될 경로(수정불가)\nLog Home: WAS Log의 경로\ndefault: [Install Root Path]/logs\ncutom: 사용자가 임의로 경로 지정\nJVM Route: Web Server와 연동 시 Web Server 가 WAS를 식별하기 위한 값\nauto: LENA에서 자동생성\nmanual: 사용자가 임의로 지정\nWAS 는 기동 시 HTTP, HTTPS, AJP 등 다양한 Port를 사용하는데 LENA 에서는 WAS 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWAS 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 WAS가 설치되며 WAS List 에서 설치한 WAS 를 확인 할 수 있다.\nFigure 12. WAS 정상 설치 후 WAS List 중지되어 있는 WAS 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 WAS 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWAS 기동 시에는 WAS 기동 Log(Application 이 배포되어 있다면 Application 기동 Log 도 함께)가 Popup 창으로 출력된다.\nFigure 13. WAS의 기동과 Log 3.1.5. Web Server 설치/실행 WAS 설치와 동일한 방식으로, LENA Manager Web UI를 통해 Web Server를 설치할 Web Server Node를 선택한 뒤 Web Server를 설치할 수 있다.\nFigure 14. Web Server List 확인 Figure 15. Web Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Web Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Web Server (고정)\nNode: Web Server 가 설치될 Node (수정불가)\nServer ID: LENA Manager 가 Web Server 를 식별하기 위한 명칭\nService Port: Web Server 가 사용할 HTTP Port\nRun User: Web Server 기동 시 사용할 OS 계정(수정불가)\nWeb Server Engine Path: Web Server 설치 시 사용할 Engine 경로(수정불가)\nInstall Root Path: Web Server 가 설치될 경로(수정불가)\nLog Home: Web Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nWeb Server 는 기동 시 HTTP, HTTPS 등 다양한 Port를 사용하는데 LENA 에서는 Web Server 설치 시 사용자 편의를 위해 HTTP Port 만을 입력받고 이를 기준으로 다른 Port 값을 자동계산하여 설치한다.\nWeb Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Web Server가 설치되며 Web Server List 에서 확인할 수 있다.\nFigure 16. Web Server 정상 설치 후 Web Server List 중지되어 있는 Web Server 를 기동하려면 WAS List 우측의 'Start' 버튼을 클릭한다. 또한 기동되어있는 Web Server 를 중지하려면 같은 위치에 'Stop' 버튼으로 바뀌므로 해당 버튼을 클릭한다.\nWeb Server 기동 시에는 Web Server 기동 Log가 Popup 창으로 출력된다.\nFigure 17. Web Server 의 기동과 Log Web Server - WAS 연동 Web Server와 WAS 간 연동 설정에 대해 알아본다. LENA Web Server 와 WAS 의 연동은 Web Server 설정 화면에서 할 수 있다. LENA Manager 상단의 'SERVER' 메뉴에서 설치한 Web Server 를 선택하여 설정 화면을 열고 설정 화면 내 상단의 'Connector' 탭을 선택한다.\nFigure 18. Web Server 초기 설정화면 Web Server 의 'Connector' 탭에서는 Web Server 와 WAS 간 연결에 대한 설정을 관리한다.\n'Connector' 탭 화면 하단의 WAS List 란에 연동할 WAS를 추가하면 기본적인 Web Server 와 WAS 간 연동이 완료된다.\nWAS 를 추가하기 위해서는 WAS List 란의 '+' 버튼을 클릭하면 열리는 팝업에서 설치되어 있는 WAS를 선택하고 'Save' 버튼을 클릭한다.\n팝업에서는 LENA Manager 에 등록되어있는 WAS Node 별로 WAS 목록을 확인 할 수 있으며 이미 'Connector' 에 등록한 WAS는 보이지 않는다.\nFigure 19. 연동할 WAS 추가 WAS List에 연동 설정할 WAS가 추가되면 우측 하단의 'Save' 버튼을 클릭하여 최종 저장한다.\nFigure 20. 연동할 WAS 목록 저장 3.1.6. Session Server 설치 및 연동 Session Server는 Session Clustering 을 적용 시에 설치하며 다음 두 가지 방법으로 설치할 수 있다.\nStandalone 모드: Session Server를 별도 Server 로 설치하는 방법\nEmbedded 모드: Session Server를 별도 Server 로 설치하지 않고 기존에 설치한 WAS 내에 Emebedded 형태로 설치하는 방법\nStandalone 모드 설치와 WAS 연동 Session Server 는 WAS Node에 설치할 수 있다. LENA Manager 상단의 'SERVER' 메뉴를 선택 후 Session Server 를 설치할 WAS Node를 선택한다. WAS List 하단에는 설치된 Session Server를 확인 할 수 있는 Session Server List 를 확인할 수 있다.\nFigure 21. Session Server List 확인 Figure 22. Session Server 설치정보 입력 Popup 과 입력 값 예시 'Install' 버튼을 클릭하면 Session Server를 설치하기 위한 정보를 입력하는 Popup 창이 출력되며 각 입력항목은 다음과 같다.\nServer Type: Standalone (고정)\nNode: Session Server 가 설치될 Node(수정불가)\nServer ID: LENA Manager 가 Session Server 를 식별하기 위한 명칭\nService Port: Session Server 가 사용할 Port\nMirror Server IP: 다른 하나의 Session Server 가 설치된 Node(등록한 Node 중에서 선택)\nMirror Server Port: 다른 하나의 Session Server 가 설치된 Node에서 Session Server 가 사용하는 Port\nRun User: Session Server 기동 시 사용할 OS의 계정(수정불가)\nInstall Root Path: Session Server 가 설치될 경로(수정불가)\nLog Home: Session Server Log 경로\ndefault: [Install Root Path]/logs\ncustom: 사용자가 임의로 경로 지정\nSession Server 설치 정보를 모두 입력 한 뒤 'Save' 버튼을 클릭하면 Session Server 가 설치되며 Session Server List 에서 확인 할 수 있다.\nSession Clustering 구성 시 Session Server는 2기를 설치하여 하나는 Primary, 다른 하나는 Secondary 이중화 구성을 한다.\n위 예시 그림에서는 'Mirror Server IP' 에 다른 하나의 WAS Node를 지정하였으며 해당 WAS Node 에도 아래와 같이 Session Server 를 설치한다.\nFigure 23. 다른 하나의 Session Server 설치 Session Server 를 모두 설치 한 뒤 WAS 와 연동하기 위해 WAS 설정 화면의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Standalone Mode 의 경우 별도로 설치한 Session Server 를 기동하고 이를 WAS 와 연동하여 Session Clustering 을 적용하는 방식이다.\nFigure 24. WAS 의 Client 모드 Session Server 설정 Client 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nPrimary Server Host: Primary 로 지정할 Session Server 가 설치된 Node 를 선택하고 Session Server 를 지정한다.\nSecondary Server Host: Secondary 로 지정할 Session Server 가 설치된 Node 와 Session Server 를 지정한다. Session Server 가 2기 설치되어 있고, Primary Server Host 를 선택하면 나머지 Session Server 가 자동으로 Secondary 로 지정된다.\nExternal Stored Session: Session Clustering 적용과 함께 WAS 와 Session Server(2기)에서 관리되는 Session 정보를 Session Server(2기) 에서만 관리할 지 여부를 선택한다. 주로 Cloud, Container 환경에서 구성 시 해당 옵션을 사용한다.(Default false)\nShare session in applications: WAS에 여러 Application 이 배포되는 경우 해당 Application 간 Session 정보를 공유할 지 여부를 선택한다.(Default false)\nMulti Login Control: 중복 로그인 제어 기능의 사용여부를 선택한다.(Default false)\nClient 모드 Session Server 의 경우 설정을 적용할 WAS 마다 위와 같은 설정을 적용해 주어야 한다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nEmbedded 모드 설치와 WAS 연동 Session Server 의 기능을 Embedded 모드로 사용할 WAS 를 선택하여 설정화면을 연 뒤, 상단의 'Session' 탭을 선택한다.\n'Session' 탭 에서는 WAS 의 Session Clustering 적용을 위한 Session Server 연동 설정을 관리한다. 설정 항목의 'Session Clustering Enable' 항목을 'Yes' 로 변경하여 세부 설정이 표시되도록 한다. Embedded Mode 의 경우 WAS 에 Session Server 기능이 WAS 에 Embedded 형태로 WAS 가 기동한다.\nFigure 25. WAS 의 Embedded 모드 Session Server 설정 Embedded 모드 Session Server 를 기준으로, 설정 값은 다음과 같다.\nEmbedded Host: Embedded Mode 선택 시 현재 WAS 로 고정된다.\nEmbedded Port: Embedded Session Server 가 사용할 Port를 입력한다.\nSecondary Server Host: 다른 하나의 Embedded Session Server 를 사용할 WAS 를 지정한다. WAS 가 설치된 Node 를 선택 후 WAS 를 선택한다.\nSecondary Server Port: 다른 하나의 Embedded Session Server 가 사용할 Port 를 입력한다.\nMulti Login Contorl: 중복 로그인 제어 기능의 사용여부를 선택한다. (Default false)\n설정 값 입력, 선택을 마친 뒤 'Save' 버튼을 눌러 저장하면 Embedded Session 설정이 완료되며 Embedded Session 의 설정은 하나의 WAS 에서 진행하면 다른 하나의 WAS 에도 설정이 적용된다.\nSession 설정 변경 후 WAS를 재기동 해야한다.\nFigure 26. WAS 의 Embedded 모드 Session Server 설정의 완료 3.1.7. Server 간 연동 확인 앞서 Web Server - WAS 연동 과 Session Server 설치 및 연동 과정을 통해서 진행한 연동 설정을 확인하는 방법을 설명한다.\nLENA Manager 에서는 설치한 Server 의 구성을 간편하게 확인할 수 있도록 Topology View 를 제공하고 있다. 이 Topology 기능을 통해 연동이 정상적으로 확인 하는 방법과 Web Server, WAS 설치 시 기본 탑재되어 있는 LENA Sample 페이지를 통해 연동이 정상적으로 되어있는 지를 확인 할 수 있다.\nTopology 를 통한 확인 LENA Manager 상단의 'Topoolgy' 메뉴를 선택한다.\nFigure 27. Topology View Topology View 에서는 기본적으로 현재 등록되어 있는 Node 와 Node 별 설치한 Server 의 구성과 연동정보를 확인 할 수있다.\n위 그림에서는 Web Server 2기, WAS 2기 그리고 Session Server 2기가 설치되어 있으며 Web Server 와 WAS, WAS 와 Session Server 간 연동 설정이 연결선으로 표현되고 있으며 이를 통해 Server 간 연동이 정상적으로 되었는지 확인 할 수 있다.\nSample Page 호출을 통한 확인 LENA 의 Web Server 와 WAS 에는 기본 탑재된 Sample Page와 Sample Application 이 있다. 이는 초기 설치 후 정상 연동을 확인하는 용도로도 사용될 수 있다.\n먼저 Web Server 의 IP와 Port를 확인한 뒤 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.html\n그럼 아래와 같이 LENA 에서 제공하는 index.html 페이지가 호출되는 것을 확인 할 수 있으며 Web Server 가 정상호출 되는 것을 확인 할 수 있다.\nFigure 28. Web Server 호출 Test Sample Application 호출을 통한 확인 LENA WAS를 설치하면 LENA 에서 제공하는 기본 Application 이 탑재되어 있다. 이 Application의 index.jsp, session.jsp 를 호출하면 각각 WAS 호출 테스트, Session Clustering 기능 테스트를 수행할 수 있다.\nWeb Server 와 WAS 가 설치 초기상태로 설정되어 있다는 가정 하에 웹 브라우저에 아래와 같이 입력한다.\nhttp://[Web Server IP]:[Web Server Port]/index.jsp\nWeb Server 와 WAS 가 정상 연결이 되어있다면 Web Server 의 IP와 Port 로 호출한 위 요청은 WAS로 전달되어 index.jsp 페이지를 요청하게 되고 다음과 같이 LENA Sample Application 에서 제공하는 index.jsp 페이지가 호출된다.\nFigure 29. index.jsp 호출 Test index.jsp 페이지를 호출하면 현재 요청을 어떤 WAS 가 처리하는지를 Server ID, Service Port, JvmRout 값을 통해 확인할 수 있다.\n이번에는 동일한 Web Server IP, Port 로 아래와 같이 session.jsp 를 호출한다.\nhttp://[Web Server IP]:[Web Server Port]/session.jsp\nsession.jsp 를 호출하면 현재 요청에 대한 Session 정보가 추가로 확인된다. 호출을 반복함에 따라 Session Count 의 수가 증가하며 두번째 호출 부터 발급된 Session ID가 표시된다. Session Clustering 이 정상 적용 되었는지를 확인 하기 위해서는 Session ID가 발급된 상태에서 현재 요청을 처리중인 WAS 를 중지하고 웹 브라우저를 새로고침하여 요청을 다시 보냈을 때, 기동중인 다른 WAS 가 요청을 처리하지만 Session ID 가 그대로 유지되며 Session Count 가 증가하는 것으로 확인할 수 있다.\nFigure 30. session.jsp 호출 Test Version 1.3.2.0\nLast updated 2022-12-01 10:33:55 +0900 "},{"id":12,"href":"/","title":"LENA Docs","parent":"","content":" LG CNS의 LENA Web Application Server / Web Server 란? LENA는 클라우드 환경과 데이터 센터 운영 노하우가 결집되어 편리한 WAS 관리 기능, 안정성 및 고가용성을 위한 다양한 기능을 제공하며, 대규모 트랜잭션 처리에 적합하도록 설계되어 서버 장애에 효율적으로 대응합니다.\n\u003c!DOCTYPE html\u003e LENA 서비스 특징 Enterprise 요건 제공 표준 Java 웹 어플리케이션 구동 환경 제공 안정적 세션정보를 유지를 위한 세션 클러스터링 제공 서버 Startup/Restart 및 Deploy 성능 향상 CPU, 메모리 자원 사용 효율성 향상 Resource 암호화와 접근성 제어를 통한 Security 강화 운영 관점의 차별화 기능 제공 토폴로지 View를 통한 전사적 운영 가시성 확보 시간, URL, IP 기반의 실시간 서비스 제어 운영자 Action Tracing / Report 운영환경 Backup/Restore/History관리 지능형 장애 진단/대응 및 서비스 추적 URL, IP 기반의 서비스 추적 및 프로파일 분석 대시보드를 통한 시스템 성능 및 이상 징후 파악 실시간 장애 사전 진단 및 대응 장애 발생 실시간 알림 장애 원인 분석 및 Report 제공 Multi-Server관리 및 Centralized Operation 다중 서버(Group) 및 Application 관리 실시간 Multi-Server 클러스터링 \u0026amp; 동기화 중앙 서버를 통한 Auto Install \u0026amp; Patch Scalability강화(Local \u0026amp; Remote Clone) Cloud 특화 기능 제공 지속적인 서비스 운영과 IT 자원 최적화를 위한 향상된 확장성 제공 사용량 기반 과금으로 서비스 운영 비용 최적화 가변적인 클라우드 환경에서 안정적인 Load Balancing 제공 "},{"id":13,"href":"/tags/","title":"Tags","parent":"LENA Docs","content":""},{"id":14,"href":"/docs/1.3.1/1.3.1.2/userguide/","title":"User Guide","parent":"1.3.1.2","content":" \u003c!DOCTYPE html\u003e User Guide User Guide LENA Support\nlena-support@lgcns.com\nversion 1.3.1.2 Table of Contents 1. Overview 1.1. LENA는 무엇입니까? 1.2. LENA 특징 1.3. LENA 구성 요소 및 주요 개념 1.3.1. Management Module 1.3.2. Server Module 1.4. LENA 작동방식 1.5. Edition 별 제공 Spec 2. Log In/Out 2.1. Log In 2.2. Log Out 2.3. Theme 변경 3. Dashboard 4. Server 4.1. System 4.1.1. 목록 4.1.2. 등록 4.1.3. 수정 4.1.4. 삭제 4.2. Node 4.2.1. 목록 4.2.2. Install 4.2.3. Register 4.2.4. 수정 4.2.5. 삭제 4.2.6. Start 4.2.7. Stop 4.2.8. Change Java Home 4.3. WAS 4.3.1. 목록 4.3.2. Install 4.3.3. Clone 4.3.4. Register 4.3.5. 수정 4.3.6. 삭제 4.3.7. Start/Stop 4.3.8. 설정 정보 관리 4.3.9. Resource 관리 4.3.10. Application 배포 4.4. Web Server 4.4.1. 목록 4.4.2. Install 4.4.3. Clone 4.4.4. Register 4.4.5. 수정 4.4.6. 삭제 4.4.7. Start/Stop 4.4.8. 설정 정보 관리 4.5. Session Server 4.5.1. 목록 4.5.2. Install 4.5.3. Register 4.5.4. 수정 4.5.5. 삭제 4.5.6. Start/Stop 4.5.7. 설정 정보 관리 5. Cluster 5.1. Server Cluster 5.1.1. Server Cluster 목록 5.1.2. Server Cluster 생성 5.1.3. Server Cluster 삭제 5.1.4. Server Cluster 상세 5.1.5. Scaling 6. Resource 6.1. Database 6.1.1. Database 등록 6.1.2. Database 수정 6.2. DataSource 6.2.1. DataSource 등록 6.2.2. DataSource 수정 6.2.3. DataSource 삭제 6.2.4. JDBC Driver Upload 6.2.5. DataSource Import 6.3. JTA 6.3.1. JTA 등록 6.3.2. JTA 수정 6.3.3. JTA 삭제 6.3.4. JTA Import 6.4. JMS 6.4.1. JMS 등록 6.4.2. JMS 수정 6.4.3. JMS 삭제 6.4.4. JMS Import 6.5. Application 6.5.1. Application 등록 6.5.2. Application 수정 6.5.3. Application 삭제 6.5.4. Application Upload 7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 7.1.2. 현황 모니터링 상세 7.1.3. 모니터링 설정 7.2. Analysis Dashboard 7.2.1. Performance Map 7.2.2. Analysis Summary 7.2.3. Instance Map 7.3. Event Dashboard 7.3.1. Event 종류 7.3.2. Event Dashboard를 통한 Event 관리 7.4. 통계 7.4.1. 연간 진단/대응 통계 7.4.2. 리포트 7.4.3. 알림 7.5. 진단 및 대응 7.5.1. 진단/대응 Rule 설정 7.5.2. Server Rule 설정 7.6. Trace 7.6.1. Session Trace 7.6.2. Event Trace 7.6.3. Trace Setting 8. Topology 8.1. 화면 구성 8.2. 토폴로지 영역 상세 8.2.1. Control [Edit: OFF] 8.2.2. Control [Edit: ON] 8.3. 서비스 트레이싱 영역 상세 9. Admin 9.1. IAM 9.1.1. Users (사용자 관리) 9.1.2. Auths (권한관리) 9.1.3. User-Auth Mapping (사용자 권한 관리) 9.1.4. Menu-Auth Mapping (메뉴 권한 관리) 9.2. License 9.2.1. License 목록 9.2.2. License 상세 9.2.3. License 업로드 / 복구 9.2.4. License 관련 시스템 현황 체크 9.2.5. Host기반 License 체크 설정 9.2.6. 시간 정보 조회 9.3. License(Scaling) 9.3.1. Manager License 9.3.2. License 목록 9.3.3. License 상세 9.3.4. License 업로드 / 복구 9.3.5. License 관련 시스템 현황 체크 9.3.6. Host기반 License 체크 설정 9.3.7. 시간 정보 조회 9.4. Security (서비스 제어) 9.4.1. Rule Setting (Rule 설정) 9.4.2. Rule Applying (Rule 적용) 9.4.3. Service Control Log (Rule 적용결과 조회) 9.5. Patch 9.5.1. Overview 9.5.2. WAS 9.5.3. Session Server 9.6. Preferences 9.6.1. Action Trace 9.6.2. Documentation 9.6.3. Manager Environment 9.6.4. Manager HA 10. Appendix 10.1. LENA 시스템 요구사항 10.2. Manager 지원 브라우저 10.3. 지원 Spec별 버전 10.4. Manager DB파일 백업 10.5. Manager 의 내부이력 삭제 10.6. Manager 의 admin 패스워드 초기화 10.7. LENA 설치 권장 OS파라미터(CentOS기준) 10.8. LENA 주기적으로 증가하는 파일 10.9. Patch CLI (Command Line Interface) 10.9.1. 패치파일 업로드 및 압축해제 10.9.2. Patch 10.9.3. History 10.9.4. Restore 10.9.5. Version 확인 10.10. Session Server 상세 10.10.1. Session Server Standalone 모드 10.10.2. Session Server Embedded 모드 1. Overview 1.1. LENA는 무엇입니까? LENA는 Enterprise 환경에서 JAVA J2EE Web Application을 서비스하는데 필요한 모든 구성 요소가 포함된 웹 미들웨어 솔루션이다.\nLENA는 실질적인 웹 서비스를 제공하는 Server 제품들과 이를 통합적으로 관리하기 위한 Web UI 기반의 Manager Console로 이루어져있다. 사용자는 Manager Console을 통해 Server 설치부터 Parameter 설정 및 각 제품간 연동 등을 손쉽게 수행할 수 있으며, LENA만의 사용자 친화적인 UX/UI 설계로 웹 미들웨어 솔루션 사용에 익숙하지 않은 사용자라도 빠르게 사용법을 습득하여 웹 미들웨어 관련 지식을 갖출 수 있다.\nLENA는 데이터 센터/클라우드 환경에서 웹 미들웨어 운영자들로부터 다년간의 운영 노하우를 집약하여 다양한 편의 기능을 제공한다. 이와 함께 대규모 트랜잭션 안정적으로 처리하고 서비스 장애를 최소화 할 수 있도록 고가용성, 내결함성을 보완한 Clustering, 장애 진단/대응 기능을 제공한다.\n다음 절은 LENA의 특징들에 대해 더 상세히 설명한다.\n1.2. LENA 특징 Enterprise 요건 제공 LENA Web Application Server EE (J2EE Edition)는 Enterprise Web Application을 실행시키는데 필요한 EJB, JTA/XA, JMS, JAX-WS 등 J2EE Spec을 지원한다. 또한 타사 WAS에 비해 기동성능, Application Deploy성능의 향상을 이루었고, CPU/Memory 등 자원 사용 효율성 역시 향상되었다. 고가용성을 위해 필수인 Session Clustering을 위해 Session Server를 Enterprise Edition에서 기본으로 제공한다.\nOpensource 호환성 보장 LENA Web Server, LENA WAS는 Opensource Base로 구현되어 완벽한 Opensource 호환성을 보장한다. Opensource 기반으로 작성된 Web Application이 별도의 수정 없이 LENA에 적용되므로 전환 Effort를 대폭 절감할 수 있다. 또한 Library 및 설정 관련하여 표준 기술을 사용하므로 Vendor 종속성을 해결하여 사용자의 IT Ownership을 강화할 수 있다.\n지능형 장애 진단/대응 및 서비스 추적 Thread Pool Full / Hang / Out of memory 등 대표적인 장애 상황들에 대해 사전 정의된 Rule 기반으로 진단을 수행하여 적절한 조치를 수행할 수 있다. 실시간으로 수집되는 Monitoring 데이터를 기반으로 분석하여 Server가 실제 장애로 이어지기 전에 Fake Page 우회 혹은 강제 재기동 등을 통해 장애 상황을 방지하거나 장애로 이어지더라도 장애 시간을 최소화할 수 있다. 이와 동시에 관련된 Dump와 Report를 제공하여 원인 분석을 수행할 수 있게 한다.\nMulti-Server 관리 및 Centralized Operation 여러 LENA Web Server와 LENA WAS를 하나의 Cluster로 묶을 수 있어 Single Operation으로 여러 Server를 동시에 제어할 수 있다. 일관적인 설정 동기화와 함께 Graceful Restart혹은 Rolling Restart를 통해 안정적인 반영이 가능하다. 또한 Cluster로 묶이지 않은 Server들에 대해서도 Multi Control을 지원한다.\n운영 관점의 차별화 기능 제공 웹 미들웨어 솔루션을 운영하기에 편리한 다양한 편의 기능을 제공한다. Template 기반의 간단하고 빠른 Server설치와 Server 복제 기능을 이용하여 원하는 구성 Set을 짧은 시간 안에 구축이 가능하다. Topology View를 통해 Server 모듈 간 구성 및 연동 정보를 한눈에 확인할 수 있어 가시성을 향상할 수 있다. Dashboard를 통해 운영 중인 시스템의 Event와 성능 현황 등을 확인할 수 있다. 그 밖에 Multi Account 관리를 통해 메뉴/자원의 접근 권한 설정이 가능하며, 운영자 Action Tracing, 설정 변경 정보 History 추적 및 Restore 기능을 제공한다.\n1.3. LENA 구성 요소 및 주요 개념 LENA는 Binary Package를 통해 제공이 되며 그 안에 필요한 모든 구성 요소를 포함하고 있다. 구성 요소는 크게 두 범주로 나누어진다.\nLENA를 운영 관리하기 위한 Management Module로 LENA Manager Console과 LENA Node Agent가 포함된다.\n실질적인 Web Service를 담당하는 Server Module로 LENA Web Server, LENA WAS(Web Application Server), LENA Session Server를 포함된다.\n다음은 각 구성 요소 별 상세 설명과 함께 이에 따른 주요 개념을 다룬다.\n1.3.1. Management Module LENA Manager LENA Manager는 Web UI를 통해 LENA의 모든 자원/기능을 설정 및 제어할 수 있도록 설계된 Web Application이다. LENA Package에 준비된 스크립트를 통해 설치 및 기동할 수 있다. LENA Manager를 통해 Server 설치/관리를 수행하려면 Node Agent 및 Advertiser와의 연동을 구성해야 한다.\n다음은 LENA Manager에서 제공하는 대표적인 기능과 개념에 대해 설명한다. 아래에 설명되지 않은 상세 사항들에 대해서는 “운영자가이드”를 참조한다.\nDashboard\nLENA Node, Server의 자원 현황과 Event 확인\nServer\nLENA Node의 등록, Web Server, WAS, Session Server 를 설치, 설정 관리 및 기동/중지 제어\nSystem\nLENA Node, Server가 관리되는 최소 단위. 하나의 System하위에는 여러 Node를 등록할 수 있으나, 하나의 Node는 여러 System에 중복 등록이 불가하다.\nNode\nNode Agent와 1:1로 대응되는 개념. Manager에서 원격지에 있는 Server에 명령을 수행하기 위해선 Node Agent를 통해야 한다.\nCluster\nMulti-Server 관리. 하나의 System 내의 Server들에 대해서만 Cluster 구성이 가능하며, 하나의 Server는 여러 Cluster에 속할 수 없다.\nServer Cluster\n여러 LENA Web Server, WAS를 하나의 묶음으로 관리할 수 있다. 설정 동기화, 통합 재 기동 등의 다양한 편의 기능 제공.\nResource\nLENA에서 제공하는 Module이 아니지만 LENA Server와 밀접하게 연동되는 자원에 대해 명세를 정의함으로써 Resource로 사용한다. Resource는 LENA WAS별로 Local 설정할 수 있지만, Resource 메뉴를 통해 Global 설정하여 WAS에서 공통 Import하는 방식을 통해 중복된 작업을 피할 수 있다.\nDatabase\nDBMS의 IP, Port, Driver 등 물리적 명세를 정의. 하나의 DBMS와 1:1로 대응된다.\nDatasource\nDB Connection Pool을 LENA WAS에서 구성하기 위해 JNDI Name, Url, User ID/Password등을 지정한다. 하나의Database하위에 여러 Datasource를 구성할 수 있다.\nApplication\nLENA WAS를 통해 실행할 Application의 위치와 Context Path를 지정한다.\nTopology\nLENA Manager상에 설치되고 연동 구성되어 있는 LENA Web Server, LENA WAS, LENA Session Server 등의 구성 현황을 Topology Diagram 형식으로 표현한다. 이 기능을 통해 Server의 간단한 설치와 기동/중지 제어도 가능하다.\nDiagnostics\nLENA Node와 Server에 대한 자원 모니터링과 그에 연계된 다양한 기능 탑재.\nLENA Node Agent LENA Node Agent는 LENA Manager에 Node를 등록할 때 Node와 1:1로 대응되며 LENA Package에 기본적으로 설치되어 있으며 준비된 스크립트를 통해 기동할 수 있다. 주요 역할은 LENA Manager를 통해 Node 하위의 Server에 명령을 수행할 때 Node Agent가 이를 담당하며 모니터링 및 상태 데이터를 LENA Manager로 전송하는 기능도 수행한다. 물리 서버 당 1개의 Node Agent를 설치하는 것이 기본이지만, 필요에 따라 여러 개의 Node Agent를 구성할 수 있다. LENA Web Server, LENA WAS, LENA Session Server는 LENA Node 하위에 구성되며, LENA Node는 하나의 System 하위에 구성된다.\n1.3.2. Server Module LENA Web Server LENA Web Server는 정적 컨텐츠를 전송할 수 있으며 LENA WAS와 Reverse Proxy 형태로 연동하여 LENA WAS가 제공하는 Web Application 서비스의 front-end 역할을 수행한다. 그 외 선택적으로 다양한 추가 기능을 이용할 수 있는데, Domain/URI 기반 분기 및 Load Balancing 기능과 보안 레이어(SSL)를 제공하는 것이 대표적이다.\nLENA WAS (Web Application Server) LENA WAS는 Java Web Application을 실행하여 Web Application 서비스를 제공한다. DB Connection Pool을 이용하기 위한 Datasource 연동 기능과 Session Clustering을 이용하기 위한 Session Server 연동 기능을 포함하고 있다. 다음은 LENA WAS의 두 가지 Type을 설명한다.\nLENA WAS SE (Standard Edition)\nJava Class 파일을 처리하기 위한 Servlet Engine과 JSP 파일을 처리하기 위한 JSP Engine으로만 구성되어 있으며 WAR Type의 Web Application만 실행할 수 있다. LENA WAS EE에 비해 상대적으로 가볍고 빠르다는 장점이 있다.\nLENA WAS EE (Enterprise Edition)\nLENA WAS SE가 제공하는 Engine 외에도 EJB Engine, JMS Engine 등 J2EE Spec을 지원하며, WAR/EJB/EAR Type의 Application을 실행할 수 있다. 또한 2 Phase Commit을 위한 XA Datasource를 지원한다.\nLENA WAS는 내부적으로 Advertiser Module을 탑재하고 있으며 이는 LENA WAS의 JVM 내부 모니터링 결과를 JMX를 통해 수집하여 LENA Manager로 전달한다.\nLENA Session Server LENA Session Server는 여러 LENA WAS 간의 Session을 공유하여 WAS 다중화를 통한 고 가용성을 보장하기 위해 제공된다. LENA Enterprise Edition을 사용할 경우 기본으로 제공되며 2개의 LENA Session Server를 Active-Active Clustering (양방향 Active-Standby)을 통해 Session Clustering을 구성할 수 있다. LENA Session Server를 사용하기 위해 Application에서 별도의 설정을 할 필요가 없이 LENA Manager에서 간단한 설정만으로 구현이 가능하다.\n단, Session-clustering을 하기 위해선 HTTP Session에 저장되는 모든 객체는 직렬화(Serializable)되어야한다.\n1.4. LENA 작동방식 Manager에 등록된 Node에는 Node Agent, Application Server에는 Advertiser가 설치되어 있다.\n운영자는 Manager의 UI를 통해 각 Node Agent에 Server에 대한 제어요청(예: Start, Stop, Reload, Dump, 설정변경 등)을 보내고, Node Agent가 이를 수신하여 제어를 실행한다.\nNode Agent, Advertiser는 주기적으로 모니터링 데이터를 Manager로 전송하고, 운영자는 Monitoring Dashboard와 같은 Manager의 UI를 통해서 각 서버의 자원 현황을 확인할 수 있다. Session Server의 경우 자기 자신의 모니터링 데이터를 직접 Manager에 전달한다.\nFigure 1. LENA Mechanism Table 1. LENA 구성 요소 별 설명 구성요소 설명 Manager\nAgent를 통한 Server제어와 모니터링 기능 제공\nRepository\nManager 운영을 위한 File/DB 탑재\nNode\nNode Agent를 탑재. Node하위에 Server Module이 설치됨\nNode Agent\n- Server 설치/복제/패치\n- Server 기동/중지 제어\n- Server 설정 관리\n- Node, Web Server, WAS, Session Server 상태 정보\n- Node, Web Server 자원 모니터링 데이터 제공\nAdvertiser\nWAS 자원 모니터링 데이터 제공\nWAS\nJava Web Application 서비스 제공\nWeb Server\nWAS와 Reverse Proxy 형태로 연동하여 Web 서비스의 Front-end 역할\nSession Server\n- WAS와 Session Clustering 연동하여 고가용성 구현\n- Session Server 모니터링 데이터 제공\n1.5. Edition 별 제공 Spec LENA 는 Application Server 의 기능 제공 범위에 따라 Standard와 Enterprise Edition으로 구분된다. Standard Edition이 Web Application 중심의 Spec을 지원하는 반면, Enterprise Edition은 JTA, JMS, EJB등 J2EE Spec을 지원하며 Session Clustering을 제공한다. 각 Edition별 제공되는 기능 또는 스펙은 아래와 같다.\nTable 2. Edition별 제공 기능과 스펙 기능/Spec (LENA-Manager 기준) Standard Enterprise Server\nWeb Server\n●\n●\nWAS (SE)\n●\n●\nWAS (EE)\n-\n●\nSession Server\n-\n●\nResource\nDatabase\n●\n●\nDataSource (일반)\n●\n●\nDataSource (XA)\n-\n●\nJTA\n-\n●\nJMS\n-\n●\nApplication (WAR)\n●\n●\nApplication (EJB, EAR)\n-\n●\nCluster\n-\n●\nTopology\n●\n●\nDiagnostics\n●\n●\nAdmin\nUser/Auth\n●\n●\nSecurity\n●\n●\nPatch\n●\n●\n(범례 : ● 제공됨, - 제공되지 않음)\n2. Log In/Out Manager에 로그인과 로그아웃하는 기능을 제공한다.\n2.1. Log In Figure 2. Manager 접속화면 로그인 페이지 하단 좌측에는 설치된 버전이, 우측에는 기술지원 연락처가 기술되어 있다.\n로그인 시도시, 7번 이상의 비밀번호 오류가 발생하는 경우 해당 계정으로 로그인을 할 수 없다. 이런 경우 console을 통해 패스워드를 초기화 해야한다. (자세한 내용은 Appendix에서 'Manager 의 admin 패스워드 초기화' 항목을 참고한다.)\n2.2. Log Out Manager 상단 우측의 문 아이콘 을 이용하여 로그아웃을 할 수 있다.\n2.3. Theme 변경 Manager 상단 우측의 수레바퀴 아이콘 메뉴의 Dark Theme 메뉴를 통해 테마를 설정 할 수 있다. 라이트 모드와 다크 모드 두 가지 중에 선택이 가능하다.\n3. Dashboard Manager에서 관리되는 시스템 별 구성 정보, 자원 모니터링, 이벤트, 라이센스 등의 정보를 요약하여 제공한다.\nFigure 3. Dashboard 화면 좌측의 시스템 목록에는 로그인 한 사용자에게 권한이 있는 시스템 목록이 제공된다. All은 권한이 있는 모든 시스템의 정보를 통합하여 보여준다.\nTable 3. Dashboard 항목 항목 설명 비고 INVENTORY\nNode\nSystem 에 포함된 Node의 수\n범례: Node의 타입 별 갯수\nWeb type : Web Server를 설치 할 수 있는 노드 수\nWAS type : WAS, Session Server를 설치 할 수 있는 노드 수\nServer\nSystem에 포함된 Server 타입 별 갯수\nNode Status\nSystem에 포함된 Node의 자원(CPU, Memory, DISK) 사용률 상태\n범례\nHigh / Middle / Low\nNot working : 정지 상태의 Node(Agent) 갯수\nServer Status\nSystem에 포함된 Server의 자원 사용률 상태\nWeb : CPU, Memory, Thread 체크\nWAS : Heap Memory, Thread Pool 체크\nSession : Heap Memory 체크\n범례\nHigh / Middle / Low\nNot working : 정지 또는 Hang 상태인 서버의 갯수\nSERVER CLUSTER\nServer Cluster\nserver cluster 수\nMember\nserver cluster에 속해 있는 타입별 서버 총 수\nCHECK\nModified Server\nSystem에 포함된 Server중 재기동이 필요한 서버 존재여부\nOut of Cluster Sync\nsync가 필요한 Server Cluster 존재여부\nDiagnostic Report\n진단 프로세스 수행 후 발행된 레포트 갯수\nEVENT\nError\nSystem에 포함된 Server에서 발생된 Error 갯수\nStuck Thread\nSystem에 포함된 Server에서 발생된 Stuck Thread 갯수\nOOM\nSystem에 포함된 Server에서 발생된 Out Of Memory 갯수\nFull GC\nSystem에 포함된 Server에서 발생된 Full GC 갯수\nRESOURCE\nDB Resource\nRESOURCE메뉴에서 등록되어 관리되는 Database와 Datasource 수\nDatasource의 범례\nUsed : WAS에서 사용 중인 Datasource 수\nNot Used : WAS에서 미사용 중인 Datasource 수\nLICENSE\nLicense Status\n노드들의 라이선스 상태 (Trial 라이선스의 유효일 수 또는 상용라이선스의 유효일 수(종료일자기준 15일 전 부터) 표시)\n4. Server Node 및 WAS, Web Server, Session Server를 관리하기 위한 화면을 제공한다.\n특정 System 내의 Node 및 각 Server별 개수를 확인하고, 실시간으로 Node 및 Server 상태를 통합적으로 관리 할 수 있다.\n4.1. System System은 다수의 Server를 가지는 논리적인 그룹이다. \"DefaultSystem\"을 기본적으로 제공하며 사용자는 System을 생성, 수정, 삭제 할 수 있다.\n4.1.1. 목록 System 목록은 화면 좌측에 트리 형태로 제공된다.\nFigure 4. System List 4.1.2. 등록 등록(+) 버튼 을 클릭하여 목록에 \"Create System\" 을 생성한다.\n생성할 시스템 명을 입력한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n현재 로그인한 사용자의 권한이 해당 System에 매핑된다. 즉, 로그인한 사용자와 동일한 권한을 가진 사용자에게만 해당 System이 조회된다. (Node, Server, Resource 동일하게 적용됨)\n4.1.3. 수정 수정할 System을 선택한다.\n수정(연필) 버튼 을 클릭하여 선택한 System의 이름을 변경한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n4.1.4. 삭제 삭제할 System을 선택한다.\n삭제(-) 버튼 을 클릭한다.\nOK 버튼 을 클릭하여 저장한다.\n하위에 Node가 존재하는 System은 삭제할 수 없다. 즉, 빈 System만 삭제 가능하다.\n4.2. Node Node는 다수의 WAS, Web Server, Session Server를 가지는 물리적인 Server이다.\n4.2.1. 목록 Node List를 통하여 각 Node를 관리할 수 있다.\nFigure 5. Node List Node의 속성은 아래와 같다.\nTable 4. Node 속성 항목(*는 필수값) 설명 비고 Status\nNode의 현재상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nName(*)\nNode의 이름\nType(*)\nNode의 Type\n다음과 같은 타입을 제공함\nAll: 모든 종류의 Server 설치가능\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nAddress(*)\nNode의 IP주소\nPort(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nManager Address(*)\nManager IP 주소\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 Node정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Node정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 JAVA Home 설정과 Start를 수행할 수 있는 메뉴 제공\n4.2.2. Install Install 버튼 을 클릭하여 Node정보 등록을 준비한다.\nNode의 속성 값을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nTable 5. Install 시 설정하는 속성 항목(*는 필수값) 설명 비고 Node Type\nNode의 Type\n다음과 같은 타입을 제공함\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nNode Name(*)\nNode의 이름\nNode Address(*)\nNode의 IP주소\nNode Port(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nUser(*)\nNode 실행 사용자 계정\nNode Type이 Application인 경우, root 계정으로 실행 할 수 없음. Node Type이 Web인 경우 Web Server의 Port를 1024이하를 사용해야하는 경우에만 root 사용.\nPassword(*)\nNode 실행 사용자 계정 비밀번호\nSSH Port\n해당 Server에 접속할 SSH 포트\nLENA Home\nNode Agent가 설치 될 위치\nJAVA Installation\nJAVA Home\n설치된 JAVA 경로\nInstall 기능은 Linux 환경에서만 지원한다.\n4.2.3. Register Register 버튼 을 클릭하여 Node정보를 등록 가능한 상태로 변경한다.\nNode의 Name, Type, Address, Port, Manager Address(기본값이 제공됨) 속성을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nManager IP는 Node의 host IP로 자동 입력된다.\n네트워크 구성에 따라 자동 입력된 IP가 실제 네트워크 IP와 다른 경우가 발생할 수 있다.\n이때는 Manager IP를 수정하여 입력해야 한다.\n4.2.4. 수정 수정(연필) 버튼 을 클릭하여 Node정보를 수정 가능한 상태로 변경한다.\nNode의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n포트 정책이나 방화벽 정책 변경 등에 의해 Node의 Address나 Port를 변경해야 하는 경우, agent.conf의 설정정보를 수정 후 Node Agent를 재기동한다.\n이 때 변경된 정보를 Manager에서도 알 수 있도록 Node의 Address와 Port정보를 수정하여 입력한다.\n수정된 정보를 저장할 때 'Occured Read Timeout' 메세지가 발생하면 아래의 경우를 확인한다.\nNode Agent가 아닌 다른 곳에서 포트를 사용하는 경우\nNode Agent가 Hang이 걸린 경우\nNetwork 문제가 있는 경우\n4.2.5. 삭제 휴지통 버튼 을 클릭하여 Node정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nNode 하위에 Server가 등록되어 있는 경우 해당 Node를 삭제할 수 없다.\nUninstall은 Linux 환경에서만 지원되고, 삭제할 노드를 한 개만 선택한 경우 가능하다.\n4.2.6. Start 정지 상태인 노드를 기동 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Start 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Start 버튼 을 누른다.\n4.2.7. Stop 기동 상태인 노드를 정지 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Stop 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Stop 버튼 을 누른다.\n4.2.8. Change Java Home Node와 Node에 설치된 Server들의 JAVA Home 경로를 수정할 수 있다.\nJAVA Home Path를 수정한다.\nNode Java Home Path : Node Java Home Path를 편집한다.\nServer Java Home Path : 선택한 서버들의 JAVA Home 경로를 편집한다. (Web Node에서는 지원하지 않음)\nSave 버튼 을 누른다.\n4.3. WAS WAS를 관리하기 위한 화면을 제공한다. Node에 설치한 Server의 등록, 수정, 삭제를 수행하며, 그 외 Server의 설치, 제거 및 복제를 할 수 있다.\n4.3.1. 목록 WAS List를 통하여 각 WAS를 관리할 수 있다.\nFigure 6. Web Application Server List WAS의 속성은 아래와 같다.\nTable 6. WAS 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nType\nServer의 유형\n다음과 같은 타입을 제공함\nStandard\nEnterprise/EE\nEnterprise/SE\nHTTP Port\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.3.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer Type, Server ID 등을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.3. Clone Clone 버튼 을 클릭하여 Server의 복제를 준비한다.\nNode List에서 복제할 Server를 선택한다. 이때 Clone Server ID, Clone Service Port가 자동으로 입력된다.\nClone Server ID와 Service Port를 원하는 값으로 수정한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버에 배포되어 있는 어플리케이션 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, register 기능을 이용하여 기존에 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\nSystem \u0026gt; Application Server List Tab에서도 설치가 가능하다. 단, Node List에서 설치할 Node를 선택해야 한다.\n4.3.5. 수정 수정(연필) 버튼 을 클릭하여 Server정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.3.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nWAS를 삭제할 경우 서비스 제어(ADMIN \u0026gt; Security \u0026gt; Rule Applying 메뉴)의 적용 대상 목록에서 해당 Server는 삭제된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.3.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 WAS 가 서비스중인 모든 작업이 끝난 후 종료된다.\nGeneral 탭의 Shutdown Timeout 시간 이후에도 작업이 끝나지 않은경우 강제로 중지된다.\nServer를 시작하면 로그파일을 볼 수 있는 팝업이 실행된다. 팝업을 통해 Server의 정상 기동 여부를 확인할 수 있다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\n팝업 화면에서 Start / Stop 명령 이후에는 팝업을 닫더라도 요청한 명령이 중지되지 않는다. Forced Stop/Restart Server 목록 가장 우측의 추가 기능(\u0026#8230;\u0026#8203;) 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n강제 중지, 재시작을 수행하면 현재 서비스중인 모든 작업이 즉시 중지되므로 주의해야한다. 4.3.8. 설정 정보 관리 Server의 설정 정보를 변경하는 기능을 제공한다. Server 목록에서 변경하려는 Server 명을 선택한다. Standard Edition의 경우 General, Session, Logging, Web Config, Environment, Properties, Config Tree, History탭을 제공하며, 설정 정보 수정 시 백업을 하여 복원이 가능하다. Enterprise Edition는 Container 탭을 추가적으로 제공한다.\nServer 설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nGeneral Server의 일반적인 설정 정보를 관리한다. Port정보, Connector정보, Stuck Thread 관련 설정을 수정 및 저장 할 수 있다.\n설정 정보의 상세내용은 아래와 같다.\nServer Info\nServer의 주요 설정 값을 나타낸다.\nTable 7. 주요 설정 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nHTTP 포트번호 - 71 (자동계산)\nHTTPS Port\nHTTPS 포트번호\nHTTP 포트번호 + 363 (자동계산)\nShutdown Port\nShutdown 명령 문자열을 받기 위한 포트\nHTTP 포트번호 - 75 (자동계산)\nInstall Path\nServer 설치 경로\nJava Home Path\nJava Home 경로\nMinimum Heap Size(m)(*)\nWAS에 설정할 최소 Heap 사이즈(Megabyte)\nDefault : 512\nMaximum Heap Size(m)(*)\nWAS에 설정할 최대 Heap 사이즈(Megabyte)\nDefault : 512\nApplication Base\nApplication의 Base 디렉토리\nServer가 stop 상태이거나, appBase에 deploy이된 Application이 없을 경우에만 수정이 가능하다.\nJvmRoute\nServer의 Unique한 Identifier\nSystem Property에 설정되어 있는 값을 우선함.\n없을 경우 server.xml의 값을 사용\n(Hostname + Port의 조합으로 생성됨)\nAuto Deploy\n어플리케이션 변경 시 자동 Deploy 여부\nDefault : false\nApplication별 DocBase에 war 파일을 재 업로드 할 경우 감지됨\nDeploy On Startup\nWAS 기동 시 Application Deploy 여부\nDefault : true\nShutdown Timeout\nServer 종료 시 실행중인 작업이 존재할 경우 대기하는 시간(초)\nDefault : 86400\nConnector\nServer에서 사용하는 Connector 설정 값을 나타낸다.\nTable 8. 주요 설정 항목(*는 필수값) 설명 기본값 Protocol Type\n프로토콜 유형\nHTTP/1.1, AJP/1.3\nport\n포트번호\nredirect Port\nRedirect 포트\nHTTPS Port와 동일\nconnection Timeout\n커넥션 타임아웃(ms)\nHTTP : 20000,\nAJP : 60000\nURIEncoding\nURI byte를 변환하기 위한 Character Encoding\nUTF-8\nserver\nHttp Response에 대한 Server Header를 재정의하여 Server 정보 노출을 방지\nServer\nmaxThreads\nConnector가 생성할 수 있는 최대 Thread 수\n256\nminSpareThreads\nConnector생성시 확보하는 최소 Thread 수\n10\nmaxQueueSize\nRequest Queue 의 최대길이\nInteger.MAX_VALUE\npacketSize\nAJP packet 크기\n8192\nenableLookups\nDNS LookUp 사용여부. 사용하지 않을 시 성능에 유리하다\nfalse\ncompression\nHTTP message Body 압축여부(off, on:Text만, force:전체)\noff\ntcpNoDelay\nTCP 패킷을 Delay 없이 전송\ntrue\nStuck Thread\nStuck Thread의 설정값을 나타낸다.\nTable 9. 주요 설정 항목(*는 필수값) 설명 비고 Threshold(s)\nStuck Thread를 식별하기 위한 최소 시간(s)\nInterrupt Thread Threshold\nStuck Thread를 중단하기 위한 최소 시간(s)\nStuck Thread 판별 이후 n초 뒤 종료시키려면 \"Threshold+n\"값 입력\nService Point\nEndpoint Address의 설정값을 나타낸다.\nTable 10. 주요 설정 항목(*는 필수값) 설명 비고 Endpoint Address\nWAS의 대표 서비스 도메인 주소\nSession Session Cluster 기능을 사용할지 여부를 설정한다.\nEmbedded Session Server 모드\nWAS에 Session Server 모듈을 Embedded하여 동작하는 경우 선택한다. Mode 항목에서 Embedded Session Server Mode를 선택하게 되면, Server 관리 화면에서 Session Server 리스트에 Embedded Type으로 표시된다.\nTable 11. 주요 설정 항목(*는 필수값) 설명 기본값 Embedded Host\n해당 WAS를 의미\n자기 자신의 IP (변경불가)\nEmbedded Port\n해당 WAS에서 사용할 Embedded Session Server 용 port 정보\nSecondary Server Host\nSlave Server 호스트 IP\nSecondary Server Port\nSlave Server Port\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nClient 모드\n별도의 Session Server를 연결하여 동작하는 방식이다. Mode 항목에서 Client Mode를 선택한다.\nClient 모드에서 Primary Server와 Secondary Server 설정 시 사전에 Session Server가 구성되어 있어야한다.\nTable 12. 주요 설정 항목(*는 필수값) 설명 기본값 Primary Server Host\nPrimary Session Server 호스트\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nPrimary Server Port\nPrimary Session Server 포트\nSecondary Server Host\nSecondary Session Server 호스트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nSecondary Server Port\nSecondary Session Server 포트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nExternal Stored Session\nSession객체를 로컬 WAS에 저장하지 않고 Session Server에 저장\nfalse\nShare session in applications\nMulti Application간 Session객체를 공유\nClient Mode에서만 설정가능\nfalse\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nSession 기능은 Enterprise Edition에서 제공되는 기능이다.\nLogging Server의 Logging 설정 정보를 관리한다.\nLog Home\nTable 13. 주요 설정 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nAccess Log\nRequest에 대한 Access 로그의 설정값을 나타낸다.\nTable 14. 주요 설정 항목(*는 필수값) 설명 비고 Directory\nLog 디렉토리\n절대경로 또는 $CATALINA_BASE의 상대경로로 지정할 수 있음\nPattern\nLogging field의 Layout\nPrefix\nLog 파일의 prefix\nSuffix\nLog 파일의 suffix\nHandler\nHandler 설정 정보의 상세내용은 아래와 같다.\nTable 15. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nHandler의 클래스명\nType\nHandler의 유형\nConsoleHandler와 FileHandler 선택 가능\nLevel\nHandler의 로그레벨\nFilter\njava.util.logging.Filter의 구현체\nFormatter\njava.util.logging.Formatter의 구현체\nDefault : java.util.logging.SimpleFormatter\nEncoding\nHandler의 Character Encoding\nRoot\nRoot Logger여부\nLogger\nLogger 설정 정보의 상세 내용은 아래와 같다.\nTable 16. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nLogger 이름 지정\nLevel(*)\nLogger의 로그레벨\nHandler(*)\nLogger가 어떠한 Handler를 사용할지 선택\nConsoleHandler가 기본 선택\nServer의 로그설정 파일은 $CATALINA_HOME($CATALINA_BASE)/conf/logging.properties 이다.\nWeb Config Global web.xml의 설정을 관리하는 화면을 제공한다. 필요 항목을 수정한 후 Save 버튼 을 클릭하여 저장한다.\n설정 정보의 상세내용은 아래와 같다.\nDefault Servlet\nTable 17. 주요 설정 항목(*는 필수값) 설명 기본값 Listings\nWelcome파일이 없을 때, Directory Listing을 허용할지 여부\nfalse\nInput\nInput buffer size in bytes\n2048\nOutput\nOutput buffer size in bytes\n2048\nReadonly\nPUT, DELETE 등의 HTTP메소드를 허용하지 않음\ntrue\nFileEncoding\nFile Encoding\nplatform default\nShowServerInfo\nDirectory Listing이 허용되어 있을 때 Server 정보를 표시할지 여부\ntrue\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n1 (음수: disable / 0: 가장 마지막)\nJSP Engine\nTable 18. 주요 설정 항목(*는 필수값) 설명 기본값 CheckInterval\nDevelopment가 false일 때 jsp의 변경을 검사하여 재컴파일할지 확인하는 주기(s)\n0 (0: 비활성화 / 양수: 해당 주기로 활성화)\nDevelopment\nDevelopment 여부. Development가 true인 경우에는 modificationTestInterval 값을 주기로 하여 변경을 검사함\ntrue (0: 매 access마다 점검)\nGenStringAsCharArray\nString생성을 Char Array로 할지 여부\nfalse\nModificationTestInterval\nDevelopment가 true일 경우에 동작하는 jsp 변경 검사 주기\n4\nTrimSpaces\n응답에서 쓸데 없는 whitespace를 제거하여 응답바이트를 줄임\nfalse\nJavaEncoding\nJava소스를 generate할때의 Encoding\nUTF8\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n3\nJSP Page Encoding\nTable 19. 주요 설정 항목(*는 필수값) 설명 비고 URL Pattern\nPage Encoding을 적용할 JSP Page의 URL Pattern\nPage Encoding\n적용할 Page Encoding을 지정\nSession\nTable 20. 주요 설정 항목(*는 필수값) 설명 비고 SessionTimeout\n세션 타임아웃 시간(분)\nDefault : 30\nWelcome File List\nTable 21. 주요 설정 항목(*는 필수값) 설명 비고 File(*)\nDirectory index로 호출할 경우에 service할 파일을 순서대로 지정함\nEnvironment JVM 옵션, Start Shell의 설정과 System Properties(Enterprise Edition인 경우만 제공)를 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nJVM Setting ($CATALINA_HOME/bin/setenv.sh): Server 실행을 위한 JVM 옵션\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh): Server 시작을 위한 Shell Script\nJVM_ROUTE 값은 여기서 직접 수정하지 않고, General 탭의 Server Info 영역에 있는 JvmRoute 항목의 불러오기 버튼 을 사용하여 수정한다. 여기서 직접 수정할 경우 Manager DB의 정보가 Update되지 않아 DB값 불일치가 발생한다.\nSystem.properties($CATALINA_HOME/conf/system.properties) (이 항목은 Enterprise Edition에서만 확인할 수 있다)\nCatalina.properties ($CATALINA_HOME/conf/catalina.properties): Server의 Catalina 설정\n$CATALINA_HOME은 WAS의 기본 설치 디렉토리이다. $CATALINA_BASE는 본래 하나의 WAS에 복수개의 Instance를 사용하고자 할 때 디렉토리를 생성하여 Instance별로 지정하여 사용되지만 LENA에서는 WAS와 Instance가 1:1 관계라 $CATALINA_HOME이 곧 $CATALINA_BASE로 사용된다.\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Properties Server의 System Properties 와 System Environments를 확인하는 화면을 제공한다. System Properties 중 Key Properties 를 별도로 제공하여 Server경로, JAVA버전 등의 주요 정보를 확인할 수 있다. Server가 기동된 상태에서만 정보를 확인할 수 있다.\nContainer Enterprise Edition의 경우 EJB Container의 설정 변경 기능을 제공한다. container설정 없이 Server를 기동하면 EJB에서 필요한 container가 default 설정으로 생성된다. default설정 외에 변경이 필요한 설정이 있을 경우에는 container를 생성하여 설정을 변경해야 한다.\n기본 설정\nTable 22. 기본 설정 항목(*는 필수값) 설명 비고 ID(*)\nContainer의 식별자\nType(*)\nContainer의 유형\nCMP_ENTITY 설정\nTable 23. CMP_ENTITY 설정 항목(*는 필수값) 설명 비고 CmpEngineFactory\nFactory 클래스 명\nDefault : org.apache.openejb.core.cmp.jpa.JpaCmpEngineFactory\nBMP_ENTITY 설정\nTable 24. BMP_ENTITY 설정 항목(*는 필수값) 설명 비고 PoolSize\nBean pool의 크기 지정\nDefault : 10\nSTATELESS 설정\nTable 25. STATELESS 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nMaxSize\nBean pool의 최대 개수\nDefault : 10\nMinSize\nBean pool의 최소 개수\nDefault : 0\nStrictPooling\nPool이 최대치에 도달했을 때 동작방식 지정. StrictPooling은 pool size를 늘리지 않고 기다림\nDefault : true\nMaxAge\nPool에서 제거되기까지의 최대 시간(h)\nDefault : 0\nReplaceAged\nMaxAge에 도달했을 때 Replace할지 여부\nDefault : true\nReplaceFlushed\npool에서 Flush될 때 Replace할지 여부\nDefault : false\nMaxAgeOffset\nMaxAge 사용량\nDefault : -1\nIdleTimeout\n인스턴스가 pool에서 idle상태로 있을 수 있는 최대 시간(m)\nDefault : 0\nGarbageCollection\n풀을 줄이기 위한 메커니즘으로 garbage collection을 허용할지 여부\nDefault : false\nSweepInterval\n컨테이너가 풀을 정리하고 만료된 instance들을 제거하는 주기(m)\nDefault : 5\nCallbackThreads\nThread Pool 사이즈. 이 값은 컨테이너에 배포되어 있는 모든 Bean들에게 공유됨\nDefault : 5\nCloseTimeout\n풀이 닫히고 PostConstruct 메소드가 호출될때까지 기다리는 최대 시간(m)\nDefault : 5\nSINGLETON 설정\nTable 26. SINGLETON 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nSTATEFUL 설정\nTable 27. STATEFUL 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nCache\nStateful 빈 인스턴스를 관리할 cache\nDefault : org.apache.openejb.core.stateful.SimpleCache\nPassivator\nPassivator클래스 지정\nDefault : org.apache.openejb.core.stateful.SimplePassivator\nTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 20\nFrequency\n빈 캐쉬가 idle상태인 빈들을 확인하는 주기(s)\nDefault : 60\nCapacity\nStateful SessionBean 컨테이너에 대한 bean pool의 크기\nDefault : 1000\nBulkPassivate\n한번에 passivate할 instance의 개수\nDefault : 100\nMESSAGE 설정\nTable 28. MESSAGE 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\nResource Adapter 지정\nDefault : Default JMS Resource Adapter\nMessageListenerInterface\nMessageListener 지정\nDefault : Javax.jms.MessageListener\nActivationSpecClass\nActivation Spec Class 지정\nDefault : org.apache.activemq.ra.ActiveMQActivationSpec\nInstanceLimit\nInstance 최대 개수\nDefault : 10\nAudit WAS에서 발생한 이벤트로 수집/관리하는 기능이다.\n수집된 이벤트 정보는 이벤트 대시보드에서 확인할 수 있다. 이벤트 대시보드 관련 내용은 Event Dashboard를 참고한다.\n총 네 가지 타입의 Detection Rule을 설정해 이벤트를 수집할 수 있다.\nTable 29. OOM Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : true\nTable 30. Stuck Thread Detection Rule 항목 설명 비고 Enable\nStuck Thread 발생을 감지한다\nDefault : false\nLenaStuckThreadDetectionValve 는 server.xml 내에 기본적으로 설정되어 있으며, LenaStuckThreadDetectionValve 관련 설정은 SERVER \u0026gt; Server 선택 \u0026gt; General 탭 화면의 Stuck Thread 항목에서 할 수 있다.\n사용자 요청의 처리 시간이 Threshold 설정 값을 초과한 경우 이벤트가 발생되어 Manager로 전송된다.\nTable 31. Full GC Detection Rule 항목 설명 비고 Enable\nFull GC 발생을 감지한다\nDefault : false\nTable 32. Exception Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : false\nException Class Pattern\n감지할 Exception 패턴을 지정한다. 해당 패턴의 Exception을 상속한 Exception도 검출한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nExclude Exception Class Pattern\n감지에서 제외할 Exception 패턴을 지정한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nEnable Full Stack\nException이 여러 Cause를 가지고 있을 때, 요약 정보가 아닌 내용 전체를 표시할 지 여부\nDefault : true\nFull Stack Max Line\nException Stack Trace에서 표현할 Line 수. 각 Cause by 별로 설정한 수 만큼의 Line이 수집된다. 너무 큰 수로 지정하면 수집 및 저장관리에 부하가 발생할 수 있다\nDefault : 3\n검출이 가능한 Exception 클래스는 Java 자체적인 라이브러리에 포함된 Exception이 아닌, Application이나 Framework의 Exception이다. 너무 많은 량의 이벤트가 발생하지 않도록 Exception 패턴을 정의해야 한다.\nAudit 기능은 Enterprise Edition에서 제공되는 기능이다.\nConfig Tree WAS의 설치경로 하위의 /conf 폴더 하위 설정 파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 WAS 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 유형별로 History를 관리한다. 수정 일시와 설정 파일 Type을 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정 파일로 복원할 수 있다.\n4.3.9. Resource 관리 Server메뉴 하위의 Resources메뉴를 선택하면 해당 Server에 관련된 Resource정보를 관리할 수 있는 화면이 표시된다. 기본적으로 DataSource, JMS, JTA Resource에 대한 정보를 관리할 수 있다. (JMS, JTA Resource는 Enterprise Server일 경우에만 지원)\nWAS에 Resource 를 설정하는 방법은 다음과 같다.\n추가 : New 버튼 을 클릭하여 Resource를 추가한다. (Datasource, JMS 가능)\n삭제 : Delete 버튼 을 클릭하여 Resource를 삭제한다. (Datasource, JMS 가능)\n가져오기 : Import 버튼 을 클릭하여 RESOURCE 메뉴에서 등록된 Resource를 가져온다. (Datasource, JMS, JTA 가능)\nDataSource WAS의 Application이 사용할 수 있는 JNDI DataSource를 관리하는 기능을 제공한다. JNDI를 설정하여 Server에서 실행되는 모든 Application이 공유하여 사용할 수 있으며, 각각의 Application에 JNDI 설정을 하여 사용할 수도 있다. Enterprise Edition의 경우 JTA를 지원하여 속성이 추가된다.\nServer DataSource 설정 Server에서 실행되는 모든 Application이 공유하는 DataSource를 설정한다. Server에서 사용 가능한 DataSource의 목록을 조회할 수 있으며, DataSource의 등록, 수정, 삭제가 가능하다.\nDataSource의 상태를 체크하기 위한 접속테스트도 수행할 수 있다.\nDataSource의 속성은 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭하면 표시된다.\nTable 33. DataSource 속성 항목(*는 필수값) 설명 비고 Scope(*)\nDataSource를 사용할 범위\n다음과 같은 스코프를 제공함\nContext: 모든 Application이 공유하도록 Datasource 정보가 공통 context 영역에 설정된다.\nGlobal: GlobalNamingResource영역에 Datasource 정보가 설정되고, 어플리케이션 개별적으로 DataSource Link List에서 설정하여 사용한다.\nGlobal+ResourceLink: GlobalNamingResource 영역에 Datasource정보가 설정되고 Datasource 링크는 공통 context영역에 설정된다.\nJNDI Name(*)\nGlobal DataSource의 JNDI명\nDatabases\n공통으로 사용할 데이터소스의 정보를 설정\nResource Name\nDatabases의 이름\nAddress(Host/Port)\n공통으로 사용할 아이피와 포트\nDriverClassName\nJDBC Driver 클래스명\nURL(*)\nJDBC URL\nUsername(*)\n접속 사용자명\nPassword(*)\n접속 패스워드\nencryption을 체크할 경우 패스워드를 암호화하여 저장한다. 보안을 위해 암호화하는 것을 권장한다.\nEncryption Level\n인증 정보에 대한 암호화 범위 지정\nDefault : Password only\nDefaultAutoCommit\nPool에서 생성된 Connection들의 자동 Commit 상태\nDefault : JDBC driver의 기본값\nAutoReconnection\nTestOnBorrow와 TestOnWhileIdle의 값을 설정할 때 사용.\ntrue/false에 따라 두 값도 동일하게 설정됨.\nUser Definded 선택시 두 값을 사용자가 직접 설정 가능\nInitialSize\nPool의 초기 Connection 수\nDefault : 10\nMaxActive\nPool의 최대 Connection 수\nDefault : 100\nMinIdle\n최소 Idle Connection 수\nDefault : 10\nMaxIdle\n최대 Idle Connection 수\nDefault : 100\nMaxWait\nPool에 가용한 Connection이 없을 경우 대기하는 최대시간(ms)\nDefault : 30000\nMinEvictableIdleTimeMillis\n해당 시간 이상 idle 상태로 Pool에 존재한 Connection은 제거 대상이 됨 (ms)\nDefault : 60000 (60s)\n(XaDataSource = true로 설정하였을 시 1800000 (30m))\nValidationQuery\nConnection 유효성 검증 쿼리\nDefault : null\nValidationInterval\nConnection 유효성 검증 주기(ms)\nDefault : 3000\nTestOnBorrow\nPool에서 커넥션을 꺼내기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestOnReturn\nPool에 커넥션을 반납하기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestWhileIdle\nIdle 상태의 커넥션에 대해 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nLogValidationErrors\nvalidation query 수행 후 오류 발생 시 오류 출력 여부\nDefault : default(false)\nTimeBetweenEvictionRunsMillis\n사용되지 않은 Connection을 추출하는 Thread 실행주기(ms)\nDefault : 5000\nRemoveAbandoned\nConnection 유실 검출 여부\nDefault : default\nRemoveAbandonedTimeout\n유실Connection을 판단하기 위한 Timeout 값(s)\nDefault : 60\nLogAbandoned\nConnection 유실 처리시 로깅여부\nDefault : default\nAbandonWhenPercentageFull\nConnection pool이 설정한 점유율을 초과해야지만 abandon을 수행함\nDefault : 0\nJdbcInterceptors\n유연하고 플러그 가능한 인터셉터를 사용하여 사용자 정의 기능을 추가할 수 있음\nQueryTimeout 설정시 QueryTimeoutInterceptor(queryTimeout=시간(초)) 입력\nDefault 값이 true 또는 false가 아닌 default 인 경우, JDBC Driver의 기본값이 사용된다.\nEnterprise Edition의 추가 속성은 아래와 같다.\nTable 34. Enterprise Edition 추가 속성 항목(*는 필수값) 설명 비고 JtaManaged\nJTA 사용여부\nDefault : false\nXaDataSource\nXA 사용여부\nDefault : false\nXADataSource설정은 JTA가 설정되어야만 사용할 수 있으며, XADataSource를 설정하게 되면 validationInterval, logValidationErrors, abandonWhenPercentageFull 속성을 사용할 수 없다.\nDataSource를 Context 범위로 설정하면 모든 Application이 공유한다.\nEnterpriseServer에서 DataSource를 Context 범위로도 설정할 수 있으나, EJB에서는 Lookup이 불가능하다. EnterpriseServer에서는 Global + ResourceLink 범위로 설정하는 것을 권장한다.\nPassword 암호화 알고리즘은 AES를 사용하고 있다. 암호화를 위한 키 값은 Manager LENA Home 하위 /conf/repository/manager.conf 파일과 각 WAS Home 하위 /conf/advertiser.conf 내에서 “datasource.key=키값”으로 관리한다.\nDatabases\nURL 설정 시 공통을 사용할 정보를 Databases를 만들어 등록한다.\n추가(+) 버튼 을 클릭하면 팝업창이 생성된다.\nDatabases를 구분할 Resource Name을 입력한다.\n자동으로 채워진 DriverClassName 을 확인한다. 변경할 필요가 있을 경우 변경한다.\nAddress(아이피 및 포트)를 입력한 후 저장한다.\nJDBC driver Upload\nManager를 통해 JDBC Driver library를 upload 할 수 있다.\nDataSource 상세 정보 하위의 Upload 버튼 을 클릭하면 아래와 같이 upload를 위한 화면이 출력된다.\nSearch버튼을 통해 upload 할 파일을 선택한다. Upload 할 파일은 JDBC Driver library 이므로 JAR 형식의 파일만 선택할 수 있다.\nUpload 버튼을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nJDBC Driver 파일이 upload되는 경로는 ${SERVER_HOME}/lib/datasource이다.\nConnection Test\nDataSource 상세 화면에서 Connection Test 버튼 을 클릭하면 설정된 DataSource에 대한 연결 테스트를 수행할 수 있다. 정상적으로 연결이 된 경우 \"JDBC Connection is successfully tested\" 라는 문구가 출력된다.\n만약 \"Driver Class[클래스명] does not exist.\" 라는 오류 문구가 출력될 경우, 해당 driver class가 정상적으로 업로드 되어 있으며 이에 대한 classpath가 설정되어 있는지 확인한다.\nclasspath는 WAS 상세 \u0026gt; Environment \u0026gt; JVM Settings 내에 추가한다.\n설정 예 CLASSPATH=\u0026quot;$\\{CLASSPATH}:$\\{CATALINA_HOME}/lib/datasource/ojdbc6.jar\u0026quot; JMS Enterprise Edition의 경우 JMS관련 Resource를 정의할 수 있다. Active MQ Resource Adapter, JMS Connection Factory, Queue, Topic설정을 각각 추가, 수정, 삭제할 수 있다.\nTable 35. 주요 설정 항목(*는 필수값) 설명 비고 ID(*)\nResource의 식별자\nType(*)\nResource의 유형\n다음과 같은 타입을 제공함\nActiveMQResourceAdapter\nJMSConnectionFactory\nQueue\nTopic\nActive MQ Resource Adapter 설정\nTable 36. 주요 설정 항목(*는 필수값) 설명 비고 BrokerXmlConfig\nBroker 설정\nDefault : broker:(tcp://localhost:61616)?useJmx=false\nServerUrl\nBroker 주소\nDefault : vm://localhost?waitForStart=20000\u0026amp;async=true\nDataSource\nDatasource for persistence messages\nStartupTimeout\nStartup 최대 대기시간(s)\nDefault : 10\nJMS Connection Factory 설정\nTable 37. 주요 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\n사용할 Resource Adapter 지정\nTransactionSupport\nGlobal Transaction 여부 지정\n다음과 같은 타입을 제공함\nXA\nLOCAL\nNONE\nPoolMaxSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최대 개수\nDefault : 10\nPoolMinSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최소 개수\nDefault : 0\nConnectionMaxWaitTimeout\n커넥션 최대 대기시간\nDefault : 5 Seconds\nConnectionMaxIdleTimeout\n반납되기전 최대 idle시간\nDefault : 15 Minutes\nQueue 설정\nTable 38. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nQueue의 이름 지정\nTable 39. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nTopic의 이름 지정\nJMS 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\nJTA Enterprise Edition의 경우 Transaction Manager의 설정 변경 기능을 제공한다.\nTransaction Manager의 설정을 기본 설정으로 사용하려면 Managed Type을 Auto로 선택한다. (설치 시 default)\nTransaction Manager의 설정을 변경하고자 한다면 User Defined를 선택한다. (User Defined를 선택시 Recovery 옵션은 default로 \"No\"가 선택된다)\n주요 설정\nTable 40. 주요 설정 항목(*는 필수값) 설명 비고 Managed Type\nUser Defined Transaction Manager 여부 선택\nDefault : Auto\nID(*)\nTransaction Manager의 이름\nDefault Timeout\nTimeout 지정\nDefault : 10 minutes\nRecovery\nTransaction 오류 시 복원여부 설정\nTrue를 선택한 경우 Logging 설정이 열림\nTransaction Recovery Logging Option\nTable 41. Transaction 오류 시 복구를 위한 로깅 설정 항목(*는 필수값) 설명 비고 Directory\n로그파일을 생성할 디렉토리 위치\nDefault : txlog\nFile Name\n로그 파일 명\nDefault : howl\nFile Extension\n로그 파일의 확장자\nDefault : log\nMax Log Files\n생성되는 로그파일의 최대 개수\nDefault : 2\nMax Block Per File\n파일당 최대 블록 수\nDefault : -1\nBuffer Size\n버퍼사이즈(kb)\nDefault : 32\nMax Buffers\n버퍼의 최대값\nDefault : 0\nMin Buffers\n버퍼의 최소값\nDefault : 4\nAdler32 Checksum\nAdler32 Checksum, Checksum Enabled 설정이 모두 \"Yes\"인 경우 Adler32 알고리즘을 사용하여 checksum을 계산\nDefault : Yes\nChecksum Enabled\nBuffer의 Contents를 Disk에 기록 전 체크\nDefault : Yes\nThreads Waiting\n대기하는 스레드의 최대 갯수\nDefault : -1\nFlush SleepTime\nForceManager의 총 sleep 시간\nDefault : 50 Milliseconds\nJTA 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.3.10. Application 배포 목록 화면 상단의 SERVER 메뉴를 선택하여 Server 현황을 조회한다. 좌측 메뉴에서 배포할 Server의 Application을 선택한다. 배포가 완료된 Application의 목록을 조회하는 화면을 제공한다.\nApplication 목록의 항목은 아래와 같다.\nTable 42. Application List 항목 항목 설명 비고 Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nBase Name\nBase 명\nContext Path\nContext 경로\nDocBase\nApplication의 위치\nStatus\nApplication 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nAction 버튼\n아래와 같은 기능을 제공함\nUndeploy(휴지통) 버튼\nApplication Start 버튼\nApplication Stop 버튼\nApplication Reload 버튼\nView 버튼\n아래와 같은 기능을 제공함\nweb.xml View(문서) 버튼\nDeploy Application 을 배포하기 위한 속성은 아래와 같다.\nTable 43. Application 배포 속성 항목(*는 필수값) 설명 비고 Application Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축을 풀지 않고 배포\nDefault : true\nDocBase(*)\nApplication의 위치\nUpload 선택(파일) 버튼 을 통해 파일을 업로드 할 수 있음\nApplication Upload 별도의 배포 시스템이 없는 경우 Manager를 통해 application을 upload 할 수 있다.\n서버를 선택한 후 Applications 를 선택하여 Application 화면으로 이동한다.\nApplications 화면 하단의 Application Deploy 영역에서, DocBase 항목 우측 끝에 있는 Upload 선택(파일) 버튼 을 클릭하면 파일시스템 화면이 출력된다.\nupload 할 target 디렉토리(Server 쪽 Host)를 선택한다.\nUpload 버튼 을 클릭하면 application 파일을 선택할 수 있는 팝업이 생성된다.\n배포할 application 파일을 선택하고 Upload 버튼 을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nImport Import 버튼 을 클릭하여, [Resource] 메뉴에서 등록한 Application 정보를 가져와 배포할 수 있다.\n설정 정보 관리 Application 목록조회 화면에서 Application Name을 선택하면 Application 설정 관리화면을 조회할 수 있다. Application Descriptor 와 DataSource에 대한 설정 및 관리 기능을 제공한다.\nApplication 설정 변경은 선택한 Server에서만 가능하다.\nApplication Settings Application Descriptor에 설정된 정보를 관리한다.\n뒤로가기(\u0026#8592;) 버튼 을 클릭하여 Application 목록화면으로 돌아갈 수 있다. Expand all 버튼 을 클릭하여 Context의 추가적인 속성을 설정할 수 있다.\nDocBase와 ContextPath는 수정할 수 없으며, 속성의 자세한 정보는 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭해 확인할 수 있다.\nTable 44. Application Setting 항목(*는 필수값) 설명 비고 DocBase(*)\nApplication의 Document Base\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축은 풀리지 않고, 웹 애플리케이션은 단지 압축된 채로 재배치\nDefault : true\nreloadable\nApplication 변경 시(Class File) 재 반영 여부\nprivileged\nContainer Servlet의 사용 여부\ncookies\nsession identifier 통신에 cookie 사용 여부\nuseHttpOnly\nclient side에서 스크립트를 활용하여 session ID로의 접근 차단 여부\nsessionCookieDomain\n설정했을 경우 웹 어플리케이션에서 설정된 모든 도메인을 덮어씀. 설정하지 않을 경우 웹 어플리케이션에 의해 구분된 domain이 사용됨\nsessionCookieName\n설정하면 해당 이름으로 모든 세션 쿠키가 생성됨\nDefault : JSESSIONID\nsessionCookiePath\n설정할 경우 웹 어플리케이션은 해당 경로를 사용\nuseNaming\nJ2EE 플랫폼을 위한 JNDI InitialContext를 사용하기 위해 설정\nDefault : true\nAdd Attribute 버튼 을 사용하여 속성 값을 추가할 수 있다.\nDataSource Link List Global DataSource를 Application에서 사용할 수 있도록 설정 기능을 제공한다.\nDataSource 링크 관리의 속성은 아래와 같다.\nTable 45. DataSource 링크 관리 속성 항목(*는 필수값) 설명 Name(*)\nApplication에서 사용할 JNDI 이름\nJNDI Name(*)\nGlobal DataSource의 JNDI이름\nUserName\nDataSource 접속 사용자 명\nURL\nJDBC URL\nDescription\nDataSource에 대한 설명\n+ 아이콘\nNew 버튼, 수정(연필) 버튼 을 클릭하여 선택된 DataSource정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 DataSource 정보가 삭제됨을 표시\nNew 버튼 을 클릭하면 신규 설정을 추가할 수 있고, Save 버튼 을 클릭하면 변경된 설정이 저장된다.\nWAS에 설정된 Datasource 중 Scope가 Global 또는 Global + ResourceLink로 되어있는 Datasource가 신규 설정시 JNDI Name의 선택항목으로 나온다.\n4.4. Web Server Web Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Web Server의 등록, 수정, 삭제가 가능하며, 시작과 종료를 수행할 수 있다.\n4.4.1. 목록 Web Server List를 통하여 각 Web Server를 관리할 수 있다.\nWeb Server의 속성은 아래와 같다.\nTable 46. Web Server 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nHTTP Port\nHTTP 포트번호\nHTTPS Port\nHTTPS 포트번호\nSSL\nShell 실행시 SSL 기반의 패스워드 사용여부\nWeb Server에 SSL 관련 설정을 해야함\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 - 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.4.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer ID와 Service Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.3. Clone Clone 버튼 을 클릭하여 Web Server의 복제를 준비한다.\nNode List를 선택하여 복제할 Server를 선택한다.\nClone Server ID와 Service Port를 입력한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버의 Document Root 디렉토리에 있는 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.5. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.4.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 General 탭의 Stop Mode 에 따라 종료 방식이 달라진다.\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Server Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\nForced Stop/Restart Server 목록 가장 우측의 \u0026#8230;\u0026#8203; 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n4.4.8. 설정 정보 관리 Web Server의 설정 정보를 변경하는 기능을 제공한다. Web Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\nGeneral Web Server의 일반적인 설정 값과 Connection, Process 정보를 편집할 수 있다.\nWeb Server의 설정 정보는 저장 시 설정 파일에 대한 Validation을 수행하게 되어 있으며, 설정 파일 오류로 인한 Server 기동 장애가 발생을 최소화하고 있다.\n설정 파일 오류 시 파일이 저장되지 않고 오류 메시지가 출력된다\n오류 메시지 예 AH00526: Syntax error on line 253 … Argument for 'Require all' must be 'granted' or 'denied' 설정 정보의 상세 내용은 다음과 같다.\nServer Info (env.sh과 /conf/httpd.conf 파일 관리)\nTable 47. Server Info 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP Port\nHTTPS Port(*)\nHTTPS Port\nStaging HTTP Port\nStaging 모드로 기동 시 사용하는 서비스 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nStaging HTTPS Port\nStaging 모드로 기동 시 사용하는 HTTPS 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nInstall Path\nServer 설치 경로\nDocument Root(*)\nWeb Server에서 제공하는 문서들이 저장되어 있는 기본 폴더 경로\nWelcome Page\n웹사이트의 초기페이지 문서로 어떤 파일을 사용할 것인지 정의\nStop Mode\nWEB 서버 종료시 참조하는 옵션\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\nDirectory/Path\n어떤 서비스와 기능을 허용/거부 할지를 설정할 웹 문서들이 있는 디렉토리 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\nIndexes : welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\nFollowSymLinks : Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory\n/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정 파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형이 존재함\n* None : 어떠한 지시자도 허용하지 않음 * All : 모든 지시자 사용가능 * AuthConfig : 사용자 인증 지시자 허용 * FileInfo : 문서 유형 제어 지시자 허용 * Indexes : 디렉토리 Indexing 제어 지시자 허용 * Limit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nConnection Info (/conf/extra/httpd-default.conf 파일 관리)\nTable 48. Connection Info 항목(*는 필수값) 설명 비고 Timeout(*)\n클라이언트와 Server간에 연결 후 일정 시간 동안 아무 이벤트가 발생하지 않았을 때 Server가 기다리다가 연결을 끊을 시간(s)\nDefault : 60\nKeepAlive(*)\n특정 한 프로세스가 특정 사용자의 요청작업을 계속해서 처리할지 여부\nDefault : On\nMaxKeepAliveRequests(*)\nKeepAlive가 On일 때 유효한 값으로 하나의 프로세스가 특정 사용자의 요청을 지정한 횟수만큼 처리\n이 값을 넘어서면 해당 프로세스는 죽고 다른 프로세스가 요청을 처리함\nDefault : 100\nKeepAliveTimeout(*)\nKeepAlive가 On 일 때 유효한 값으로 설정한 시간 동안 요청이 없으면 연결을 끊기 위해 타임아웃 시킴(s)\nDefault : 5\nRequestReadTimeout(*)\n사용자로부터 request header와 body를 받기 위해 기다리는 시간\n설정된 시간 안에 받지 못하면 408 REQUEST TIME OUT 에러를 보냄\nDefault : header=20-40,MinRate=500 body=20,MinRate=500\nProcess Info (/conf/extra/httpd-mpm.conf 파일 관리)\nTable 49. Process Info 항목(*는 필수값) 설명 비고 StartServers(*)\nWeb Server 기동 시 초기화 되는 Server 프로세스 수\nDefault : 2\nServerLimit(*)\nMaxClients가 생성할 수 있는 최대 프로세스 값\nDefault : 8\nThreadLimit(*)\nThreadsPerChild의 설정 가능한 최대 값\nDefault : 128\nMinSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 적을 때 Thread가 이 값까지 늘어나 유지\nDefault : 128\nMaxSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 많을 때 Thread가 이 값까지 줄어들어 유지\nDefault : 256\nThreadsPerChild(*)\n각각의 자식 프로세스가 생성하는 Thread 수\nDefault : 128\nMaxRequestWorkers(*)\n전체 자식 프로세스가 생성할 수 있는 최대 Thread 수\nDefault : 1024\nMaxConnectionPerChild(*)\n자식 프로세스가 서비스 할 수 있는 최대 요청 수. 이 값만큼 요청을 처리한 후 종료한다.\nDefault : 0 (0: 제한없음)\nPagespeed Info\nTable 50. Pagespeed Info 항목(*는 필수값) 설명 비고 Enabled(*)\nmod_pagespeed를 적용하여 Web Server가 제공하는 Resource에 대한 최적화를 수행하여 사이트 속도를 높일지 여부\nDefault : off\n다음과 같은 옵션을 제공함\non : Resource들에 대해 최적화 허용\noff : 추가적인 최적화를 중지하나, 기존에 최적화 되어있는 Resource들에 대한 접근 허용\nunplugged : 최적화 중지 및 접근 불허\nRewriteLevel(*)\n모듈이 rewrite할 필터의 Level 설정\nDefault : default(CoreFilters)\n다음과 같은 옵션을 제공함\nCoreFilters : 사전에 대부분의 웹사이트에서 안전하다고 생각하는 필터가 포함되어있음\nOptimizeForBandwidth : 안전성을 강화하며, Pagespeed를 인식하지 못하는 사이트에서 사용하기 적합\nPassThrough : 필터를 전부 수동으로 입력\nFileCachePath(*)\nCaching 될 File들이 저장되는 디렉토리의 경로\nLogDirPath(*)\nLog를 기록할 디렉토리의 경로\nEnableFilters\n사용할 필터들의 목록\nDisableFilters\n사용하지 않을 필터들의 목록\nAllow URI\nrewrite를 허용할 Resource들의 와일드카드(*)를 포함한 URI\n예) /.js\nDisallow URI\nrewrite를 허용하지 않을 와일드카드(*)를 포함한 URI\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다.\nConnector Web Server의 Connector정보와 Load Balancer정보를 편집할 수 있다. Connector Info 영역의 정보는 Web Server 내에 설정된 Load Balancer의 기본 설정 값을, Load Balancer영역은 Web Server와 WAS를 연계하는 정보를 관리한다.\n설정 정보의 상세 내용은 다음과 같다.\nConnector Info (/conf/extra/httpd-jk.conf와 /conf/extra/workers.properties 파일 관리)\nTable 51. Connector Info 항목(*는 필수값) 설명 비고 Type(*)\nWeb Server와 WAS가 통신할 때 사용하는 프로토콜\najp 13\nLoad Balancing Factor(*)\nWAS의 부하 분산 지수. 즉, 작업량 할당 비율\nDefault : 1\nSocket Timeout(*)\nJK와 WAS 간에 응답 대기 시간(TCP socket 내부적인 상태에 대한 timeout을 의미, s)\nDefault : 300\nSocket Connect Timeout(*)\nJK와 WAS 간의 socket 연결 대기시간\nDefault : 5000\nSocket Keepalive(*)\nWeb Server와 WAS 간에 방화벽이 있는 경우 inactive 상태인 connection은 버리게 되어 있는데 OS에 keep alive 메시지를 보내서 방화벽이 inactive connection을 잘라버리는 것을 막을지 여부 설정\nDefault : true\nConnect Timeout(*)\nJK와 WAS 간에 연결이 완료된 후, ajp13 프로토콜에서의 cping request에 대한 cpong respond 대기 시간(ms)\nDefault : 10000\nConnection Pool Size(*)\nJK와 WAS 간에 커넥션을 cache하는 크기\nDefault : 128\nConnection Pool Min Size(*)\nJK와 WAS 간에 커넥션을 cache하는 최소 크기\nDefault : 32\nConnection Pool Timeout(*)\nConnection pool에서socket을 close 하기까지 open된 socket을 유지하는 시간\nWAS에서 connectionTimeout 설정과 같이 설정해야 함\nLog Level(*)\n에러 로그 파일의 기록 내용을 얼마나 자세히 기록할지 지정\nDefault : error\nLog Format(*)\n로그 파일에 어떤 포맷으로 로그를 남길지 설정\nStatus(*)\nServer 상태 모니터링 설정값 셋팅 여부\nEnable 선택시 Status Url과 Allow IP를 설정할 수 있음\nDefault : Enable\nStatus Url(*)\nServer 상태 모니터링 URL\nDefault : /jk-status/\nStatus Allow IP(*)\nServer 상태 모니터링 URL에 접근 가능한 IP\nDefault : 127.0.0.1\nLoad Balancer Info\n(/conf/extra/workers.propertes, /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties, /conf/extra/vhost/\\{Virtual Host ID}.conf 파일 관리)\nTable 52. Load Balancer Info 항목(*는 필수값) 설명 비고 LB ID(*)\nLoad Balancer명\nSticky Session\nSession ID를 기반으로 라우팅을 지원할지 여부\nDefault : true\nStatus Enabled\nServer 상태 모니터링 사용여부\n동일 Virtual Host에 적용된 Load Balancer에 대해서는 일괄 적용됨\nDefault : N\nVirtual Host ID(*)\nLoad Balancer를 적용할 Virtual Host ID\nVirtual Host 탭을 통해 관리됨\nSession Cookie\nSession Cookie Name을 변경하고자 할 경우 설정 (WAS에서 Session Cookie Name 변경시 같이 변경해줘야 함)\nDefault: JSESSIONID\nURI Patterns(*)\nWeb server로 들어온 요청들에 대해 URI패턴을 검사하여 WAS로 전달하는 uri mapping을 정의\nMethod(*)\nLoad Balancer 가 부하를 분산하기 적절한 worker를 판별하는데 사용할 메서드\n다음과 같은 타입을 제공함\nR[equest] : 요청수가 가장 적은 worker 선택. (Default)\nS[ession] : 연결된 세션이 가장 적은 worker 선택\nN[ext] : S[ession]과 비슷하지만 더 적은 수의 session을 분산해야 하는 경우 선택\nT[raffic] : JK와 AJP커넥터 사이에 네트워크 트래픽이 가장 작은 worker 선택\nB[usyness] : 요청 수를 기반으로 가장 부하가 적은 worker 선택 Redirect\n해당 worker가 error 상태일 때 받은 요청을 대신 처리할 failover worker를 설정\nDefault : Round Robin\nLB Factor\n작업량 할당 비율. 해당 worker가 얼마나 많은 일을 할지 정의 (5로 설정할 경우 1로 설정한 다른 worker보다 5배 더 많은 request를 받음)\nURI Pattern 정보는 /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties 파일에 관리된다.\nWAS List의 [+] 버튼을 통해 Load Balancer와 연계되는 WAS를 추가할 수 있으며, 추가된 WAS의 ⓧ 버튼을 통해 해당 WAS를 제외할 수 있다.\n연계 WAS 정보는 /conf/extra/workers.properties 파일에 관리된다.\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nVirtual Host Web Server의 Virtual Host 정보를 등록/수정/삭제할 수 있다.\nNew 버튼, Delete 버튼 을 통해 Virtual Host를 등록/삭제할 수 있다.\n1개 이상의 Load Balancer를 적용한 Virtual Host는 삭제할 수 없다. 만약 해당 Virtual Host를 삭제하려면, 먼저 Connector 탭을 통해 Load Balancer의 Virtual Host ID를 다른 Virtual Host ID로 변경해야 한다.\nSSL Enabled와 Rewrite Enabled를 체크한 경우 아래와 같이 상세 항목 영역이 추가로 출력된다.\n설정 정보의 상세 내용은 다음과 같다.\n(/conf/extra/vhost/\\{Virtual Host ID}.conf, /conf/extra/rewrite/rewrite_\\{Virtual Host ID}.conf, /conf/extra/ssl/ssl_\\{Virtual Host ID}.conf 파일 관리)\nTable 53. Virtual Host 설정 정보 항목(*는 필수값) 설명 비고 Virtual Host ID(*)\nVirtual Host 이름\nPort(*)\n해당 가상호스트가 사용하는 HTTP Port\nDocumentRoot(*)\n해당 가상호스트의 홈페이지 디렉토리 위치\nServer의 DocumentRoot 변수인 ${DOC_ROOT}를 활용하여 동일하게 혹은, 그 하위로 지정가능\nServerName(*)\n해당 가상호스트의 도메인 명\nServerAlias\n해당 가상호스트가 사용하는 ServerAlias\n와일드카드 문자 포함 가능(*.example.com)\nErrorLog(*)\n해당 가상호스트의 웹 에러로그 파일 위치\nCustomLog(*)\n해당 가상호스트의 웹 로그파일 위치\nDirectory/Path\nDocumentRoot에서 지정한 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\n-Indexes는 welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\n-FollowSymLinks는 Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형을 제공함\nNone : 어떠한 지시자도 허용하지 않음\nAll : 모든 지시자 사용가능\nAuthConfig : 사용자 인증 지시자 허용\nFileInfo : 문서 유형 제어 지시자 허용\nIndexes : 디렉토리 Indexing 제어 지시자 허용\nLimit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nRewirte Enabled\nRewrite사용여부\nRewirte Conf\nRewrite관련 상세 설정. 지정한 Rewrite Condition에 따라 Rewrite Rule에 설정한 rule대로 rewrite함\nProxy Enabled\nProxy 사용여부\nconf/extra/proxy 디렉토리에 설정파일이 위치한다. 필요한경우 ProxyPreserveHost 를 셋업하면 요청의 host 명을 유지할 수 있다. default 값은 off 이며 필요한 경우 on 한다. (ex: application 에서 redirect 사용 시)\nProxy Pass Match\nbackend와 연동하기 위한 정규식 패턴과 Target 서비스 도메인주소\nDNS Lookup Interval\nDNS Lookup 주기(s)\nDefault: 10\nSSL Enabled\nSSL 사용여부\nSSLPort(*)\nHTTPS Port\nSSLCertificateFile(*)\nSSL 인증서 경로\nSSLCertificateKeyFile(*)\nSSL인증서 Key파일 경로\nSSLCertificateChainFile\nFile of PEM-encoded Server CA Certificate\nSSLCACertificateFile\nROOT인증서 경로\nHttps Redirect Enabled\nHttp\u0026#8594;Https Redirect 사용여부\nSSL Log Separation\nSSL Log 설정 분리 사용여부\nSSLErrorLog\nSSL Error Log 설정\nSSLCustomLog\nSSL Custom Log 설정\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nLogging Web Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 54. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nError Log\nWeb server가 진단정보와 request를 처리하는 도중에 발생한 오류를 기록할 때 사용된다. Server가 시작하거나 동작하는데 문제가 발생시 여기에 설정된 위치의 파일을 먼저 확인한다.\nTable 55. Error Log 항목(*는 필수값) 설명 비고 Location(*)\nWeb server의 에러로그파일 위치를 지정\nLog Level(*)\n에러로그파일의 기록내용을 얼마나 자세하게 기록할 지 지정\nCustom Log\n로그파일 이름과 형식을 설정한다. 환경변수를 사용하여 request의 특징에 따라 선택적으로 로그를 남길 수 있다.\nTable 56. Custom Log 항목(*는 필수값) 설명 비고 Location(File|Pipe)(*)\nFile: 에러로그 파일 위치\nPipe: 파이프 문자 \"|\" 뒤에 로그 정보를 표준 입력으로 받을 프로그램 경로\nFormat|Nickname(*)\n로그파일에 기록할 내용\nLog Format으로 정의한 nickname을 쓰거나 직접 로그 포맷을 작성\nEnv\nServer의 환경 변수 유무에 따라 로그를 기록할지 여부 작성\n예를 들어, 영어권 사용자의 요청과 비영어권 사용자의 요청을 다른 로그파일에 기록하고 싶은 경우 다음과 같이 설정할 수 있다.\n설정 예 Location Format Env logs/english_log common english logs/non_english_log common !english Log Format\n로그파일에 사용할 형식을 설정한다.\nTable 57. Log Format 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\nNickname(*)\nCustomLog에서 사용할 로그포맷 명\nLog Format with logio\nTable 58. Log Format with logio 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\n%I와 %O 변수를 사용해 request와 head를 포함하여 보내고 받는 byte 측정이 가능\nNickname(*)\nCustomLog에서 사용할 로그포맷 명\ncombinedio는 mod_logio_module이 로드되어 있어야 함\nEnv\nRequest의 조건에 따라 환경변수를 설정할 때 사용한다.\nTable 59. Env 항목(*는 필수값) 설명 비고 Attribute(*)\nHTTP 요청 헤더(ex: Host, User-Agent, Referer, Accept-Language), 요청 속성 중 하나(Remote_Host, Remote_Addr, Server_Addr, Request_Method, Request_Protocol, Request_RUI) 또는 요청과 연관된 환경 변수 이름\nRegex(*)\nPerl 호환 정규식\nEnv-variable[=value](*)\n설정할 변수명과 설정값(optional)\nVarname, !varname 또는 varname=value\nCase\nEnv-variable에 대소문자 구분할지 여부\nWith case : 대소문자 구분\nNo case : 대수문자 구분없음\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nEnvironment JVM 옵션, Start Shell의 설정 등을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 되어 있다. 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Config Tree Web Server의 ${SERVER_HOME}/conf 디렉토리 하위 설정파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 Web Server 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 History를 관리한다. 수정 일시를 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정파일로 복원할 수 있다.\n4.5. Session Server Session Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Session Server의 등록, 수정, 삭제가 가능하며, 시작과 종료 Shell을 실행할 수 있다.\n4.5.1. 목록 Session Server List를 통하여 각 WAS를 관리할 수 있다.\nFigure 7. Session Server List Session Server의 속성은 아래와 같다.\nTable 60. Session Server 속성 항목(*는 필수값) 설명 비고 Status\nSession Server의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nSession Server의 이름\nAddress\nSession Server의 IP주소\nServer ID\nServer의 ID\nPort\nService 포트번호\nServer Type\nSession Server의 유형\nStandalone\nEmbedded\nStart/Stop\nServer의 시작 및 종료\n+ 아이콘\n+Register 버튼 또는 연필 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Restart를 수행할 수 있는 메뉴 제공\nSession Server는 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.5.2. Install Install 버튼 을 클릭한다.\nServer ID와 Service Port, Mirror Server IP/Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 이전에 설치된 Server 정보를 확인한다.\n4.5.3. Register Register 버튼 을 클릭한다.\n등록할 Server를 클릭한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.4. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.5. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.5.6. Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\n4.5.7. 설정 정보 관리 General Server의 설정 정보를 변경하는 기능을 제공한다. Session Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\n환경설정에서 변경 가능한 속성은 아래와 같다.\nConfiguration\nTable 61. Configuration 항목(*는 필수값) 설명 비고 Primary Host(*)\nServer의 Service Host(IP)\nPrimary Port(*)\nServer의 Service Port\nMirror Server Host(*)\nPair Server의 Host(IP)\nMirror Serror Port(*)\nPair Server의 Service Port\nShare session in applications\nMulti Applications 간 Session 공유 여부 설정.\nWAS에서도 이 항목을 동일한 값으로 처리해야 적용됨.\nstandalone에서만 가능함.\nSession Timeout Sec\nSession server의 session expired time 설정.\nstandalone에서만 가능함.\nConnected WAS List\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 62. Connected WAS List 항목(*는 필수값) 설명 비고 Server Name\nWAS의 Name\nHost\nWAS가 설치된 Host명\nStatus (Session Server의 상태 정보 제공)\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 63. Status 항목(*는 필수값) 설명 Session Count\n현재 Session 개수\nLogout Count\nLogout 요청으로 Logout 된 Session 수\nSession Max Count\nSession 저장 최대 개수\nSession Timeout\nSession timeout 시간(ms)\nRequest Getnew Logout\nWAS에서 전달된 GET_FRESH Request에 대한 Logout 응답 횟수\nData From Nodes\nWAS에서 전달된 Session 개수\nRequest Getnew Nodata\nWAS에서 전달된 GET_FRESH Request에 대한 NODATA 응답 횟수\nRequest Getnew\nWAS에서 GET_SESSION Request했을 때 늘어난 횟수\nPid\nSession이 standalone일 경우 프로세스 ID\nRequest Getfresh Data\nWAS에서 GET_FRESH Request 가 왔을 때 해당 Session이 있는 경우 횟수\nRequest Getfresh Logout\nWAS에서 GET_FRESH Request가 왔을 때 해당 Session이 Logout 된 횟수\nSession Recv Lost\nSession receive가 유실된 개수\nLogout From Nodes\n다른 was에서 logout 된 횟수\nSession Expired\nSession Time Out 시간으로 Expired 된 Session 수\nRequest Getfresh Nodata\nWAS 에서 GET_FRESH_SESSION request했는데 데이터가 없을 경우 늘어난 횟수\nData From Secondary\nSlave server에서 온 Data 개수\nRequest Getfresh\nWAS에서 GET_FRESH Request 요청 횟수\nLogout From Secondary\nSlave Server에서 Logout Request가 전달 된 횟수\nReq Lost\nRequest 유실 개수\nResp Lost\nResponse Queue의 사이즈 이상으로 Response 가 수신되어 손실된 Response 개수\nRequest Getfresh Secondary\nSlave Server에서 GET_FRESH Request 요청 횟수\nRequest Getfresh Not New\nWAS에서 전달된GET_FRESH Request에 대한 NOT_NEW Response 횟수\nRequest Getnew Secondary\nSlave Server에서 GET_SESSION request했을 때 늘어난 횟수\nLogging Session Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 64. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nEnvironment Start Shell의 설정을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false 5. Cluster 5.1. Server Cluster Server Cluster는 동일한 서비스 제공을 위해 동일한 구성으로 구동되는 Application Server와 Web Server의 묶음이다.\nFigure 8. Server Cluster 화면 5.1.1. Server Cluster 목록 매니저에 등록된 Server Cluster 목록은 좌측메뉴에서 Server Cluster를 선택하면 확인 할 수 있다.\nServer Cluster List 테이블에서 제공되는 속성은 아래와 같다.\nTable 65. Server Cluster 속성 항목 설명 비고 Select\n삭제를 위한 콤보박스\nServer Cluster Name\nCluster 명\nServers\nServer Cluster를 구성하는 각 Server별 개수\nApplication Server\nWeb Servers\n5.1.2. Server Cluster 생성 Server Cluster 생성에서는 Server Cluster를 구성할 Application Server 목록과 Web Server 목록을 선택한다.\nServer Cluster Group을 선택하고 Server Cluster 목록 하단의 +New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nServer Cluster의 기본 정보를 입력한다.\nServer Cluster Name: Server Cluster명을 입력한다.\nApplication Server Type: Server Cluster의 멤버로 사용될 Application의 Type을 선택한다. Standard와 Enterprise 두가지 유형이 있다.\nEnable Scaling: Auto Scaling기능 사용여부를 선택한다. 이 옵션은 server cluster 생성 후에는 변경 할 수 없다.(이 기능은 Container Edition에서만 지원하며, 사용하기 위해선 manager.conf에서 scaling.enable를 true로 설정한다.)\nDescription: Server Cluster와 관련하여 필요한 설명들을 입력한다.\n선택한 Application Server Type에 해당하는 서버 목록이 아래 Application server in server cluster 영역에 조회된다. Selectable Servers 에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다. Web servers in server cluster 영역에서 마찬가지로 Selectable Servers에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다.\n하나의 Server는 하나의 Server Cluster에만 지정할 수 있으므로, 다른 Server Cluster에 매핑되지 않은 Application Server와 Web Server만 Selectable Servers 목록에 조회된다.\nV Save 버튼 을 클릭하여 저장한다.\n좌측 트리에 입력한 server cluster명의 메뉴가 추가되었음을 확인할 수 있다.\n5.1.3. Server Cluster 삭제 좌측 Server Cluster 트리메뉴에서 Server Cluster Group을 선택한다.\nServer Cluster List에서 삭제할 Server Cluster의 Select 컬럼의 체크박스를 선택한다.\n- Delete 버튼 을 클릭하여 삭제한다.\n5.1.4. Server Cluster 상세 Overview 좌측 메뉴 또는 Server Cluster Group 상세에서 Server Cluster를 선택하면 Server Cluster에 대한 Overview 화면이 출력된다.\nServer Cluster 상세 영역의 항목 및 버튼이 제공하는 기능은 아래와 같다.\nTable 66. Server Cluster 상세 영역의 항목 및 버튼 항목 또는 버튼명 기능 Server Cluster Name\nServer Cluster 명\nApplication Server Type\nServer Cluster에 구성되어 있는 Application Server 유형(변경 불가)\nServer Config Synchronization Policy\nServer Cluster 동기화 수행(Sync 버튼 선택) 중 오류 발생시 처리 정책\nServer Config Synchronization Policy의 option은 아래와 같다. (기본값 : Force)\nStop : 설정 동기화 중 오류 발생 시 즉시 중지\nRollback : 설정 동기화 중 오류 발생 시 전체 rollback\nForce : 설정 동기화 중 오류 발생 시 해당 Server를 건너뛰고 다음 수행\nEnable Scaling\nServer Cluster의 Auto Scaling 기능 사용여부(변경 불가)\nDescription\nServer Cluster에 대한 설명\nCompare 버튼\nServer Cluster 내 Application Server와 Web Server, Session Server의 동기화 상태를 비교한다.\nServer 유형별 비교 항목은 아래와 같으며, 이는 아래 Server 목록 영역 각각의 컬럼에 출력된다.\nServer Config, Application, Resource 및 Session 비교는 각 Server 유형별 Master Server를 기준으로 한다.\nApplication Server Server Config : Application Server 설정 정보 동일 여부\nApplication : 각 Application Server에 deploy된 Application이 동일 여부\nResource : Resource 설정 동일 여부\nSession : Session Clustering을 위한 Session Server 설정 동일 여부\nWeb Server Server Config : Web Server 설정 정보 동일 여부\nConnect to WAS : Server Cluster 내 모든 Application Server와 연계되어 있는지 여부\nSync 버튼\nServer Cluster 내 Application Server의 Server Config, Application, Resource, Session 정보를 동기화한다.\nServer Cluster 내 Web Server의 Server Config와 WAS 연계 정보를 동기화한다.\nSnapshot 버튼\n동기화된 Server Cluster에 대해 현재 상태를 Snapshot으로 저장한다. 생성된 Snapshot은 Snapshot 탭에서 확인할 수 있다.\nSnapshot에는 Application Source도 포함된다. 따라서 과도하게 Snapshot을 생성하면 시스템 디스크 용량을 많이 차지할 수 있으므로 꼭 필요한 경우에만 생성하고 불필요한 Snapshot은 Snapshot 탭을 통해 삭제해야 한다.\nGraceful Restart 버튼\nServer Cluster 내 Web Server와 Application Server를 순차적으로 재기동한다. Graceful Stop을 수행하므로 처리 중인 service가 모두 종료된 후 Server가 stop 된다.\n처리 순서는 아래와 같다. ()로 표현된 절차는 생략 가능하다.\nWeb Server Stop\nApplication Stop\n(Application Source 업로드)\nApplication Server Start\n(별도 port로 테스트를 위해 Web Server를 staging port로 Start)\nWeb Server Start\nV Save 버튼\n변경된 Server Cluster 상세 설정 내용을 저장한다.\n동기화 상태 조회 Server Cluster의 동기화 상태는 Compare 버튼 을 선택하여 비교 후 그 결과를 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\n동일 또는 유효한 상태인 경우 상태가 초록색 원 아이콘 으로 출력된다.\nServer의 상태가 동일하지 않을 경우 붉은색 원 아이콘 으로 나타나며, 해당 아이콘을 클릭하면 별도의 팝업창이 출력되어 Server별 상세 정보를 확인할 수 있다.\n또한 각 Server 목록에서 Server Name을 클릭하면 해당 Server 상세 화면으로 이동할 수 있다.\nApplication Server의 Server Config 상세\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nApplication Server의 Application 상세\nApplication의 Deploy 상태 비교 결과가 출력된다.\nApplication Server의 Resource 상세\nApplication Server의 Resource 비교 결과가 출력된다.\nApplication Server의 Session 상세\nApplication Server의 Session 설정 비교 결과가 출력된다. 팝업창에는 Master Server에 설정된 세션 정보를 제공한다.\nWeb Server의 Server Config\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nWeb Server의 Connect to WAS\n해당 Web Server가 Server Cluster에 속한 모든 Application Server에만 연계되어 있을 때 초록색 원 아이콘 상태로 출력되며 그 외의 경우에는 붉은색 원 아이콘 으로 표시된다. 붉은색 원 아이콘 을 클릭하면 별도의 팝업창이 출력되어 상세 정보를 확인할 수 있다.\n팝업창에는 Web Server에 연계되어 있는 Application Server가 모두 Server Cluster에 등록된 Server인지에 대한 상세 정보를 출력한다((Web Server Status). 또한 Server Cluster에 등록된 모든 Application Server가 해당 Web Server에 연계되어 있는지에 대한 상세 정보를 출력한다.(Application Server Status)\n상태 동기화 수행 Server Cluster의 동기화 수행은 [.button]#Sync 버튼#을 선택하여 진행 한다. 그 결과는 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\nGraceful Restart Graceful Restart 기능은 처리중인 업무의 처리 종료를 보장하면서 Server Cluster 내 모든 서버에 대한 재기동을 수행할 때 사용된다. 수행시 아래와 같은 절차를 통해 수행된다. (Server Cluster 내 모든 서버에 적용됨)\nGraceful Restart 시작 전\nStart Process 버튼을 클릭하면 Graceful Restart 작업이 시작된다.\nWeb Server Stop 단계\nWeb Server에 대한 Stop을 수행한다. 수행 중인 Thread가 모두 종료된 후 Web Server가 Stop된다.\nApplication Server Stop 단계\nApplication Server에 대한 Stop을 수행한다. 본 단계는 모든 Web Server가 종료된 후 활성화된다.\n소스 배포 (생략 가능) 단계\nApplication Server에 대한 소스 배포(업로드)를 수행한다. 별도의 배포 시스템이 있는 경우 이 단계는 생략 가능하다.\nApplication Server Start 단계\nApplication Server에 대한 Start를 수행한다. 기동 로그를 함께 조회할 수 있다.\nWeb Server를 Staging mode로 Start (생략 가능) 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nWeb Server Start 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nGraceful Restart 완료\nApplication Server Server Cluster 내 Application Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Application Server의 Master Server 선택, 동기화할 설정파일 지정 및 JDBC Driver 동기화 여부를 설정할 수 있다.\nMaster Server\nServer Cluster내 Application Server 중 Master Server를 지정한다.\nServer Configs for Synchronization\nServer Cluster 내의 Application Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Application Server의 Home 하위의 상대 경로이다.\nSync JDBC Drivers\nManager Repository 경로/lib/datasource/폴더 하위 모든 jar파일을 동기화대상에 포함할지 여부를 선택한다.\nJDBC Driver는 Runtime시 Jar파일 교체에 따른 오류를 방지하기 위해 Sync 대상 서버에 해당 JDBC Driver가 없을 경우에만 동기화 된다.\nApplication 관리 Application Server 목록에서 서버를 선택시 하단의 Application 탭을 통해 선택된 서버의 Application 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Application에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nResource 관리 Application Server 목록에서 서버를 선택시 하단의 DataSource, JMS, JTA 탭을 통해 선택된 서버의 DataSource, JMS, JTA의 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Datasource, JMS, JTA에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nSession 관리 Application Server 목록에서 서버를 선택시 하단의 Session 탭을 통해 선택된 서버의 Session 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Session에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nApplication Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Application Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 67. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nAll Web Server Sync: Clone후 web서버와 연동 동기화\nAll Web Server Graceful Restart : Clone후 Web서버 재기동 여부\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 application 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Application Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nApplication Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Application Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Application Server의 Server Config, Application, Resource, Session 설정을 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Application Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\n팝업창의 Action 항목에는 Force Restart 버튼 과 Next 버튼 이 제공된다.\nTable 68. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Next 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nTable 69. Rolling Restart 팝업창 버튼 설명 버튼명 기능 Start\n팝업창에 보여지는 대상서버의 재기동을 시작한다. 테이블의 위에서부터 순차적으로 진행된다.\nPause\n재기동작업을 일시 중지한다. 중지 / 기동을 수행중인 경우 수행중인 명령이 중단되지는 않으며, 다음 작업은 대기하게 된다.\nResume\n재기동작업을 재개한다. Pause 전 완료한 작업 이후부터 시작된다.\nForce Restart\n중지가 정상적을 되지 않는경우 본 버튼을 통해 강제 중지후 기동할 수 있다. 재기동 수행중인 서버가 중지 완료될때까지만 화면에 보여진다.\nNext\n현재 재기동중인 서버의 작업이 완료되기 전, 다음 서버의 재기동작업을 바로 진행하고 싶은경우 Next 버튼을 통해 다음 서버의 재기동을 수행할 수 있다. Next 를 수행해도 앞 서버들의 재기동 작업은 계속 수행된다.\nWeb Server Server Cluster 내 Web Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Web Server의 Master Server 선택, 동기화 할 설정파일목록을 설정할 수 있다.\nMaster Server :\nServer Cluster내 Web Server 중 Master Server를 지정한다.\nServer Configs for Synchronization :\nServer Cluster 내의 Web Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Web Server의 Home 하위의 상대 경로이다.\nConnector Web Server의 상세 connector정보들을 확인 및 수정 할 수 있다.\nWeb Server 목록에서 서버를 선택시 하단의 Connector 탭을 통해 선택된 서버의 Connector 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Connector에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nWeb Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Web Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 70. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Web Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nWeb Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Web Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Web Server의 Server Config, Connect was를 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Web Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\nTable 71. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Skip 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nSnapshot Overview Tab의 Snapshot 버튼을 클릭하면 Snapshot 생성을 위한 창이 출력되며 OK 버튼을 클릭하면 Server Cluster의 Snapshot이 생성된다.\nSnapshot은 Server Cluster가 동기화 상태인 경우에만 생성할 수 있다.\nSnapshot 탭을 통해 Snapshot 목록을 관리하는 화면을 제공한다. 일자를 입력 받아 Snapshot 이력을 조회한다. Snapshot이력에 대한 자세한 사항을 조회 할 수 있으며, 원하는 시점으로 복원하는 기능도 제공한다.\nSnapshot 목록의 Detail 항목에 있는 목록 버튼 을 클릭하면 해당 snapshot에 대한 상세정보를 조회할 수 있다.\nSnapshot 정보는 각 server별로 관리하므로 특정 Snapshot 생성 이후 Cluster에 추가된 server는 해당 Snapshot으로의 복원 대상에서 제외된다. (이 경우 Snapshot 복원 후 다시 Sync를 수행해야 모든 server가 동일한 구성을 가질 수 있다.) 또한 Snapshot 이후 Cluster에서 특정 server가 삭제되면 해당 server의 Snapshot 정보는 모두 삭제된다. Snapshot을 만들 때 소스코드는 Snapshot에 복사 되지 않으며 복사되는 설정파일은 기본설정파일 과 application설정파일, enterprise.xml 까지만 Snapshot에 포함된다.\nSnapshot을 생성할 경우 디스크 용량에 부하를 줄 수 있으므로 주의하여 생성한다. 또한 생성된 Snapshot은 자동으로 삭제되지 않고 사용자가 직접 삭제해야 한다. 따라서 불필요한 Snapshot을 적절한 시기에 삭제하는 것을 권장한다.\n5.1.5. Scaling Server Cluster 생성시 Enable Scaling 옵션을 True로 선택하면 CSP 또는 Cloud 플랫폼이 제공하는 Auto-Scaling(Infra Scaling)에 따른 서비스 Scaling을 지원한다. 이 기능은 VM의 OS가 Linux이고, VM Instance 생성시 Init-Script (예 : AWS EC2의 UserData)가 제공되는 환경에서만 지원된다.\nCloud환경에서 Scaleing 은 일반적으로 다음과 같은 절차로 수행된다.\nVM Image 생성 (LENA Node, LENA Server 및 Application 등이 포함된 Image)\nVM Init-Script 작성\nLENA Manager에 Scaling Policy 설정\n사전 설정한 Scaling Trigger 조건 (Resource 임계치 조건) 발생시 VM Auto-Scaling Out 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-Out시 Cloud Init-Script에 따라 LENA Node Agent 및 Server의 등록, 설정동기화, License 발급 수행 (LENA 영역)\nResource 임계치가 정상화되면 VM Scale-in 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-in 후, Node Agent Alive 체크 실패가 LENA Manager에 설정된 횟수 만큼 발생하면, 해당 Node 및 Server를 LENA Manager에서 제거 (LENA 영역)\n다음에서는 위의 절차중 LENA의 Scaling 지원영역과 관련된 Scaling Policy 설정 , VM Init-Script 관련 부분, LENA Node Agent / Server의 등록과 관련된 내용에 대해서 설명한다.\nScaling 기능은 Infra Scaling시 실행되는 Init-Script내에서 필요 환경변수 설정하고 LENA Scaling 실행 명령인 scale.sh 호출함으로서 Scale-Out이 실행된다. Manager에 설정된 Rule에 따라 Node Agent 통신 불가 인식 시 또는 VM 소멸시 stop-agent.sh을 옵션 설정하여 명시적으로 호출할 시 Scale-In이 실행된다.\nScale Out\nScale Out은 환경변수 설정하고 scale.sh을 호출함으로써 수행된다. AWS를 예를들면 AutoScaling그룹의 시작 템플릿에서 UserData에 해당 Script를 작성하여 실행한다. 미리 Manager에 Scaling License가 배포되어 있어야 Scaling License를 다운받아 서버가 정상 기동할 수 있다.\nInit-Script Init-Script에는 필요한 환경변수를 설정하고, scale.sh을 호출하는 절차가 작성된다. Scale Out 관련 scale.sh에서 참조하는 환경 변수는 다음과 같다.\nTable 72. scale.sh 참조 환경변수 환경변수 설명 LENA_MANAGER_ADDRESS\n필수 옵션으로, Node, Server에 대한 Scaling 처리를 수행할 LENA Manager의 서비스 주소로 형식은 {IP주소}:(HttpPort} 이다.\n이 환경변수로 이중화된 Manager에 대한 Fail-Over 설정을 할 수 있다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속이 실패하면 두번째 Manager에 접속을 시도한다. 지정된 시간(기본 10분)동안 Manager와의 접속이 성공할때 까지 과정을 반복적으로 수행한다.\nJAVA_HOME\nNode Agent 및 Server에서 사용할 Java의 설치 위치 이다.\nLENA_CLUSTER_NAME\nServer Cluster 명, Scale된 Server가 등록될 대상 Server Cluster의 이름 이다. 현재 존재하는 Server Cluster명을 기입해야만 정상적으로 Scaling이 수행된다.\nLENA_USER, LENA_GROUP\nNode Agent 및 Server를 기동할 OS 사용자 및 그룹\nLENA_WAS_SCALING\nWAS 서버의 Scaling 수행 여부\nLENA_WAS_HOME\nWAS 서버의 설치 위치\nLENA_WAS_AGENT_PORT\nWAS 서버의 Node Agent 서비스 포트\nLENA_WEB_SCALING\nWeb 서버의 Scaling 실행 여부\nLENA_WEB_HOME\nWeb 서버의 설치 위치\nLENA_WEB_AGENT_PORT\nWeb 서버의 Node Agent 서비스 포트\nLENA_WEB_OPENSSL_VER\nOS에 설치된 OpenSSL의 Version으로, Web서버 기동을 위해 필요하다.\n지원되는 버전은 1.0.1, 1.0.2 , 1.1.1 이고, 기본 값은 1.0.2 이다.\nLENA_IMAGE_TYPE\nVM Image의 유형으로 LENA 패키지만 설치된 'base\u0026#8217;와 Server까지 설치된 'golden' 가 있다. 'base\u0026#8217;는 Scaling Mode 중 'clone\u0026#8217;에 대응되며, 'golden\u0026#8217;은 Scaling Mode중 'sync' / 'nosync\u0026#8217;에 대응된다.\nWAS_CONFIG_DATA\n개별 WAS의 설정정보로 Json 형식으로 정의된다. Session Cluster 정보, Datasource 정보를 설정할 수 있고, 이는 실제 구성된 Server의 설정정보를 변경한다.\n환경 변수 적용 및 scale.sh 호출 예시 (Init-Script) export LENA_MANAGER_ADDRESS=10.200.30.213:7700,10.200.30.214:7700 export LENA_CLUSTER_NAME=cust-g3r export LENA_USER=lena export LENA_GROUP=lena export LENA_WAS_SCALING=Y export LENA_WAS_HOME=/engn001/lena/1.5.0 export LENA_WAS_AGENT_PORT=16800 export LENA_WEB_SCALING=Y export LENA_WEB_HOME=/engn001/lenaw/1.5.0 export LENA_WEB_AGENT_PORT=16900 export LENA_WEB_OPENSSL_VER=1.0.2 export LENA_IMAGE_TYPE=base export WAS_CONFIG_DATA='[ { \u0026quot;server_id\u0026quot;: \u0026quot;comm_core_was-8980\u0026quot;, \u0026quot;session_cluster\u0026quot;: { \u0026quot;primary_port\u0026quot;: \u0026quot;5480\u0026quot;, \u0026quot;secondary_port\u0026quot;: \u0026quot;5480\u0026quot; }, \u0026quot;datasource\u0026quot;: [ { \u0026quot;jndi_name\u0026quot;: \u0026quot;jdbc/petclinic\u0026quot;, \u0026quot;url\u0026quot;: \u0026quot;jdbc:mysql://10.200.30.7:63306/petclinic\u0026quot; } ] } ]' if [ \u0026quot;$LENA_WAS_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WAS_HOME/bin/scale.sh; fi if [ \u0026quot;$LENA_WEB_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WEB_HOME/bin/scale.sh; fi Scale-in\nScale-in은 Scale-Out과정을 통해 등록된 Node와 Server를 해지하는 과정으로 1) Manager의 Scheduler에 의한 Node Agent로 부터 응답이 없는 Node와 해당 Node에 설치된 Server를 자동으로 등록해지하거나 또는 2) Option을 추가한 stop-agent.sh을 직접 호출하여 명시적으로 실행할 수 있다. stop-agent.sh의 옵션 정보는 다음과 같다.\nTable 73. stop-agent.sh의 옵션 정보 옵션 설명 -ur${Manager Address(IP:Port)}\n필수 옵션, Node 또는 Server를 등록해지 (Ur egister)한다.\n입력 파라미터는 Manager의 주소로 형식은 ${IP주소}:${HttpPort} 이다.\n이 옵션은 Manager에 대한 Fail-Over 처리가 가능하다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속을 실패하면 두번째 Manager에 접속을 시도한다.\n-f\n강제 등록해지 여부, 선택사항\n-f 옵션이 설정되었을 경우 Server Cluster에서 등록해지 된다.\n-rt ${time - milliseconds}\n\"Retry Time\" , Optional\n해당시간 만큼 Retry한다. Retry 주기는 3초, 기본 Retry Time은 10초임\n옵션 사용 예시 # Manager에서 Node / Server 정보를 모두 제거 한다. # Manager License 사용량 산정에서 해당 서버의 사용량이 중지된다. stop-agent.sh -ur 10.80.44.55:78700 -f Scaling Overview Scaling 탭을 선택하면 제공되는 화면 상단의 테이블은 Node 타입 별 현재 Scaling 현황을 보여준다.\nInitial Node : 현재 Server Cluster에 포함되어 있는 노드 수\nScaled Node : Scaling 정책에 따라 생성된 노드 수\nToday Event : 오늘 하루 Scaling 이벤트 발생 횟수\nLatest Event : 최근에 발생된 Scaling 이벤트 발생시간\nPolicy Scaling시 적용되는 Naming Rule과 같은 정책 정보를 정의 할 수 있다.\nCommon Policy System : Scaling 적용 시스템 명\nSync Button Enabled : Server Cluster 기능의 Sync버튼 활성화 여부\nScaling Mode : Server Scaling 유형\nnosync : Node와 Server를 등록하고 Cluster에 등록한다.\nsync : Node와 Server를 등록하고 Cluster에 등록 후 Cluster Config 기반 Sync 수행, Scaling 되는 신규 Server에 대해서만 Sync를 수행한다.\nclone : Node를 등록하고 Cluster에 등록 후 Master Server를 복제(Clone)하여 Server를 설치하고 Cluster에 등록 및 Web/WAS Sync 수행\nWeb-WAS Connection Scope : Web-WAS 연계 방식\nnone (Using Proxy) : 별도의 Web-WAS 연계를 수행하지 않음\nJK Mesh - Cluster Servers : Cluster내 서버간의 연계를 수행, Web의 경우 신규등록되는 Web서버와 Cluster내 Server들을 연계, WAS의 경우 신규등록되는 WAS 서버와 Cluster내 Web서버와의 연계, nosync Mode일때는 Web서버에 설정된 LoadBalancer를 동기화 하지않고 LoadBalancer별로 Cluster내 WAS를 연계함으로서 Blue-Green 배포방식을 지원\nJK Mesh - Servers on same machine : 동일 VM 내에 있는 Web-WAS 만을 대상으로 연계 수행\nWAS Node Node Naming Rule : WAS 노드 명명 규칙\nServer Naming Rule : WAS 명명 규칙\nWait For WAS Start Up : WAS가 Scale-Out되었을 때 기동대기 여부이다. 'Y\u0026#8217;인 경우 기동된 후 다음 절차 (예 : WEB 서버 재기동)를 수행한다.\nWait Time for WAS Start Up : 최대 WAS 기동대기 시간. Wait For WAS Start Up이 'Y\u0026#8217;일 경우에도 해당 시간이 지나면 다음 절차를 수행한다.\nWEB Node Node Naming Rule : WEB 노드 명명 규칙\nServer Naming Rule : Web 서버 명명 규칙\n명명규칙에서 사용되는 Convention(예약어)은 다음과 같다.\n#{IP} : 각 단위가 '-'로 구분된 Node 또는 Server IP 주소\n#{IP[4]} : Node 또는 Server의 IP 주소 중 4번째 숫자\n#{PORT} : Node Agent 또는 Server의 HTTP 서비스 주소\n#{MASTER_NAME} : Master Server의 이름\n#{HOSTNAME} : Node 또는 Server가 설치된 VM의 Host명\n#{HOSTNAME[R4]} : VM Host명의 오른쪽 끝 4자리\n해당 항목의 정보를 저장 후 Save 버튼 을 눌러 저장한다.\nWAS Scaling Template / Web Scaling Template Sync모드 Scaling시에 동기화되는 파일 목록과 내용을 조회할 수 있다. 보여지는 File 목록들은 해당 Server Cluster의 Master Server로 부터 Manual 방식으로 복사 하여 생성된다. 화면의 Create 버튼 을 누르면 수동으로 파일이 생성된다. 돋보기 버튼 을 눌러 파일의 상세내용을 조회할 수 있고, 현재 Master Server의 설정파일과 비교한 결과를 확인할 수 있다.\nHistory 날짜 및 시간을 기준으로 Scaling 이벤트의 history를 조회할 수 있다. Scaling이 발생한 날짜를 선택하고 시간을 입력한 후 Search 버튼 을 눌러 해당 시간에 발행한 Scaling Event를 조회한다.\nScaling 기능은 Enterprise Edition에서만 제공되는 기능이다.\n6. Resource 6.1. Database 좌측 메뉴에서 Database를 선택하면 Database Resource 목록이 조회된다.\nFigure 9. Database 목록 조회 화면 6.1.1. Database 등록 Database Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n입력 항목을 입력한다.\nResource Name을 입력한다.\nDriverClassName을 확인 후 원하는 벤더의 드라이버를 선택한다.\nAddress(host/Port) 정보를 입력한다.\nSave 버튼 을 클릭해 저장한다.\n6.1.2. Database 수정 Database Resource 목록에서 수정하려는 Database Resource의 체크박스를 선택한다.\nDatabase Resource의 항목을 수정한 후 저장한다.\n내용이 수정될 경우 해당 Database Resource에 연결된 DataSoruce Resource및 WAS의 설정에 전파되므로, 해당 Database Resource 하위에 연결된 DataSoruce Resource가 존재할 경우 입력창이 기본적으로 Disable 된다. Edit 버튼 을 클릭하면 수정할 수 있다.\n6.2. DataSource 좌측 메뉴에서 DataSource를 선택하면 DataSource Resource 목록이 조회된다.\nFigure 10. DataSource 목록 조회 화면 6.2.1. DataSource 등록 DataSource Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nResource Name 필드에 논리적인 이름을 입력한다.\nServer Type을 설정한다. Server Type은 Standard, Enterprise 중에 선택하여야 하며, 이 후 같은 Type의 서버에서만 Import하여 사용할 수 있다.\nDataSource의 상세 설정을 한다(\u0026lt;Server DataSource 설정\u0026gt;\u0026gt;의 상세 항목 설명 참고)\nUpload 버튼 을 클릭하여 해당 DataSource의 Driver를 Manager서버에 등록한다. 미리 등록된 Driver는 운영자가 Server에 Import하는 시점에 해당 Server로 전송된다.\nSave 버튼 버튼을 클릭하여 저장한다.\nManager에 업로드 된 JDBC Driver는, 운영자가 Server에 해당 DataSource Resource를 Import하는 시점에 해당 Server로 전송된다. 전송된 JDBC Driver는 {서버홈경로}/lib/datasource 디렉토리에 위치하며 Classpath에 자동으로 등록된다.\n6.2.2. DataSource 수정 DataSource Resource 목록에서 수정하고자 하는 행을 선택하면 DataSource Resource 수정 화면이 표시된다.\n변경하고자 하는 설정을 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 11. DataSource 상세 정보 화면 DataSource Resource 정보를 수정한 후 저장하면 해당 DataSource Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server를 재기동하면 해당 설정이 적용된다.\nStandard Type으로 설정한 DataSource Resource를 Standard 서버에 Import 한 후에 Server Type을 Enterprise로 변경할 수 없다.\nClasspath 등록 후 DataSource Resource 삭제 시, Classpath는 삭제되지 않음에 유의해야 한다.\n6.2.3. DataSource 삭제 DataSource Resource 목록에서 삭제할 DataSource Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer 또는 Application에서 Import하여 Registered Server 또는 Registered Application이 존재하는 경우, 해당 DataSource Resource는 삭제할 수 없다.\n6.2.4. JDBC Driver Upload DataSource Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Driver File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Driver File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Driver File을 Upload한다.\n6.2.5. DataSource Import 생성한 DataSource Resource를 Import해서 사용하고 있는 Server 목록(Scope가 Context, Global, Global + Link인 경우) 또는 Application목록(Scope가 Application인 경우)은 DataSource Resource 상세 조회 시 하단 영역에 표시된다.\nDataSource 상세 화면에서 DataSource Import 하기 Scope가 Context, Global, Global + Link인 DataSource Resource는 자신을 Import하는 Server를 등록할 수 있다.\nDataSource 관리 화면에서 특정 DataSource Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 DataSource를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 DataSource Resource가 Import 된다.\nImport된 DataSource Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 DataSource Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; DataSource 탭을 클릭하면, 해당 Server의 DataSource Resource 목록 조회 및 DataSource Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 DataSource Resource 목록이 조회된다.\nImport 하고자 하는 DataSource Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 DataSource Resource를 Import 한다.\nDataSource Resource를 Import 하게 되면 해당 DataSource Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 DataSource Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; DataSource 화면에서 조회할 수 있다.\nStandard Server에서는 Enterprise Type의 DataSource Resource를 Import 할 수 없다.(목록에 표시되지 않음)\nImport한 DataSource Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; DataSource 화면으로 이동하여 변경한다.\n6.3. JTA 좌측 메뉴에서 JTA를 선택하면 JTA Resource 목록이 조회된다.\nFigure 12. JTA 목록 조회 화면 6.3.1. JTA 등록 JTA 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.3.2. JTA 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 13. JTA 상세 정보 화면 JTA Resource 정보를 수정한 후 저장하게 되면 해당 JTA Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.3.3. JTA 삭제 JTA 목록에서 삭제할 JTA Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JTA Resource를 삭제할 수 없다.\n6.3.4. JTA Import 생성한 JTA Resource를 Import해서 사용하고 있는 Server 목록은 JTA Resource 상세 조회 시 하단 영역에 표시된다.\nJTA 상세 화면에서 JTA Import 하기 JTA 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JTA Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JTA Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JTA Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JTA 탭을 클릭하면, 해당 Server의 JTA Resource 목록 조회 및 JTA Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JTA Resource 목록이 조회된다.\nImport 하고자 하는 JTA Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JTA Resource를 Import 한다.\nJTA Resource를 Import 하게 되면 해당 JTA Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JTA Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JTA 화면에서 조회할 수 있다.\nImport한 JTA Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JTA 화면으로 이동하여 변경한다.\n6.4. JMS 좌측 메뉴에서 JMS를 선택하면 JMS Resource 목록이 조회된다.\nFigure 14. JMS 목록 조회 화면 6.4.1. JMS 등록 JMS 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n등록할 JMS Resource의 유형을 선택하면 하단에 선택한 유형에 맞게 설정 정보가 표시된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.4.2. JMS 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 15. JMS 상세 정보 화면 JMS Resource 정보를 수정한 후 저장하게 되면 해당 JMS Resource 가 사용되는 Server 에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.4.3. JMS 삭제 JMS 목록에서 삭제할 JMS Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JMS Resource를 삭제할 수 없다.\n6.4.4. JMS Import 생성한 JMS Resource를 Import해서 사용하고 있는 Server 목록은 JMS Resource 상세 조회 시 하단 영역에 표시된다.\nJMS 상세 화면에서 JMS Import 하기 JMS 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JMS Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JMS Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JMS Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JMS 탭을 클릭하면, 해당 Server의 JMS Resource 목록 조회 및 JMS Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JMS Resource 목록이 조회된다.\nImport 하고자 하는 JMS Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JMS Resource를 Import 한다.\nJMS Resource를 Import 하게 되면 해당 JMS Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JMS Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JMS 화면에서 조회할 수 있다.\nImport한 JMS Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JMS 화면으로 이동하여 변경한다.\n6.5. Application 좌측 메뉴에서 Application를 선택하면 Application Resource 목록이 조회된다.\nFigure 16. Application 목록 조회 화면 6.5.1. Application 등록 Application 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.\nApplication Type이 WAR일 경우에는 추가로 설정할 수 있는 항목이 표시된다.(상세 설정 값은 Application Settings 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.5.2. Application 수정 Application Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 17. Application 상세 정보 화면 Application Resource 정보를 수정한 후 저장하게 되면 해당 Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.5.3. Application 삭제 Application 목록에서 삭제할 Application Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 Application Resource를 삭제할 수 없다.\n6.5.4. Application Upload Application Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Application File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Application File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Application File을 Upload한다.\nApplication Import 생성한 Application Resource를 Import해서 사용하고 있는 Server 목록은, Application Resource 상세 조회 하단 영역에 표시된다.\nApplication 상세 화면에서 Application Import 하기 Application 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nApplication 관리 화면에서 특정 Application Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 Application를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 Application Resource가 Import 된다.\nImport된 Application Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 Application Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Applications 메뉴를 클릭하면, 해당 Server의 Application Resource 목록 조회 및 Application Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 Application Resource 목록이 조회된다.\nImport 하고자 하는 Application Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 Application Resource를 Import 한다.\nApplication Resource를 Import 하게 되면 해당 Application Resource와 Server간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 Application Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; Application 화면에서 조회할 수 있다.\nImport한 Application Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; Application 화면으로 이동하여 변경한다.\n7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 Monitoring Dashboard 화면은 하단에 3개의 탭을 제공하고 있고 선택된 탭에 따라 상단에 제공되는 요약정보가 변경된다.\n탭 별로 제공되는 정보는 다음과 같다.\nNode 탭 등록된 Node별 Server 모니터링 정보 제공\nServer Cluster 탭 Server Cluster 그룹별로 등록된 Server 모니터링 정보 제공\nService Cluster 탭 Service Cluster 그룹별로 등록된 Container 모니터링 정보 제공\n각 정보의 조회 주기를 설정할 수 있으며, WAS의 경우 Function 컬럼에 있는 팝업 버튼 을 클릭하면 상세 모니터링 화면으로 이동할 수 있다.\nMonitoring Dashboard 화면은 다음과 같다.\nFigure 18. Monitoring Dashboard의 Node 탭 화면 Figure 19. Monitoring Dashboard의 Server Cluster 탭 화면 Figure 20. Monitoring Dashboard의 Service Cluster 탭 화면 Service Cluster 탭은 Container Edition에서 제공되는 기능이다.\nMonitoring Dashboard 화면에서 사용된 속성들은 아래와 같다. 사용률 형태로 제공하는 정보의 색상은 Status Range 속성을 이용해 변경할 수 있다. (이 장의 하위 절인 모니터링 기본 설정 참고)\nTable 74. Node 상태 항목 설명 비고 CPU\nNode의CPU 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nMemory\nNode의 Memory 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nDisk\nNode의 Disk 사용률\nEngine이 설치된 Disk 사용률로써 Default 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nTable 75. Application Server 상태 항목 설명 비고 Status\nServer 기동여부, 진단결과발행여부(구급차 아이콘) 및 자동대응수행여부(방패 아이콘)\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap Memory\nApplication Server에서 사용되는 Heap Memory 사용률\nThread Pool\nApplication Server가 Pool로 관리하는 Request Thread 사용률을 Connector(Ajp, Http) 별로 표시\nDataSource\nApplication Server가 Pool로 관리하는 Datasource Connection 사용률\nSession Clustering\nApplication Server에 설정된 Session Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 76. Web Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nCPU\nWeb Server 프로세스의 CPU 사용률\nMemory\nWeb Server 프로세스의 Memory 사용률\nThread\nWeb Server의 Thread 수 (Active / Max)\nConnected WAS\nWeb Server와 연결된 WAS 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 77. Session Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap\nSession Server에서 사용되는 Heap Memory 사용률\nSession Count\nActive 상태인 Session 비율\nMirror Server\nMirror Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\n각 서버를 즉시 제어할 수 있는 기능을 다음과 같이 함께 제공된다.\nTable 78. Application Server 제어 기능 항목 설명 비고 Thread Dump\nThread Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nActive Service Dump\nActive Service Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nHeap Dump\nHeap Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nForced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nForced Restart\n서버 강제 재시작\n대기 시간 없이 즉시 강제 재시작\nAll Diagnostics Disable\n해당 서버에 적용된 진단/대응 기능을 모두 Disable 처리\nFigure 21. Dump 창 Heap Dump, Thread Dump, Active Service Dump를 생성하고 다운로드 할 수 있다. 일반적으로 Dump는 서버에서 Out Of Memory등의 오류, Thread Pool의 과다 사용, 서비스 지연 등이 발생한 경우 원인 파악을 위해 생성한다.\n생성하려는 Dump 타입에 따라 Thread Dump 버튼 , Active Service Dump 버튼 , Heap Dump 버튼 을 클릭해 Dump를 생성한다. 생성된 Dump는 Web Application Server가 존재하는 Host내 저장되는데, Thread Dump는 {log_home}/logs/tdump, Active Service Dump는 {log_home}/logs/sdump, HeapDump 파일은 Dump파일은 {log_home}/logs/hdump 경로에 저장된다.\nDelete 버튼 을 클릭하여 Dump 파일을 삭제할 수 있다. Download 버튼 을 클릭해 Dump 파일을 다운로드 할 수 있으며, 다운 로드 시 해당 Dump 파일이 시스템 현황 Dump 파일과 함께 zip 형태로 다운로드 된다.\nDump 관리 화면의 항목은 다음과 같다.\nTable 79. Dump 화면 항목 항목 설명 비고 File Name\n생성된 파일 이름\n날짜를 포함한 문자열로 자동 생성된다\nSize\n생성된 파일의 사이즈\nStatus\nDump 수행 시점의 System 및 Server의 상태\nDump 생성 시점의 시스템의 CPU, Memory 정보 및 Web Application Server의 주요 리소스 사용량 정보도 Dump 생성 시 함께 생성한다.\nView 버튼 을 클릭하여 생성된 Status 값을 확인할 수 있다\nTable 80. Web Server제어 기능 항목 설명 비고 Forced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nGraceful Stop\n서버 Graceful 종료\nMonitoring 정보가 표시되지 않는다면 등록된 Node/Server가 실제로 존재하는지, Node/Server와 통신이 잘 되는 상태인지 체크한다.\n7.1.2. 현황 모니터링 상세 Monitoring Dashboard에서 Function 컬럼에 있는 가운데 버튼(View Detail Chart) 을 선택하면 상세한 Thread, Memory, 서비스 정보를 모니터링할 수 있다.\nSystem 창 Web Application Server의 Memory, Thread, Service 정보를 확인할 수 있다.\nFigure 22. System 탭 Memory Chart 실시간 Memory 사용량 정보가 표시된다. 제공하는 정보로는 GC Time(Garbage Collection 소요 시간), GC Count, Heap Used(Total Memory - Free Memory), Total Memory(서버에서 사용중인 총 메모리)가 있다. 차트의 붉은 점선은 사용 가능한 최대 Heap Memory를 의미한다. 따라서 차트에서 Heap Memory 사용량이 일반적인 GC패턴이 아닌 긴 시간동안 연속적으로 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread Chart Web Application Server가 사용자의 요청을 처리하기 위해 Pool 로 관리하고 있는 Request Thread 사용 현황을 볼 수 있는 Line Chart이다. 차트의 붉은 점선은 사용할 수 있는 Request Thread의 최대치를 의미한다. 때문에 차트에서 Request Thread 수가 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread List Web Application Server의 모든 Thread를 확인할 수 있다. 출력된 Thread 이름이나 Thread 상태를 기준으로 필터링 할 수 있다. Thread List의 항목은 아래와 같다.\nTable 81. Thread List 항목 항목 설명 비고 Thread ID\n고유 Thread ID\nName\nThread 이름\nStat\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nCPU\n지정된 Thread에 대한 CPU 사용시간\nTx Id\n트랜잭션 ID\nElapsed\nThread가 수행되는데 걸린 시간\nService Name\nThread가 수행한 서비스 이름\n+ 버튼 을 눌러 다음과 같은 상세 정보를 확인할 수 있다.\nTable 82. Thread 상세 정보 항목 항목 설명 비고 threadId\n고유 Thread ID\nthreadName\nThread 이름\nState\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nthreadCpuTime\n현재 Thread를 포함한 모든 Thread의 CPU 시간\nthreadUserTime\n현재 Thread의 CPU 시간\nblockedCount\nBlock된 합계\nblockedTime\nBlock된 누적 경과시간\nwaitedCount\n대기한 Thread의 합계\nwaitedTime\n대기한 Thread의 누적 경과시간\nlockOwnerId\nlock된 Object를 소유한 Thread의 ID\nlockName\nlock된 Object이름\nlockOwnerName\nlock된 Object를 소유한 Thread의 이름\nstackTrace\nstackTrace\nActive Service List 서비스 정보 및 해당 서비스를 처리하고 있는 Thread 정보를 확인할 수 있다. 해당 정보 내 항목은 Thread List 항목과 유사하며, 다음과 같은 추가 항목이 존재한다.\nTable 83. Active Service List 항목 항목 설명 비고 Sql\n현재 수행 중인 SQL문\nDataSource 창 Application Server에 설정된 DataSource 정보를 확인할 수 있다.\nFigure 23. DataSource 탭 화면 DataSource Chart Active Connection 수와 Idle Connection 수가 Chart에 실시간으로 표시된다. 차트의 붉은 점선은 설정된 최대 Connection 수를 의미한다. Active Connections가 붉은 점선에 근접할 경우 유의해야 한다. 콤보박스에서 DataSource를 선택하여 다른 DataSource를 모니터링 할 수 있다.\n최대 Connection 수는 DataSource 정보 등록화면의 maxConnection 속성을 통해 변경할 수 있다.\nDataSource Information 지정한 Datasource의 설정 정보를 확인할 수 있다.\n7.1.3. 모니터링 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting 메뉴에서 모니터링 기본 설정을 할 수 있다. 설정 항목은 다음과 같다.\nTable 84. 모니터링 관련 기본 설정 항목 항목 설명 기본값 Status Range\nMonitoring Dashboard 에서 Resource의 Low, Middle, High 기준을 설정한다.\n60% 미만일 경우 Low, 60% 이상일 경우 Middle, 80% 이상일 경우 High를 의미한다\nDiagnostics Interval\n진단 주기를 설정한다.\n10000(ms)\nDump Limit\n각 서버의 Dump(Thread/ActiveService/Heap) 디렉토리 별 Dump 개수 제한(0은 무제한을 의미)\n200(개)\n7.2. Analysis Dashboard Analysis Dashboard에서 시스템 단위로 실시간 장애 분석 현황 정보를 제공한다. 제공하는 정보 제공 유형은 아래와 같다.\nPerformance Map\nAnalysis Summary\nInstance Map\nFigure 24. Analysis Dashboard 7.2.1. Performance Map Analysis Dashboard의 좌측 상단에 보이는 Performance Map은 \"Thread \u0026amp; Elapsed\", \"Thread\", \"Elapsed\" 기준으로 시스템의 상태 정보를 각각 제공한다. 각 시스템은 Chart상에서 색깔을 가진 원으로 표시된다. 시스템의 상태 별 색상은 다음과 같다.\nNormal: 녹색\nAnomaly: 주황색(진단 결과로 Anomaly 상황이 검출됨)\nFault: 붉은색(진단 결과로 Fault 상황이 검출됨)\nChart에서 X축과 Y축의 의미는 다음과 같다.\nTable 85. Performance Map Chart의 X, Y축 의미 항목 설명 비고 Thread \u0026amp; Elapsed Chart\nX축: 시스템 내 Web Application Server의 평균 Thread 사용률\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nThread Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server의 평균 Thread 사용률\nElapsed Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nChart 상단에 표시되는 System 상태 요약 정보는 다음과 같다.\nTable 86. System 상태 요약 정보 항목 항목 설명 비고 Normal\n정상 System의 수\nSlow\n응답 시간이 오래 걸리는 System의 수\nHeavy\nThread pool사용량이 많은 System의 수\nSlow \u0026amp; Heavy\nSlow하고 Heavy한 System의 수\nChart 하단의 슬라이드 바를 조작해 이전 상태 정보를 볼 수 있으며, 이전 10분 아이콘, 다음 10분 아이콘, 일시 정지 아이콘, 재생 아이콘, 현재 시간 이동 아이콘 을 클릭해 시간을 이동할 수 있다. Dashboard에 처음 진입하면 전체 시스템이 표시되며, Chart 내에서 표시되는 시스템이나 범례를 클릭해서 특정 시스템만 선택해 볼 수 있다. 다시 전체 시스템 전체를 보려면 우측 상단의 All System 아이콘 을 클릭한다.\n시스템 아이콘 위에서 마우스 우클릭을 하면 다음과 같은 기능을 수행할 수 있다.\nTable 87. 시스템 아이콘에서 우클릭 시 사용 가능한 기능 항목 설명 비고 Topology View\nTopology View 화면으로 이동\nService Analysis\nSystem Detail 팝업 창 표시\nMonitoring\nMonitoring Dashboard 화면으로 이동\nStatistics\nStatistics 화면으로 이동\n시스템 우클릭 기능 중에 Service Analysis 클릭 시 표시되는 팝업 창은 다음과 같다. WEB, WAS, SESSION 서버의 현재 상태가 좌측에 표시된다. 우측에는 Transaction Heat Map Chart를 볼 수 있으며, 영역을 드래그 하면 상세 정보를 확인할 수 있다.\nFigure 25. System Detail 화면 Transaction 정보는 LENA Dashboard에서 Service Trace 기능을 통해 수집했던 경우에만 남는다.\n다음은 Transaction Heat Map Chart내의 원하는 영역을 드래그 한 후 표시되는 Transaction 목록에서 특정 Transaction을 선택했을 때 볼 수 있는 상세 정보 화면이다.\nFigure 26. Transaction 상세 정보 화면 상세 정보는 CLIENT(사용자 브라우저 관련), WEB(LENA WEB Server 관련), WAS(LENA WEB Application Server 관련) 측면의 데이터로 구성된다. 각 유형 별 정보에서 볼 수 있는 항목은 다음과 같다.\nTable 88. CLIENT 관련 데이터의 항목 항목 설명 비고 domain lookup time\n브라우저가 서버와 접속하기 위한 domain lookup 시간\nconnection time\n브라우저가 서버와 connection 을 맺는 시간\nserver response time\n브라우저가 서버에 요청을 하고 응답을 받은 전체 시간\nrendering time\n브라우저의 화면 rendering 시간\ntotal complete time\n브라우저에서 처리되는 전체 시간\nerror resource(line)\n스크립트 에러 발생 시, 에러가 발생한 라인\nerror content\n스크립트 에러 발생 시, 발생한 에러 내용\nTable 89. WEB 관련 데이터의 항목 항목 설명 비고 elapsed time\nWEB에서 처리 수행 시간\nWAS 관련 데이터의 항목 기본 정보\nTable 90. 기본정보 항목 설명 비고 objName\n요청을 처리한 서버 명\nendtime\n요청 처리 완료 시간\nelapsed\n요청 처리 수행 시간\nservice\n요청 서비스 명\nipaddr\n호출한 아이피 정보\ncpu\nCPU 사용 시간\nsqlCount\n수행된 쿼리 수\nsqlTime\n쿼리 수행 시간\n프로파일 정보\nTable 91. 프로파일 정보 항목 설명 비고 #\n프로파일 단계 순서를 나타내는 인덱스\np#\n내부 단계인 경우 자신이 속한 부모 인덱스\nTIME\n해당 단계가 시작된 시간\nT-GAP\n현재 단계의 시작 시간과 이전 단계의 시작 시간의 차이\nCPU\nCPU 사용 시간\nCONTENTS\n각 단계의 내용\nCLIENT 와 WEB 관련 정보는 E2E 기능이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n프로파일 정보는 WAS에서 프로파일 설정이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n7.2.2. Analysis Summary 현재 검출된 진단 결과 건수, 오늘 발생한 전체 진단 결과 건수, 지난 날(Default: 1일 전) 발생한 진단 결과 건수의 요약 정보를 보여준다.\nTable 92. 분석 요약 정보 항목 항목 설명 비고 ANOMALY\nFault 상태는 아니지만 주의 깊게 봐야 하는 진단 결과 건수\nFAULT\nFault 상태로 진단된 결과 건수\nRecent Events는 가장 최근에 발생한 진단 결과를 보여주며, 해당 항목을 클릭하면 Report 정보를 확인할 수 있다.\n7.2.3. Instance Map Performance Map에서 특정 시스템을 선택하면, 화면 하단에서 시스템 내 서버 정보 및 진단 결과를 보여주는 Time Line Chart를 볼 수 있다. 서버는 상태에 따라 다른 색으로 표시되며, 특정 서버를 토글 해 우측 Time Line Chart에서 보이거나 안보이게 할 수 있다. 진단 후 Anomaly나 Fault 상황이 검출되면 Time Line에 주황색(Anomaly 상황)이나 붉은색(Fault)으로 표시되는데, 해당 영역을 더블 클릭하면 Report를 확인할 수 있다.\n7.3. Event Dashboard Event Dashboard를 통해 WAS에서 발생한 이벤트 현황 정보를 제공한다.\n이벤트 정보는 WAS에서 생성되어 UDP로 Manager에 전달된다. WAS가 전송한 이벤트 정보는 Manager의 DB에 일정 기간(3달) 동안 보관되며, 해당 이벤트의 상세 SQL 및 Exception Trace 정보는 데이터 크기가 크므로 7일간만 보관된다.\n7.3.1. Event 종류 다음과 같이 4가지 종류의 이벤트가 존재한다.\nWAS의 Out Of Memory Error 발생 이벤트\nWAS의 Full GC 발생 이벤트\nWAS의 Stuck Thread 발생 이벤트\nWAS의 Exception 발생 이벤트\nWAS Exception 이벤트는 아래 두 가지 상황에서 생성되어 Manager로 전송된다.\n사용자 요청에 대해 Servlet의 service 메서드 바깥까지 Exception 이 Throw 되는 경우\n사용자가 설정한 타입의 Exception이 발생한 경우\n7.3.2. Event Dashboard를 통한 Event 관리 LENA Manager 의 Event Dashboard에서 수집된 Event를 관리할 수 있다.\nFigure 27. Event Dashboard 이벤트 발생 추세를 일자 별 라인 차트로 확인할 수 있다. 모든 System 대상으로 볼 수 있으며 특정 System이나 Server 등을 지정해 조회할 수 있다. 달력 버튼 을 클릭해 날자를 변경할 수 있다.\n이벤트 목록의 항목은 다음과 같다.\nTable 93. Event List 항목 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함. 4가지 이벤트는 기본적으로 WARNING이며 변경할 수 있음.\nINFO\nWARNING(DEFAULT)\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nSystem Name\n시스템 이름\nMessage\n이벤트 메시지\nError 이벤트는 발생한 Exception 명을, Stuck Thread 이벤트는 Stuck Thread가 발생했음을 알리는 메시지를 남김\nEvent Date\n이벤트 발생 시각\n( 삭제 버튼 )\n이벤트 삭제 시 선택하는 버튼\n개별 이벤트 행을 클릭하면 아래와 같은 Event 상세 정보를 확인할 수 있다.\nFigure 28. Event 상세 정보 화면 Event 상세 정보의 공통 항목은 다음과 같다.\nTable 94. Event 상세 정보의 공통 항목(Event Common Info) 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함.\nWARNING\nINFO\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nTarget Type\n대상 서버 유형\n다음 유형이 존재함\nWAS\nSERVICE-CLUSTER\nSystem Name\n시스템 이름\nEvent Date\n이벤트 발생 시각\nEvent 별로 서로 다른 상세 정보 항목은 다음과 같다.\nTable 95. Out Of Memory 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Heap Dump File Name\nOut Of Memory Error 발생 시 자동 생성된 Heap Dump 파일 이름\nTable 96. Full GC 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Full GC Start Time\nFull GC 시작 시각\nFull GC End Time\nFull GC 종료 시각\nPrevious Full GC Start Time\n바로 직전 Full GC 시작 시각\nPrevious Full GC End Time\n바로 직전 Full GC 종료 시각\nMemory Usage Before Full GC (MB)\nFull GC 수행 전 메모리 사용량\nMemory Usage After Full GC (MB)\nFull GC 수행 후 메모리 사용량\nTable 97. Stuck Thread 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nThreshold(ms)\nLenaStuckThreadDetectionValve에 설정한 임계값\nActive Time(ms)\nStuck Thread 감지 시점의 해당 서비스 처리 시간\nStack Trace\nStuck Thread 감지 시점의 Stack Trace\nTable 98. Error 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nRemote Addr\nClient 리모트 주소\nCustom Info\n사용자 정의 코드 정보\n사용자가 커스텀 Servlet Filter를 사용해 지정한 Key, Value\nException Trace\n발생한 Exception의 Trace\n7.4. 통계 7.4.1. 연간 진단/대응 통계 DIAGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 메뉴에서 서버 별 연간 진단 결과를 차트를 통해 제공한다.\nFigure 29. Statistics 화면 위 화면에서 다음과 같은 내용을 확인할 수 있다.\nDiagnostics Calendar\n한 칸이 하루를 의미하며, 연간 통계 차트의 일자에 Mouse Over를 하면 해당 일자에 발생한 진단 횟수를 확인할 수 있다.\nDaily Diagnostics Detail\nDiagnostics Calendar에서 특정 일자를 클릭하면, 화면 하단에 선택한 일자의 시간대 별 진단 발생 그래프가 표시 된다.\n7.4.2. 리포트 진단 및 대응 기능이 수행되면 Report가 자동으로 생성된다. Report는 7일간 보관되며 오래된 Report는 자동으로 삭제된다.\n진단/대응 리포트 목록 DAIGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 화면에서 특정 서버를 선택한 후, Report List 버튼 을 클릭하면 진단/대응 리포트 목록 화면을 볼 수 있다. 진단/대응 리포트 목록 화면은 아래와 같다.\nFigure 30. 진단/대응 리포트 목록 화면 View 버튼 을 선택하여 Report를 확인할 수 있다.\n리포트 공통 정보 Report의 내용은 진단 결과에 따라 다르게 표시되지만, 다음과 같은 공통 정보를 가진다.\nFigure 31. 진단/대응 리포트 화면 위와 같이 이상 현상이 지속된 기간 내에 검출된 진단 결과간의 인과 관계를 도식화해 제공하며, 화면 하단에는 각 진단 결과가 어느 시간대에 생성됐는지 보여준다.\nAnomaly 상황은 진단/대응 Rule에 설정한 설정 내용의 일부만 충족된 상황을 의미하며 주황색으로 표시되고, Fault 상황은 진단/대응 Rule에 설정한 설정 내용의 모두를 만족한 상황을 의미하며 붉은색으로 표시된다.\n리포트 상세 정보 Report 하단의 Time Line에서, 특정 시간대의 특정 진단 유형을 클릭하면 다음과 같이 상세 정보를 확인할 수 있다.\nFigure 32. 진단/대응 리포트 상세 정보 Report 상세 정보의 항목은 다음과 같다.\nTable 99. Report 상세 정보 항목 항목 설명 비고 Root Cause\n원인이 되는 진단 항목\n해당 진단 결과를 야기한 원인이 되는 진단 항목을 의미하며, 만약 해당 진단 결과의 원인이 되는 다른 진단 항목이 존재한다면 다른 진단 항목이 표시됨\nAnalysis Rule\n진단/대응 Rule에 설정된 임계\nFault Analysis Raw Data\n진단 근거가 되는 Back Data\nPre-Action for Fault Tolerance\n수행된 Action 및 Dump 파일 명\nRecommended Solution\n조치 가능한 해결책\n진단/대응 유형 별 Back Data 항목은 다음과 같다.\nRequest Full 진단 Report의 Back Data는, 가장 많이 호출된 5개의 서비스 정보이다.\nTable 100. Request Full 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\n대량 DB Data 요청 진단 Report의 Back Data는, 대량 DB Data 요청을 가장 많이 한 5개의 서비스 정보이다.\nTable 101. 대량 DB Data 요청 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nCount\n해당 서비스 요청 수\nBlocked Count\nBlock된 DB 데이터 조회 건수\nDB Conn Full 진단 Report의 Back Data는, 과다 점유된 DataSource Connection Pool 정보이다.\nTable 102. DB Conn Full 진단 Report의 Back Data 항목 항목 설명 비고 DataSource Name\nDataSource 이름\nDB Connection Pool Usage Rate\nDB Connection Pool 사용률\nLong Transaction 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 103. Long Transaction 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nPeak Control 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 104. Peak Control 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nOOM 진단 Report의 Back Data는, OOM 발생 여부 및 메모리 사용 정보이다.\nTable 105. OOM 진단 Report의 Back Data 항목 항목 설명 비고 OOM Occurred\nOOM 발생 여부\nHeap Usage Rate\nHeap Memory 사용률\nFull GC Count\nFull GC 발생 횟수\nMemory Leak\nMemory Leak 발생 여부\nHeap Dump\nHeap Dump가 생성된 경우 파일 이름\nHang 진단 Report의 Back Data는, 서버 상태 및 시스템 리소스 정보이다.\nTable 106. Hang 진단 Report의 Back Data 항목 항목 설명 비고 Node CPU Rate\nNode Agent가 측정한 시스템의 CPU 사용률\nNode Memory Rate\nNode Agent가 측정한 시스템의 Memory 사용률\nProcess CPU Rate\n서버의 CPU 사용률\nFull GC Count\n서버의 Full GC 횟수\n7.4.3. 알림 진단/대응을 통해 Report가 생성되면, 다음과 같이 LENA Manager 우측 상단의 종 아이콘 을 통해 확인 가능하다.\nFigure 33. 진단/대응 결과 알림 알림 내용을 선택하면 생성된 Report를 바로 확인할 수 있으며, 알림 내용을 확인하고 더 이상 표시하지 않기를 원한다면 x 버튼 을 클릭한다. 알림이 많은 경우 Manager 우측 상단의 종 아이콘 을 선택한 후 Notifications 화면에서 일괄적으로 확인을 할 수 있다.\nFigure 34. 진단/대응 결과 알림 목록 일괄 확인 Home 아이콘 을 클릭하면 선택한 알림에 대한 진단 이력 화면으로 이동한다. V 아이콘 을 클릭하는 것은 선택한 알림을 확인했다는 것을 의미하며, 이렇게 클릭한 알림은 Manager 우측 상단의 종 아이콘 에 더이상 표시되지 않는다.\nNotifications 화면에서는 1개월 이내의 지난 알림에 대한 이력을 확인할 수 있다. 1개월이 지난 데이터는 자동으로 삭제된다.\n7.5. 진단 및 대응 진단 및 대응 기능을 사용하면, 장애 가능성 사전에 진단하고 적절한 대응을 자동으로 수행하여 Server 안정성을 높일 수 있다.\n진단 기능은 Rule기반으로 Server의 장애 가능성(또는 장애 상황)을 자동으로 판단하는 기능이다.\n대응 기능은 진단 결과를 기반으로 적절한 Server 제어를 통해 장애 상황를 이겨내고 안정적인 서비스를 할 수 있도록 지원하는 기능이다.\n진단 대상 유형은 다음과 같다.\nRequest Pool의 과다 사용(Reqeust Full)\n과도한 서비스 요청으로 Server의 가용한 Request Thread가 모두 소진되면, 서비스 요청이 지연되거나 서비스 불가 상태에 빠질 수 있다. Request Thread 사용량 기반으로 과도한 서비스 요청 여부를 파악하고, 자동으로 해당 요청을 임시 페이지로 우회시켜 Server를 안정적인 상태로 유지한다.\n대량 DB Data 요청(Bulk DB Data Request)\n서비스가 대량 DB 데이터를 처리하는 경우, 메모리를 과도하게 사용하면서 OOM 현상, 잦은 Full GC에 의한 서버 Hang 현상 등이 발생할 수 있다. 서비스의 대량 DB 데이터 요청 여부를 파악하고, 해당 서비스를 강제로 종료시켜 Server를 안정적인 상태로 유지한다.\nDB Connection Pool의 과다 사용(Db Conn Full)\nDB 처리 시간 지연, WAS-DB간 네트워크 지연, DB Lock 등에 의해 DB Connection이 과도하게 점유된 경우, 서비스는 가용 DB Connection을 할당 받을 때까지 지연된다. DB Connection 할당을 기다리는 서비스들이 누적되어 Request Thread Pool을 과도하게 점유하게 되면, 서비스 불능 상태까지 발생할 수 있다. 특정 DataSource의 DB Connection이 모두 소진된 경우, 할당 대기 시간을 짧게 줄이는 방법을 통해 장애를 격리함으로써 Server를 안정적인 상태로 유지한다.\n수행 시간이 긴 서비스(Long Transaction)\n일시적인 네트워크, 연계시스템 문제 등으로 서비스가 지연되거나 수행시간이 원래 긴 서비스가 존재하는 경우, 해당 서비스들이 Server의 가용한 Request Thread를 과도하게 점유하여 다른 서비스 수행에 지장을 줄 수 있다. 오래 걸리는 서비스들의 Request Thread 사용률을 제한하여 다른 서비스들의 QoS를 보장한다.\n서버 동작 불능(Hang)\nServer가 동장 불능 상태인 Hang 상태가 되면 Server에서 수행되는 모든 작업이 중단되는 것은 물론 Server가 설치된 시스템 전체에 영향을 줄 수도 있다. Hang 상태가 검출되면 즉시 재기동해 Server의 장애 상황을 해소하고 시스템 전체 장애 발생을 방지한다.\nOut of Memory 에러 발생(OOM)\n서비스 로직의 오류 또는 과도한 Memory 사용에 의해 Out of Memory(OOM) 에러가 발생할 수 있다. OOM이 발생하면 Server의 정상적인 동작을 보장할 수 없으므로, OOM 발생 여부를 빠르게 파악하여 신속히 자동으로 재기동함으로써 Server 장애 상황을 극복한다.\n사용자 폭주(Peak Control)\nServer의 처리 한계를 넘는 많은 사용자의 요청이 존재하는 경우, 서비스 지연 또는 불능 상태가 될 수 있다. 만약 사용자 요청이 특정 서비스에만 몰린다면 순서대로 진입하도록 요청을 제어하여 안정적인 서비스를 제공하면서도 사용자의 이탈을 막을 수 있다. 또한 다른 서비스 QoS도 보장할 수 있다.\n7.5.1. 진단/대응 Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Diagnostics Rule Setting 메뉴에서 진단/대응 Rule을 설정할 수 있다.\nFigure 35. Diagnostics Rule Setting 화면 진단/대응 유형 별로 Tab으로 구성되어 있으며, 기본적인 Default Rule 이 제공된다. New 버튼 을 클릭해 신규 Rule을 생성하거나, 기존의 Rule을 선택해 수정 및 삭제를 할 수 있다.\n각 진단 항목별로 다음과 같이 두 개의 Default Rule이 제공된다.\n진단 후 Report만 생성하는 Rule\n진단 후 Report 및 Dump를 생성하는 Rule(Action은 Disable되어 제공됨)\n진단 유형 별 Rule 설정 항목을 다음과 같다.\nTable 107. Request Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRequest Pool(%)\nRequest Pool 사용률 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nFAKE-PAGE: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 108. 대량 DB Data 요청 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRS Count\n서비스 내에서 요청한 DB Data 건수 임계\n10000\nExceptional URI\n진단에서 제외할 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nTHROW-EXCEPTION: Exception을 발생시켜 서비스를 강제로 종료\nNONE\nTable 109. DB Conn Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nDB Connection Pool(%)\nDB Connection Pool 사용량 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nDB-CONN-CONTROL: Datasource Connection 할당 대기 시간 동적 변경(대기 시간 설정 가능)\nNONE\nTable 110. Long Transaction 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nElapsed Time(s)\n진단 대상 서비스 수행 시간 임계\n300\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nTarget URI\n대상 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSERVICE-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 111. Hang 진단 Rule 항목 설명 기본값 Rule Name\nRule 명\nTimeout(ms)\n서버에 Health Check 시도 후, 응답 대기 시간 임계\n3000(ms)\nRetry Count\n서버에 Health Check 실패 시, 재시도 횟수\n3\nFullGC Duration(s)\nFull GC 횟수를 체크할 시간 간격\n60\nFullGC Count\nFull GC 횟수\n2\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nHang 진단 설정 항목간의 관계는 다음과 같다.\nFault 조건 : 서버 Hang에 의해 Health Check 시도 후 Timeout(s) 만큼 응답 없는 상황이 Retry Count 만큼 반복되면 Fault 상황으로 판단하여 Action을 수행함\nAnomaly 조건 : FullGC Duration(s) 간격 내 FullGC Count 만큼 Full GC 발생 횟수가 많다면 Anomaly 상황으로 판단하여 Action 없이 Waning 리포트만 생성함\nTable 112. OOM 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nOUT OF MEMORY\nOOM 발생 여부(Fault 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nMemory Leak\nMemory Leak 발생 여부(Anomaly 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nTable 113. Peak Control 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nTarget URI\nPeak Control 대상 서비스 URI\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nRelease Rate(%)\n이상 상황 해제 조건이 되는 Request Thread 사용률 임계\n10\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nPEAK-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\n7.5.2. Server Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Server Rule Setting 메뉴에서 진단/대응 Rule을 Server에 Mapping하고 Enable/Disable 할 수 있다.\n최초에는 아무 진단 Rule도 Mapping되어 있지 않으므로, Enable/Disable 기능을 수행하기 전에 진단/대응 Rule을 먼저 Mapping해야 한다. 각 서버의 행을 클릭하여 다음과 같이 서버에 진단/대응 Rule을 Mapping 할 수 있다.\nFigure 36. 진단 Rule Mapping 화면 진단/대응 Rule이 Mapping된 이후에는 다음과 같이 Server Rule Setting 화면에서 Rule을 Enable/Disable 할 수 있다.\nFigure 37. Server Rule Setting 화면 Peak Control 진단 Rule만 DIAGNOSTICS \u0026gt; Policy \u0026gt; Peak Control Rule Setting 메뉴에서 설정한다.\n7.6. Trace Trace는 장애 진단을 위해 해당 Request가 LENA Server 간 이동 경로 및 시간을 기록해 원인을 진단 할 수 있게 해준다. LEAN 에서 제공하는 Trace유형은 아래와 같다.\nSession Trace\nEvent Trace\nDIAGNOSTICS \u0026gt; Trace 메뉴의 하위 메뉴를 통해 여러 기능을 사용할 수 있다.\n7.6.1. Session Trace Session 의 Trace 정보(어느 Server에 해당 Session이 존재하는지)를 확인할 수 있다. Session을 찾기 위해서는 Cluster된 Session Server가 기동중이어야 한다.\nFigure 38. Session Trace 화면 조회 결과 항목은 다음과 같다.\nTable 114. Session Trace 조회 결과 항목 항목 설명 비고 Server Type\nServer의 유형\nSession Server: LENA Session Server\nLENA Server: LENA Application Server\nServer Name\nServer 이름\nSession Server인 경우, 검색 대상 Server가 Primary이고 검색 대상 서버의 Slave Server가 Secondary 이다\nCreate Time\nSession 생성 시각\nLast Update Time\nSession이 마지막으로 수정된 시각\nLast Access Time\nServer에 해당 Session을 마지막으로 호출한 시각\nAttribute\nSession Attribute\nContext\nSession의 Application Context\n7.6.2. Event Trace 장애로 판단되는 이벤트가 발생되었을 때, 해당 Request의 Trace 정보를 확인 할 수 있다.\nFigure 39. Event Trace 화면 Trace 정보는 일주일 동안만 보관된다. 이벤트가 발생한 날짜는 검색 조건의 Trace Date에 표시 된다. 검색 결과에서 Status 항목은 발생한 이벤트의 중요도를 의미한다.\nTable 115. Event Trace 검색 결과 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nSESSION ID\n해당 Request의 Session ID\nDetail\n상세정보를 확인할 수 있는 버튼\n검색 결과의 Detail의 상세 조회 버튼 을 누르면 상세 정보를 확인할 수 있다. 각 항목은 다음과 같다.\nTable 116. Event Trace 정보의 상세 정보 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nJVMRoute\nRequest를 처리한 WAS의 JVMRoute 값\nSESSION ID\n해당 Request의 SESSION ID\nSession Server\nRequest를 처리한 Session Server\n연결된 WAS의 Primary/Secondary Session Server로 표기됨\nURL\nRequest의 URL\nTrace되는 이벤트는 아래와 같다.(Event Code는 Log 파일을 보면 확인할 수 있다. 화면에서는 코드를 문장으로 풀이해 보여준다.)\nTable 117. Trace되는 이벤트 코드 및 설명 Event Code 설명 비고 sywz\nSession ID와 JVMRoute 정보가 다름.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession ID does not match with JVMRoute.\nwxso\nWAS에 Session정보 없으나 Session Server Session정보 있음.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession does not exist in Application Server.\nwosx\nWAS에 Session정보가 있으나 Session Server에 Session정보 없음.(Session Server 두 대를 재 기동 했을 경우 발생 할 수 있음.)\nSession does not exist in Session Server.\nwxsx\nWAS에 Session정보 없고, Session Server에 Session정보 없음.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession does not exist in any Server.\nwoxx\nWAS에 Session 정보가 있으나, Primary \u0026amp; Secondary session server와 연결 끊김.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nwxxx\nWAS에 Session 정보가 없고, Primary \u0026amp; Secondary session server와 연결 끊김.(WAS에 해당 Session이 Timeout 및 Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nsywz 이벤트와 wxso 이벤트가 한 Request에서 중복 발생되는 경우, 하나의 검색 결과에 두 이벤트가 모두 표시 된다.\n7.6.3. Trace Setting 다음은 Event/Time Trace 설정을 하는 화면이다.\nFigure 40. Trace Setting 화면 Trace 설정 항목은 아래와 같다.\nTable 118. Trace Setting 항목 항목 설명 비고 Trace On/Off\nTrace 여부\n재기동 없이 적용된다\nType\nUDP: Trace 생성 조건이 되면, UDP로 Manager에 Trace 정보를 전송\nLOG: Trace 생성 조건이 되면, Log로 Trace 정보 저장\nALL: Trace 생성 조건이 되면, UDP와 LOG 기능을 모두 사용\nData\nEVENT: Event가 발생한 경우 Trace 기록\nUID: 해당 UID인 Request만을 Trace로 기록\nUID\n입력된 UID인 Request만 Trace로 기록\n8. Topology 각 시스템의 구성현황을 한눈에 알아볼 수 있으며, 설치 및 설정기능을 제공하고, 자원 모니터링 및 기동/중지 제어를 할 수 있다.\nFigure 41. Topolopgy 화면 8.1. 화면 구성 System 영역, 토폴로지 영역, 자원 모니터링 영역, 서비스 트레이싱 영역으로 구분된다.\nSystem 영역\n등록된 System 리스트를 카드 형태로 제공한다.\n카드 내의 시스템 명 좌측의 아이콘은 시스템의 상태를 의미하는데 상태를 표시하는 기준은 시스템을 구성하는 Resource와 진단 결과에 따라 3단계로 나뉘어 나타낸다.\n파란색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Low, 진단 프로세스가 수행되지 않은 상태\n주황색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Middle 이하 또는 진단 프로세스 수행 결과가 Abnormal 상태\n붉은색 원 아이콘 : 시스템을 구성하는 일부 서버의 자원 사용량이 High 인 경우 또는 진단 프로세스 수행 결과가 Fault 상태\n시스템 명 하단의 시계 아이콘 은 시스템 내의 WAS들의 평균 응답시간을 의미하고, 사용자 아이콘 은 현재 사용자 수(최근 5분 동안) / 오늘 전체 사용자 수를 의미한다.\n자원사용량의 Low, Middle, High에 대한 기준은 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting \u0026gt; Dashboard 항목에서 변경 할 수 있다.\n토폴로지 영역\n시스템 별 노드와 서버 Instance 구성현황을 토폴로지 차트로 보여준다. 각 Node에 설치한 WEB, WAS, Session Server를 설치 및 실행, clustering 을 할 수 있고, 서버 상태 정보를 확인 할 수 있다. 뿐만 아니라 WEB Server-WAS 간 ,WAS-Session Server, WAS-Datasource간에 연동을 설정할 수 있다.\n자원 모니터링 영역\nNode와 Server의 CPU, Memory 등 상세 자원 모니터링 정보를 제공한다.\nService Tracing 영역\n특정 Client IP와 요청 Service Pattern을 기준으로 서비스를 트레이싱하여 Request 수, 평균 응답시간, 서비스 응답 error 수를 확인 할 수 있다.\n시스템목록 우측에 있는 설정 버튼 을 통해 다음의 사항을 변경 할 수 있다.\nChart Refresh Interval : 토폴로지 영역의 데이터 조회 주기\nRefresh Topology Chart : 토폴로지 영역의 차트 그리는 메타데이터 정합성 검증 및 복원\nSystem List System 목록에 보여줄 System 선택 및 순서 변경\nElements Show Endpoint : Endpoint 영역 표시 여부 설정\nShow Edge Info : Edge에 상세정보 표시 여부 설정\nShow Server Name : Server명 표시 여부 설정\nTransparency Node : 토폴로지 영역의 Node 투명도를 설정\nEdge : 토폴로지 영역의 Edge 투명도를 설정\n8.2. 토폴로지 영역 상세 토폴로지에서 뷰 모드에 따라 정보를 구분하여 보여준다.\nView All : 전체 정보를 보여준다.\nLow : 서버의 자원 사용량이 Low 인 인스턴스만 구분하여 보여준다.\nMiddle : 서버의 자원 사용량이 Middle 인 인스턴스만 구분하여 보여준다.\nHigh : 서버의 자원 사용량이 High 인 인스턴스만 구분하여 보여준다.\nStop/unknown : 중지된 인스턴스만 구분하여 보여준다.\n또 Cluster로 단위로 인스턴스들을 활성화하여 보여준다.\n진단기능이 설정되어 있는 WAS의 경우, 자원사용량을 체크하기 이전에 서버상태의 진단 결과가 Abnormal 또는 Fault 인지를 우선적으로 확인한다. 해당 상태로 판단되는 경우에는 High 상태로 표시해준다.\n8.2.1. Control [Edit: OFF] E2E (End to End)관점하에 Client부터 Database까지 상세한 모니터링 정보 및 제어 기능을 제공한다.\nFigure 42. Topolopgy Control [Edit: OFF] CLIENT 영역 Client는 사용자를 말하며, 사용자가 Web서버에 요청을 주고 받는 브라우저 화면 Rendering 시간 및 Script error 내용을 확인 할 수 있다.\nWEB 영역 WEB 영역에서는 설치된 WEB Node 와 WEB 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWeb Node는 Web 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWeb Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWeb Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Memory, Thread 상태 정보를 제공한다.\nWeb Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 3가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Service Control\nService Control은 무중단 적시배포 기능을 제공한다. 이것은 오류 서비스 발생시 이를 수정한 소스를 WAS에 긴급 배포하고 이 WAS를 호출 할 Web 서버(적시서버)를 구성한 후 오류가 발생된 서비스를 요청 받은 Web 서버들이 적시서버로 서비스를 포워딩하여 서비스가 정상적으로 제공되게 하는 방식이다.\n이 기능을 사용하려면 Web Server에서 LSC모듈이 사용되도록 설정이 되어 있어야 한다.(httpd-lsc.conf 파일에서 LscEnable을 On으로 변경 후 서버를 재기동한다.)\n제어시간, 제어조건(Header, Cookie, URL) 및 요청을 forwarding 할 서버(http://IP:Port)를 정의 후 저장하면 정의 된 내용에 따라 실시간으로 들어오는 요청을 해당 서버로 연결하여 서버 재기동 없이 서비스를 제공한다.\nMove to : Configuration\nCluster : Compare, Sync, Snapshot, Graceful Restart\nAPPLICATION 영역 APPLICATION 영역에서는 설치된 WAS Node 와 WAS 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWAS Node는 WAS가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWAS Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWAS Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Thread, Heap 상태 정보를 제공한다.\nWAS Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : Warning, CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 4가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Forced Stop\nManual Check : Thread Dump, Active Service Dump, Heap Dump\nMove to : Configuration, Monitoring\nCluster : Compare, Sync, Snapshot, Graceful Restart\nSESSION 영역 SESSION 영역에서는 설치된 Session Node 와 Session 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nSession Node는 Session 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nSession Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nSession Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Session Count, Heap 상태 정보를 제공한다.\nSession Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Session Count와 기본 정보\n제어 기능\nServer에 대해 크게 2가지 제어 기능을 제공한다.\nServer Control : Start, Stop\nMove to : Configuration\nDB 영역 DB 영역에서는 WAS와 연결된 Database 정보를 제공한다. Database는 RESOURCE 메뉴에서 등록되어 있어야 한다. 노드는 다른 영역과의 동일하게 표현하기 위해 가상의 노드로 표현하고 있다. 각 DB에 대한 모니터링 정보나 제어 기능은 제공하지 않는다.\nEdge 정보 연결선은 각 인스턴스 간, 또는 인스턴스와 Database간의 연결을 의미하며, 서버 평균 응답시간 및 연결된 Connection 수를 나타낸다.\nClient-WEB : Connection 수(Client 브라우저 렌더링 평균 완료 시간(ms)/Web Server 평균응답시간(ms))\nWEB-APPLICATION : Active Connection 수(WAS 평균응답시간(ms))\nAPPLICATION-DB : Active Datasource 사용률 (%)\nEnd to End 모니터링기능은 기본적으로 off상태로 설정되어 있다.\n따라서 Client-WEB, WEB-APPLICATION 사이의 브라우저 렌더링 평균응답시간 또는 Server의 평균응답시간을 보기 위해서는 다음의 순서대로 설정을 해주어야한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\nweb server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n8.2.2. Control [Edit: ON] 토폴로지 영역 우측상단에 Edit 버튼 을 선택하면 편집모드로 전환된다. 여기에서는 시스템 내의 노드와 인스턴스 설치 기능을 제공한다.\nFigure 43. Topolopgy Control [Edit: ON] Node 노드의 설치/수정/삭제 동작 방식은 node와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nNode 버튼 을 선택 후 설치하고자 하는 영역 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n수정\n변경하고자 하는 노드를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 노드를 선택한다.\n우클릭 버튼을 누르면 Hide, Unregister, Uninstall 메뉴 중 원하는 기능을 선택한다.\n노드 삭제시 노드 안에 설치된 서버는 한대도 없어야 한다.\nInstance 서버의 설치/수정/삭제 동작 방식은 server와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nInstance 버튼 을 선택 후 설치하고자 하는 영역의 노드 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n서버가 하나도 설치되어 있지 않은 노드 목록은 각 영역의 아래에 회색바탕 위에 있는 사각버튼으로 제공된다. 빈 노드에 서버를 설치하고 싶은 경우 해당 노드버튼을 더블클릭한다.\n수정\n변경하고자 하는 서버를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 서버를 선택한다.\n우클릭 버튼을 누르면 Unregister, Delete 메뉴 중 원하는 기능을 선택한다.\nEdge Edge는 서버와 서버의 연결을 의미하며 WEB-APPLICATION, APPLICATION-SESSION, APPLICATION-DB 영역 안의 서버들을 연결 할 수 있다.\n연결\nEdge 버튼 을 선택 후 연결하고자 하는 시작서버 선택 후 드래그하여 도착서버와 연결한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\nAPPLICATION-SESSION 간에 연결하는 경우, 실선은 Primary Server, 점선은 Secondary Server를 의미한다.\n연결 정보 변경\n변경하고자 하는 edge를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n연결 해제\n삭제하고자 하는 edge를 선택한다.\n우클릭 버튼의 메뉴인 Delete 버튼을 선택한다.\nCluster CLUSTER 메뉴에서 제공하는 Server Cluster기능을 설정 할 수 있다.\n생성\nCluster 버튼 을 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n변경\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역의 Delete 버튼 을 선택한다.\n8.3. 서비스 트레이싱 영역 상세 특정 서버의 IP 혹은 Service Pattern을 입력 후 Start 버튼 을 선택하면 입력한 정보를 기준으로 서비스를 트레이싱하여 Request 수, error를 확인 할 수 있다. 트레이싱 하는 동안 서비스 트레이싱 영역 우측에 Xlog 정보도 제공하므로 필요에 따라 xlog를 선택하여 상세한 정보를 확인할 수 있다.\n서비스 트레이싱 기능을 사용하기 위해서는 다음의 순서대로 설정을 해주어야 한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\ntracing 대상 Web server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; tracing 대상 Web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\ntracing 대상 WAS의 advertiser.conf파일에서 enable.send.profile.info값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n9. Admin 9.1. IAM Manager의 사용자 관리 및 사용자 별 메뉴 권한 관리 기능을 제공한다.\n9.1.1. Users (사용자 관리) 사용자 목록 ADMIN \u0026gt; Users 메뉴에서 Manager 사용자의 생성, 수정, 삭제 기능을 제공한다.\nFigure 44. Users 화면 사용자 관리의 속성은 아래와 같다.\nTable 119. 사용자 관리 속성 항목(*는 필수값) 설명 비고 Use ID(*)\n사용자 식별자\nUser Name(*)\n사용자 이름\nPassword(*)\n사용자 비밀번호\n비밀번호는 특수문자, 숫자, 영문자 혼합의 최소 8자 이상이어야 한다\nUpdater\n사용자 데이터 수정 및 생성자\nLast Update\n사용자 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n기본적으로 관리자 권한을 가진 계정을 두 개 제공한다.(비상용) 제공되는 계정 외에 사용자를 추가하여 사용하기를 권장한다.\n사용자 등록 New 버튼 을 클릭하여 신규 사용자 등록을 준비한다.\n사용자 ID, 사용자 명, 사용자 패스워드를 입력한다.\n사용자 패스워드는 암호화되어 저장된다.\n패스워드는 글자수가8~20자, 영어 대소문자, 숫자, 특수문자(!@#$%^*+=-) 조합으로 작성한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nPassword 암호화는 해쉬 알고리즘(SHA-512)을 사용한다.\n사용자 수정 수정할 사용자를 선택한다.\n수정 버튼 을 클릭하여 사용자명, 사용자 패스워드를 변경한다.\n사용자 패스워드는 암호화되어 저장된다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nManager 에 로그인시 7 번 이상 실패하면 해당아이디는 잠김 상태가 되어 사용할 수가 없다.\n잠김 상태를 해제하기 위해서는 사용자 관리 화면에서 해당 아이디의 패스워드를 수정해주어야 한다.\n패스워드 수정을 위해 Manager 에 로그인 한 계정이 없는 경우에는, $LENA_HOME/bin/reset-manager-pw.sh 를 실행하여 패스워드를 수정할 수 있다.\n사용자 삭제 삭제할 사용자를 선택한다.\n삭제 버튼 을 클릭하여 사용자를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\n사용자가 1명 남은 경우는 삭제할 수 없다.\n9.1.2. Auths (권한관리) Manager는 메뉴 별 권한 관리를 위해 권한 그룹을 생성해야 한다. ADMIN \u0026gt; Auths 메뉴를 통해 권한 그룹을 생성, 수정, 삭제할 수 있다.\n권한 목록 Figure 45. Auths 화면 권한 관리의 속성은 아래와 같다.\nTable 120. 권한 관리 속성 항목(*는 필수값) 설명 비고 Auth ID(*)\n권한 식별자\nAuth Name(*)\n권한 이름\nDescription\n등록된 권한에 대한 설명\nUpdater\n권한 데이터 수정 및 생성자\nLast Update\n권한 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n권한 생성 New 버튼 을 클릭하여 신규권한 등록을 준비한다.\n권한 ID, 권한 명, 권한 설명을 입력한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다\n권한 수정 수정할 권한을 선택한다.\n수정 버튼 을 클릭하여 권한 명, 권한 설명을 변경 한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n권한 삭제 삭제할 권한을 선택한다.\n삭제 버튼 을 클릭하여 권한을 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n9.1.3. User-Auth Mapping (사용자 권한 관리) Manager 사용자는 메뉴 사용 권한 획득을 위해 최소한 1개의 그룹에 소속되어 있어야 한다. 관리자는 권한 그룹을 선택하여 사용자를 배속시킬 수 있다. \"권한 관리\" 화면을 통해 등록한 권한 중 하나를 선택하고 여러 셔플 버튼을 사용하여 사용자의 권한을 제어한다.\n사용자 권한 조회 Figure 46. User-Auth Mapping 화면 사용자 권한 관리의 속성은 아래와 같다.\nTable 121. 사용자 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한 관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nID\n사용자 식별자\nName\n사용자 이름\n사용자 권한 맵핑 사용자를 배속시킬 권한을 선택한다.\n권한 선택 시 선택 가능 사용자와 선택된 사용자가 화면에 출력된다.\n선택 가능 사용자를 선택한다.\n사용자를 배속 시키거나 제외 시킨다.\n단일 우측 셔플 버튼 을 클릭하여 선택한 사용자를 배속시킨다.\n전체 우측 셔플 버튼 을 클릭하여 모든 사용자를 배속시킨다.\n단일 좌측 셔플 버튼 을 클릭하여 선택한 사용자를 제외시킨다.\n전체 좌측 셔플 버튼 을 클릭하여 모든 사용자를 제외시킨다.\nSave 버튼 을 클릭하여 사용자 권한 관리 정보를 저장한다.\n9.1.4. Menu-Auth Mapping (메뉴 권한 관리) LENA Manager에서 생성한 권한 별로 접근 가능한 메뉴를 설정할 수 있다. 권한 선택을 통해 생성한 권한 중 메뉴를 설정할 하나의 권한을 선택한다. LENA Manager에 등록된 모든 메뉴를 보여주는 메뉴 목록 중 접근 제어를 설정할 메뉴를 선택하고 메뉴권한을 설정한다.\n메뉴 권한 조회 Figure 47. Menu-Auth Mapping 화면 메뉴 권한 관리의 속성은 아래와 같다.\nTable 122. 메뉴 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nMenu Name\nLENA Manager에 등록된 메뉴 중 좌측 메뉴 목록에서 선택한 메뉴 이름\nAuth\n선택한 권한의 메뉴접근가능여부 표시\nDefault \"N\"\n\"SERVER\", \"CLUSTER\", \"RESOURCE\" 메뉴의 하위 화면에서 Node, Server, Server Cluster, Resource 을 추가할 경우 자동으로 \"메뉴 권한 관리\" 화면의 메뉴 목록에 추가한 항목이 조회된다.\n따라서 신규 메뉴를 추가하고 싶을 경우 \"SERVER\", \"CLUSTER\", \"RESOURCE\" 하위 화면에서 각 항목을 등록 및 생성하면 된다.\nServer에 대한 권한을 변경해야 할 경우 아래 메뉴에 동일하게 권한을 반영해야 한다.\n\"SERVER\" 하위의 해당 Server\n\"CLUSTER\" 하위의 해당 Server\n만약 이를 지키지 않고, Server Cluster 하위의 일부 Server 메뉴에 대해 다음과 같이 권한을 설정할 경우를 고려해보자.(예시, 권장사항 아님)\n\"SERVER\" 하위의 해당 Server : 권한 있음\n\"CLUSTER\" 하위의 해당 Server : 권한 없음\n이 경우 메뉴 및 Server Cluster, Server 권한은 아래와 같이 표현된다.\nServer Cluster를 구성하는 Server 개수 : \"CLUSTER\" 하위 Server 권한 기준으로 권한이 있는 Server 개수\nServer Cluster의 하위 메뉴 : \"CLUSTER\" 하위 Server의 메뉴 권한 기준으로 권한이 있는 Server만 보임\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 목록 : Server Cluster의 구성 정보를 나타내야 하므로, \"CLUSTER\" 하위 권한과 무관하게 모든 Server 목록 조회\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 상세 링크 : 개별 Server에 대한 접근이므로, \"SERVER\" 메뉴 하위의 Server 권한이 없는 Server에 대한 접근을 막음\n메뉴 권한 맵핑 권한을 설정할 메뉴를 선택한다.\n권한 선택 시 메뉴에 대한 권한까지 조회된다.\n메뉴 목록에서 권한을 설정할 메뉴를 선택한다.\n메뉴 선택 시 메뉴 권한 목록에 메뉴 권한이 표시된다\n권한 변경이 필요할 경우 Y 혹은 N을 선택한다.\nSave 버튼 을 클릭하여 메뉴 권한 정보를 저장한다.\n9.2. License Manager를 통해 각 Node별 현재 적용된 라이선스를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.2.1. License 목록 License화면을 열면 Node별로 현재 적용된 License의 목록을 조회할 수 있다.\nLicense의 상태는 Status 항목을 살펴보면 확인 할 수 있다.\nFigure 48. License의 목록 화면 9.2.2. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 123. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Standard\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n라이선스의 만료기간 15일 전부터 알림메세지를 제공한다. 알림메세지는 Manager 우측 상단의 종 아이콘 에서 확인 할 수 있다.\n9.2.3. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.2.4. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 49. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh 이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/dev Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Standard CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/dev CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.2.5. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.2.6. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.3. License(Scaling) Manager를 통해 현재 적용된 Manager License를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.3.1. Manager License Manager License의 상태, 사용량, 사용기간을 확인할 수 있다. Upload Manager License 버튼 을 통해 License 파일을 업로드할 수 있다. 업로드된 License 는 Scale-out 시 VM 으로 전송되어 서버 기동시 인증역할을 수행한다.\n9.3.2. License 목록 Node별로 현재 적용된 License의 목록을 조회할 수 있다. License의 상태는 Status 항목을 보면 확인할 수 있다.\nFigure 50. License의 목록 화면 9.3.3. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 124. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Enterprise, Standard, Developer\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n9.3.4. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.3.5. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 51. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh (Windows 버전의 경우 check-license.bat)이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/1.3 Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Enterprise CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/1.3 CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.3.6. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.3.7. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.4. Security (서비스 제어) Application Server에 IP또는 URL기반으로 사용자 요청을 제한하는 기능이다.\n9.4.1. Rule Setting (Rule 설정) 특정 IP나 URL에서 요청을 제어하고 싶은 경우 화면을 통해 신규 Rule을 설정한다. 신규 Rule 설정 및 Rule 삭제의 편의성을 제공하기 위해 검색기능을 제공한다. 전체 Application에 적용되는 Server속성은 에러페이지로 처리할 수 있다\nFigure 52. Rule Setting 화면 Rule 목록의 Use 컬럼은 해당 Rule이 Application Server에 적용되어 있는지 여부를 나타낸다.\nRule 추가 시 설정 가능한 속성은 아래와 같다.\nTable 125. Rule 추가 시 설정 가능한 속성 항목(*는 필수값) 설명 비고 Rule Name(*)\n추가하는 Rule의 이름\nDescription\n추가하는 Rule에 대한 설명\nRule Type\n제어할 단위\nIP, URL\nAllow IP(*)\n허가할 요청 IP\n정규식 형태로 입력 가능\nDeny IP(*)\n거부할 요청 IP\n정규식 형태로 입력 가능\nControl Time(*)\nRule을 적용할 시간단위\nError Message(html)(*)\n제어로 인해 Filtering된 요청에 대한 출력할 에러 페이지\n제어유형이 \"IP with DateTime\"인 Rule에 Proxy Server로 중계되는 Application Server 를 적용한다면, Proxy Server의 보안적 특성으로 인해 User IP를 구할 수 없어 Rule 적용이 되지 않을 수 있다.\n생성된 Rule 중 적용된 Rule은 삭제 할 수 없다.\n9.4.2. Rule Applying (Rule 적용) 추가된 Rule 중 하나를 선택하여 Application Server에 적용한다. 적용 편의성을 위해 Rule유형, 적용단위, Rule명에 대한 검색기능을 제공한다.\nRule 목록에서 하나를 선택하여 Rule 적용에서 셔플 버튼들을 이용하여 적용 대상을 선택하고, On/Off 버튼 을 클릭하여 적용 및 저장한다. 적용 대상에서 제외를 하고 싶을 경우에도 셔플 버튼들을 이용하여 제외시킨다.\nFigure 53. Rule Applying 화면 Rule 현황 및 적용 화면에서 사용되는 속성들은 Rule설정 화면과 유사하며 아래의 속성들은 추가적인 속성들이다.\nTable 126. 추가적인 속성 항목 설명 비고 Node Name\n등록된 Node group 하위의 Node 명\nServer Name\n등록된 Node하위의 Server 명\n선택한 Rule에 신규 대상이 추가될 경우 적용 단위에 따라 server.xml 혹은 context.xml 에 추가되고, 적용된 대상에서 제외할 경우 위의 설정 파일에 추가된 Rule 설정이 삭제된다.\n9.4.3. Service Control Log (Rule 적용결과 조회) Rule이 적용된 항목들에 대한 처리 결과가 목록으로 출력된다. 처리 결과 확인의 편의성을 위해 Rule유형, 적용단위, Rule명, 로그시간에 대한 검색기능을 제공한다.\nFigure 54. Service Control Log 화면 처리 목록에서 사용되는 속성들은 아래와 같다.\nTable 127. 로그 정보의 항목 항목 설명 비고 Controlled Date\nRule설정이 적용된 요청의 처리시간\nRemote Address\n처리된 원격지 주소\nRequest URL\n처리된 요청의 URL\nHTTP Method\n처리된 요청의 HTTP Method\nRule 명\n요청을 처리하는데 적용된 Rule 이름\nRule 이력의 경우 Manager의 /conf/manager.conf 설정파일 내 access filter log 취합 Listener 사용여부를 true로 설정해야 한다. Log의 경우 각 서버의 logs 폴더 내 access_filter.log.\"날짜\".txt 파일에 기록되며 주기적으로 Manager 가 각 server 의 log 를 취합하여 Database 에 저장한다. (이때 취합된 Log 는 access_filter_log.\"날짜\".txt.gathered 파일에 backup된다) Database에 취합된 Log는 처리목록 화면에서 확인 가능하다.\nmanager.conf 내 설정 파일 항목의 설정 예는 아래와 같다.\n#access filter log 취합 리스너 사용여부 및 동작주기(초) default는 false, 60 accessfilter.listener=false accessfilter.interval=60 9.5. Patch 설치된 LENA에 대한 기능 개선 및 버그 수정을 위한 패치를 제공한다.\nPatch는 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nPatch 기능은 CLI 및 Management UI를 통하여 실행이 가능하며, 패치 시 서비스에 문제가 발생하는 경우 Restore 기능을 통하여 원복 할 수 있다.\n패치 순서는 다음과 같다.\n패치파일 업로드\nManager 패치 적용\nNode 패치 적용\n서버(Application Server, Session Server) 패치 적용\n패치 Commit\n복구 순서는 다음과 같다.\n서버 패치 복구\nNode 패치 복구\nManager 패치 복구\n복구 Commit\nCLI로 패치하는 방식은 Appendix를 참고한다.\n9.5.1. Overview 패치파일의 업로드 기능을 제공하며, Manager와 각 Node별 Node Agent의 패치 반영상태 정보를 조회한다.\nPatch 파일 업로드 Patch Info 영역에서는 매니저에 업로드 된 패치파일 중, 최상위 버전의 상세정보를 표시한다.\nTable 128. Patch Info 항목 항목 설명 비고 Patch File Ver.\n패치파일의 버전 정보\nRelease Date\n패치파일의 배포 일자\nPatch Note\n상세(노트) 버튼 을 눌러 상세한 패치노트 내용을 조회한다.\n패치노트 팝업표시\n패치파일을 업로드하는 과정은 다음과 같다.\n업로드 버튼 을 클릭한다.\n패치 가능 상태인지를 확인 후 정상이면 패치파일 업로드를 위한 팝업을 띄운다\n패치 가능 상태 조건 Manager에 등록된 Node가 모두 기동상태여야한다.\npatch가 commit상태여야 한다.\nmanager 기준으로 node와 server가 모두 같은 버전이어야 한다.\nmanager에 등록되지 않은 서버가 존재하지 않는다.\nunregister된 서버존재시 manager에 등록\n노드엔진 하위 servers폴더에 서버가 존재시 해당 폴더 삭제\n업로드 할 패치파일을 선택하면 자동으로 업로드가 실행된다.\n업로드 가능한 파일은 zip과 tar.gz이며 이외의 파일을 업로드 할 경우 에러메시지가 출력된다.\nManager Patch Manager Info 영역에서는 Manager의 패치상태를 표시하고, Manager의 패치 및 복구를 실행할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 129. Manager Info 항목 항목 설명 비고 Patch Status\nManager의 패치 적용 상태\n해 아이콘 : Manager가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Manager가 최신 패치를 적용하지 않은(patch available) 상태\nCurrent Ver.\nManager의 현재 버전\nPatch Ver.\nPatch 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nManager Info화면의 History 항목에 표시된 상세(노트) 버튼 을 클릭하면 팝업창을 통해 패치 실행 이력을 확인할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 130. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPervious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\nPatch Manager Info 하단에 있는 Patch 버튼 을 클릭하면 최신 패치를 적용한다.\nHandwork에 기술된 내용 패치실행 후 필요한 수작업이므로, 기술된 내용을 실행하여 반영하여야 한다. Handwork 작업 후 팝업창 하단의 체크박스를 해제하면 Manager Patch Info화면의 Handwork 버튼이 흰색으로 변경된다.\nManager 패치를 적용하면 Node와 Server의 패치 적용 후 Commit 버튼 을 누르기 전까지 Node의 설치/등록, Server의 설치/등록/복제 등의 기능을 수행 할 수 없다.\n패치 후 반드시 브라우저 캐시를 삭제하여야 패치버전의 Manager를 사용할 수 있다.\nRestore Manager Info 하단에 있는 Restore 버튼 을 클릭하면 패치 이전 버전으로 복구된다.\n복구는 Manager에 등록된 모든 노드의 패치 상태가 Patch Available 인 경우에 수행한다.\nCommit Manager, Node, Server의 모든 패치를 적용 후 Commit버튼을 눌러 확정한다. 확정 이후에는 이전버전으로 되돌릴 수 없다.\nNode Patch Node Patch Status 영역은 매니저에 등록된 node에 대해서, 최신패치가 적용된 서버의 개수와 패치가 적용되지 않은 서버의 개수를 종합해서 보여준다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다\nTable 131. Node Patch Status 항목 항목 설명 비고 Status\nnode의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Node Agent가 최신 패치를 적용하지 않은(patch available) 상태\n반구 아이콘 : Node Agent는 최신 패치를 적용하였으나, Node 에 설치된 Server에는 최신 패치가 적용되지 않은 상태\n느낌표 아이콘 : Node agent가 lena-manager와 호환이 되지 않는 상태.\nNode name\nnode명\nAddress\nnode의 IP\nNode Version\nNode의 현재 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nWAS\nWeb Application Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nSession Server\nSession Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nNode Patch 버튼 을 클릭하면 제공되는 팝업창에서 Node 선택 후 해당 Node에 대한 패치 또는 복구를 진행 할 수 있다.\nServer Cluster Patch Status Server Cluster 별 Patch 현황을 표시한다.\n화면에 표시되는 각 항목에 대한 설명은 다음과 같다.\nTable 132. Server Cluster Patch Status 항목 항목 설명 비고 Status\ncluster의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : 일부 서버가 최신 패치를 적용하지 않은(patch available) 상태\nCluster Group\ncluster그룹명\nCluster Name\ncluster이름\nLENA Patch\nApplication Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch available : 최신패치가 적용되지 않은 서버의 개수\n9.5.2. WAS Node/Cluster에 포함된 Application Server에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위, cluster 단위)으로 검색한다.\nTable 133. Application Server Patch Status 항목 항목 설명 비고 Patch Status\nApplication Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nApplication Server가 설치되어있는 Node명\nName\nApplication Server 이름\nType\nApplication 서버 타입\nStandard : Application Server Standard Edition\nEnterprise : Application Server Enterprise Edition\nIP\nApplication Server가 설치된 Node의 IP\nHTTP Port\nApplication Server의 HTTP Connector port\nAJP Port\nApplication Server의 AJP Connector port\nStart/Stop\nApplication Server의 기동 및 중지 실행\nCurrent Ver.\nApplication Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 134. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.5.3. Session Server Session Server들에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위)으로 검색한다.\nTable 135. Session Server Patch Status 항목 항목 설명 비고 Patch Status\nSession Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nSession Server가 설치되어있는 Node명\nName\nSession Server 이름\nType\nSession 서버 타입\nPort\nSession Server의 port\nStart/Stop\nSession Server의 기동 및 중지 실행\nCurrent Ver.\nSession Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 136. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.6. Preferences 9.6.1. Action Trace Manager를 통해 각 사용자가 수행하는 추가/수정/삭제 작업의 수행 이력은 로그로 남는다. Action Trace에서는 이러한 수행이력을 조회/추적하는 기능을 제공한다.\nFigure 55. Action Trace 화면 이력 조회 조회 조건을 입력 후 클릭하면 이력을 조회할 수 있다. 목록 중 하나를 선택하면 상세정보도 확인할 수 있다.\n조회 화면에 표기되는 항목은 아래와 같다.\nTable 137. 이력 상세 정보 항목 항목 설명 비고 Trace Date\nAction을 수행한 시간\nStatus\nAction 수행 결과\n성공 : Success, 실패 : Fail\nClient IP\nAction을 수행한 사용자의 IP 주소\nUser ID\nAction을 수행한 사용자 ID\nAction\n수행한 활동(Action) 명\nMethod\nAction에 사용된 Method 이름\nRequest\nLENA Manager Http Request URL\nInput\nHttp Request Input 파라미터\n위 항목 중 \"Input\" 은 Request 파라미터를 그대로 저장하기 때문에, Server ID, Node ID, Server Cluster ID가 데이터 관리용 Key값 (일련번호, 캡쳐화면에서 \"serverID=31\"로 표시된 부분)으로 보여진다. 해당 Server/Node/Cluster의 상세정보를 조회하기 위해서는 \"Action Trace Detail\" 정보 하단에 있는 \"Search ID\" 기능을 활용한다. 이 기능의 입출력 항목은 아래와 같다.\nTable 138. Search ID 기능의 입출력 항목 항목 설명 비고 ID\n좌측 Combo : serverId / nodeId / serverCluster Id 중 택일\n우측 : Input 에 있는 ID 값을 입력\n입력항목\nData\n검색된 Server/Node/Cluster 정보\n출력항목\n9.6.2. Documentation LENA 소개자료와 매뉴얼을 다운로드 받을 수 있다.\n9.6.3. Manager Environment Manager 환경 설정을 위한 정보를 제공한다.\nManager Environment Manager 환경 설정 정보 중 env-manager.sh/bat에 저장하는 정보를 제공한다.\nManager Allow IPs : Manager에 접근 가능한 IP항목을 설정한다.\nJava Home Path : Manager에서 사용하는 java home 경로를 설정한다.\nManager Configuration Manager 환경 설정 정보 중 manager.conf에 저장하는 정보를 제공한다.\n기본적으로 제공하는 2가지 항목을 제공한다.\nuse JMX for Server Status : JMX를 통해 서버 상태 정보를 조회할지 여부(default : false)\nuse Server Delete Protection : Manager에서 서버 삭제 기능 사용금지 여부(default : false)\n화면 우측의 설정 버튼 을 클릭하면 상세 정보를 확인 및 변경 할 수 있다.\nMetadata Refresh Topology 메뉴에서 시스템 별 구성정보를 topology 차트로 그리기 위해 사용되는 메타데이터의 정합성 검증 및 복원 기능을 수행한다.\nReset manager address of all registered nodes Manager에 등록된 노드들에게 변경된 Manager Address를 일괄적으로 변경시켜주는 기능을 제공한다.\n9.6.4. Manager HA Manager 이중화에 대한 설정을 관리하고, 이중화 상태에 대한 현황조회를 할 수 있다.\nManager 이중화는 Primary와 Secondary로 구분되어 기동된 LENA Manager간의 Database와 주요 파일들을 동기화 함으로써 Prmary Manager가 비가동시 임시적으로 Secondary Manager 가 Primary의 서비스를 대행하는 기능이다.\nSecondary Manager가 대행하는 서비스의 기능은 다음 두가지 이다.\nServer Cluster - Scaling 서비스\nService Cluster - Server Template 및 License 다운로드\nManager 이중화를 위해서는 각 Manager의 역할에 따라 환경설정 파일인 'env-manager.sh' 파일의 다음 부분을 수정하여 기동하여야 한다.\nLENA Manager 환경변수 파일 (env-manager.sh) 설정 CATALINA_OPTS=\u0026quot; ${CATALINA_OPTS} -Dspring.profiles.active=ha-none\u0026quot; 위 파일에서 설정되는 spring.profiles 프로퍼티의 값은 다음 3가지 설정이 가능하며, 잘못 기입되었을 경우 Manager가 정상기동 되지 않는다.\nha-none : 기본 값으로, 이중화를 하지 않는 단독 실행형 Manager\nha-primary : 이중화시 Primary Manager 역할 수행\nha-secondary : 이중화시 Secondary Manager 역할 수행\nLocal Manager 현재의 Manager 정보를 제공한다. Manager의 역할에 관계없이, 현재의 관리화면을 제공하는 Manager 자신을 Local Manager, 원격지 Manager를 Remote Manager라 칭한다.\nTable 139. Local Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 항상 Active 상태이다.\nStart Time\nLocal Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nLocal Manager에 설정된 Remote Manager의 연결정보가 실제 Remote Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nRemote Manager 원격지 Manager의 정보를 제공한다.\nTable 140. Remote Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 정상적으로 연결되어 있을 경우 Active 로 표기되며, 연결되어 있지 않을 경우 InActive로 표기된다.\nStart Time\nRemote Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nRemote Manager에 설정된 Remote Manager의 연결정보가 실제 Local Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nAddress\nRemote Manager의 주소로 연결정보를 설정할때 사용된다.\nHttp Port\nRemote Manager의 Http 서비스 Port로 연결정보를 설정할때 사용한다.\nConnection Test 버튼 을 눌러 Remote Manager의 Address와 Http Port를 이용하여 실제 Connection이 가능한지 테스트를 할 수 있다.\nPrimary Manager와 Secondary Manager는 Pairing을 통해 상호 동기화를 위한 정보를 설정할 수 있다. Sync Settings 버튼 을 눌러 Remote Manager와 설정정보를 동기화 하는 Paring을 수행할 수 있다.\nLatest Sync Status 이중화된 Manager간 Database 및 File 동기화 최신 이력을 조회할 수 있다.\nTable 141. Latest Sync Status 정보 항목 항목 설명 비고 Type\nDatabase 또는 File\nStatus\n정상일때 초록색 ○ 아이콘, 오류 발생시 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nTime\n동기화 시도 시간\nResult\n동기화 성공여부\nMessage\n동기화 수행시 생성된 결과 메시지\n목록 버튼\n목록 버튼 을 눌러 이전 동기화 이력을 조회 할 수 있다. 이력은 총 10개 까지 표기되며, Manager 기동 후의 이력만 표기되고, Remote Manager에서 발생한 동기화 정보는 정상 연결시에만 표기된다.\n10. Appendix 10.1. LENA 시스템 요구사항 LENA를 설치하고 사용하기 위한 최소 요구사항은 다음과 같다.\n구분 JVM CPU Memory Disk Support OS 비고 기본 설치 패키지\nJDK 1.8 이상\n2 Core 이상\n4 GB 이상\nroot를 제외한 용량 10GB 이상\nLinux (centos7 이상) 또는 Windows 7이상\n각 구성요소 설치 파일 제공\n10.2. Manager 지원 브라우저 Manager의 기능을 사용할 수 있는 브라우저로는 Chrome/Edge(버전 70 이상), Firefox(버전 62 이상) 이 있다. IE의 경우 일부기능이 정상적으로 동작하지 않기 때문에 다른 브라우저를 사용하기를 권장한다. 브라우저 권장 최소 사이즈는 1680*900 이다.\n10.3. 지원 Spec별 버전 Specification Version 비고 Java Development Kit (JDK)\n1.8~\nJava Servlet\n3.1\nJava Server Pages (JSP)\n2.3\nExpression Language (EL)\n2.2\nJavaServer Pages Standard Tag Library (JSTL)\n1.2\nEnterprise JavaBeans (EJB)\n3.2\nJava Message Service (JMS)\n1.1\nJava Transaction API (JTA)\n1.2\nJava API for RESTful Services (JAX-RS)\n2.0\nJava API for XML Web Services (JAX-WS)\n2.2\n10.4. Manager DB파일 백업 Manager의 내부데이터 관리를 위한 HSQL DB의 파일은 주기적으로(1일) 백업파일을 생성하고 있다. 생성위치는 ${LENA_HOME}/repository/backup/lena-manager/script 이다.\n기본적으로 30일 이전 백업정보는 삭제하도록 되어 있는데 보관기간을 변경하고 싶은 경우, ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, dbbackup.size=보관기간 을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.5. Manager 의 내부이력 삭제 Manager가 내부적으로 남기는 이력은 주기적으로 삭제하도록 스케쥴링이 되어 있다. 삭제하는 정보는 Action Trace 이력과 Server History 이력이다.\n기본적으로 Action Trace이력은 30일까지만 보관하고, Server History 이력은 90일까지 보관하고 있다. 이 보관기간을 변경하고 싶은 경우 ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, actiontrace.size=보관기간, serverhistory.size=보관기간을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.6. Manager 의 admin 패스워드 초기화 Manager의 admin사용자 패스워드를 분실하거나 비밀번호 오류횟수가 초과하였을 경우에는 console를 통하여 패스워드를 초기화해야 한다.\nManager가 설치된 장비에 console(telnet or ssh)로 접속한다.\n$LENA_HOME/bin/reset_manager_pw.sh 파일을 실행한다.\n패스워드를 초기화 할 user인 admin을 입력한다.\n초기화할 패스워드를 입력한다. 단, 패스워드는 8자리이상, 알파벳/숫자/특수문자의 조합으로 입력한다. 패스워드는 보안을 위해 console에 표시되지 않는다.\n[bin]$ ./reset-manager-pw.sh ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------- | 1. USER_ID is the user id to reset | ex : admin | 2. NEW_PASSWORD is the password to change | - password rule #1 : more than 8 length | - password rule #2 : inclusion of one or more alphabet characters | - password rule #3 : inclusion of one or more numerical digits | - password rule #4 : inclusion of one or more special characters +------------------------------------------------------------------------------- Input USER_ID for installation. (q:quit) administrator Input NEW_PASSWORD for installation. (q:quit) The password has been changed successfully. Execution is completed.!! 10.7. LENA 설치 권장 OS파라미터(CentOS기준) LENA 설치 시 OS파라미터는 max user processes 값을 8192 이상으로 설정하는 것을 권장한다.\nparameter 권장값 기본값 max user processes\n8192\n1024\nopen files\n8192\n1024\nCentOS기준으로 max user processes 설정은 다음과 같이 ‘ulimit –a’ 명령어를 실행하여 확인을 할 수 있다.\n$ ulimit -a + core file size (blocks, -c) 0 + data seg size (kbytes, -d) unlimited + scheduling priority (-e) 0 + file size (blocks, -f) 8192 + pending signals (-i) 14891 + max locked memory (kbytes, -l) 64 + max memory size (kbytes, -m) unlimited + open files (-n) 1024 + pipe size (512 bytes, -p) 8 + POSIX message queues (bytes, -q) 819200 + real-time priority (-r) 0 + stack size (kbytes, -s) 10240 + cpu time (seconds, -t) unlimited + *max user processes (-u) 1024* + virtual memory (kbytes, -v) unlimited + file locks (-x) unlimited CentOS를 기준으로 명령어 ‘ulimit –u’와 ‘ulimit –n’로 프로세스 수와 오픈파일 개수를 설정할 수 있다. 위 변경사항을 영구적으로 반영하기 위해서는 각 유저의 profile (.profile, .bash_profile)에 ulimit 실행명령을 추가하거나, 강제 설정할 수 있다 (CentOS 기준).\n*$ cat $HOME/.bash_profile* *.. (생략)* *ulimit -u 8192* *ulimit -n 8192* 또 다른 설정 방법으로는 /etc/security/limits.conf (CentOS 기준) 파일을 열어서 프로세스 최대수(nproc)와 오픈파일 최대수(nofile)를 설정한다.\n*$ cat /etc/security/limits.conf* *.. (생략)* ** soft nproc 8192* ** hard nproc 8192* ** soft nofile 8192* ** hard nofile 8192* 10.8. LENA 주기적으로 증가하는 파일 항목 경로 삭제주기 월 예상 증가량 비고 Manager정기점검로깅\nLENA_HOME/repository/monitoringDB/maintenance\n6개월\n10MB\n서버 6대 기준의 예상 증가량\n자동삭제\nManager모니터링, 진단리포트\nLENA_HOME/repository/monitoringDB/{yyyyMMdd}\n7일\nN/A\n자동삭제\nManager진단통계\nLENA_HOME/repository/monitoringDB/statistics\n영구\n1MB 이하\nManagerDB백업파일\nLENA_HOME/repository/backup/database\n30일\n100MB 이하\n자동삭제\nManager로그\nLENA_HOME/logs/lena-manager\n30일\n100MB 이하\n자동삭제\nAgent로그\nLENA_HOME/logs/lena-agent\n30일\nN/A\n자동삭제\nInstaller로그\nLENA_HOME/logs/lena-installer\n영구\n1MB 이하\nPatch적용파일\nLENA_HOME/etc/patch\n영구\nN/A\n패치시에만 생성됨\n패치완료후 삭제가능\nPatch백업파일\nLENA_HOME/etc/backup/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\nPatch로그\nLENA_HOME/logs/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\n서버인스턴스로그\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/logs\n영구\n부하에 따라 판단\n경로변경가능\n서버인스턴스 히스토리\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/history\n영구\nN/A\nManager를 통해 서버설정 변경시에 설정파일 변경분만 생성\n서버인스턴스 스냅샷\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/snapshot\n영구\nN/A\nManager를 통해 Cluster Snapshot을 생성하는 경우만 생성\nWAS 덤프파일\nLENA_HOME/repository/monitoringDB/dump\n영구\nN/A\nManager를 통해 WAS 덤프를 수행하는 경우에만 생성\n10.9. Patch CLI (Command Line Interface) Patch는 설치된 LENA에 대한 기능 개선 및 버그 수정을 위해 제공되는 기능이다. 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nManagement UI를 통해 실행하는 방법은 patch 에서 제공한다. 여기에서는 CLI를 통해 패치 및 복원하는 방법에 대해 설명한다.\n10.9.1. 패치파일 업로드 및 압축해제 전달받은 패치파일을 LENA가 설치된 서버로 FTP등을 이용하여 개별적으로 업로드 한다.\n업로드 한 파일은 아래와 같은 위치에 압축을 해제하고 버전명으로 디렉토리의 명칭을 변경한다.Manager를 통하여 업로드하면 자동으로 해당 경로에 압축이 해제된다.\n노드/서버 패치파일 경로: /engn001/lena/1.3.1/etc/patch/{패치버전} Manager 패치파일 경우: /engn001/lena/1.3.1/repository/patch/{패치버전} 10.9.2. Patch Node Patch patch.sh를 실행하여 Node를 패치한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-node Node 패치과정에서 Node는 재기동 된다.\n[bin]$ ./patch.sh lena-node ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:06:43:915 [INFO] Patch started to lena-node 2018-05-28 14:06:47:075 [INFO] Stopping node-agent ... 2018-05-28 14:06:52:595 [INFO] Starting node-agent 2018-05-28 14:06:52:748 [INFO] Patch completed to lena-node ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140643905 PATCH_TARGET : lena-node PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Manager Patch patch.sh를 실행하여 Manager를 패치한다.\nmanager 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-manager Manager 패치과정에서 Manager는 재기동 된다.\n[bin]$ ./patch.sh lena-manager ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:05:32:752 [INFO] Patch started to manager 2018-05-28 14:05:36:032 [INFO] Stopping manager ... 2018-05-28 14:05:46:062 [INFO] Starting manager 2018-05-28 14:05:47:066 [INFO] Patch completed to manager ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140532668 PATCH_TARGET : lena-manager PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Server Patch patch.sh를 실행하여 개별적인 서버를 패치한다.\nnode가 설치된 서버에서 실행하여야 하고, LENA 서버 설치 유형별로 별도로 실행한다. 서버 패치를 위해서는 노드패치가 선행되어야 한다.\nWAS standard type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-se WAS enterprise type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-ee Session Server 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-session Table 142. patch.sh의 입력 인수 및 입력 항목 항목 설명 비고 PATCH_TARGET\n패치 타겟 (patch.sh의 인수로 입력)\nlena-node\nlena-manager\nlena-se\nlena-ee\nlena-session\nSERVER_ID\n패치 타겟에 해당하는 서버 ID\nlena-node, lena-manager 패치에는 불필요\n[bin]$ ./patch.sh lena-ee ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:17:18:840 [INFO] Patch started to lena-se Input SERVER_ID for execution. (q:quit) wasEE_9100 ... 2018-05-28 14:17:26:820 [INFO] Saving patch history 2018-05-28 14:17:26:842 [INFO] Patch completed to lena-se ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528141639064 PATCH_TARGET : lena-ee PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! 10.9.3. History history.sh를 실행하여 패치 이력을 확인한다. 기본이력은 원복된 이력은 제외하고 보여주며, 전체이력은 모든 이력을 보여준다.\n기본이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh 전체이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh all [bin]$ ./history.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch History 1 lena-node / patch-20180528140643905 - action : PATCH - id : patch-20180528140643905 - target : lena-node - serverId : lena-node - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140643903 - timestamp : 20180528140643905 - restored : false - handwork-status : NO_WORK 2 lena-manager / patch-20180528140532668 - action : PATCH - id : patch-20180528140532668 - target : lena-manager - serverId : lena-manager - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140532666 - timestamp : 20180528140532668 - restored : false - handwork-status : NEED_WORK - start of handwork-detail ... - end of handwork-detail 3 lena-ee / patch-20180528141639064 - action : PATCH - id : patch-20180528141639064 - target : lena-ee - serverId : wasEE_9100 - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528141639062 - timestamp : 20180528141639064 - restored : false - handwork-status : NO_WORK history is completed.!! 10.9.4. Restore restore.sh를 실행하여 적용한 패치에 대한 원복을 진행한다. (패치 적용 문제 발생 시)\nRestore를 실행하면 패치 시점에 변경된 파일을 변경이전 상태로 복원한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/restore.sh \u0026lt;PATCH_HISTORY_ID\u0026gt; (PATCH_HISTORY_ID는 ./ history.sh 로 조회되는 id 값이다.) [bin]$ ./restore.sh patch-20180423130610713 ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:40:05:404 [INFO] Restore started to lena-ee ... 2018-05-28 14:40:05:532 [INFO] Restore completed to lena-ee ========================= Execution Result ======================== MESSAGE : Restore succeeded RESULT : Success =================================================================== restore is completed.!! 10.9.5. Version 확인 version.sh를 실행하여 현재 설치된 서버에 대한 패치상태를 확인할 수 있다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/version.sh [bin]$ ./version.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch Information 1. Base Information - Version : 1.3.1.1 (Up to date) - LENA_HOME : /engn001/lena/1.3.1 2. lena-manager 2.1 - id : lena-manager / version : 1.3.1.1 (Up to date) 3. lena-se 3.1 - id : wasSE_9100 / version : 1.3.1.1 (Up to date) 3.2 - id : wasSE_9200 / version : 1.3.1.1 (Up to date) 4. lena-ee 4.1 - id : wasEE_9300 / version : 1.3.1.0 (Patch available to 1.3.1.1) 4.2 - id : wasEE_9400 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5. lena-session 5.1 - id : session_5000 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5.2 - id : session_5500 / version : 1.3.1.0 (Patch available to 1.3.1.1) version is completed.!! 10.10. Session Server 상세 Application Server의 Session Clustering은 별도의 Session Server를 설치하여 Session을 공유해 Clustering 한다. Session Server는 별도 VM위에서 작동하는 Standalone 모드와 Application Server에 Session Server 모듈을 탑재한 Embedded 모드가 있다.\n10.10.1. Session Server Standalone 모드 설치 설치방법은 “3.5.2. Install\" 항목을 참조한다.\n기동/중지 및 기동여부 확인 기동/중지 및 기동여부 확인은 \"3.5.6 Start/Stop” 에서 확인한다.\n환경설정 Session Server가 설치된 위치를 ${ZODIAC_HOME}이라 칭한다. Session Server는 LENA home 하위 /servers 폴더에 위치한다.\n환경설정 정보는 ${ZODIAC_HOME}/session.conf 에 관리한다. 환경설정으로 변경 가능한 설정 항목은 아래와 같다.\n항목 설명 server_id\nserver ID\nserver_name\nserver Name\nprimary_port\n해당 Session Server의 TCP listening port\nsession_max_count\n최대 HTTP세션수\nserver_recv_queue_size\nSecondary Server나 Application Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\nserver_req_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등)을 담는 Queue size\nresp_queue_size\n타 Server가 요청한 Session 정보에 대한 응답을 담는 Queue size\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다. 각 Application Server 의 설정과 일치시키는 것이 좋다.\nso_timeout\nApplication Server와의 연결에서 read timeout\nthread_request_handler\nrequest Queue 에 쌓은 데이터 처리하는 Thread 개수.\nthread_data_handler\nreceive Queue 에 쌓은 데이터 처리하는 Thread 개수.\ndebug_clustering\nDebug용 Log를 남길지 여부\nenable_auto_was_sync\ntrue로 설정 했을때, 장애 등으로 재 연결된 WAS에 Sync 요청을 보내 WAS의 Session 데이터를 Sync 한다.\nenable_auto_peer_sync\n(장애 등으로) 재 연결된 Secondary Session Server에 Sync 요청을 보내 Slave Session Server의 Session 데이터를 Sync 할지 여부\nserver_expire_sec\n서버에서 HTTP세션 정보를 expire 시키는 시간 (Session Timeout)\n0인 경우, Application에서 설정한 session의 timeout 시간을 사용\nserver_expire_check_sec\nSession Timeout 체크 주기. (단위 : 초)\nsecondary_host\nSecondary 세션서버의 주소\nsecondary_port\nSecondary 세션서버의 주소\nenable_ready_after_sync\nSecondary Server와 Session 데이터를 동기화를 수행한 후에, 연결된 WAS에 Clustering 서비스 제공 가능 상태(Ready)로 전송할지 여부 (true는 동기화 후 ready 상태 전송)\nwait_server_ready_timeout\n해당 시간 이 될 때까지 ready상태(Session Clustering서비스 제공가능 상태) 가 안되면 자동으로 ready 상태를 만들어준다.\nserver_ready_time\n기동 시 Secondary Server와의 연결 대기 시간 (해당 값 * 100 ms).\nmax_logoutset\n최대 로그아웃 된 HTTP 세션 수\nenable_auto_logout_sync\ntrue 인 경우, session entry 정보를 sync 할 때, logout 정보도 같이 sync 한다. (sticky가 아닌 round-robin일 경우 필요하다)\n로그 로그는 ${LENA_HOME}/logs/session-server/lena-[Session Server Name]_[YYYYMMDD].log 로 남는다. 로그를 확인하고자 한다면 ${ZODIAC_HOME}/log.sh 파일을 실행시켜 확인 할 수도 있다.\n[session_5002]$ ./log.sh 5월 09, 2018 02:55:50 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 02:55:54 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33138 5월 09, 2018 02:55:55 오후 [ZODIAC] SERVER_READY, no peer, time=5000 5월 09, 2018 02:59:57 오후 [ZODIAC] Zodiac Stop 5월 09, 2018 03:00:00 오후 [ZODIAC] Zodiac Session Server 1.3.0 20160420 5월 09, 2018 03:00:01 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 03:00:01 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33359 5월 09, 2018 03:00:03 오후 [ZODIAC] ACCEPT SERVER /127.0.0.1:46818 5월 09, 2018 03:00:04 오후 [ZODIAC] SYNC[session_5002] recv bulk sessions : #0 recv bulk logout sessions : #0 recv bulk dupInfo : #0 2ms 5월 09, 2018 03:00:04 오후 [ZODIAC] SERVER_READY sync is done 5월 09, 2018 03:00:05 오후 [ZODIAC] TCP Primary name=session_5002 /127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC start 127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC Send bulk sessions send to 127.0.0.1:5002 #0 and logout session send : 0 and dupInfo send : 0 Console Zodiac Session Server는 JMX를 통해 Session Server 정보 조회 및 Application Server Sync 명령을 수행 할 수 있다. ${ZODIAC_HOME} 의 console.sh 파일을 실행시켜 Zodiac Session Server의 JMX 기능을 사용한다.\n[session_5002]$ ./console.sh =====zodiac session server JMX Console===== ------------------------------------------------------------ - Usage: ./console.sh \u0026lt;COMMAND\u0026gt; - - \u0026lt;COMMAND\u0026gt; is one of the following: - - 1. was_list - - 2. status - - 3. was_serverq - - 4. was_sync - - It needs WAS ID - - example: ./console.sh was_sync \u0026lt;was id\u0026gt; - - 5. search - - It needs SESSION ID. - - example: ./console.sh search \u0026lt;session id\u0026gt; - ------------------------------------------------------------ 다음은 console.sh의 명령어에 대한 설명이다.\nApplication Server List\n현재 Session Server에 연결된 Application Server List를 보여준다.\nShell명령어 console.sh was_list 를 실행하면 된다.\n[session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}} Session Server Status\n현재 Session Server의 상태 값을 보여준다.\nShell명령어 console.sh status 를 실행하면 된다.\n[session_5002]$ ./console.sh status =====zodiac session server JMX Console===== RUN OPERATION: getStatusString\\{request_getfresh_logout:0,session_count:0,req_lost:0,request_ getfresh_not_new:0,request_getfresh_nodata:0,request_getnew_secondary:0,session_expired:0,request_getnew_logout:0,session_timeout:1800,request_getnew_nodata:0,session_max_count:2000000 ,logout_from_nodes:0,pid:32705,session_recv_lost:0,logout_from_secondary:0,request_getfresh_secondary:0,request_getfresh:0,request_getnew:0,logout_count:0,data_from_nodes:0,resp_lost:0,request_getfresh_data:0,data_from_secondary:0} Session Server ServerQ Status\nZodiac Session Server의 ServerQ 상태를 보여준다. ServerQ는 Session Server에 연결된 Application Server의 접속을 관리하는 모듈이다. 여기서 보여주는 데이터는 Application Server 에서 보내는 Session 정보(data)와 Request 정보(Request)를 담는 Queue 정보이다.\nShell명령어 console.sh was_serverq 를 실행하면 된다.\n[session_5002]$ ./console.sh was_serverq =====zodiac session server JMX Console===== PRINT ATTRIBUTEdataQ.size: 0requestQ.size: 0dataQ.overCnt: 0requestQ.overCnt: 0 Session Id Search\n입력한 Session ID와 일치하는 Session을 가지고 있는 Application Server List 를 보여준다.\nShell명령어 console.sh search [Session ID] 를 실행하면 된다.\n[session_5002]$ ./console.sh search B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285 + =====zodiac session server JMX Console===== RUN OPERATION: search RESULT:\\{'AE4_29100'=\\{lastAccessTime='2018-05-24 15:55:48.503',context='ROOT',attributeNames=[sessiontest.counter, ARGO_DUPLICATION_STATUS],lastUpdateTime='2018-05-24 15:55:48.501',addr='/127.0.0.1:44568',id=B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285,createTime='2018-05-24 15:55:43.241'}} Application Server Session Sync\nApplication Server의 Session 정보를 Session Server로 sync하는 경우 실행한다.\nShell명령어 console.sh was_sync [Application Server jvmName(was_list에서 jvmName으로 출력되는 값)] 를 실행하면 된다.\n[session_5002]$ [session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}}} [session_5002]$ ./console.sh was_sync bde0fbb29e8100285 =====zodiac session server JMX Console===== RUN OPERATION: serverSyncsync complete Session Server failover Session Server는 Primary/Secondary로 구성되어있고, 실시간으로 Session 정보를 동기화 한다. Application Server는 Primary/Secondary Session Server와 접속을 유지하고 있기 때문에 Primary Session Server 장애가 생겼을 경우, 장애 감지 시점 이후부터 Secondary Session Server로 Failover 된다.\n10.10.2. Session Server Embedded 모드 Session Server Embedded 모드는, Application Server 내에 Session Server Module을 내장하는 방식이다.\n환경 설정 Embedded 모드로 Session Server 설정을 하려면 Manager의 Application Server 설정 화면에서 설정하거나 ${LENA_HOME}/servers/[ApplicationServer명]/conf/session.conf 를 수정한다.\n화면에 표시되는 항목에 대한 설명은 아래와 같다.\n항목 설명 비고 Mode\nEmbedded 또는 Standalone Session Server의 Client 모드 선택\nEmbedded Host\nSession Cluster의 Primary서버의 노드명 과 서버명\nEmbedded Port\nSession Cluster의 Primary서버의 서비스 포트\nSecondary Server Host\nSession Cluster의 Secondary 서버의 노드명 과 서버명\nSecondary Server Port\nSession Cluster의 Secondary 서버의 서비스 포트\nMulti Login Control\n다중 로그인 체크 여부\nfalse\nLogout Page (Multi Login)\n다중 로그인시 먼저 로그인 한 사용자에게 표시되는 로그아웃 결과 페이지\nLogout Message (Multi Login)\n다중 로그인시 로그아웃 결과 메시지, ajax Client에게 JSON 타입으로 제공됨\nExpected Page for Multi Check\nManager 에서는 설정할 수 있는 설정 값은 정해져 있다. 기본적으로 default 설정을 따르도록 한다.\n아래는 session.conf 파일로 변경 가능한 환경설정 값이다.\n항목 설명 기본값 enable_clustering\nSession clustering 할지 여부. False면 Session Server에서 session을 find하지 않는다.\nTRUE\ndebug_clustering\ndebug 할지 여부\nFALSE\nprimary_host\nPrimary Session Server의 주소\nEmbedded 모드인 경우에는 Embedded Host 값\n127.0.0.1\nprimary_port\nPrimary Session Server의 port\nEmbedded 모드인 경우에는 Embedded Port 값\n5005\nsecondary_host\nSecondary Session Server의 주소,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용된다.\nEmbedded 모드인 경우에는 Slave Server Host 값\n127.0.0.1\nsecondary_port\nSecondary Session Server의 port,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용\nEmbedded 모드인 경우에는 Slave Server Port 값\n5006\nrecv_queue_size\n타 Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\n512\nreq_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등) Queue size\n512\nresp_queue_size\n타 Server로부터 수신한 Session 정보 요청에 대한 응답을 담는 Queue size\n512\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\n512\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다.\n3000\nso_timeout\nSession Server와의 연결에서 read timeout\n8000\ntcp_open_try_interval\nSession Server에 연결이 끊어진 경우 재 연결 시도를 위한 간격\n5000\nfind_timeout\nApplication Server에서 트랜잭션이 세션을 검색할 때 서버 응답을 기다리는 시간 이 시간 동안 서버가 응답이 없으면 Application Server은 해당 세션을 서버가 가지고 있지 않은 것으로 간주한다\n500\nwait_server_ready_cnt\nServer와 통신연결은 되었으나, Server 상태가 ready가 아닌 경우 최대 설정 초만큼 기다린다. -1인 경우 무한대로 기다린다.\n-1\nserver_embedded\nsession server 모듈을 embedded 할지 여부. True면 session server 모듈을 embedded 한다.\nfalse\nmax_logoutset\n로그아웃된 HTTP 세션을 보관하는 set 크기\n20000\ncheck.duplication.login\n중복 로그인 체크 여부\nfalse\n주1) 타 Server : 연결된 Session Server 또는 Cluster된 Application Server\nVersion 1.3.1.2\nLast updated 2021-10-05 16:39:54 +0900 "},{"id":15,"href":"/docs/1.3.1/1.3.1.3/userguide/","title":"User Guide","parent":"1.3.1.3","content":" \u003c!DOCTYPE html\u003e User Guide User Guide LENA Support\nlena-support@lgcns.com\nversion 1.3.1.3 Table of Contents 1. Overview 1.1. LENA는 무엇입니까? 1.2. LENA 특징 1.3. LENA 구성 요소 및 주요 개념 1.3.1. Management Module 1.3.2. Server Module 1.4. LENA 작동방식 1.5. Edition 별 제공 Spec 2. Log In/Out 2.1. Log In 2.2. Log Out 2.3. Theme 변경 3. Dashboard 4. Server 4.1. System 4.1.1. 목록 4.1.2. 등록 4.1.3. 수정 4.1.4. 삭제 4.2. Node 4.2.1. 목록 4.2.2. Install 4.2.3. Register 4.2.4. 수정 4.2.5. 삭제 4.2.6. Start 4.2.7. Stop 4.2.8. Change Java Home 4.3. WAS 4.3.1. 목록 4.3.2. Install 4.3.3. Clone 4.3.4. Register 4.3.5. 수정 4.3.6. 삭제 4.3.7. Start/Stop 4.3.8. 설정 정보 관리 4.3.9. Resource 관리 4.3.10. Application 배포 4.4. Web Server 4.4.1. 목록 4.4.2. Install 4.4.3. Clone 4.4.4. Register 4.4.5. 수정 4.4.6. 삭제 4.4.7. Start/Stop 4.4.8. 설정 정보 관리 4.5. Session Server 4.5.1. 목록 4.5.2. Install 4.5.3. Register 4.5.4. 수정 4.5.5. 삭제 4.5.6. Start/Stop 4.5.7. 설정 정보 관리 5. Cluster 5.1. Server Cluster 5.1.1. Server Cluster 목록 5.1.2. Server Cluster 생성 5.1.3. Server Cluster 삭제 5.1.4. Server Cluster 상세 5.1.5. Scaling 6. Resource 6.1. Database 6.1.1. Database 등록 6.1.2. Database 수정 6.2. DataSource 6.2.1. DataSource 등록 6.2.2. DataSource 수정 6.2.3. DataSource 삭제 6.2.4. JDBC Driver Upload 6.2.5. DataSource Import 6.3. JTA 6.3.1. JTA 등록 6.3.2. JTA 수정 6.3.3. JTA 삭제 6.3.4. JTA Import 6.4. JMS 6.4.1. JMS 등록 6.4.2. JMS 수정 6.4.3. JMS 삭제 6.4.4. JMS Import 6.5. Application 6.5.1. Application 등록 6.5.2. Application 수정 6.5.3. Application 삭제 6.5.4. Application Upload 7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 7.1.2. 현황 모니터링 상세 7.1.3. 모니터링 설정 7.2. Analysis Dashboard 7.2.1. Performance Map 7.2.2. Analysis Summary 7.2.3. Instance Map 7.3. Event Dashboard 7.3.1. Event 종류 7.3.2. Event Dashboard를 통한 Event 관리 7.4. 통계 7.4.1. 연간 진단/대응 통계 7.4.2. 리포트 7.4.3. 알림 7.5. 진단 및 대응 7.5.1. 진단/대응 Rule 설정 7.5.2. Server Rule 설정 7.6. Trace 7.6.1. Session Trace 7.6.2. Event Trace 7.6.3. Trace Setting 8. Topology 8.1. 화면 구성 8.2. 토폴로지 영역 상세 8.2.1. Control [Edit: OFF] 8.2.2. Control [Edit: ON] 8.3. 서비스 트레이싱 영역 상세 9. Admin 9.1. IAM 9.1.1. Users (사용자 관리) 9.1.2. Auths (권한관리) 9.1.3. User-Auth Mapping (사용자 권한 관리) 9.1.4. Menu-Auth Mapping (메뉴 권한 관리) 9.2. License 9.2.1. License 목록 9.2.2. License 상세 9.2.3. License 업로드 / 복구 9.2.4. License 관련 시스템 현황 체크 9.2.5. Host기반 License 체크 설정 9.2.6. 시간 정보 조회 9.3. License(Scaling) 9.3.1. Manager License 9.3.2. License 목록 9.3.3. License 상세 9.3.4. License 업로드 / 복구 9.3.5. License 관련 시스템 현황 체크 9.3.6. Host기반 License 체크 설정 9.3.7. 시간 정보 조회 9.4. Security (서비스 제어) 9.4.1. Rule Setting (Rule 설정) 9.4.2. Rule Applying (Rule 적용) 9.4.3. Service Control Log (Rule 적용결과 조회) 9.5. Patch 9.5.1. Overview 9.5.2. WAS 9.5.3. Session Server 9.6. Preferences 9.6.1. Action Trace 9.6.2. Documentation 9.6.3. Manager Environment 9.6.4. Manager HA 10. Appendix 10.1. LENA 시스템 요구사항 10.2. Manager 지원 브라우저 10.3. 지원 Spec별 버전 10.4. Manager DB파일 백업 10.5. Manager 의 내부이력 삭제 10.6. Manager 의 admin 패스워드 초기화 10.7. LENA 설치 권장 OS파라미터(CentOS기준) 10.8. LENA 주기적으로 증가하는 파일 10.9. Patch CLI (Command Line Interface) 10.9.1. 패치파일 업로드 및 압축해제 10.9.2. Patch 10.9.3. History 10.9.4. Restore 10.9.5. Version 확인 10.10. Session Server 상세 10.10.1. Session Server Standalone 모드 10.10.2. Session Server Embedded 모드 1. Overview 1.1. LENA는 무엇입니까? LENA는 Enterprise 환경에서 JAVA J2EE Web Application을 서비스하는데 필요한 모든 구성 요소가 포함된 웹 미들웨어 솔루션이다.\nLENA는 실질적인 웹 서비스를 제공하는 Server 제품들과 이를 통합적으로 관리하기 위한 Web UI 기반의 Manager Console로 이루어져있다. 사용자는 Manager Console을 통해 Server 설치부터 Parameter 설정 및 각 제품간 연동 등을 손쉽게 수행할 수 있으며, LENA만의 사용자 친화적인 UX/UI 설계로 웹 미들웨어 솔루션 사용에 익숙하지 않은 사용자라도 빠르게 사용법을 습득하여 웹 미들웨어 관련 지식을 갖출 수 있다.\nLENA는 데이터 센터/클라우드 환경에서 웹 미들웨어 운영자들로부터 다년간의 운영 노하우를 집약하여 다양한 편의 기능을 제공한다. 이와 함께 대규모 트랜잭션 안정적으로 처리하고 서비스 장애를 최소화 할 수 있도록 고가용성, 내결함성을 보완한 Clustering, 장애 진단/대응 기능을 제공한다.\n다음 절은 LENA의 특징들에 대해 더 상세히 설명한다.\n1.2. LENA 특징 Enterprise 요건 제공 LENA Web Application Server EE (J2EE Edition)는 Enterprise Web Application을 실행시키는데 필요한 EJB, JTA/XA, JMS, JAX-WS 등 J2EE Spec을 지원한다. 또한 타사 WAS에 비해 기동성능, Application Deploy성능의 향상을 이루었고, CPU/Memory 등 자원 사용 효율성 역시 향상되었다. 고가용성을 위해 필수인 Session Clustering을 위해 Session Server를 Enterprise Edition에서 기본으로 제공한다.\nOpensource 호환성 보장 LENA Web Server, LENA WAS는 Opensource Base로 구현되어 완벽한 Opensource 호환성을 보장한다. Opensource 기반으로 작성된 Web Application이 별도의 수정 없이 LENA에 적용되므로 전환 Effort를 대폭 절감할 수 있다. 또한 Library 및 설정 관련하여 표준 기술을 사용하므로 Vendor 종속성을 해결하여 사용자의 IT Ownership을 강화할 수 있다.\n지능형 장애 진단/대응 및 서비스 추적 Thread Pool Full / Hang / Out of memory 등 대표적인 장애 상황들에 대해 사전 정의된 Rule 기반으로 진단을 수행하여 적절한 조치를 수행할 수 있다. 실시간으로 수집되는 Monitoring 데이터를 기반으로 분석하여 Server가 실제 장애로 이어지기 전에 Fake Page 우회 혹은 강제 재기동 등을 통해 장애 상황을 방지하거나 장애로 이어지더라도 장애 시간을 최소화할 수 있다. 이와 동시에 관련된 Dump와 Report를 제공하여 원인 분석을 수행할 수 있게 한다.\nMulti-Server 관리 및 Centralized Operation 여러 LENA Web Server와 LENA WAS를 하나의 Cluster로 묶을 수 있어 Single Operation으로 여러 Server를 동시에 제어할 수 있다. 일관적인 설정 동기화와 함께 Graceful Restart혹은 Rolling Restart를 통해 안정적인 반영이 가능하다. 또한 Cluster로 묶이지 않은 Server들에 대해서도 Multi Control을 지원한다.\n운영 관점의 차별화 기능 제공 웹 미들웨어 솔루션을 운영하기에 편리한 다양한 편의 기능을 제공한다. Template 기반의 간단하고 빠른 Server설치와 Server 복제 기능을 이용하여 원하는 구성 Set을 짧은 시간 안에 구축이 가능하다. Topology View를 통해 Server 모듈 간 구성 및 연동 정보를 한눈에 확인할 수 있어 가시성을 향상할 수 있다. Dashboard를 통해 운영 중인 시스템의 Event와 성능 현황 등을 확인할 수 있다. 그 밖에 Multi Account 관리를 통해 메뉴/자원의 접근 권한 설정이 가능하며, 운영자 Action Tracing, 설정 변경 정보 History 추적 및 Restore 기능을 제공한다.\n1.3. LENA 구성 요소 및 주요 개념 LENA는 Binary Package를 통해 제공이 되며 그 안에 필요한 모든 구성 요소를 포함하고 있다. 구성 요소는 크게 두 범주로 나누어진다.\nLENA를 운영 관리하기 위한 Management Module로 LENA Manager Console과 LENA Node Agent가 포함된다.\n실질적인 Web Service를 담당하는 Server Module로 LENA Web Server, LENA WAS(Web Application Server), LENA Session Server를 포함된다.\n다음은 각 구성 요소 별 상세 설명과 함께 이에 따른 주요 개념을 다룬다.\n1.3.1. Management Module LENA Manager LENA Manager는 Web UI를 통해 LENA의 모든 자원/기능을 설정 및 제어할 수 있도록 설계된 Web Application이다. LENA Package에 준비된 스크립트를 통해 설치 및 기동할 수 있다. LENA Manager를 통해 Server 설치/관리를 수행하려면 Node Agent 및 Advertiser와의 연동을 구성해야 한다.\n다음은 LENA Manager에서 제공하는 대표적인 기능과 개념에 대해 설명한다. 아래에 설명되지 않은 상세 사항들에 대해서는 “운영자가이드”를 참조한다.\nDashboard\nLENA Node, Server의 자원 현황과 Event 확인\nServer\nLENA Node의 등록, Web Server, WAS, Session Server 를 설치, 설정 관리 및 기동/중지 제어\nSystem\nLENA Node, Server가 관리되는 최소 단위. 하나의 System하위에는 여러 Node를 등록할 수 있으나, 하나의 Node는 여러 System에 중복 등록이 불가하다.\nNode\nNode Agent와 1:1로 대응되는 개념. Manager에서 원격지에 있는 Server에 명령을 수행하기 위해선 Node Agent를 통해야 한다.\nCluster\nMulti-Server 관리. 하나의 System 내의 Server들에 대해서만 Cluster 구성이 가능하며, 하나의 Server는 여러 Cluster에 속할 수 없다.\nServer Cluster\n여러 LENA Web Server, WAS를 하나의 묶음으로 관리할 수 있다. 설정 동기화, 통합 재 기동 등의 다양한 편의 기능 제공.\nResource\nLENA에서 제공하는 Module이 아니지만 LENA Server와 밀접하게 연동되는 자원에 대해 명세를 정의함으로써 Resource로 사용한다. Resource는 LENA WAS별로 Local 설정할 수 있지만, Resource 메뉴를 통해 Global 설정하여 WAS에서 공통 Import하는 방식을 통해 중복된 작업을 피할 수 있다.\nDatabase\nDBMS의 IP, Port, Driver 등 물리적 명세를 정의. 하나의 DBMS와 1:1로 대응된다.\nDatasource\nDB Connection Pool을 LENA WAS에서 구성하기 위해 JNDI Name, Url, User ID/Password등을 지정한다. 하나의Database하위에 여러 Datasource를 구성할 수 있다.\nApplication\nLENA WAS를 통해 실행할 Application의 위치와 Context Path를 지정한다.\nTopology\nLENA Manager상에 설치되고 연동 구성되어 있는 LENA Web Server, LENA WAS, LENA Session Server 등의 구성 현황을 Topology Diagram 형식으로 표현한다. 이 기능을 통해 Server의 간단한 설치와 기동/중지 제어도 가능하다.\nDiagnostics\nLENA Node와 Server에 대한 자원 모니터링과 그에 연계된 다양한 기능 탑재.\nLENA Node Agent LENA Node Agent는 LENA Manager에 Node를 등록할 때 Node와 1:1로 대응되며 LENA Package에 기본적으로 설치되어 있으며 준비된 스크립트를 통해 기동할 수 있다. 주요 역할은 LENA Manager를 통해 Node 하위의 Server에 명령을 수행할 때 Node Agent가 이를 담당하며 모니터링 및 상태 데이터를 LENA Manager로 전송하는 기능도 수행한다. 물리 서버 당 1개의 Node Agent를 설치하는 것이 기본이지만, 필요에 따라 여러 개의 Node Agent를 구성할 수 있다. LENA Web Server, LENA WAS, LENA Session Server는 LENA Node 하위에 구성되며, LENA Node는 하나의 System 하위에 구성된다.\n1.3.2. Server Module LENA Web Server LENA Web Server는 정적 컨텐츠를 전송할 수 있으며 LENA WAS와 Reverse Proxy 형태로 연동하여 LENA WAS가 제공하는 Web Application 서비스의 front-end 역할을 수행한다. 그 외 선택적으로 다양한 추가 기능을 이용할 수 있는데, Domain/URI 기반 분기 및 Load Balancing 기능과 보안 레이어(SSL)를 제공하는 것이 대표적이다.\nLENA WAS (Web Application Server) LENA WAS는 Java Web Application을 실행하여 Web Application 서비스를 제공한다. DB Connection Pool을 이용하기 위한 Datasource 연동 기능과 Session Clustering을 이용하기 위한 Session Server 연동 기능을 포함하고 있다. 다음은 LENA WAS의 두 가지 Type을 설명한다.\nLENA WAS SE (Standard Edition)\nJava Class 파일을 처리하기 위한 Servlet Engine과 JSP 파일을 처리하기 위한 JSP Engine으로만 구성되어 있으며 WAR Type의 Web Application만 실행할 수 있다. LENA WAS EE에 비해 상대적으로 가볍고 빠르다는 장점이 있다.\nLENA WAS EE (Enterprise Edition)\nLENA WAS SE가 제공하는 Engine 외에도 EJB Engine, JMS Engine 등 J2EE Spec을 지원하며, WAR/EJB/EAR Type의 Application을 실행할 수 있다. 또한 2 Phase Commit을 위한 XA Datasource를 지원한다.\nLENA WAS는 내부적으로 Advertiser Module을 탑재하고 있으며 이는 LENA WAS의 JVM 내부 모니터링 결과를 JMX를 통해 수집하여 LENA Manager로 전달한다.\nLENA Session Server LENA Session Server는 여러 LENA WAS 간의 Session을 공유하여 WAS 다중화를 통한 고 가용성을 보장하기 위해 제공된다. LENA Enterprise Edition을 사용할 경우 기본으로 제공되며 2개의 LENA Session Server를 Active-Active Clustering (양방향 Active-Standby)을 통해 Session Clustering을 구성할 수 있다. LENA Session Server를 사용하기 위해 Application에서 별도의 설정을 할 필요가 없이 LENA Manager에서 간단한 설정만으로 구현이 가능하다.\n단, Session-clustering을 하기 위해선 HTTP Session에 저장되는 모든 객체는 직렬화(Serializable)되어야한다.\n1.4. LENA 작동방식 Manager에 등록된 Node에는 Node Agent, Application Server에는 Advertiser가 설치되어 있다.\n운영자는 Manager의 UI를 통해 각 Node Agent에 Server에 대한 제어요청(예: Start, Stop, Reload, Dump, 설정변경 등)을 보내고, Node Agent가 이를 수신하여 제어를 실행한다.\nNode Agent, Advertiser는 주기적으로 모니터링 데이터를 Manager로 전송하고, 운영자는 Monitoring Dashboard와 같은 Manager의 UI를 통해서 각 서버의 자원 현황을 확인할 수 있다. Session Server의 경우 자기 자신의 모니터링 데이터를 직접 Manager에 전달한다.\nFigure 1. LENA Mechanism Table 1. LENA 구성 요소 별 설명 구성요소 설명 Manager\nAgent를 통한 Server제어와 모니터링 기능 제공\nRepository\nManager 운영을 위한 File/DB 탑재\nNode\nNode Agent를 탑재. Node하위에 Server Module이 설치됨\nNode Agent\n- Server 설치/복제/패치\n- Server 기동/중지 제어\n- Server 설정 관리\n- Node, Web Server, WAS, Session Server 상태 정보\n- Node, Web Server 자원 모니터링 데이터 제공\nAdvertiser\nWAS 자원 모니터링 데이터 제공\nWAS\nJava Web Application 서비스 제공\nWeb Server\nWAS와 Reverse Proxy 형태로 연동하여 Web 서비스의 Front-end 역할\nSession Server\n- WAS와 Session Clustering 연동하여 고가용성 구현\n- Session Server 모니터링 데이터 제공\n1.5. Edition 별 제공 Spec LENA 는 Application Server 의 기능 제공 범위에 따라 Standard와 Enterprise Edition으로 구분된다. Standard Edition이 Web Application 중심의 Spec을 지원하는 반면, Enterprise Edition은 JTA, JMS, EJB등 J2EE Spec을 지원하며 Session Clustering을 제공한다. 각 Edition별 제공되는 기능 또는 스펙은 아래와 같다.\nTable 2. Edition별 제공 기능과 스펙 기능/Spec (LENA-Manager 기준) Standard Enterprise Server\nWeb Server\n●\n●\nWAS (SE)\n●\n●\nWAS (EE)\n-\n●\nSession Server\n-\n●\nResource\nDatabase\n●\n●\nDataSource (일반)\n●\n●\nDataSource (XA)\n-\n●\nJTA\n-\n●\nJMS\n-\n●\nApplication (WAR)\n●\n●\nApplication (EJB, EAR)\n-\n●\nCluster\n-\n●\nTopology\n●\n●\nSecurity\n●\n●\nDiagnostics\nMonitoring\n●\n●\n진단/대응\n-\n●\nPatch\n●\n●\n(범례 : ● 제공됨, - 제공되지 않음)\n2. Log In/Out Manager에 로그인과 로그아웃하는 기능을 제공한다.\n2.1. Log In Figure 2. Manager 접속화면 로그인 페이지 하단 좌측에는 설치된 버전이, 우측에는 기술지원 연락처가 기술되어 있다.\n로그인 시도시, 7번 이상의 비밀번호 오류가 발생하는 경우 해당 계정으로 로그인을 할 수 없다. 이런 경우 console을 통해 패스워드를 초기화 해야한다. (자세한 내용은 Appendix에서 'Manager 의 admin 패스워드 초기화' 항목을 참고한다.)\n2.2. Log Out Manager 상단 우측의 문 아이콘 을 이용하여 로그아웃을 할 수 있다.\n2.3. Theme 변경 Manager 상단 우측의 수레바퀴 아이콘 메뉴의 Dark Theme 메뉴를 통해 테마를 설정 할 수 있다. 라이트 모드와 다크 모드 두 가지 중에 선택이 가능하다.\n3. Dashboard Manager에서 관리되는 시스템 별 구성 정보, 자원 모니터링, 이벤트, 라이센스 등의 정보를 요약하여 제공한다.\nFigure 3. Dashboard 화면 좌측의 시스템 목록에는 로그인 한 사용자에게 권한이 있는 시스템 목록이 제공된다. All은 권한이 있는 모든 시스템의 정보를 통합하여 보여준다.\nTable 3. Dashboard 항목 항목 설명 비고 INVENTORY\nNode\nSystem 에 포함된 Node의 수\n범례: Node의 타입 별 갯수\nWeb type : Web Server를 설치 할 수 있는 노드 수\nWAS type : WAS, Session Server를 설치 할 수 있는 노드 수\nServer\nSystem에 포함된 Server 타입 별 갯수\nNode Status\nSystem에 포함된 Node의 자원(CPU, Memory, DISK) 사용률 상태\n범례\nHigh / Middle / Low\nNot working : 정지 상태의 Node(Agent) 갯수\nServer Status\nSystem에 포함된 Server의 자원 사용률 상태\nWeb : CPU, Memory, Thread 체크\nWAS : Heap Memory, Thread Pool 체크\nSession : Heap Memory 체크\n범례\nHigh / Middle / Low\nNot working : 정지 또는 Hang 상태인 서버의 갯수\nSERVER CLUSTER\nServer Cluster\nserver cluster 수\nMember\nserver cluster에 속해 있는 타입별 서버 총 수\nCHECK\nModified Server\nSystem에 포함된 Server중 재기동이 필요한 서버 존재여부\nOut of Cluster Sync\nsync가 필요한 Server Cluster 존재여부\nDiagnostic Report\n진단 프로세스 수행 후 발행된 레포트 갯수\nEVENT\nError\nSystem에 포함된 Server에서 발생된 Error 갯수\nStuck Thread\nSystem에 포함된 Server에서 발생된 Stuck Thread 갯수\nOOM\nSystem에 포함된 Server에서 발생된 Out Of Memory 갯수\nFull GC\nSystem에 포함된 Server에서 발생된 Full GC 갯수\nRESOURCE\nDB Resource\nRESOURCE메뉴에서 등록되어 관리되는 Database와 Datasource 수\nDatasource의 범례\nUsed : WAS에서 사용 중인 Datasource 수\nNot Used : WAS에서 미사용 중인 Datasource 수\nLICENSE\nLicense Status\n노드들의 라이선스 상태 (Trial 라이선스의 유효일 수 또는 상용라이선스의 유효일 수(종료일자기준 15일 전 부터) 표시)\n4. Server Node 및 WAS, Web Server, Session Server를 관리하기 위한 화면을 제공한다.\n특정 System 내의 Node 및 각 Server별 개수를 확인하고, 실시간으로 Node 및 Server 상태를 통합적으로 관리 할 수 있다.\n4.1. System System은 다수의 Server를 가지는 논리적인 그룹이다. \"DefaultSystem\"을 기본적으로 제공하며 사용자는 System을 생성, 수정, 삭제 할 수 있다.\n4.1.1. 목록 System 목록은 화면 좌측에 트리 형태로 제공된다.\nFigure 4. System List 4.1.2. 등록 등록(+) 버튼 을 클릭하여 목록에 \"Create System\" 을 생성한다.\n생성할 시스템 명을 입력한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n현재 로그인한 사용자의 권한이 해당 System에 매핑된다. 즉, 로그인한 사용자와 동일한 권한을 가진 사용자에게만 해당 System이 조회된다. (Node, Server, Resource 동일하게 적용됨)\n4.1.3. 수정 수정할 System을 선택한다.\n수정(연필) 버튼 을 클릭하여 선택한 System의 이름을 변경한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n4.1.4. 삭제 삭제할 System을 선택한다.\n삭제(-) 버튼 을 클릭한다.\nOK 버튼 을 클릭하여 저장한다.\n하위에 Node가 존재하는 System은 삭제할 수 없다. 즉, 빈 System만 삭제 가능하다.\n4.2. Node Node는 다수의 WAS, Web Server, Session Server를 가지는 물리적인 Server이다.\n4.2.1. 목록 Node List를 통하여 각 Node를 관리할 수 있다.\nFigure 5. Node List Node의 속성은 아래와 같다.\nTable 4. Node 속성 항목(*는 필수값) 설명 비고 Status\nNode의 현재상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nName(*)\nNode의 이름\nType(*)\nNode의 Type\n다음과 같은 타입을 제공함\nAll: 모든 종류의 Server 설치가능\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nAddress(*)\nNode의 IP주소\nPort(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nManager Address(*)\nManager IP 주소\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 Node정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Node정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 JAVA Home 설정과 Start/Stop을 수행할 수 있는 메뉴 제공\n4.2.2. Install Install 버튼 을 클릭하여 Node정보 등록을 준비한다.\nNode의 속성 값을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nTable 5. Install 시 설정하는 속성 항목(*는 필수값) 설명 비고 Node Type\nNode의 Type\n다음과 같은 타입을 제공함\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nNode Name(*)\nNode의 이름\nNode Address(*)\nNode의 IP주소\nNode Port(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nUser(*)\nNode 실행 사용자 계정\nNode Type이 Application인 경우, root 계정으로 실행 할 수 없음. Node Type이 Web인 경우 Web Server의 Port를 1024이하를 사용해야하는 경우에만 root 사용.\nPassword(*)\nNode 실행 사용자 계정 비밀번호\nSSH Port\n해당 Server에 접속할 SSH 포트\nLENA Home\nNode Agent가 설치 될 위치\nJAVA Installation\nJava 설치 여부\nJAVA Home\n설치된 JAVA 경로\nInstall 기능은 Linux 환경에서만 지원한다.\n4.2.3. Register Register 버튼 을 클릭하여 Node정보를 등록 가능한 상태로 변경한다.\nNode의 Name, Type, Address, Port, Manager Address(기본값이 제공됨) 속성을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nManager IP는 Node의 host IP로 자동 입력된다.\n네트워크 구성에 따라 자동 입력된 IP가 실제 네트워크 IP와 다른 경우가 발생할 수 있다.\n이때는 Manager IP를 수정하여 입력해야 한다.\n4.2.4. 수정 수정(연필) 버튼 을 클릭하여 Node정보를 수정 가능한 상태로 변경한다.\nNode의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n포트 정책이나 방화벽 정책 변경 등에 의해 Node의 Address나 Port를 변경해야 하는 경우, agent.conf의 설정정보를 수정 후 Node Agent를 재기동한다.\n이 때 변경된 정보를 Manager에서도 알 수 있도록 Node의 Address와 Port정보를 수정하여 입력한다.\n수정된 정보를 저장할 때 'Occured Read Timeout' 메세지가 발생하면 아래의 경우를 확인한다.\nNode Agent가 아닌 다른 곳에서 포트를 사용하는 경우\nNode Agent가 Hang이 걸린 경우\nNetwork 문제가 있는 경우\n4.2.5. 삭제 휴지통 버튼 을 클릭하여 Node정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nNode 하위에 Server가 등록되어 있는 경우 해당 Node를 삭제할 수 없다.\nUninstall은 Linux 환경에서만 지원되고, 삭제할 노드를 한 개만 선택한 경우 가능하다.\n4.2.6. Start 정지 상태인 노드를 기동 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Start 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Start 버튼 을 누른다.\n4.2.7. Stop 기동 상태인 노드를 정지 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Stop 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Stop 버튼 을 누른다.\n4.2.8. Change Java Home Node와 Node에 설치된 Server들의 JAVA Home 경로를 수정할 수 있다.\nJAVA Home Path를 수정한다.\nNode Java Home Path : Node Java Home Path를 편집한다.\nServer Java Home Path : 선택한 서버들의 JAVA Home 경로를 편집한다. (Web Node에서는 지원하지 않음)\nSave 버튼 을 누른다.\n4.3. WAS WAS를 관리하기 위한 화면을 제공한다. Node에 설치한 Server의 등록, 수정, 삭제를 수행하며, 그 외 Server의 설치, 제거 및 복제를 할 수 있다.\n4.3.1. 목록 WAS List를 통하여 각 WAS를 관리할 수 있다.\nFigure 6. Web Application Server List WAS의 속성은 아래와 같다.\nTable 6. WAS 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nType\nServer의 유형\n다음과 같은 타입을 제공함\nStandard\nEnterprise/EE\nEnterprise/SE\nHTTP Port\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.3.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer Type, Server ID 등을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.3. Clone Clone 버튼 을 클릭하여 Server의 복제를 준비한다.\nNode List에서 복제할 Server를 선택한다. 이때 Clone Server ID, Clone Service Port가 자동으로 입력된다.\nClone Server ID와 Service Port를 원하는 값으로 수정한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버에 배포되어 있는 어플리케이션 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, register 기능을 이용하여 기존에 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\nSystem \u0026gt; Application Server List Tab에서도 설치가 가능하다. 단, Node List에서 설치할 Node를 선택해야 한다.\n4.3.5. 수정 수정(연필) 버튼 을 클릭하여 Server정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.3.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nWAS를 삭제할 경우 서비스 제어(ADMIN \u0026gt; Security \u0026gt; Rule Applying 메뉴)의 적용 대상 목록에서 해당 Server는 삭제된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.3.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 WAS 가 서비스중인 모든 작업이 끝난 후 종료된다.\nGeneral 탭의 Shutdown Timeout 시간 이후에도 작업이 끝나지 않은경우 강제로 중지된다.\nServer를 시작하면 로그파일을 볼 수 있는 팝업이 실행된다. 팝업을 통해 Server의 정상 기동 여부를 확인할 수 있다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\n팝업 화면에서 Start / Stop 명령 이후에는 팝업을 닫더라도 요청한 명령이 중지되지 않는다. Forced Stop/Restart Server 목록 가장 우측의 추가 기능(\u0026#8230;\u0026#8203;) 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n강제 중지, 재시작을 수행하면 현재 서비스중인 모든 작업이 즉시 중지되므로 주의해야한다. 4.3.8. 설정 정보 관리 Server의 설정 정보를 변경하는 기능을 제공한다. Server 목록에서 변경하려는 Server 명을 선택한다. Standard Edition의 경우 General, Session, Logging, Web Config, Environment, Properties, Config Tree, History탭을 제공하며, 설정 정보 수정 시 백업을 하여 복원이 가능하다. Enterprise Edition는 Container 탭을 추가적으로 제공한다.\nServer 설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nGeneral Server의 일반적인 설정 정보를 관리한다. Port정보, Connector정보, Stuck Thread 관련 설정을 수정 및 저장 할 수 있다.\n설정 정보의 상세내용은 아래와 같다.\nServer Info\nServer의 주요 설정 값을 나타낸다.\nTable 7. 주요 설정 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nHTTP 포트번호 - 71 (자동계산)\nHTTPS Port\nHTTPS 포트번호\nHTTP 포트번호 + 363 (자동계산)\nShutdown Port\nShutdown 명령 문자열을 받기 위한 포트\nHTTP 포트번호 - 75 (자동계산)\nInstall Path\nServer 설치 경로\nJava Home Path\nJava Home 경로\nMinimum Heap Size(m)(*)\nWAS에 설정할 최소 Heap 사이즈(Megabyte)\nDefault : 512\nMaximum Heap Size(m)(*)\nWAS에 설정할 최대 Heap 사이즈(Megabyte)\nDefault : 512\nApplication Base\nApplication의 Base 디렉토리\nServer가 stop 상태이거나, appBase에 deploy이된 Application이 없을 경우에만 수정이 가능하다.\nJvmRoute\nServer의 Unique한 Identifier\nSystem Property에 설정되어 있는 값을 우선함.\n없을 경우 server.xml의 값을 사용\n(Hostname + Port의 조합으로 생성됨)\nAuto Deploy\n어플리케이션 변경 시 자동 Deploy 여부\nDefault : false\nApplication별 DocBase에 war 파일을 재 업로드 할 경우 감지됨\nDeploy On Startup\nWAS 기동 시 Application Deploy 여부\nDefault : true\nShutdown Timeout\nServer 종료 시 실행중인 작업이 존재할 경우 대기하는 시간(초)\nDefault : 86400\nConnector\nServer에서 사용하는 Connector 설정 값을 나타낸다.\nTable 8. 주요 설정 항목(*는 필수값) 설명 기본값 Protocol Type\n프로토콜 유형\nHTTP/1.1, AJP/1.3\nport\n포트번호\nredirect Port\nRedirect 포트\nHTTPS Port와 동일\nconnection Timeout\n커넥션 타임아웃(ms)\nHTTP : 20000,\nAJP : 60000\nURIEncoding\nURI byte를 변환하기 위한 Character Encoding\nUTF-8\nserver\nHttp Response에 대한 Server Header를 재정의하여 Server 정보 노출을 방지\nServer\nmaxThreads\nConnector가 생성할 수 있는 최대 Thread 수\n256\nminSpareThreads\nConnector생성시 확보하는 최소 Thread 수\n10\nmaxQueueSize\nRequest Queue 의 최대길이\nInteger.MAX_VALUE\npacketSize\nAJP packet 크기\n8192\nenableLookups\nDNS LookUp 사용여부. 사용하지 않을 시 성능에 유리하다\nfalse\ncompression\nHTTP message Body 압축여부(off, on:Text만, force:전체)\noff\ntcpNoDelay\nTCP 패킷을 Delay 없이 전송\ntrue\nStuck Thread\nStuck Thread의 설정값을 나타낸다.\nTable 9. 주요 설정 항목(*는 필수값) 설명 비고 Threshold(s)\nStuck Thread를 식별하기 위한 최소 시간(s)\nInterrupt Thread Threshold\nStuck Thread를 중단하기 위한 최소 시간(s)\nStuck Thread 판별 이후 n초 뒤 종료시키려면 \"Threshold+n\"값 입력\nService Point\nEndpoint Address의 설정값을 나타낸다.\nTable 10. 주요 설정 항목(*는 필수값) 설명 비고 Endpoint Address\nWAS의 대표 서비스 도메인 주소\nSession Session Cluster 기능을 사용할지 여부를 설정한다.\nEmbedded Session Server 모드\nWAS에 Session Server 모듈을 Embedded하여 동작하는 경우 선택한다. Mode 항목에서 Embedded Session Server Mode를 선택하게 되면, Server 관리 화면에서 Session Server 리스트에 Embedded Type으로 표시된다.\nTable 11. 주요 설정 항목(*는 필수값) 설명 기본값 Embedded Host\n해당 WAS를 의미\n자기 자신의 IP (변경불가)\nEmbedded Port\n해당 WAS에서 사용할 Embedded Session Server 용 port 정보\nSecondary Server Host\nSlave Server 호스트 IP\nSecondary Server Port\nSlave Server Port\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nClient 모드\n별도의 Session Server를 연결하여 동작하는 방식이다. Mode 항목에서 Client Mode를 선택한다.\nClient 모드에서 Primary Server와 Secondary Server 설정 시 사전에 Session Server가 구성되어 있어야한다.\nTable 12. 주요 설정 항목(*는 필수값) 설명 기본값 Primary Server Host\nPrimary Session Server 호스트\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nPrimary Server Port\nPrimary Session Server 포트\nSecondary Server Host\nSecondary Session Server 호스트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nSecondary Server Port\nSecondary Session Server 포트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nExternal Stored Session\nSession객체를 로컬 WAS에 저장하지 않고 Session Server에 저장\nfalse\nShare session in applications\nMulti Application간 Session객체를 공유\nClient Mode에서만 설정가능\nfalse\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nSession 기능은 Enterprise Edition에서 제공되는 기능이다.\nLogging Server의 Logging 설정 정보를 관리한다.\nLog Home\nTable 13. 주요 설정 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nAccess Log\nRequest에 대한 Access 로그의 설정값을 나타낸다.\nTable 14. 주요 설정 항목(*는 필수값) 설명 비고 Directory\nLog 디렉토리\n절대경로 또는 $CATALINA_BASE의 상대경로로 지정할 수 있음\nPattern\nLogging field의 Layout\nPrefix\nLog 파일의 prefix\nSuffix\nLog 파일의 suffix\nHandler\nHandler 설정 정보의 상세내용은 아래와 같다.\nTable 15. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nHandler의 클래스명\nType\nHandler의 유형\nConsoleHandler와 FileHandler 선택 가능\nLevel\nHandler의 로그레벨\nFilter\njava.util.logging.Filter의 구현체\nFormatter\njava.util.logging.Formatter의 구현체\nDefault : java.util.logging.SimpleFormatter\nEncoding\nHandler의 Character Encoding\nRoot\nRoot Logger여부\nLogger\nLogger 설정 정보의 상세 내용은 아래와 같다.\nTable 16. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nLogger 이름 지정\nLevel(*)\nLogger의 로그레벨\nHandler(*)\nLogger가 어떠한 Handler를 사용할지 선택\nConsoleHandler가 기본 선택\nServer의 로그설정 파일은 $CATALINA_HOME($CATALINA_BASE)/conf/logging.properties 이다.\nWeb Config Global web.xml의 설정을 관리하는 화면을 제공한다. 필요 항목을 수정한 후 Save 버튼 을 클릭하여 저장한다.\n설정 정보의 상세내용은 아래와 같다.\nDefault Servlet\nTable 17. 주요 설정 항목(*는 필수값) 설명 기본값 Listings\nWelcome파일이 없을 때, Directory Listing을 허용할지 여부\nfalse\nInput\nInput buffer size in bytes\n2048\nOutput\nOutput buffer size in bytes\n2048\nReadonly\nPUT, DELETE 등의 HTTP메소드를 허용하지 않음\ntrue\nFileEncoding\nFile Encoding\nplatform default\nShowServerInfo\nDirectory Listing이 허용되어 있을 때 Server 정보를 표시할지 여부\ntrue\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n1 (음수: disable / 0: 가장 마지막)\nJSP Engine\nTable 18. 주요 설정 항목(*는 필수값) 설명 기본값 CheckInterval\nDevelopment가 false일 때 jsp의 변경을 검사하여 재컴파일할지 확인하는 주기(s)\n0 (0: 비활성화 / 양수: 해당 주기로 활성화)\nDevelopment\nDevelopment 여부. Development가 true인 경우에는 modificationTestInterval 값을 주기로 하여 변경을 검사함\ntrue (0: 매 access마다 점검)\nGenStringAsCharArray\nString생성을 Char Array로 할지 여부\nfalse\nModificationTestInterval\nDevelopment가 true일 경우에 동작하는 jsp 변경 검사 주기\n4\nTrimSpaces\n응답에서 쓸데 없는 whitespace를 제거하여 응답바이트를 줄임\nfalse\nJavaEncoding\nJava소스를 generate할때의 Encoding\nUTF8\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n3\nJSP Page Encoding\nTable 19. 주요 설정 항목(*는 필수값) 설명 비고 URL Pattern\nPage Encoding을 적용할 JSP Page의 URL Pattern\nPage Encoding\n적용할 Page Encoding을 지정\nSession\nTable 20. 주요 설정 항목(*는 필수값) 설명 비고 SessionTimeout\n세션 타임아웃 시간(분)\nDefault : 30\nWelcome File List\nTable 21. 주요 설정 항목(*는 필수값) 설명 비고 File(*)\nDirectory index로 호출할 경우에 service할 파일을 순서대로 지정함\nEnvironment JVM 옵션, Start Shell의 설정과 System Properties(Enterprise Edition인 경우만 제공)를 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nJVM Setting ($CATALINA_HOME/bin/setenv.sh): Server 실행을 위한 JVM 옵션\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh): Server 시작을 위한 Shell Script\nJVM_ROUTE 값은 여기서 직접 수정하지 않고, General 탭의 Server Info 영역에 있는 JvmRoute 항목의 불러오기 버튼 을 사용하여 수정한다. 여기서 직접 수정할 경우 Manager DB의 정보가 Update되지 않아 DB값 불일치가 발생한다.\nSystem.properties($CATALINA_HOME/conf/system.properties) (이 항목은 Enterprise Edition에서만 확인할 수 있다)\nCatalina.properties ($CATALINA_HOME/conf/catalina.properties): Server의 Catalina 설정\n$CATALINA_HOME은 WAS의 기본 설치 디렉토리이다. $CATALINA_BASE는 본래 하나의 WAS에 복수개의 Instance를 사용하고자 할 때 디렉토리를 생성하여 Instance별로 지정하여 사용되지만 LENA에서는 WAS와 Instance가 1:1 관계라 $CATALINA_HOME이 곧 $CATALINA_BASE로 사용된다.\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Properties Server의 System Properties 와 System Environments를 확인하는 화면을 제공한다. System Properties 중 Key Properties 를 별도로 제공하여 Server경로, JAVA버전 등의 주요 정보를 확인할 수 있다. Server가 기동된 상태에서만 정보를 확인할 수 있다.\nContainer Enterprise Edition의 경우 EJB Container의 설정 변경 기능을 제공한다. container설정 없이 Server를 기동하면 EJB에서 필요한 container가 default 설정으로 생성된다. default설정 외에 변경이 필요한 설정이 있을 경우에는 container를 생성하여 설정을 변경해야 한다.\n기본 설정\nTable 22. 기본 설정 항목(*는 필수값) 설명 비고 ID(*)\nContainer의 식별자\nType(*)\nContainer의 유형\nCMP_ENTITY 설정\nTable 23. CMP_ENTITY 설정 항목(*는 필수값) 설명 비고 CmpEngineFactory\nFactory 클래스 명\nDefault : org.apache.openejb.core.cmp.jpa.JpaCmpEngineFactory\nBMP_ENTITY 설정\nTable 24. BMP_ENTITY 설정 항목(*는 필수값) 설명 비고 PoolSize\nBean pool의 크기 지정\nDefault : 10\nSTATELESS 설정\nTable 25. STATELESS 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nMaxSize\nBean pool의 최대 개수\nDefault : 10\nMinSize\nBean pool의 최소 개수\nDefault : 0\nStrictPooling\nPool이 최대치에 도달했을 때 동작방식 지정. StrictPooling은 pool size를 늘리지 않고 기다림\nDefault : true\nMaxAge\nPool에서 제거되기까지의 최대 시간(h)\nDefault : 0\nReplaceAged\nMaxAge에 도달했을 때 Replace할지 여부\nDefault : true\nReplaceFlushed\npool에서 Flush될 때 Replace할지 여부\nDefault : false\nMaxAgeOffset\nMaxAge 사용량\nDefault : -1\nIdleTimeout\n인스턴스가 pool에서 idle상태로 있을 수 있는 최대 시간(m)\nDefault : 0\nGarbageCollection\n풀을 줄이기 위한 메커니즘으로 garbage collection을 허용할지 여부\nDefault : false\nSweepInterval\n컨테이너가 풀을 정리하고 만료된 instance들을 제거하는 주기(m)\nDefault : 5\nCallbackThreads\nThread Pool 사이즈. 이 값은 컨테이너에 배포되어 있는 모든 Bean들에게 공유됨\nDefault : 5\nCloseTimeout\n풀이 닫히고 PostConstruct 메소드가 호출될때까지 기다리는 최대 시간(m)\nDefault : 5\nSINGLETON 설정\nTable 26. SINGLETON 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nSTATEFUL 설정\nTable 27. STATEFUL 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nCache\nStateful 빈 인스턴스를 관리할 cache\nDefault : org.apache.openejb.core.stateful.SimpleCache\nPassivator\nPassivator클래스 지정\nDefault : org.apache.openejb.core.stateful.SimplePassivator\nTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 20\nFrequency\n빈 캐쉬가 idle상태인 빈들을 확인하는 주기(s)\nDefault : 60\nCapacity\nStateful SessionBean 컨테이너에 대한 bean pool의 크기\nDefault : 1000\nBulkPassivate\n한번에 passivate할 instance의 개수\nDefault : 100\nMESSAGE 설정\nTable 28. MESSAGE 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\nResource Adapter 지정\nDefault : Default JMS Resource Adapter\nMessageListenerInterface\nMessageListener 지정\nDefault : Javax.jms.MessageListener\nActivationSpecClass\nActivation Spec Class 지정\nDefault : org.apache.activemq.ra.ActiveMQActivationSpec\nInstanceLimit\nInstance 최대 개수\nDefault : 10\nAudit WAS에서 발생한 이벤트로 수집/관리하는 기능이다.\n수집된 이벤트 정보는 이벤트 대시보드에서 확인할 수 있다. 이벤트 대시보드 관련 내용은 Event Dashboard를 참고한다.\n총 네 가지 타입의 Detection Rule을 설정해 이벤트를 수집할 수 있다.\nTable 29. OOM Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : true\nTable 30. Stuck Thread Detection Rule 항목 설명 비고 Enable\nStuck Thread 발생을 감지한다\nDefault : false\nLenaStuckThreadDetectionValve 는 server.xml 내에 기본적으로 설정되어 있으며, LenaStuckThreadDetectionValve 관련 설정은 SERVER \u0026gt; Server 선택 \u0026gt; General 탭 화면의 Stuck Thread 항목에서 할 수 있다.\n사용자 요청의 처리 시간이 Threshold 설정 값을 초과한 경우 이벤트가 발생되어 Manager로 전송된다.\nTable 31. Full GC Detection Rule 항목 설명 비고 Enable\nFull GC 발생을 감지한다\nDefault : false\nTable 32. Exception Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : false\nException Class Pattern\n감지할 Exception 패턴을 지정한다. 해당 패턴의 Exception을 상속한 Exception도 검출한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nExclude Exception Class Pattern\n감지에서 제외할 Exception 패턴을 지정한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nEnable Full Stack\nException이 여러 Cause를 가지고 있을 때, 요약 정보가 아닌 내용 전체를 표시할 지 여부\nDefault : true\nFull Stack Max Line\nException Stack Trace에서 표현할 Line 수. 각 Cause by 별로 설정한 수 만큼의 Line이 수집된다. 너무 큰 수로 지정하면 수집 및 저장관리에 부하가 발생할 수 있다\nDefault : 3\n검출이 가능한 Exception 클래스는 Java 자체적인 라이브러리에 포함된 Exception이 아닌, Application이나 Framework의 Exception이다. 너무 많은 량의 이벤트가 발생하지 않도록 Exception 패턴을 정의해야 한다.\nAudit 기능은 Enterprise Edition에서 제공되는 기능이다.\nConfig Tree WAS의 설치경로 하위의 /conf 폴더 하위 설정 파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 WAS 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 유형별로 History를 관리한다. 수정 일시와 설정 파일 Type을 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정 파일로 복원할 수 있다.\n4.3.9. Resource 관리 Server메뉴 하위의 Resources메뉴를 선택하면 해당 Server에 관련된 Resource정보를 관리할 수 있는 화면이 표시된다. 기본적으로 DataSource, JMS, JTA Resource에 대한 정보를 관리할 수 있다. (JMS, JTA Resource는 Enterprise Server일 경우에만 지원)\nWAS에 Resource 를 설정하는 방법은 다음과 같다.\n추가 : New 버튼 을 클릭하여 Resource를 추가한다. (Datasource, JMS 가능)\n삭제 : Delete 버튼 을 클릭하여 Resource를 삭제한다. (Datasource, JMS 가능)\n가져오기 : Import 버튼 을 클릭하여 RESOURCE 메뉴에서 등록된 Resource를 가져온다. (Datasource, JMS, JTA 가능)\nDataSource WAS의 Application이 사용할 수 있는 JNDI DataSource를 관리하는 기능을 제공한다. JNDI를 설정하여 Server에서 실행되는 모든 Application이 공유하여 사용할 수 있으며, 각각의 Application에 JNDI 설정을 하여 사용할 수도 있다. Enterprise Edition의 경우 JTA를 지원하여 속성이 추가된다.\nServer DataSource 설정 Server에서 실행되는 모든 Application이 공유하는 DataSource를 설정한다. Server에서 사용 가능한 DataSource의 목록을 조회할 수 있으며, DataSource의 등록, 수정, 삭제가 가능하다.\nDataSource의 상태를 체크하기 위한 접속테스트도 수행할 수 있다.\nDataSource의 속성은 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭하면 표시된다.\nTable 33. DataSource 속성 항목(*는 필수값) 설명 비고 Scope(*)\nDataSource를 사용할 범위\n다음과 같은 스코프를 제공함\nContext: 모든 Application이 공유하도록 Datasource 정보가 공통 context 영역에 설정된다.\nGlobal: GlobalNamingResource영역에 Datasource 정보가 설정되고, 어플리케이션 개별적으로 DataSource Link List에서 설정하여 사용한다.\nGlobal+ResourceLink: GlobalNamingResource 영역에 Datasource정보가 설정되고 Datasource 링크는 공통 context영역에 설정된다.\nJNDI Name(*)\nGlobal DataSource의 JNDI명\nDatabases\n공통으로 사용할 데이터소스의 정보를 설정\nResource Name\nDatabases의 이름\nAddress(Host/Port)\n공통으로 사용할 아이피와 포트\nDriverClassName\nJDBC Driver 클래스명\nURL(*)\nJDBC URL\nUsername(*)\n접속 사용자명\nPassword(*)\n접속 패스워드\nencryption을 체크할 경우 패스워드를 암호화하여 저장한다. 보안을 위해 암호화하는 것을 권장한다.\nEncryption Level\n인증 정보에 대한 암호화 범위 지정\nDefault : Password only\nDefaultAutoCommit\nPool에서 생성된 Connection들의 자동 Commit 상태\nDefault : JDBC driver의 기본값\nAutoReconnection\nTestOnBorrow와 TestOnWhileIdle의 값을 설정할 때 사용.\ntrue/false에 따라 두 값도 동일하게 설정됨.\nUser Definded 선택시 두 값을 사용자가 직접 설정 가능\nInitialSize\nPool의 초기 Connection 수\nDefault : 10\nMaxActive\nPool의 최대 Connection 수\nDefault : 100\nMinIdle\n최소 Idle Connection 수\nDefault : 10\nMaxIdle\n최대 Idle Connection 수\nDefault : 100\nMaxWait\nPool에 가용한 Connection이 없을 경우 대기하는 최대시간(ms)\nDefault : 30000\nMinEvictableIdleTimeMillis\n해당 시간 이상 idle 상태로 Pool에 존재한 Connection은 제거 대상이 됨 (ms)\nDefault : 60000 (60s)\n(XaDataSource = true로 설정하였을 시 1800000 (30m))\nValidationQuery\nConnection 유효성 검증 쿼리\nDefault : null\nValidationInterval\nConnection 유효성 검증 주기(ms)\nDefault : 3000\nTestOnBorrow\nPool에서 커넥션을 꺼내기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestOnReturn\nPool에 커넥션을 반납하기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestWhileIdle\nIdle 상태의 커넥션에 대해 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nLogValidationErrors\nvalidation query 수행 후 오류 발생 시 오류 출력 여부\nDefault : default(false)\nTimeBetweenEvictionRunsMillis\n사용되지 않은 Connection을 추출하는 Thread 실행주기(ms)\nDefault : 5000\nRemoveAbandoned\nConnection 유실 검출 여부\nDefault : default\nRemoveAbandonedTimeout\n유실Connection을 판단하기 위한 Timeout 값(s)\nDefault : 60\nLogAbandoned\nConnection 유실 처리시 로깅여부\nDefault : default\nAbandonWhenPercentageFull\nConnection pool이 설정한 점유율을 초과해야지만 abandon을 수행함\nDefault : 0\nJdbcInterceptors\n유연하고 플러그 가능한 인터셉터를 사용하여 사용자 정의 기능을 추가할 수 있음\nQueryTimeout 설정시 QueryTimeoutInterceptor(queryTimeout=시간(초)) 입력\nDefault 값이 true 또는 false가 아닌 default 인 경우, JDBC Driver의 기본값이 사용된다.\nEnterprise Edition의 추가 속성은 아래와 같다.\nTable 34. Enterprise Edition 추가 속성 항목(*는 필수값) 설명 비고 JtaManaged\nJTA 사용여부\nDefault : false\nXaDataSource\nXA 사용여부\nDefault : false\nXADataSource설정은 JTA가 설정되어야만 사용할 수 있으며, XADataSource를 설정하게 되면 validationInterval, logValidationErrors, abandonWhenPercentageFull 속성을 사용할 수 없다.\nDataSource를 Context 범위로 설정하면 모든 Application이 공유한다.\nEnterpriseServer에서 DataSource를 Context 범위로도 설정할 수 있으나, EJB에서는 Lookup이 불가능하다. EnterpriseServer에서는 Global + ResourceLink 범위로 설정하는 것을 권장한다.\nPassword 암호화 알고리즘은 AES를 사용하고 있다. 암호화를 위한 키 값은 Manager LENA Home 하위 /conf/repository/manager.conf 파일과 각 WAS Home 하위 /conf/advertiser.conf 내에서 “datasource.key=키값”으로 관리한다.\nDatabases\nURL 설정 시 공통을 사용할 정보를 Databases를 만들어 등록한다.\n추가(+) 버튼 을 클릭하면 팝업창이 생성된다.\nDatabases를 구분할 Resource Name을 입력한다.\n자동으로 채워진 DriverClassName 을 확인한다. 변경할 필요가 있을 경우 변경한다.\nAddress(아이피 및 포트)를 입력한 후 저장한다.\nJDBC driver Upload\nManager를 통해 JDBC Driver library를 upload 할 수 있다.\nDataSource 상세 정보 하위의 Upload 버튼 을 클릭하면 아래와 같이 upload를 위한 화면이 출력된다.\nSearch버튼을 통해 upload 할 파일을 선택한다. Upload 할 파일은 JDBC Driver library 이므로 JAR 형식의 파일만 선택할 수 있다.\nUpload 버튼을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nJDBC Driver 파일이 upload되는 경로는 ${SERVER_HOME}/lib/datasource이다.\nConnection Test\nDataSource 상세 화면에서 Connection Test 버튼 을 클릭하면 설정된 DataSource에 대한 연결 테스트를 수행할 수 있다. 정상적으로 연결이 된 경우 \"JDBC Connection is successfully tested\" 라는 문구가 출력된다.\n만약 \"Driver Class[클래스명] does not exist.\" 라는 오류 문구가 출력될 경우, 해당 driver class가 정상적으로 업로드 되어 있으며 이에 대한 classpath가 설정되어 있는지 확인한다.\nclasspath는 WAS 상세 \u0026gt; Environment \u0026gt; JVM Settings 내에 추가한다.\n설정 예 CLASSPATH=\u0026quot;$\\{CLASSPATH}:$\\{CATALINA_HOME}/lib/datasource/ojdbc6.jar\u0026quot; JMS Enterprise Edition의 경우 JMS관련 Resource를 정의할 수 있다. Active MQ Resource Adapter, JMS Connection Factory, Queue, Topic설정을 각각 추가, 수정, 삭제할 수 있다.\nTable 35. 주요 설정 항목(*는 필수값) 설명 비고 ID(*)\nResource의 식별자\nType(*)\nResource의 유형\n다음과 같은 타입을 제공함\nActiveMQResourceAdapter\nJMSConnectionFactory\nQueue\nTopic\nActive MQ Resource Adapter 설정\nTable 36. 주요 설정 항목(*는 필수값) 설명 비고 BrokerXmlConfig\nBroker 설정\nDefault : broker:(tcp://localhost:61616)?useJmx=false\nServerUrl\nBroker 주소\nDefault : vm://localhost?waitForStart=20000\u0026amp;async=true\nDataSource\nDatasource for persistence messages\nStartupTimeout\nStartup 최대 대기시간(s)\nDefault : 10\nJMS Connection Factory 설정\nTable 37. 주요 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\n사용할 Resource Adapter 지정\nTransactionSupport\nGlobal Transaction 여부 지정\n다음과 같은 타입을 제공함\nXA\nLOCAL\nNONE\nPoolMaxSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최대 개수\nDefault : 10\nPoolMinSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최소 개수\nDefault : 0\nConnectionMaxWaitTimeout\n커넥션 최대 대기시간\nDefault : 5 Seconds\nConnectionMaxIdleTimeout\n반납되기전 최대 idle시간\nDefault : 15 Minutes\nQueue 설정\nTable 38. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nQueue의 이름 지정\nTable 39. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nTopic의 이름 지정\nJMS 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\nJTA Enterprise Edition의 경우 Transaction Manager의 설정 변경 기능을 제공한다.\nTransaction Manager의 설정을 기본 설정으로 사용하려면 Managed Type을 Auto로 선택한다. (설치 시 default)\nTransaction Manager의 설정을 변경하고자 한다면 User Defined를 선택한다. (User Defined를 선택시 Recovery 옵션은 default로 \"No\"가 선택된다)\n주요 설정\nTable 40. 주요 설정 항목(*는 필수값) 설명 비고 Managed Type\nUser Defined Transaction Manager 여부 선택\nDefault : Auto\nID(*)\nTransaction Manager의 이름\nDefault Timeout\nTimeout 지정\nDefault : 10 minutes\nRecovery\nTransaction 오류 시 복원여부 설정\nTrue를 선택한 경우 Logging 설정이 열림\nTransaction Recovery Logging Option\nTable 41. Transaction 오류 시 복구를 위한 로깅 설정 항목(*는 필수값) 설명 비고 Directory\n로그파일을 생성할 디렉토리 위치\nDefault : txlog\nFile Name\n로그 파일 명\nDefault : howl\nFile Extension\n로그 파일의 확장자\nDefault : log\nMax Log Files\n생성되는 로그파일의 최대 개수\nDefault : 2\nMax Block Per File\n파일당 최대 블록 수\nDefault : -1\nBuffer Size\n버퍼사이즈(kb)\nDefault : 32\nMax Buffers\n버퍼의 최대값\nDefault : 0\nMin Buffers\n버퍼의 최소값\nDefault : 4\nAdler32 Checksum\nAdler32 Checksum, Checksum Enabled 설정이 모두 \"Yes\"인 경우 Adler32 알고리즘을 사용하여 checksum을 계산\nDefault : Yes\nChecksum Enabled\nBuffer의 Contents를 Disk에 기록 전 체크\nDefault : Yes\nThreads Waiting\n대기하는 스레드의 최대 갯수\nDefault : -1\nFlush SleepTime\nForceManager의 총 sleep 시간\nDefault : 50 Milliseconds\nJTA 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.3.10. Application 배포 목록 화면 상단의 SERVER 메뉴를 선택하여 Server 현황을 조회한다. 좌측 메뉴에서 배포할 Server의 Application을 선택한다. 배포가 완료된 Application의 목록을 조회하는 화면을 제공한다.\nApplication 목록의 항목은 아래와 같다.\nTable 42. Application List 항목 항목 설명 비고 Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nBase Name\nBase 명\nContext Path\nContext 경로\nDocBase\nApplication의 위치\nStatus\nApplication 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nAction 버튼\n아래와 같은 기능을 제공함\nUndeploy(휴지통) 버튼\nApplication Start 버튼\nApplication Stop 버튼\nApplication Reload 버튼\nView 버튼\n아래와 같은 기능을 제공함\nweb.xml View(문서) 버튼\nDeploy Application 을 배포하기 위한 속성은 아래와 같다.\nTable 43. Application 배포 속성 항목(*는 필수값) 설명 비고 Application Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축을 풀지 않고 배포\nDefault : true\nDocBase(*)\nApplication의 위치\nUpload 선택(파일) 버튼 을 통해 파일을 업로드 할 수 있음\nApplication Upload 별도의 배포 시스템이 없는 경우 Manager를 통해 application을 upload 할 수 있다.\n서버를 선택한 후 Applications 를 선택하여 Application 화면으로 이동한다.\nApplications 화면 하단의 Application Deploy 영역에서, DocBase 항목 우측 끝에 있는 Upload 선택(파일) 버튼 을 클릭하면 파일시스템 화면이 출력된다.\nupload 할 target 디렉토리(Server 쪽 Host)를 선택한다.\nUpload 버튼 을 클릭하면 application 파일을 선택할 수 있는 팝업이 생성된다.\n배포할 application 파일을 선택하고 Upload 버튼 을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nImport Import 버튼 을 클릭하여, [Resource] 메뉴에서 등록한 Application 정보를 가져와 배포할 수 있다.\n설정 정보 관리 Application 목록조회 화면에서 Application Name을 선택하면 Application 설정 관리화면을 조회할 수 있다. Application Descriptor 와 DataSource에 대한 설정 및 관리 기능을 제공한다.\nApplication 설정 변경은 선택한 Server에서만 가능하다.\nApplication Settings Application Descriptor에 설정된 정보를 관리한다.\n뒤로가기(\u0026#8592;) 버튼 을 클릭하여 Application 목록화면으로 돌아갈 수 있다. Expand all 버튼 을 클릭하여 Context의 추가적인 속성을 설정할 수 있다.\nDocBase와 ContextPath는 수정할 수 없으며, 속성의 자세한 정보는 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭해 확인할 수 있다.\nTable 44. Application Setting 항목(*는 필수값) 설명 비고 DocBase(*)\nApplication의 Document Base\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축은 풀리지 않고, 웹 애플리케이션은 단지 압축된 채로 재배치\nDefault : true\nreloadable\nApplication 변경 시(Class File) 재 반영 여부\nprivileged\nContainer Servlet의 사용 여부\ncookies\nsession identifier 통신에 cookie 사용 여부\nuseHttpOnly\nclient side에서 스크립트를 활용하여 session ID로의 접근 차단 여부\nsessionCookieDomain\n설정했을 경우 웹 어플리케이션에서 설정된 모든 도메인을 덮어씀. 설정하지 않을 경우 웹 어플리케이션에 의해 구분된 domain이 사용됨\nsessionCookieName\n설정하면 해당 이름으로 모든 세션 쿠키가 생성됨\nDefault : JSESSIONID\nsessionCookiePath\n설정할 경우 웹 어플리케이션은 해당 경로를 사용\nuseNaming\nJ2EE 플랫폼을 위한 JNDI InitialContext를 사용하기 위해 설정\nDefault : true\nAdd Attribute 버튼 을 사용하여 속성 값을 추가할 수 있다.\nDataSource Link List Global DataSource를 Application에서 사용할 수 있도록 설정 기능을 제공한다.\nDataSource 링크 관리의 속성은 아래와 같다.\nTable 45. DataSource 링크 관리 속성 항목(*는 필수값) 설명 Name(*)\nApplication에서 사용할 JNDI 이름\nJNDI Name(*)\nGlobal DataSource의 JNDI이름\nUserName\nDataSource 접속 사용자 명\nURL\nJDBC URL\nDescription\nDataSource에 대한 설명\n+ 아이콘\nNew 버튼, 수정(연필) 버튼 을 클릭하여 선택된 DataSource정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 DataSource 정보가 삭제됨을 표시\nNew 버튼 을 클릭하면 신규 설정을 추가할 수 있고, Save 버튼 을 클릭하면 변경된 설정이 저장된다.\nWAS에 설정된 Datasource 중 Scope가 Global 또는 Global + ResourceLink로 되어있는 Datasource가 신규 설정시 JNDI Name의 선택항목으로 나온다.\n4.4. Web Server Web Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Web Server의 등록, 수정, 삭제가 가능하며, 시작과 종료를 수행할 수 있다.\n4.4.1. 목록 Web Server List를 통하여 각 Web Server를 관리할 수 있다.\nWeb Server의 속성은 아래와 같다.\nTable 46. Web Server 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nHTTP Port\nHTTP 포트번호\nHTTPS Port\nHTTPS 포트번호\nSSL\nShell 실행시 SSL 기반의 패스워드 사용여부\nWeb Server에 SSL 관련 설정을 해야함\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 - 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.4.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer ID와 Service Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.3. Clone Clone 버튼 을 클릭하여 Web Server의 복제를 준비한다.\nNode List를 선택하여 복제할 Server를 선택한다.\nClone Server ID와 Service Port를 입력한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버의 Document Root 디렉토리에 있는 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.5. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.4.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 General 탭의 Stop Mode 에 따라 종료 방식이 달라진다.\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Server Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\nForced Stop/Restart Server 목록 가장 우측의 \u0026#8230;\u0026#8203; 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n4.4.8. 설정 정보 관리 Web Server의 설정 정보를 변경하는 기능을 제공한다. Web Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\nGeneral Web Server의 일반적인 설정 값과 Connection, Process 정보를 편집할 수 있다.\nWeb Server의 설정 정보는 저장 시 설정 파일에 대한 Validation을 수행하게 되어 있으며, 설정 파일 오류로 인한 Server 기동 장애가 발생을 최소화하고 있다.\n설정 파일 오류 시 파일이 저장되지 않고 오류 메시지가 출력된다\n오류 메시지 예 AH00526: Syntax error on line 253 … Argument for 'Require all' must be 'granted' or 'denied' 설정 정보의 상세 내용은 다음과 같다.\nServer Info (env.sh과 /conf/httpd.conf 파일 관리)\nTable 47. Server Info 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP Port\nHTTPS Port(*)\nHTTPS Port\nStaging HTTP Port\nStaging 모드로 기동 시 사용하는 서비스 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nStaging HTTPS Port\nStaging 모드로 기동 시 사용하는 HTTPS 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nInstall Path\nServer 설치 경로\nDocument Root(*)\nWeb Server에서 제공하는 문서들이 저장되어 있는 기본 폴더 경로\nWelcome Page\n웹사이트의 초기페이지 문서로 어떤 파일을 사용할 것인지 정의\nStop Mode\nWEB 서버 종료시 참조하는 옵션\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\nDirectory/Path\n어떤 서비스와 기능을 허용/거부 할지를 설정할 웹 문서들이 있는 디렉토리 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\nIndexes : welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\nFollowSymLinks : Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory\n/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정 파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형이 존재함\n* None : 어떠한 지시자도 허용하지 않음 * All : 모든 지시자 사용가능 * AuthConfig : 사용자 인증 지시자 허용 * FileInfo : 문서 유형 제어 지시자 허용 * Indexes : 디렉토리 Indexing 제어 지시자 허용 * Limit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nConnection Info (/conf/extra/httpd-default.conf 파일 관리)\nTable 48. Connection Info 항목(*는 필수값) 설명 비고 Timeout(*)\n클라이언트와 Server간에 연결 후 일정 시간 동안 아무 이벤트가 발생하지 않았을 때 Server가 기다리다가 연결을 끊을 시간(s)\nDefault : 60\nKeepAlive(*)\n특정 한 프로세스가 특정 사용자의 요청작업을 계속해서 처리할지 여부\nDefault : On\nMaxKeepAliveRequests(*)\nKeepAlive가 On일 때 유효한 값으로 하나의 프로세스가 특정 사용자의 요청을 지정한 횟수만큼 처리\n이 값을 넘어서면 해당 프로세스는 죽고 다른 프로세스가 요청을 처리함\nDefault : 100\nKeepAliveTimeout(*)\nKeepAlive가 On 일 때 유효한 값으로 설정한 시간 동안 요청이 없으면 연결을 끊기 위해 타임아웃 시킴(s)\nDefault : 5\nRequestReadTimeout(*)\n사용자로부터 request header와 body를 받기 위해 기다리는 시간\n설정된 시간 안에 받지 못하면 408 REQUEST TIME OUT 에러를 보냄\nDefault : header=20-40,MinRate=500 body=20,MinRate=500\nProcess Info (/conf/extra/httpd-mpm.conf 파일 관리)\nTable 49. Process Info 항목(*는 필수값) 설명 비고 StartServers(*)\nWeb Server 기동 시 초기화 되는 Server 프로세스 수\nDefault : 2\nServerLimit(*)\nMaxClients가 생성할 수 있는 최대 프로세스 값\nDefault : 8\nThreadLimit(*)\nThreadsPerChild의 설정 가능한 최대 값\nDefault : 128\nMinSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 적을 때 Thread가 이 값까지 늘어나 유지\nDefault : 128\nMaxSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 많을 때 Thread가 이 값까지 줄어들어 유지\nDefault : 256\nThreadsPerChild(*)\n각각의 자식 프로세스가 생성하는 Thread 수\nDefault : 128\nMaxRequestWorkers(*)\n전체 자식 프로세스가 생성할 수 있는 최대 Thread 수\nDefault : 1024\nMaxConnectionPerChild(*)\n자식 프로세스가 서비스 할 수 있는 최대 요청 수. 이 값만큼 요청을 처리한 후 종료한다.\nDefault : 0 (0: 제한없음)\nPagespeed Info\nTable 50. Pagespeed Info 항목(*는 필수값) 설명 비고 Enabled(*)\nmod_pagespeed를 적용하여 Web Server가 제공하는 Resource에 대한 최적화를 수행하여 사이트 속도를 높일지 여부\nDefault : off\n다음과 같은 옵션을 제공함\non : Resource들에 대해 최적화 허용\noff : 추가적인 최적화를 중지하나, 기존에 최적화 되어있는 Resource들에 대한 접근 허용\nunplugged : 최적화 중지 및 접근 불허\nRewriteLevel(*)\n모듈이 rewrite할 필터의 Level 설정\nDefault : default(CoreFilters)\n다음과 같은 옵션을 제공함\nCoreFilters : 사전에 대부분의 웹사이트에서 안전하다고 생각하는 필터가 포함되어있음\nOptimizeForBandwidth : 안전성을 강화하며, Pagespeed를 인식하지 못하는 사이트에서 사용하기 적합\nPassThrough : 필터를 전부 수동으로 입력\nFileCachePath(*)\nCaching 될 File들이 저장되는 디렉토리의 경로\nLogDirPath(*)\nLog를 기록할 디렉토리의 경로\nEnableFilters\n사용할 필터들의 목록\nDisableFilters\n사용하지 않을 필터들의 목록\nAllow URI\nrewrite를 허용할 Resource들의 와일드카드(*)를 포함한 URI\n예) /.js\nDisallow URI\nrewrite를 허용하지 않을 와일드카드(*)를 포함한 URI\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다.\nConnector Web Server의 Connector정보와 Load Balancer정보를 편집할 수 있다. Connector Info 영역의 정보는 Web Server 내에 설정된 Load Balancer의 기본 설정 값을, Load Balancer영역은 Web Server와 WAS를 연계하는 정보를 관리한다.\n설정 정보의 상세 내용은 다음과 같다.\nConnector Info (/conf/extra/httpd-jk.conf와 /conf/extra/workers.properties 파일 관리)\nTable 51. Connector Info 항목(*는 필수값) 설명 비고 Type(*)\nWeb Server와 WAS가 통신할 때 사용하는 프로토콜\najp 13\nLoad Balancing Factor(*)\nWAS의 부하 분산 지수. 즉, 작업량 할당 비율\nDefault : 1\nSocket Timeout(*)\nJK와 WAS 간에 응답 대기 시간(TCP socket 내부적인 상태에 대한 timeout을 의미, s)\nDefault : 300\nSocket Connect Timeout(*)\nJK와 WAS 간의 socket 연결 대기시간\nDefault : 5000\nSocket Keepalive(*)\nWeb Server와 WAS 간에 방화벽이 있는 경우 inactive 상태인 connection은 버리게 되어 있는데 OS에 keep alive 메시지를 보내서 방화벽이 inactive connection을 잘라버리는 것을 막을지 여부 설정\nDefault : true\nConnect Timeout(*)\nJK와 WAS 간에 연결이 완료된 후, ajp13 프로토콜에서의 cping request에 대한 cpong respond 대기 시간(ms)\nDefault : 10000\nConnection Pool Size(*)\nJK와 WAS 간에 커넥션을 cache하는 크기\nDefault : 128\nConnection Pool Min Size(*)\nJK와 WAS 간에 커넥션을 cache하는 최소 크기\nDefault : 32\nConnection Pool Timeout(*)\nConnection pool에서socket을 close 하기까지 open된 socket을 유지하는 시간\nWAS에서 connectionTimeout 설정과 같이 설정해야 함\nLog Level(*)\n에러 로그 파일의 기록 내용을 얼마나 자세히 기록할지 지정\nDefault : error\nLog Format(*)\n로그 파일에 어떤 포맷으로 로그를 남길지 설정\nStatus(*)\nServer 상태 모니터링 설정값 셋팅 여부\nEnable 선택시 Status Url과 Allow IP를 설정할 수 있음\nDefault : Enable\nStatus Url(*)\nServer 상태 모니터링 URL\nDefault : /jk-status/\nStatus Allow IP(*)\nServer 상태 모니터링 URL에 접근 가능한 IP\nDefault : 127.0.0.1\nLoad Balancer Info\n(/conf/extra/workers.propertes, /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties, /conf/extra/vhost/\\{Virtual Host ID}.conf 파일 관리)\nTable 52. Load Balancer Info 항목(*는 필수값) 설명 비고 LB ID(*)\nLoad Balancer명\nSticky Session\nSession ID를 기반으로 라우팅을 지원할지 여부\nDefault : true\nStatus Enabled\nServer 상태 모니터링 사용여부\n동일 Virtual Host에 적용된 Load Balancer에 대해서는 일괄 적용됨\nDefault : N\nVirtual Host ID(*)\nLoad Balancer를 적용할 Virtual Host ID\nVirtual Host 탭을 통해 관리됨\nSession Cookie\nSession Cookie Name을 변경하고자 할 경우 설정 (WAS에서 Session Cookie Name 변경시 같이 변경해줘야 함)\nDefault: JSESSIONID\nURI Patterns(*)\nWeb server로 들어온 요청들에 대해 URI패턴을 검사하여 WAS로 전달하는 uri mapping을 정의\nMethod(*)\nLoad Balancer 가 부하를 분산하기 적절한 worker를 판별하는데 사용할 메서드\n다음과 같은 타입을 제공함\nR[equest] : 요청수가 가장 적은 worker 선택. (Default)\nS[ession] : 연결된 세션이 가장 적은 worker 선택\nN[ext] : S[ession]과 비슷하지만 더 적은 수의 session을 분산해야 하는 경우 선택\nT[raffic] : JK와 AJP커넥터 사이에 네트워크 트래픽이 가장 작은 worker 선택\nB[usyness] : 요청 수를 기반으로 가장 부하가 적은 worker 선택 Redirect\n해당 worker가 error 상태일 때 받은 요청을 대신 처리할 failover worker를 설정\nDefault : Round Robin\nLB Factor\n작업량 할당 비율. 해당 worker가 얼마나 많은 일을 할지 정의 (5로 설정할 경우 1로 설정한 다른 worker보다 5배 더 많은 request를 받음)\nURI Pattern 정보는 /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties 파일에 관리된다.\nWAS List의 [+] 버튼을 통해 Load Balancer와 연계되는 WAS를 추가할 수 있으며, 추가된 WAS의 ⓧ 버튼을 통해 해당 WAS를 제외할 수 있다.\n연계 WAS 정보는 /conf/extra/workers.properties 파일에 관리된다.\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nVirtual Host Web Server의 Virtual Host 정보를 등록/수정/삭제할 수 있다.\nNew 버튼, Delete 버튼 을 통해 Virtual Host를 등록/삭제할 수 있다.\n1개 이상의 Load Balancer를 적용한 Virtual Host는 삭제할 수 없다. 만약 해당 Virtual Host를 삭제하려면, 먼저 Connector 탭을 통해 Load Balancer의 Virtual Host ID를 다른 Virtual Host ID로 변경해야 한다.\nSSL Enabled와 Rewrite Enabled를 체크한 경우 아래와 같이 상세 항목 영역이 추가로 출력된다.\n설정 정보의 상세 내용은 다음과 같다.\n(/conf/extra/vhost/\\{Virtual Host ID}.conf, /conf/extra/rewrite/rewrite_\\{Virtual Host ID}.conf, /conf/extra/ssl/ssl_\\{Virtual Host ID}.conf 파일 관리)\nTable 53. Virtual Host 설정 정보 항목(*는 필수값) 설명 비고 Virtual Host ID(*)\nVirtual Host 이름\nPort(*)\n해당 가상호스트가 사용하는 HTTP Port\nDocumentRoot(*)\n해당 가상호스트의 홈페이지 디렉토리 위치\nServer의 DocumentRoot 변수인 ${DOC_ROOT}를 활용하여 동일하게 혹은, 그 하위로 지정가능\nServerName(*)\n해당 가상호스트의 도메인 명\nServerAlias\n해당 가상호스트가 사용하는 ServerAlias\n와일드카드 문자 포함 가능(*.example.com)\nErrorLog(*)\n해당 가상호스트의 웹 에러로그 파일 위치\nCustomLog(*)\n해당 가상호스트의 웹 로그파일 위치\nDirectory/Path\nDocumentRoot에서 지정한 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\n-Indexes는 welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\n-FollowSymLinks는 Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형을 제공함\nNone : 어떠한 지시자도 허용하지 않음\nAll : 모든 지시자 사용가능\nAuthConfig : 사용자 인증 지시자 허용\nFileInfo : 문서 유형 제어 지시자 허용\nIndexes : 디렉토리 Indexing 제어 지시자 허용\nLimit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nRewirte Enabled\nRewrite사용여부\nRewirte Conf\nRewrite관련 상세 설정. 지정한 Rewrite Condition에 따라 Rewrite Rule에 설정한 rule대로 rewrite함\nProxy Enabled\nProxy 사용여부\nconf/extra/proxy 디렉토리에 설정파일이 위치한다. 필요한경우 ProxyPreserveHost 를 셋업하면 요청의 host 명을 유지할 수 있다. default 값은 off 이며 필요한 경우 on 한다. (ex: application 에서 redirect 사용 시)\nProxy Pass Match\nbackend와 연동하기 위한 정규식 패턴과 Target 서비스 도메인주소\nDNS Lookup Interval\nDNS Lookup 주기(s)\nDefault: 10\nSSL Enabled\nSSL 사용여부\nSSLPort(*)\nHTTPS Port\nSSLCertificateFile(*)\nSSL 인증서 경로\nSSLCertificateKeyFile(*)\nSSL인증서 Key파일 경로\nSSLCertificateChainFile\nFile of PEM-encoded Server CA Certificate\nSSLCACertificateFile\nROOT인증서 경로\nHttps Redirect Enabled\nHttp\u0026#8594;Https Redirect 사용여부\nSSL Log Separation\nSSL Log 설정 분리 사용여부\nSSLErrorLog\nSSL Error Log 설정\nSSLCustomLog\nSSL Custom Log 설정\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nLogging Web Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 54. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nError Log\nWeb server가 진단정보와 request를 처리하는 도중에 발생한 오류를 기록할 때 사용된다. Server가 시작하거나 동작하는데 문제가 발생시 여기에 설정된 위치의 파일을 먼저 확인한다.\nTable 55. Error Log 항목(*는 필수값) 설명 비고 Location(*)\nWeb server의 에러로그파일 위치를 지정\nLog Level(*)\n에러로그파일의 기록내용을 얼마나 자세하게 기록할 지 지정\nCustom Log\n로그파일 이름과 형식을 설정한다. 환경변수를 사용하여 request의 특징에 따라 선택적으로 로그를 남길 수 있다.\nTable 56. Custom Log 항목(*는 필수값) 설명 비고 Location(File|Pipe)(*)\nFile: 에러로그 파일 위치\nPipe: 파이프 문자 \"|\" 뒤에 로그 정보를 표준 입력으로 받을 프로그램 경로\nFormat|Nickname(*)\n로그파일에 기록할 내용\nLog Format으로 정의한 nickname을 쓰거나 직접 로그 포맷을 작성\nEnv\nServer의 환경 변수 유무에 따라 로그를 기록할지 여부 작성\n예를 들어, 영어권 사용자의 요청과 비영어권 사용자의 요청을 다른 로그파일에 기록하고 싶은 경우 다음과 같이 설정할 수 있다.\n설정 예 Location Format Env logs/english_log common english logs/non_english_log common !english Log Format\n로그파일에 사용할 형식을 설정한다.\nTable 57. Log Format 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\nNickname(*)\nCustomLog에서 사용할 로그포맷 명\nLog Format with logio\nTable 58. Log Format with logio 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\n%I와 %O 변수를 사용해 request와 head를 포함하여 보내고 받는 byte 측정이 가능\nNickname(*)\nCustomLog에서 사용할 로그포맷 명\ncombinedio는 mod_logio_module이 로드되어 있어야 함\nEnv\nRequest의 조건에 따라 환경변수를 설정할 때 사용한다.\nTable 59. Env 항목(*는 필수값) 설명 비고 Attribute(*)\nHTTP 요청 헤더(ex: Host, User-Agent, Referer, Accept-Language), 요청 속성 중 하나(Remote_Host, Remote_Addr, Server_Addr, Request_Method, Request_Protocol, Request_RUI) 또는 요청과 연관된 환경 변수 이름\nRegex(*)\nPerl 호환 정규식\nEnv-variable[=value](*)\n설정할 변수명과 설정값(optional)\nVarname, !varname 또는 varname=value\nCase\nEnv-variable에 대소문자 구분할지 여부\nWith case : 대소문자 구분\nNo case : 대수문자 구분없음\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nEnvironment JVM 옵션, Start Shell의 설정 등을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 되어 있다. 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Config Tree Web Server의 ${SERVER_HOME}/conf 디렉토리 하위 설정파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 Web Server 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 History를 관리한다. 수정 일시를 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정파일로 복원할 수 있다.\n4.5. Session Server Session Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Session Server의 등록, 수정, 삭제가 가능하며, 시작과 종료 Shell을 실행할 수 있다.\n4.5.1. 목록 Session Server List를 통하여 각 WAS를 관리할 수 있다.\nFigure 7. Session Server List Session Server의 속성은 아래와 같다.\nTable 60. Session Server 속성 항목(*는 필수값) 설명 비고 Status\nSession Server의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nSession Server의 이름\nAddress\nSession Server의 IP주소\nServer ID\nServer의 ID\nPort\nService 포트번호\nServer Type\nSession Server의 유형\nStandalone\nEmbedded\nStart/Stop\nServer의 시작 및 종료\n+ 아이콘\n+Register 버튼 또는 연필 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Restart를 수행할 수 있는 메뉴 제공\nSession Server는 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.5.2. Install Install 버튼 을 클릭한다.\nServer ID와 Service Port, Mirror Server IP/Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 이전에 설치된 Server 정보를 확인한다.\n4.5.3. Register Register 버튼 을 클릭한다.\n등록할 Server를 클릭한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.4. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.5. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.5.6. Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\n4.5.7. 설정 정보 관리 General Server의 설정 정보를 변경하는 기능을 제공한다. Session Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\n환경설정에서 변경 가능한 속성은 아래와 같다.\nConfiguration\nTable 61. Configuration 항목(*는 필수값) 설명 비고 Primary Host(*)\nServer의 Service Host(IP)\nPrimary Port(*)\nServer의 Service Port\nMirror Server Host(*)\nPair Server의 Host(IP)\nMirror Serror Port(*)\nPair Server의 Service Port\nShare session in applications\nMulti Applications 간 Session 공유 여부 설정.\nWAS에서도 이 항목을 동일한 값으로 처리해야 적용됨.\nstandalone에서만 가능함.\nSession Timeout Sec\nSession server의 session expired time 설정.\nstandalone에서만 가능함.\nConnected WAS List\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 62. Connected WAS List 항목(*는 필수값) 설명 비고 Server Name\nWAS의 Name\nHost\nWAS가 설치된 Host명\nStatus (Session Server의 상태 정보 제공)\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 63. Status 항목(*는 필수값) 설명 Session Count\n현재 Session 개수\nLogout Count\nLogout 요청으로 Logout 된 Session 수\nSession Max Count\nSession 저장 최대 개수\nSession Timeout\nSession timeout 시간(ms)\nRequest Getnew Logout\nWAS에서 전달된 GET_FRESH Request에 대한 Logout 응답 횟수\nData From Nodes\nWAS에서 전달된 Session 개수\nRequest Getnew Nodata\nWAS에서 전달된 GET_FRESH Request에 대한 NODATA 응답 횟수\nRequest Getnew\nWAS에서 GET_SESSION Request했을 때 늘어난 횟수\nPid\nSession이 standalone일 경우 프로세스 ID\nRequest Getfresh Data\nWAS에서 GET_FRESH Request 가 왔을 때 해당 Session이 있는 경우 횟수\nRequest Getfresh Logout\nWAS에서 GET_FRESH Request가 왔을 때 해당 Session이 Logout 된 횟수\nSession Recv Lost\nSession receive가 유실된 개수\nLogout From Nodes\n다른 was에서 logout 된 횟수\nSession Expired\nSession Time Out 시간으로 Expired 된 Session 수\nRequest Getfresh Nodata\nWAS 에서 GET_FRESH_SESSION request했는데 데이터가 없을 경우 늘어난 횟수\nData From Secondary\nSlave server에서 온 Data 개수\nRequest Getfresh\nWAS에서 GET_FRESH Request 요청 횟수\nLogout From Secondary\nSlave Server에서 Logout Request가 전달 된 횟수\nReq Lost\nRequest 유실 개수\nResp Lost\nResponse Queue의 사이즈 이상으로 Response 가 수신되어 손실된 Response 개수\nRequest Getfresh Secondary\nSlave Server에서 GET_FRESH Request 요청 횟수\nRequest Getfresh Not New\nWAS에서 전달된GET_FRESH Request에 대한 NOT_NEW Response 횟수\nRequest Getnew Secondary\nSlave Server에서 GET_SESSION request했을 때 늘어난 횟수\nLogging Session Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 64. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nEnvironment Start Shell의 설정을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false 5. Cluster 5.1. Server Cluster Server Cluster는 동일한 서비스 제공을 위해 동일한 구성으로 구동되는 Application Server와 Web Server의 묶음이다.\nFigure 8. Server Cluster 화면 5.1.1. Server Cluster 목록 매니저에 등록된 Server Cluster 목록은 좌측메뉴에서 Server Cluster를 선택하면 확인 할 수 있다.\nServer Cluster List 테이블에서 제공되는 속성은 아래와 같다.\nTable 65. Server Cluster 속성 항목 설명 비고 Select\n삭제를 위한 콤보박스\nServer Cluster Name\nCluster 명\nServers\nServer Cluster를 구성하는 각 Server별 개수\nApplication Server\nWeb Servers\n5.1.2. Server Cluster 생성 Server Cluster 생성에서는 Server Cluster를 구성할 Application Server 목록과 Web Server 목록을 선택한다.\nServer Cluster Group을 선택하고 Server Cluster 목록 하단의 +New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nServer Cluster의 기본 정보를 입력한다.\nServer Cluster Name: Server Cluster명을 입력한다.\nApplication Server Type: Server Cluster의 멤버로 사용될 Application의 Type을 선택한다. Standard와 Enterprise 두가지 유형이 있다.\nEnable Scaling: Auto Scaling기능 사용여부를 선택한다. 이 옵션은 server cluster 생성 후에는 변경 할 수 없다.(이 기능은 Container Edition에서만 지원하며, 사용하기 위해선 manager.conf에서 scaling.enable를 true로 설정한다.)\nDescription: Server Cluster와 관련하여 필요한 설명들을 입력한다.\n선택한 Application Server Type에 해당하는 서버 목록이 아래 Application server in server cluster 영역에 조회된다. Selectable Servers 에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다. Web servers in server cluster 영역에서 마찬가지로 Selectable Servers에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다.\n하나의 Server는 하나의 Server Cluster에만 지정할 수 있으므로, 다른 Server Cluster에 매핑되지 않은 Application Server와 Web Server만 Selectable Servers 목록에 조회된다.\nV Save 버튼 을 클릭하여 저장한다.\n좌측 트리에 입력한 server cluster명의 메뉴가 추가되었음을 확인할 수 있다.\n5.1.3. Server Cluster 삭제 좌측 Server Cluster 트리메뉴에서 Server Cluster Group을 선택한다.\nServer Cluster List에서 삭제할 Server Cluster의 Select 컬럼의 체크박스를 선택한다.\n- Delete 버튼 을 클릭하여 삭제한다.\n5.1.4. Server Cluster 상세 Overview 좌측 메뉴 또는 Server Cluster Group 상세에서 Server Cluster를 선택하면 Server Cluster에 대한 Overview 화면이 출력된다.\nServer Cluster 상세 영역의 항목 및 버튼이 제공하는 기능은 아래와 같다.\nTable 66. Server Cluster 상세 영역의 항목 및 버튼 항목 또는 버튼명 기능 Server Cluster Name\nServer Cluster 명\nApplication Server Type\nServer Cluster에 구성되어 있는 Application Server 유형(변경 불가)\nServer Config Synchronization Policy\nServer Cluster 동기화 수행(Sync 버튼 선택) 중 오류 발생시 처리 정책\nServer Config Synchronization Policy의 option은 아래와 같다. (기본값 : Force)\nStop : 설정 동기화 중 오류 발생 시 즉시 중지\nRollback : 설정 동기화 중 오류 발생 시 전체 rollback\nForce : 설정 동기화 중 오류 발생 시 해당 Server를 건너뛰고 다음 수행\nEnable Scaling\nServer Cluster의 Auto Scaling 기능 사용여부(변경 불가)\nDescription\nServer Cluster에 대한 설명\nCompare 버튼\nServer Cluster 내 Application Server와 Web Server, Session Server의 동기화 상태를 비교한다.\nServer 유형별 비교 항목은 아래와 같으며, 이는 아래 Server 목록 영역 각각의 컬럼에 출력된다.\nServer Config, Application, Resource 및 Session 비교는 각 Server 유형별 Master Server를 기준으로 한다.\nApplication Server Server Config : Application Server 설정 정보 동일 여부\nApplication : 각 Application Server에 deploy된 Application이 동일 여부\nResource : Resource 설정 동일 여부\nSession : Session Clustering을 위한 Session Server 설정 동일 여부\nWeb Server Server Config : Web Server 설정 정보 동일 여부\nConnect to WAS : Server Cluster 내 모든 Application Server와 연계되어 있는지 여부\nSync 버튼\nServer Cluster 내 Application Server의 Server Config, Application, Resource, Session 정보를 동기화한다.\nServer Cluster 내 Web Server의 Server Config와 WAS 연계 정보를 동기화한다.\nSnapshot 버튼\n동기화된 Server Cluster에 대해 현재 상태를 Snapshot으로 저장한다. 생성된 Snapshot은 Snapshot 탭에서 확인할 수 있다.\nSnapshot에는 Application Source도 포함된다. 따라서 과도하게 Snapshot을 생성하면 시스템 디스크 용량을 많이 차지할 수 있으므로 꼭 필요한 경우에만 생성하고 불필요한 Snapshot은 Snapshot 탭을 통해 삭제해야 한다.\nGraceful Restart 버튼\nServer Cluster 내 Web Server와 Application Server를 순차적으로 재기동한다. Graceful Stop을 수행하므로 처리 중인 service가 모두 종료된 후 Server가 stop 된다.\n처리 순서는 아래와 같다. ()로 표현된 절차는 생략 가능하다.\nWeb Server Stop\nApplication Stop\n(Application Source 업로드)\nApplication Server Start\n(별도 port로 테스트를 위해 Web Server를 staging port로 Start)\nWeb Server Start\nV Save 버튼\n변경된 Server Cluster 상세 설정 내용을 저장한다.\n동기화 상태 조회 Server Cluster의 동기화 상태는 Compare 버튼 을 선택하여 비교 후 그 결과를 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\n동일 또는 유효한 상태인 경우 상태가 초록색 원 아이콘 으로 출력된다.\nServer의 상태가 동일하지 않을 경우 붉은색 원 아이콘 으로 나타나며, 해당 아이콘을 클릭하면 별도의 팝업창이 출력되어 Server별 상세 정보를 확인할 수 있다.\n또한 각 Server 목록에서 Server Name을 클릭하면 해당 Server 상세 화면으로 이동할 수 있다.\nApplication Server의 Server Config 상세\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nApplication Server의 Application 상세\nApplication의 Deploy 상태 비교 결과가 출력된다.\nApplication Server의 Resource 상세\nApplication Server의 Resource 비교 결과가 출력된다.\nApplication Server의 Session 상세\nApplication Server의 Session 설정 비교 결과가 출력된다. 팝업창에는 Master Server에 설정된 세션 정보를 제공한다.\nWeb Server의 Server Config\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nWeb Server의 Connect to WAS\n해당 Web Server가 Server Cluster에 속한 모든 Application Server에만 연계되어 있을 때 초록색 원 아이콘 상태로 출력되며 그 외의 경우에는 붉은색 원 아이콘 으로 표시된다. 붉은색 원 아이콘 을 클릭하면 별도의 팝업창이 출력되어 상세 정보를 확인할 수 있다.\n팝업창에는 Web Server에 연계되어 있는 Application Server가 모두 Server Cluster에 등록된 Server인지에 대한 상세 정보를 출력한다((Web Server Status). 또한 Server Cluster에 등록된 모든 Application Server가 해당 Web Server에 연계되어 있는지에 대한 상세 정보를 출력한다.(Application Server Status)\n상태 동기화 수행 Server Cluster의 동기화 수행은 [.button]#Sync 버튼#을 선택하여 진행 한다. 그 결과는 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\nGraceful Restart Graceful Restart 기능은 처리중인 업무의 처리 종료를 보장하면서 Server Cluster 내 모든 서버에 대한 재기동을 수행할 때 사용된다. 수행시 아래와 같은 절차를 통해 수행된다. (Server Cluster 내 모든 서버에 적용됨)\nGraceful Restart 시작 전\nStart Process 버튼을 클릭하면 Graceful Restart 작업이 시작된다.\nWeb Server Stop 단계\nWeb Server에 대한 Stop을 수행한다. 수행 중인 Thread가 모두 종료된 후 Web Server가 Stop된다.\nApplication Server Stop 단계\nApplication Server에 대한 Stop을 수행한다. 본 단계는 모든 Web Server가 종료된 후 활성화된다.\n소스 배포 (생략 가능) 단계\nApplication Server에 대한 소스 배포(업로드)를 수행한다. 별도의 배포 시스템이 있는 경우 이 단계는 생략 가능하다.\nApplication Server Start 단계\nApplication Server에 대한 Start를 수행한다. 기동 로그를 함께 조회할 수 있다.\nWeb Server를 Staging mode로 Start (생략 가능) 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nWeb Server Start 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nGraceful Restart 완료\nApplication Server Server Cluster 내 Application Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Application Server의 Master Server 선택, 동기화할 설정파일 지정 및 JDBC Driver 동기화 여부를 설정할 수 있다.\nMaster Server\nServer Cluster내 Application Server 중 Master Server를 지정한다.\nServer Configs for Synchronization\nServer Cluster 내의 Application Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Application Server의 Home 하위의 상대 경로이다.\nSync JDBC Drivers\nManager Repository 경로/lib/datasource/폴더 하위 모든 jar파일을 동기화대상에 포함할지 여부를 선택한다.\nJDBC Driver는 Runtime시 Jar파일 교체에 따른 오류를 방지하기 위해 Sync 대상 서버에 해당 JDBC Driver가 없을 경우에만 동기화 된다.\nApplication 관리 Application Server 목록에서 서버를 선택시 하단의 Application 탭을 통해 선택된 서버의 Application 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Application에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nResource 관리 Application Server 목록에서 서버를 선택시 하단의 DataSource, JMS, JTA 탭을 통해 선택된 서버의 DataSource, JMS, JTA의 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Datasource, JMS, JTA에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nSession 관리 Application Server 목록에서 서버를 선택시 하단의 Session 탭을 통해 선택된 서버의 Session 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Session에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nApplication Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Application Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 67. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nAll Web Server Sync: Clone후 web서버와 연동 동기화\nAll Web Server Graceful Restart : Clone후 Web서버 재기동 여부\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 application 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Application Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nApplication Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Application Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Application Server의 Server Config, Application, Resource, Session 설정을 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Application Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\n팝업창의 Action 항목에는 Force Restart 버튼 과 Next 버튼 이 제공된다.\nTable 68. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Next 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nTable 69. Rolling Restart 팝업창 버튼 설명 버튼명 기능 Start\n팝업창에 보여지는 대상서버의 재기동을 시작한다. 테이블의 위에서부터 순차적으로 진행된다.\nPause\n재기동작업을 일시 중지한다. 중지 / 기동을 수행중인 경우 수행중인 명령이 중단되지는 않으며, 다음 작업은 대기하게 된다.\nResume\n재기동작업을 재개한다. Pause 전 완료한 작업 이후부터 시작된다.\nForce Restart\n중지가 정상적을 되지 않는경우 본 버튼을 통해 강제 중지후 기동할 수 있다. 재기동 수행중인 서버가 중지 완료될때까지만 화면에 보여진다.\nNext\n현재 재기동중인 서버의 작업이 완료되기 전, 다음 서버의 재기동작업을 바로 진행하고 싶은경우 Next 버튼을 통해 다음 서버의 재기동을 수행할 수 있다. Next 를 수행해도 앞 서버들의 재기동 작업은 계속 수행된다.\nWeb Server Server Cluster 내 Web Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Web Server의 Master Server 선택, 동기화 할 설정파일목록을 설정할 수 있다.\nMaster Server :\nServer Cluster내 Web Server 중 Master Server를 지정한다.\nServer Configs for Synchronization :\nServer Cluster 내의 Web Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Web Server의 Home 하위의 상대 경로이다.\nConnector Web Server의 상세 connector정보들을 확인 및 수정 할 수 있다.\nWeb Server 목록에서 서버를 선택시 하단의 Connector 탭을 통해 선택된 서버의 Connector 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Connector에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nWeb Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Web Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 70. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Web Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nWeb Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Web Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Web Server의 Server Config, Connect was를 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Web Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\nTable 71. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Skip 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nSnapshot Overview Tab의 Snapshot 버튼을 클릭하면 Snapshot 생성을 위한 창이 출력되며 OK 버튼을 클릭하면 Server Cluster의 Snapshot이 생성된다.\nSnapshot은 Server Cluster가 동기화 상태인 경우에만 생성할 수 있다.\nSnapshot 탭을 통해 Snapshot 목록을 관리하는 화면을 제공한다. 일자를 입력 받아 Snapshot 이력을 조회한다. Snapshot이력에 대한 자세한 사항을 조회 할 수 있으며, 원하는 시점으로 복원하는 기능도 제공한다.\nSnapshot 목록의 Detail 항목에 있는 목록 버튼 을 클릭하면 해당 snapshot에 대한 상세정보를 조회할 수 있다.\nSnapshot 정보는 각 server별로 관리하므로 특정 Snapshot 생성 이후 Cluster에 추가된 server는 해당 Snapshot으로의 복원 대상에서 제외된다. (이 경우 Snapshot 복원 후 다시 Sync를 수행해야 모든 server가 동일한 구성을 가질 수 있다.) 또한 Snapshot 이후 Cluster에서 특정 server가 삭제되면 해당 server의 Snapshot 정보는 모두 삭제된다. Snapshot을 만들 때 소스코드는 Snapshot에 복사 되지 않으며 복사되는 설정파일은 기본설정파일 과 application설정파일, enterprise.xml 까지만 Snapshot에 포함된다.\nSnapshot을 생성할 경우 디스크 용량에 부하를 줄 수 있으므로 주의하여 생성한다. 또한 생성된 Snapshot은 자동으로 삭제되지 않고 사용자가 직접 삭제해야 한다. 따라서 불필요한 Snapshot을 적절한 시기에 삭제하는 것을 권장한다.\n5.1.5. Scaling Server Cluster 생성시 Enable Scaling 옵션을 True로 선택하면 CSP 또는 Cloud 플랫폼이 제공하는 Auto-Scaling(Infra Scaling)에 따른 서비스 Scaling을 지원한다. 이 기능은 VM의 OS가 Linux이고, VM Instance 생성시 Init-Script (예 : AWS EC2의 UserData)가 제공되는 환경에서만 지원된다.\nCloud환경에서 Scaleing 은 일반적으로 다음과 같은 절차로 수행된다.\nVM Image 생성 (LENA Node, LENA Server 및 Application 등이 포함된 Image)\nVM Init-Script 작성\nLENA Manager에 Scaling Policy 설정\n사전 설정한 Scaling Trigger 조건 (Resource 임계치 조건) 발생시 VM Auto-Scaling Out 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-Out시 Cloud Init-Script에 따라 LENA Node Agent 및 Server의 등록, 설정동기화, License 발급 수행 (LENA 영역)\nResource 임계치가 정상화되면 VM Scale-in 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-in 후, Node Agent Alive 체크 실패가 LENA Manager에 설정된 횟수 만큼 발생하면, 해당 Node 및 Server를 LENA Manager에서 제거 (LENA 영역)\n다음에서는 위의 절차중 LENA의 Scaling 지원영역과 관련된 Scaling Policy 설정 , VM Init-Script 관련 부분, LENA Node Agent / Server의 등록과 관련된 내용에 대해서 설명한다.\nScaling 기능은 Infra Scaling시 실행되는 Init-Script내에서 필요 환경변수 설정하고 LENA Scaling 실행 명령인 scale.sh 호출함으로서 Scale-Out이 실행된다. Manager에 설정된 Rule에 따라 Node Agent 통신 불가 인식 시 또는 VM 소멸시 stop-agent.sh을 옵션 설정하여 명시적으로 호출할 시 Scale-In이 실행된다.\nScale Out\nScale Out은 환경변수 설정하고 scale.sh을 호출함으로써 수행된다. AWS를 예를들면 AutoScaling그룹의 시작 템플릿에서 UserData에 해당 Script를 작성하여 실행한다. 미리 Manager에 Scaling License가 배포되어 있어야 Scaling License를 다운받아 서버가 정상 기동할 수 있다.\nInit-Script Init-Script에는 필요한 환경변수를 설정하고, scale.sh을 호출하는 절차가 작성된다. Scale Out 관련 scale.sh에서 참조하는 환경 변수는 다음과 같다.\nTable 72. scale.sh 참조 환경변수 환경변수 설명 LENA_MANAGER_ADDRESS\n필수 옵션으로, Node, Server에 대한 Scaling 처리를 수행할 LENA Manager의 서비스 주소로 형식은 {IP주소}:(HttpPort} 이다.\n이 환경변수로 이중화된 Manager에 대한 Fail-Over 설정을 할 수 있다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속이 실패하면 두번째 Manager에 접속을 시도한다. 지정된 시간(기본 10분)동안 Manager와의 접속이 성공할때 까지 과정을 반복적으로 수행한다.\nJAVA_HOME\nNode Agent 및 Server에서 사용할 Java의 설치 위치 이다.\nLENA_CLUSTER_NAME\nServer Cluster 명, Scale된 Server가 등록될 대상 Server Cluster의 이름 이다. 현재 존재하는 Server Cluster명을 기입해야만 정상적으로 Scaling이 수행된다.\nLENA_USER, LENA_GROUP\nNode Agent 및 Server를 기동할 OS 사용자 및 그룹\nLENA_WAS_SCALING\nWAS 서버의 Scaling 수행 여부\nLENA_WAS_HOME\nWAS 서버의 설치 위치\nLENA_WAS_AGENT_PORT\nWAS 서버의 Node Agent 서비스 포트\nLENA_WEB_SCALING\nWeb 서버의 Scaling 실행 여부\nLENA_WEB_HOME\nWeb 서버의 설치 위치\nLENA_WEB_AGENT_PORT\nWeb 서버의 Node Agent 서비스 포트\nLENA_WEB_OPENSSL_VER\nOS에 설치된 OpenSSL의 Version으로, Web서버 기동을 위해 필요하다.\n지원되는 버전은 1.0.1, 1.0.2 , 1.1.1 이고, 기본 값은 1.0.2 이다.\nLENA_IMAGE_TYPE\nVM Image의 유형으로 LENA 패키지만 설치된 'base\u0026#8217;와 Server까지 설치된 'golden' 가 있다. 'base\u0026#8217;는 Scaling Mode 중 'clone\u0026#8217;에 대응되며, 'golden\u0026#8217;은 Scaling Mode중 'sync' / 'nosync\u0026#8217;에 대응된다.\nWAS_CONFIG_DATA\n개별 WAS의 설정정보로 Json 형식으로 정의된다. Session Cluster 정보, Datasource 정보를 설정할 수 있고, 이는 실제 구성된 Server의 설정정보를 변경한다.\n환경 변수 적용 및 scale.sh 호출 예시 (Init-Script) export LENA_MANAGER_ADDRESS=10.200.30.213:7700,10.200.30.214:7700 export LENA_CLUSTER_NAME=cust-g3r export LENA_USER=lena export LENA_GROUP=lena export LENA_WAS_SCALING=Y export LENA_WAS_HOME=/engn001/lena/1.5.0 export LENA_WAS_AGENT_PORT=16800 export LENA_WEB_SCALING=Y export LENA_WEB_HOME=/engn001/lenaw/1.5.0 export LENA_WEB_AGENT_PORT=16900 export LENA_WEB_OPENSSL_VER=1.0.2 export LENA_IMAGE_TYPE=base export WAS_CONFIG_DATA='[ { \u0026quot;server_id\u0026quot;: \u0026quot;comm_core_was-8980\u0026quot;, \u0026quot;session_cluster\u0026quot;: { \u0026quot;primary_port\u0026quot;: \u0026quot;5480\u0026quot;, \u0026quot;secondary_port\u0026quot;: \u0026quot;5480\u0026quot; }, \u0026quot;datasource\u0026quot;: [ { \u0026quot;jndi_name\u0026quot;: \u0026quot;jdbc/petclinic\u0026quot;, \u0026quot;url\u0026quot;: \u0026quot;jdbc:mysql://10.200.30.7:63306/petclinic\u0026quot; } ] } ]' if [ \u0026quot;$LENA_WAS_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WAS_HOME/bin/scale.sh; fi if [ \u0026quot;$LENA_WEB_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WEB_HOME/bin/scale.sh; fi Scale-in\nScale-in은 Scale-Out과정을 통해 등록된 Node와 Server를 해지하는 과정으로 1) Manager의 Scheduler에 의한 Node Agent로 부터 응답이 없는 Node와 해당 Node에 설치된 Server를 자동으로 등록해지하거나 또는 2) Option을 추가한 stop-agent.sh을 직접 호출하여 명시적으로 실행할 수 있다. stop-agent.sh의 옵션 정보는 다음과 같다.\nTable 73. stop-agent.sh의 옵션 정보 옵션 설명 -ur${Manager Address(IP:Port)}\n필수 옵션, Node 또는 Server를 등록해지 (Ur egister)한다.\n입력 파라미터는 Manager의 주소로 형식은 ${IP주소}:${HttpPort} 이다.\n이 옵션은 Manager에 대한 Fail-Over 처리가 가능하다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속을 실패하면 두번째 Manager에 접속을 시도한다.\n-f\n강제 등록해지 여부, 선택사항\n-f 옵션이 설정되었을 경우 Server Cluster에서 등록해지 된다.\n-rt ${time - milliseconds}\n\"Retry Time\" , Optional\n해당시간 만큼 Retry한다. Retry 주기는 3초, 기본 Retry Time은 10초임\n옵션 사용 예시 # Manager에서 Node / Server 정보를 모두 제거 한다. # Manager License 사용량 산정에서 해당 서버의 사용량이 중지된다. stop-agent.sh -ur 10.80.44.55:78700 -f Scaling Overview Scaling 탭을 선택하면 제공되는 화면 상단의 테이블은 Node 타입 별 현재 Scaling 현황을 보여준다.\nInitial Node : 현재 Server Cluster에 포함되어 있는 노드 수\nScaled Node : Scaling 정책에 따라 생성된 노드 수\nToday Event : 오늘 하루 Scaling 이벤트 발생 횟수\nLatest Event : 최근에 발생된 Scaling 이벤트 발생시간\nPolicy Scaling시 적용되는 Naming Rule과 같은 정책 정보를 정의 할 수 있다.\nCommon Policy System : Scaling 적용 시스템 명\nSync Button Enabled : Server Cluster 기능의 Sync버튼 활성화 여부\nScaling Mode : Server Scaling 유형\nnosync : Node와 Server를 등록하고 Cluster에 등록한다.\nsync : Node와 Server를 등록하고 Cluster에 등록 후 Cluster Config 기반 Sync 수행, Scaling 되는 신규 Server에 대해서만 Sync를 수행한다.\nclone : Node를 등록하고 Cluster에 등록 후 Master Server를 복제(Clone)하여 Server를 설치하고 Cluster에 등록 및 Web/WAS Sync 수행\nWeb-WAS Connection Scope : Web-WAS 연계 방식\nnone (Using Proxy) : 별도의 Web-WAS 연계를 수행하지 않음\nJK Mesh - Cluster Servers : Cluster내 서버간의 연계를 수행, Web의 경우 신규등록되는 Web서버와 Cluster내 Server들을 연계, WAS의 경우 신규등록되는 WAS 서버와 Cluster내 Web서버와의 연계, nosync Mode일때는 Web서버에 설정된 LoadBalancer를 동기화 하지않고 LoadBalancer별로 Cluster내 WAS를 연계함으로서 Blue-Green 배포방식을 지원\nJK Mesh - Servers on same machine : 동일 VM 내에 있는 Web-WAS 만을 대상으로 연계 수행\nWAS Node Node Naming Rule : WAS 노드 명명 규칙\nServer Naming Rule : WAS 명명 규칙\nWait For WAS Start Up : WAS가 Scale-Out되었을 때 기동대기 여부이다. 'Y\u0026#8217;인 경우 기동된 후 다음 절차 (예 : WEB 서버 재기동)를 수행한다.\nWait Time for WAS Start Up : 최대 WAS 기동대기 시간. Wait For WAS Start Up이 'Y\u0026#8217;일 경우에도 해당 시간이 지나면 다음 절차를 수행한다.\nWEB Node Node Naming Rule : WEB 노드 명명 규칙\nServer Naming Rule : Web 서버 명명 규칙\n명명규칙에서 사용되는 Convention(예약어)은 다음과 같다.\n#{IP} : 각 단위가 '-'로 구분된 Node 또는 Server IP 주소\n#{IP[4]} : Node 또는 Server의 IP 주소 중 4번째 숫자\n#{PORT} : Node Agent 또는 Server의 HTTP 서비스 주소\n#{MASTER_NAME} : Master Server의 이름\n#{HOSTNAME} : Node 또는 Server가 설치된 VM의 Host명\n#{HOSTNAME[R4]} : VM Host명의 오른쪽 끝 4자리\n해당 항목의 정보를 저장 후 Save 버튼 을 눌러 저장한다.\nWAS Scaling Template / Web Scaling Template Sync모드 Scaling시에 동기화되는 파일 목록과 내용을 조회할 수 있다. 보여지는 File 목록들은 해당 Server Cluster의 Master Server로 부터 Manual 방식으로 복사 하여 생성된다. 화면의 Create 버튼 을 누르면 수동으로 파일이 생성된다. 돋보기 버튼 을 눌러 파일의 상세내용을 조회할 수 있고, 현재 Master Server의 설정파일과 비교한 결과를 확인할 수 있다.\nHistory 날짜 및 시간을 기준으로 Scaling 이벤트의 history를 조회할 수 있다. Scaling이 발생한 날짜를 선택하고 시간을 입력한 후 Search 버튼 을 눌러 해당 시간에 발행한 Scaling Event를 조회한다.\nScaling 기능은 Enterprise Edition에서만 제공되는 기능이다.\n6. Resource 6.1. Database 좌측 메뉴에서 Database를 선택하면 Database Resource 목록이 조회된다.\nFigure 9. Database 목록 조회 화면 6.1.1. Database 등록 Database Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n입력 항목을 입력한다.\nResource Name을 입력한다.\nDriverClassName을 확인 후 원하는 벤더의 드라이버를 선택한다.\nAddress(host/Port) 정보를 입력한다.\nSave 버튼 을 클릭해 저장한다.\n6.1.2. Database 수정 Database Resource 목록에서 수정하려는 Database Resource의 체크박스를 선택한다.\nDatabase Resource의 항목을 수정한 후 저장한다.\n내용이 수정될 경우 해당 Database Resource에 연결된 DataSoruce Resource및 WAS의 설정에 전파되므로, 해당 Database Resource 하위에 연결된 DataSoruce Resource가 존재할 경우 입력창이 기본적으로 Disable 된다. Edit 버튼 을 클릭하면 수정할 수 있다.\n6.2. DataSource 좌측 메뉴에서 DataSource를 선택하면 DataSource Resource 목록이 조회된다.\nFigure 10. DataSource 목록 조회 화면 6.2.1. DataSource 등록 DataSource Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nResource Name 필드에 논리적인 이름을 입력한다.\nServer Type을 설정한다. Server Type은 Standard, Enterprise 중에 선택하여야 하며, 이 후 같은 Type의 서버에서만 Import하여 사용할 수 있다.\nDataSource의 상세 설정을 한다(\u0026lt;Server DataSource 설정\u0026gt;\u0026gt;의 상세 항목 설명 참고)\nUpload 버튼 을 클릭하여 해당 DataSource의 Driver를 Manager서버에 등록한다. 미리 등록된 Driver는 운영자가 Server에 Import하는 시점에 해당 Server로 전송된다.\nSave 버튼 버튼을 클릭하여 저장한다.\nManager에 업로드 된 JDBC Driver는, 운영자가 Server에 해당 DataSource Resource를 Import하는 시점에 해당 Server로 전송된다. 전송된 JDBC Driver는 {서버홈경로}/lib/datasource 디렉토리에 위치하며 Classpath에 자동으로 등록된다.\n6.2.2. DataSource 수정 DataSource Resource 목록에서 수정하고자 하는 행을 선택하면 DataSource Resource 수정 화면이 표시된다.\n변경하고자 하는 설정을 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 11. DataSource 상세 정보 화면 DataSource Resource 정보를 수정한 후 저장하면 해당 DataSource Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server를 재기동하면 해당 설정이 적용된다.\nStandard Type으로 설정한 DataSource Resource를 Standard 서버에 Import 한 후에 Server Type을 Enterprise로 변경할 수 없다.\nClasspath 등록 후 DataSource Resource 삭제 시, Classpath는 삭제되지 않음에 유의해야 한다.\n6.2.3. DataSource 삭제 DataSource Resource 목록에서 삭제할 DataSource Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer 또는 Application에서 Import하여 Registered Server 또는 Registered Application이 존재하는 경우, 해당 DataSource Resource는 삭제할 수 없다.\n6.2.4. JDBC Driver Upload DataSource Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Driver File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Driver File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Driver File을 Upload한다.\n6.2.5. DataSource Import 생성한 DataSource Resource를 Import해서 사용하고 있는 Server 목록(Scope가 Context, Global, Global + Link인 경우) 또는 Application목록(Scope가 Application인 경우)은 DataSource Resource 상세 조회 시 하단 영역에 표시된다.\nDataSource 상세 화면에서 DataSource Import 하기 Scope가 Context, Global, Global + Link인 DataSource Resource는 자신을 Import하는 Server를 등록할 수 있다.\nDataSource 관리 화면에서 특정 DataSource Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 DataSource를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 DataSource Resource가 Import 된다.\nImport된 DataSource Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 DataSource Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; DataSource 탭을 클릭하면, 해당 Server의 DataSource Resource 목록 조회 및 DataSource Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 DataSource Resource 목록이 조회된다.\nImport 하고자 하는 DataSource Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 DataSource Resource를 Import 한다.\nDataSource Resource를 Import 하게 되면 해당 DataSource Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 DataSource Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; DataSource 화면에서 조회할 수 있다.\nStandard Server에서는 Enterprise Type의 DataSource Resource를 Import 할 수 없다.(목록에 표시되지 않음)\nImport한 DataSource Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; DataSource 화면으로 이동하여 변경한다.\n6.3. JTA 좌측 메뉴에서 JTA를 선택하면 JTA Resource 목록이 조회된다.\nFigure 12. JTA 목록 조회 화면 6.3.1. JTA 등록 JTA 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.3.2. JTA 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 13. JTA 상세 정보 화면 JTA Resource 정보를 수정한 후 저장하게 되면 해당 JTA Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.3.3. JTA 삭제 JTA 목록에서 삭제할 JTA Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JTA Resource를 삭제할 수 없다.\n6.3.4. JTA Import 생성한 JTA Resource를 Import해서 사용하고 있는 Server 목록은 JTA Resource 상세 조회 시 하단 영역에 표시된다.\nJTA 상세 화면에서 JTA Import 하기 JTA 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JTA Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JTA Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JTA Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JTA 탭을 클릭하면, 해당 Server의 JTA Resource 목록 조회 및 JTA Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JTA Resource 목록이 조회된다.\nImport 하고자 하는 JTA Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JTA Resource를 Import 한다.\nJTA Resource를 Import 하게 되면 해당 JTA Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JTA Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JTA 화면에서 조회할 수 있다.\nImport한 JTA Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JTA 화면으로 이동하여 변경한다.\n6.4. JMS 좌측 메뉴에서 JMS를 선택하면 JMS Resource 목록이 조회된다.\nFigure 14. JMS 목록 조회 화면 6.4.1. JMS 등록 JMS 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n등록할 JMS Resource의 유형을 선택하면 하단에 선택한 유형에 맞게 설정 정보가 표시된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.4.2. JMS 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 15. JMS 상세 정보 화면 JMS Resource 정보를 수정한 후 저장하게 되면 해당 JMS Resource 가 사용되는 Server 에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.4.3. JMS 삭제 JMS 목록에서 삭제할 JMS Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JMS Resource를 삭제할 수 없다.\n6.4.4. JMS Import 생성한 JMS Resource를 Import해서 사용하고 있는 Server 목록은 JMS Resource 상세 조회 시 하단 영역에 표시된다.\nJMS 상세 화면에서 JMS Import 하기 JMS 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JMS Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JMS Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JMS Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JMS 탭을 클릭하면, 해당 Server의 JMS Resource 목록 조회 및 JMS Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JMS Resource 목록이 조회된다.\nImport 하고자 하는 JMS Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JMS Resource를 Import 한다.\nJMS Resource를 Import 하게 되면 해당 JMS Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JMS Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JMS 화면에서 조회할 수 있다.\nImport한 JMS Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JMS 화면으로 이동하여 변경한다.\n6.5. Application 좌측 메뉴에서 Application를 선택하면 Application Resource 목록이 조회된다.\nFigure 16. Application 목록 조회 화면 6.5.1. Application 등록 Application 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.\nApplication Type이 WAR일 경우에는 추가로 설정할 수 있는 항목이 표시된다.(상세 설정 값은 Application Settings 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.5.2. Application 수정 Application Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 17. Application 상세 정보 화면 Application Resource 정보를 수정한 후 저장하게 되면 해당 Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.5.3. Application 삭제 Application 목록에서 삭제할 Application Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 Application Resource를 삭제할 수 없다.\n6.5.4. Application Upload Application Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Application File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Application File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Application File을 Upload한다.\nApplication Import 생성한 Application Resource를 Import해서 사용하고 있는 Server 목록은, Application Resource 상세 조회 하단 영역에 표시된다.\nApplication 상세 화면에서 Application Import 하기 Application 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nApplication 관리 화면에서 특정 Application Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 Application를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 Application Resource가 Import 된다.\nImport된 Application Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 Application Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Applications 메뉴를 클릭하면, 해당 Server의 Application Resource 목록 조회 및 Application Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 Application Resource 목록이 조회된다.\nImport 하고자 하는 Application Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 Application Resource를 Import 한다.\nApplication Resource를 Import 하게 되면 해당 Application Resource와 Server간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 Application Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; Application 화면에서 조회할 수 있다.\nImport한 Application Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; Application 화면으로 이동하여 변경한다.\n7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 Monitoring Dashboard 화면은 하단에 3개의 탭을 제공하고 있고 선택된 탭에 따라 상단에 제공되는 요약정보가 변경된다.\n탭 별로 제공되는 정보는 다음과 같다.\nNode 탭 등록된 Node별 Server 모니터링 정보 제공\nServer Cluster 탭 Server Cluster 그룹별로 등록된 Server 모니터링 정보 제공\nService Cluster 탭 Service Cluster 그룹별로 등록된 Container 모니터링 정보 제공\n각 정보의 조회 주기를 설정할 수 있으며, WAS의 경우 Function 컬럼에 있는 팝업 버튼 을 클릭하면 상세 모니터링 화면으로 이동할 수 있다.\nMonitoring Dashboard 화면은 다음과 같다.\nFigure 18. Monitoring Dashboard의 Node 탭 화면 Figure 19. Monitoring Dashboard의 Server Cluster 탭 화면 Figure 20. Monitoring Dashboard의 Service Cluster 탭 화면 Service Cluster 탭은 Container Edition에서 제공되는 기능이다.\nMonitoring Dashboard 화면에서 사용된 속성들은 아래와 같다. 사용률 형태로 제공하는 정보의 색상은 Status Range 속성을 이용해 변경할 수 있다. (이 장의 하위 절인 모니터링 기본 설정 참고)\nTable 74. Node 상태 항목 설명 비고 CPU\nNode의CPU 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nMemory\nNode의 Memory 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nDisk\nNode의 Disk 사용률\nEngine이 설치된 Disk 사용률로써 Default 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nTable 75. Application Server 상태 항목 설명 비고 Status\nServer 기동여부, 진단결과발행여부(구급차 아이콘) 및 자동대응수행여부(방패 아이콘)\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap Memory\nApplication Server에서 사용되는 Heap Memory 사용률\nThread Pool\nApplication Server가 Pool로 관리하는 Request Thread 사용률을 Connector(Ajp, Http) 별로 표시\nDataSource\nApplication Server가 Pool로 관리하는 Datasource Connection 사용률\nSession Clustering\nApplication Server에 설정된 Session Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 76. Web Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nCPU\nWeb Server 프로세스의 CPU 사용률\nMemory\nWeb Server 프로세스의 Memory 사용률\nThread\nWeb Server의 Thread 수 (Active / Max)\nConnected WAS\nWeb Server와 연결된 WAS 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 77. Session Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap\nSession Server에서 사용되는 Heap Memory 사용률\nSession Count\nActive 상태인 Session 비율\nMirror Server\nMirror Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\n각 서버를 즉시 제어할 수 있는 기능을 다음과 같이 함께 제공된다.\nTable 78. Application Server 제어 기능 항목 설명 비고 Thread Dump\nThread Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nActive Service Dump\nActive Service Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nHeap Dump\nHeap Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nForced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nForced Restart\n서버 강제 재시작\n대기 시간 없이 즉시 강제 재시작\nAll Diagnostics Disable\n해당 서버에 적용된 진단/대응 기능을 모두 Disable 처리\nFigure 21. Dump 창 Heap Dump, Thread Dump, Active Service Dump를 생성하고 다운로드 할 수 있다. 일반적으로 Dump는 서버에서 Out Of Memory등의 오류, Thread Pool의 과다 사용, 서비스 지연 등이 발생한 경우 원인 파악을 위해 생성한다.\n생성하려는 Dump 타입에 따라 Thread Dump 버튼 , Active Service Dump 버튼 , Heap Dump 버튼 을 클릭해 Dump를 생성한다. 생성된 Dump는 Web Application Server가 존재하는 Host내 저장되는데, Thread Dump는 {log_home}/logs/tdump, Active Service Dump는 {log_home}/logs/sdump, HeapDump 파일은 Dump파일은 {log_home}/logs/hdump 경로에 저장된다.\nDelete 버튼 을 클릭하여 Dump 파일을 삭제할 수 있다. Download 버튼 을 클릭해 Dump 파일을 다운로드 할 수 있으며, 다운 로드 시 해당 Dump 파일이 시스템 현황 Dump 파일과 함께 zip 형태로 다운로드 된다.\nDump 관리 화면의 항목은 다음과 같다.\nTable 79. Dump 화면 항목 항목 설명 비고 File Name\n생성된 파일 이름\n날짜를 포함한 문자열로 자동 생성된다\nSize\n생성된 파일의 사이즈\nStatus\nDump 수행 시점의 System 및 Server의 상태\nDump 생성 시점의 시스템의 CPU, Memory 정보 및 Web Application Server의 주요 리소스 사용량 정보도 Dump 생성 시 함께 생성한다.\nView 버튼 을 클릭하여 생성된 Status 값을 확인할 수 있다\nTable 80. Web Server제어 기능 항목 설명 비고 Forced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nGraceful Stop\n서버 Graceful 종료\nMonitoring 정보가 표시되지 않는다면 등록된 Node/Server가 실제로 존재하는지, Node/Server와 통신이 잘 되는 상태인지 체크한다.\n7.1.2. 현황 모니터링 상세 Monitoring Dashboard에서 Function 컬럼에 있는 가운데 버튼(View Detail Chart) 을 선택하면 상세한 Thread, Memory, 서비스 정보를 모니터링할 수 있다.\nSystem 창 Web Application Server의 Memory, Thread, Service 정보를 확인할 수 있다.\nFigure 22. System 탭 Memory Chart 실시간 Memory 사용량 정보가 표시된다. 제공하는 정보로는 GC Time(Garbage Collection 소요 시간), GC Count, Heap Used(Total Memory - Free Memory), Total Memory(서버에서 사용중인 총 메모리)가 있다. 차트의 붉은 점선은 사용 가능한 최대 Heap Memory를 의미한다. 따라서 차트에서 Heap Memory 사용량이 일반적인 GC패턴이 아닌 긴 시간동안 연속적으로 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread Chart Web Application Server가 사용자의 요청을 처리하기 위해 Pool 로 관리하고 있는 Request Thread 사용 현황을 볼 수 있는 Line Chart이다. 차트의 붉은 점선은 사용할 수 있는 Request Thread의 최대치를 의미한다. 때문에 차트에서 Request Thread 수가 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread List Web Application Server의 모든 Thread를 확인할 수 있다. 출력된 Thread 이름이나 Thread 상태를 기준으로 필터링 할 수 있다. Thread List의 항목은 아래와 같다.\nTable 81. Thread List 항목 항목 설명 비고 Thread ID\n고유 Thread ID\nName\nThread 이름\nStat\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nCPU\n지정된 Thread에 대한 CPU 사용시간\nTx Id\n트랜잭션 ID\nElapsed\nThread가 수행되는데 걸린 시간\nService Name\nThread가 수행한 서비스 이름\n+ 버튼 을 눌러 다음과 같은 상세 정보를 확인할 수 있다.\nTable 82. Thread 상세 정보 항목 항목 설명 비고 threadId\n고유 Thread ID\nthreadName\nThread 이름\nState\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nthreadCpuTime\n현재 Thread를 포함한 모든 Thread의 CPU 시간\nthreadUserTime\n현재 Thread의 CPU 시간\nblockedCount\nBlock된 합계\nblockedTime\nBlock된 누적 경과시간\nwaitedCount\n대기한 Thread의 합계\nwaitedTime\n대기한 Thread의 누적 경과시간\nlockOwnerId\nlock된 Object를 소유한 Thread의 ID\nlockName\nlock된 Object이름\nlockOwnerName\nlock된 Object를 소유한 Thread의 이름\nstackTrace\nstackTrace\nActive Service List 서비스 정보 및 해당 서비스를 처리하고 있는 Thread 정보를 확인할 수 있다. 해당 정보 내 항목은 Thread List 항목과 유사하며, 다음과 같은 추가 항목이 존재한다.\nTable 83. Active Service List 항목 항목 설명 비고 Sql\n현재 수행 중인 SQL문\nDataSource 창 Application Server에 설정된 DataSource 정보를 확인할 수 있다.\nFigure 23. DataSource 탭 화면 DataSource Chart Active Connection 수와 Idle Connection 수가 Chart에 실시간으로 표시된다. 차트의 붉은 점선은 설정된 최대 Connection 수를 의미한다. Active Connections가 붉은 점선에 근접할 경우 유의해야 한다. 콤보박스에서 DataSource를 선택하여 다른 DataSource를 모니터링 할 수 있다.\n최대 Connection 수는 DataSource 정보 등록화면의 maxConnection 속성을 통해 변경할 수 있다.\nDataSource Information 지정한 Datasource의 설정 정보를 확인할 수 있다.\n7.1.3. 모니터링 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting 메뉴에서 모니터링 기본 설정을 할 수 있다. 설정 항목은 다음과 같다.\nTable 84. 모니터링 관련 기본 설정 항목 항목 설명 기본값 Status Range\nMonitoring Dashboard 에서 Resource의 Low, Middle, High 기준을 설정한다.\n60% 미만일 경우 Low, 60% 이상일 경우 Middle, 80% 이상일 경우 High를 의미한다\nDiagnostics Interval\n진단 주기를 설정한다.\n10000(ms)\nDump Limit\n각 서버의 Dump(Thread/ActiveService/Heap) 디렉토리 별 Dump 개수 제한(0은 무제한을 의미)\n200(개)\n7.2. Analysis Dashboard Analysis Dashboard에서 시스템 단위로 실시간 장애 분석 현황 정보를 제공한다. 제공하는 정보 제공 유형은 아래와 같다.\nPerformance Map\nAnalysis Summary\nInstance Map\nFigure 24. Analysis Dashboard 7.2.1. Performance Map Analysis Dashboard의 좌측 상단에 보이는 Performance Map은 \"Thread \u0026amp; Elapsed\", \"Thread\", \"Elapsed\" 기준으로 시스템의 상태 정보를 각각 제공한다. 각 시스템은 Chart상에서 색깔을 가진 원으로 표시된다. 시스템의 상태 별 색상은 다음과 같다.\nNormal: 녹색\nAnomaly: 주황색(진단 결과로 Anomaly 상황이 검출됨)\nFault: 붉은색(진단 결과로 Fault 상황이 검출됨)\nChart에서 X축과 Y축의 의미는 다음과 같다.\nTable 85. Performance Map Chart의 X, Y축 의미 항목 설명 비고 Thread \u0026amp; Elapsed Chart\nX축: 시스템 내 Web Application Server의 평균 Thread 사용률\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nThread Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server의 평균 Thread 사용률\nElapsed Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nChart 상단에 표시되는 System 상태 요약 정보는 다음과 같다.\nTable 86. System 상태 요약 정보 항목 항목 설명 비고 Normal\n정상 System의 수\nSlow\n응답 시간이 오래 걸리는 System의 수\nHeavy\nThread pool사용량이 많은 System의 수\nSlow \u0026amp; Heavy\nSlow하고 Heavy한 System의 수\nChart 하단의 슬라이드 바를 조작해 이전 상태 정보를 볼 수 있으며, 이전 10분 아이콘, 다음 10분 아이콘, 일시 정지 아이콘, 재생 아이콘, 현재 시간 이동 아이콘 을 클릭해 시간을 이동할 수 있다. Dashboard에 처음 진입하면 전체 시스템이 표시되며, Chart 내에서 표시되는 시스템이나 범례를 클릭해서 특정 시스템만 선택해 볼 수 있다. 다시 전체 시스템 전체를 보려면 우측 상단의 All System 아이콘 을 클릭한다.\n시스템 아이콘 위에서 마우스 우클릭을 하면 다음과 같은 기능을 수행할 수 있다.\nTable 87. 시스템 아이콘에서 우클릭 시 사용 가능한 기능 항목 설명 비고 Topology View\nTopology View 화면으로 이동\nService Analysis\nSystem Detail 팝업 창 표시\nMonitoring\nMonitoring Dashboard 화면으로 이동\nStatistics\nStatistics 화면으로 이동\n시스템 우클릭 기능 중에 Service Analysis 클릭 시 표시되는 팝업 창은 다음과 같다. WEB, WAS, SESSION 서버의 현재 상태가 좌측에 표시된다. 우측에는 Transaction Heat Map Chart를 볼 수 있으며, 영역을 드래그 하면 상세 정보를 확인할 수 있다.\nFigure 25. System Detail 화면 Transaction 정보는 LENA Dashboard에서 Service Trace 기능을 통해 수집했던 경우에만 남는다.\n다음은 Transaction Heat Map Chart내의 원하는 영역을 드래그 한 후 표시되는 Transaction 목록에서 특정 Transaction을 선택했을 때 볼 수 있는 상세 정보 화면이다.\nFigure 26. Transaction 상세 정보 화면 상세 정보는 CLIENT(사용자 브라우저 관련), WEB(LENA WEB Server 관련), WAS(LENA WEB Application Server 관련) 측면의 데이터로 구성된다. 각 유형 별 정보에서 볼 수 있는 항목은 다음과 같다.\nTable 88. CLIENT 관련 데이터의 항목 항목 설명 비고 domain lookup time\n브라우저가 서버와 접속하기 위한 domain lookup 시간\nconnection time\n브라우저가 서버와 connection 을 맺는 시간\nserver response time\n브라우저가 서버에 요청을 하고 응답을 받은 전체 시간\nrendering time\n브라우저의 화면 rendering 시간\ntotal complete time\n브라우저에서 처리되는 전체 시간\nerror resource(line)\n스크립트 에러 발생 시, 에러가 발생한 라인\nerror content\n스크립트 에러 발생 시, 발생한 에러 내용\nTable 89. WEB 관련 데이터의 항목 항목 설명 비고 elapsed time\nWEB에서 처리 수행 시간\nWAS 관련 데이터의 항목 기본 정보\nTable 90. 기본정보 항목 설명 비고 objName\n요청을 처리한 서버 명\nendtime\n요청 처리 완료 시간\nelapsed\n요청 처리 수행 시간\nservice\n요청 서비스 명\nipaddr\n호출한 아이피 정보\ncpu\nCPU 사용 시간\nsqlCount\n수행된 쿼리 수\nsqlTime\n쿼리 수행 시간\n프로파일 정보\nTable 91. 프로파일 정보 항목 설명 비고 #\n프로파일 단계 순서를 나타내는 인덱스\np#\n내부 단계인 경우 자신이 속한 부모 인덱스\nTIME\n해당 단계가 시작된 시간\nT-GAP\n현재 단계의 시작 시간과 이전 단계의 시작 시간의 차이\nCPU\nCPU 사용 시간\nCONTENTS\n각 단계의 내용\nCLIENT 와 WEB 관련 정보는 E2E 기능이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n프로파일 정보는 WAS에서 프로파일 설정이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n7.2.2. Analysis Summary 현재 검출된 진단 결과 건수, 오늘 발생한 전체 진단 결과 건수, 지난 날(Default: 1일 전) 발생한 진단 결과 건수의 요약 정보를 보여준다.\nTable 92. 분석 요약 정보 항목 항목 설명 비고 ANOMALY\nFault 상태는 아니지만 주의 깊게 봐야 하는 진단 결과 건수\nFAULT\nFault 상태로 진단된 결과 건수\nRecent Events는 가장 최근에 발생한 진단 결과를 보여주며, 해당 항목을 클릭하면 Report 정보를 확인할 수 있다.\n7.2.3. Instance Map Performance Map에서 특정 시스템을 선택하면, 화면 하단에서 시스템 내 서버 정보 및 진단 결과를 보여주는 Time Line Chart를 볼 수 있다. 서버는 상태에 따라 다른 색으로 표시되며, 특정 서버를 토글 해 우측 Time Line Chart에서 보이거나 안보이게 할 수 있다. 진단 후 Anomaly나 Fault 상황이 검출되면 Time Line에 주황색(Anomaly 상황)이나 붉은색(Fault)으로 표시되는데, 해당 영역을 더블 클릭하면 Report를 확인할 수 있다.\n7.3. Event Dashboard Event Dashboard를 통해 WAS에서 발생한 이벤트 현황 정보를 제공한다.\n이벤트 정보는 WAS에서 생성되어 UDP로 Manager에 전달된다. WAS가 전송한 이벤트 정보는 Manager의 DB에 일정 기간(3달) 동안 보관되며, 해당 이벤트의 상세 SQL 및 Exception Trace 정보는 데이터 크기가 크므로 7일간만 보관된다.\n7.3.1. Event 종류 다음과 같이 4가지 종류의 이벤트가 존재한다.\nWAS의 Out Of Memory Error 발생 이벤트\nWAS의 Full GC 발생 이벤트\nWAS의 Stuck Thread 발생 이벤트\nWAS의 Exception 발생 이벤트\nWAS Exception 이벤트는 아래 두 가지 상황에서 생성되어 Manager로 전송된다.\n사용자 요청에 대해 Servlet의 service 메서드 바깥까지 Exception 이 Throw 되는 경우\n사용자가 설정한 타입의 Exception이 발생한 경우\n7.3.2. Event Dashboard를 통한 Event 관리 LENA Manager 의 Event Dashboard에서 수집된 Event를 관리할 수 있다.\nFigure 27. Event Dashboard 이벤트 발생 추세를 일자 별 라인 차트로 확인할 수 있다. 모든 System 대상으로 볼 수 있으며 특정 System이나 Server 등을 지정해 조회할 수 있다. 달력 버튼 을 클릭해 날자를 변경할 수 있다.\n이벤트 목록의 항목은 다음과 같다.\nTable 93. Event List 항목 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함. 4가지 이벤트는 기본적으로 WARNING이며 변경할 수 있음.\nINFO\nWARNING(DEFAULT)\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nSystem Name\n시스템 이름\nMessage\n이벤트 메시지\nError 이벤트는 발생한 Exception 명을, Stuck Thread 이벤트는 Stuck Thread가 발생했음을 알리는 메시지를 남김\nEvent Date\n이벤트 발생 시각\n( 삭제 버튼 )\n이벤트 삭제 시 선택하는 버튼\n개별 이벤트 행을 클릭하면 아래와 같은 Event 상세 정보를 확인할 수 있다.\nFigure 28. Event 상세 정보 화면 Event 상세 정보의 공통 항목은 다음과 같다.\nTable 94. Event 상세 정보의 공통 항목(Event Common Info) 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함.\nWARNING\nINFO\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nTarget Type\n대상 서버 유형\n다음 유형이 존재함\nWAS\nSERVICE-CLUSTER\nSystem Name\n시스템 이름\nEvent Date\n이벤트 발생 시각\nEvent 별로 서로 다른 상세 정보 항목은 다음과 같다.\nTable 95. Out Of Memory 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Heap Dump File Name\nOut Of Memory Error 발생 시 자동 생성된 Heap Dump 파일 이름\nTable 96. Full GC 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Full GC Start Time\nFull GC 시작 시각\nFull GC End Time\nFull GC 종료 시각\nPrevious Full GC Start Time\n바로 직전 Full GC 시작 시각\nPrevious Full GC End Time\n바로 직전 Full GC 종료 시각\nMemory Usage Before Full GC (MB)\nFull GC 수행 전 메모리 사용량\nMemory Usage After Full GC (MB)\nFull GC 수행 후 메모리 사용량\nTable 97. Stuck Thread 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nThreshold(ms)\nLenaStuckThreadDetectionValve에 설정한 임계값\nActive Time(ms)\nStuck Thread 감지 시점의 해당 서비스 처리 시간\nStack Trace\nStuck Thread 감지 시점의 Stack Trace\nTable 98. Error 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nRemote Addr\nClient 리모트 주소\nCustom Info\n사용자 정의 코드 정보\n사용자가 커스텀 Servlet Filter를 사용해 지정한 Key, Value\nException Trace\n발생한 Exception의 Trace\n7.4. 통계 7.4.1. 연간 진단/대응 통계 DIAGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 메뉴에서 서버 별 연간 진단 결과를 차트를 통해 제공한다.\nFigure 29. Statistics 화면 위 화면에서 다음과 같은 내용을 확인할 수 있다.\nDiagnostics Calendar\n한 칸이 하루를 의미하며, 연간 통계 차트의 일자에 Mouse Over를 하면 해당 일자에 발생한 진단 횟수를 확인할 수 있다.\nDaily Diagnostics Detail\nDiagnostics Calendar에서 특정 일자를 클릭하면, 화면 하단에 선택한 일자의 시간대 별 진단 발생 그래프가 표시 된다.\n7.4.2. 리포트 진단 및 대응 기능이 수행되면 Report가 자동으로 생성된다. Report는 7일간 보관되며 오래된 Report는 자동으로 삭제된다.\n진단/대응 리포트 목록 DAIGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 화면에서 특정 서버를 선택한 후, Report List 버튼 을 클릭하면 진단/대응 리포트 목록 화면을 볼 수 있다. 진단/대응 리포트 목록 화면은 아래와 같다.\nFigure 30. 진단/대응 리포트 목록 화면 View 버튼 을 선택하여 Report를 확인할 수 있다.\n리포트 공통 정보 Report의 내용은 진단 결과에 따라 다르게 표시되지만, 다음과 같은 공통 정보를 가진다.\nFigure 31. 진단/대응 리포트 화면 위와 같이 이상 현상이 지속된 기간 내에 검출된 진단 결과간의 인과 관계를 도식화해 제공하며, 화면 하단에는 각 진단 결과가 어느 시간대에 생성됐는지 보여준다.\nAnomaly 상황은 진단/대응 Rule에 설정한 설정 내용의 일부만 충족된 상황을 의미하며 주황색으로 표시되고, Fault 상황은 진단/대응 Rule에 설정한 설정 내용의 모두를 만족한 상황을 의미하며 붉은색으로 표시된다.\n리포트 상세 정보 Report 하단의 Time Line에서, 특정 시간대의 특정 진단 유형을 클릭하면 다음과 같이 상세 정보를 확인할 수 있다.\nFigure 32. 진단/대응 리포트 상세 정보 Report 상세 정보의 항목은 다음과 같다.\nTable 99. Report 상세 정보 항목 항목 설명 비고 Root Cause\n원인이 되는 진단 항목\n해당 진단 결과를 야기한 원인이 되는 진단 항목을 의미하며, 만약 해당 진단 결과의 원인이 되는 다른 진단 항목이 존재한다면 다른 진단 항목이 표시됨\nAnalysis Rule\n진단/대응 Rule에 설정된 임계\nFault Analysis Raw Data\n진단 근거가 되는 Back Data\nPre-Action for Fault Tolerance\n수행된 Action 및 Dump 파일 명\nRecommended Solution\n조치 가능한 해결책\n진단/대응 유형 별 Back Data 항목은 다음과 같다.\nRequest Full 진단 Report의 Back Data는, 가장 많이 호출된 5개의 서비스 정보이다.\nTable 100. Request Full 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\n대량 DB Data 요청 진단 Report의 Back Data는, 대량 DB Data 요청을 가장 많이 한 5개의 서비스 정보이다.\nTable 101. 대량 DB Data 요청 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nCount\n해당 서비스 요청 수\nBlocked Count\nBlock된 DB 데이터 조회 건수\nDB Conn Full 진단 Report의 Back Data는, 과다 점유된 DataSource Connection Pool 정보이다.\nTable 102. DB Conn Full 진단 Report의 Back Data 항목 항목 설명 비고 DataSource Name\nDataSource 이름\nDB Connection Pool Usage Rate\nDB Connection Pool 사용률\nLong Transaction 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 103. Long Transaction 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nPeak Control 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 104. Peak Control 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nOOM 진단 Report의 Back Data는, OOM 발생 여부 및 메모리 사용 정보이다.\nTable 105. OOM 진단 Report의 Back Data 항목 항목 설명 비고 OOM Occurred\nOOM 발생 여부\nHeap Usage Rate\nHeap Memory 사용률\nFull GC Count\nFull GC 발생 횟수\nMemory Leak\nMemory Leak 발생 여부\nHeap Dump\nHeap Dump가 생성된 경우 파일 이름\nHang 진단 Report의 Back Data는, 서버 상태 및 시스템 리소스 정보이다.\nTable 106. Hang 진단 Report의 Back Data 항목 항목 설명 비고 Node CPU Rate\nNode Agent가 측정한 시스템의 CPU 사용률\nNode Memory Rate\nNode Agent가 측정한 시스템의 Memory 사용률\nProcess CPU Rate\n서버의 CPU 사용률\nFull GC Count\n서버의 Full GC 횟수\n7.4.3. 알림 진단/대응을 통해 Report가 생성되면, 다음과 같이 LENA Manager 우측 상단의 종 아이콘 을 통해 확인 가능하다.\nFigure 33. 진단/대응 결과 알림 알림 내용을 선택하면 생성된 Report를 바로 확인할 수 있으며, 알림 내용을 확인하고 더 이상 표시하지 않기를 원한다면 x 버튼 을 클릭한다. 알림이 많은 경우 Manager 우측 상단의 종 아이콘 을 선택한 후 Notifications 화면에서 일괄적으로 확인을 할 수 있다.\nFigure 34. 진단/대응 결과 알림 목록 일괄 확인 Home 아이콘 을 클릭하면 선택한 알림에 대한 진단 이력 화면으로 이동한다. V 아이콘 을 클릭하는 것은 선택한 알림을 확인했다는 것을 의미하며, 이렇게 클릭한 알림은 Manager 우측 상단의 종 아이콘 에 더이상 표시되지 않는다.\nNotifications 화면에서는 1개월 이내의 지난 알림에 대한 이력을 확인할 수 있다. 1개월이 지난 데이터는 자동으로 삭제된다.\n7.5. 진단 및 대응 진단 및 대응 기능을 사용하면, 장애 가능성 사전에 진단하고 적절한 대응을 자동으로 수행하여 Server 안정성을 높일 수 있다.\n진단 기능은 Rule기반으로 Server의 장애 가능성(또는 장애 상황)을 자동으로 판단하는 기능이다.\n대응 기능은 진단 결과를 기반으로 적절한 Server 제어를 통해 장애 상황를 이겨내고 안정적인 서비스를 할 수 있도록 지원하는 기능이다.\n진단 대상 유형은 다음과 같다.\nRequest Pool의 과다 사용(Reqeust Full)\n과도한 서비스 요청으로 Server의 가용한 Request Thread가 모두 소진되면, 서비스 요청이 지연되거나 서비스 불가 상태에 빠질 수 있다. Request Thread 사용량 기반으로 과도한 서비스 요청 여부를 파악하고, 자동으로 해당 요청을 임시 페이지로 우회시켜 Server를 안정적인 상태로 유지한다.\n대량 DB Data 요청(Bulk DB Data Request)\n서비스가 대량 DB 데이터를 처리하는 경우, 메모리를 과도하게 사용하면서 OOM 현상, 잦은 Full GC에 의한 서버 Hang 현상 등이 발생할 수 있다. 서비스의 대량 DB 데이터 요청 여부를 파악하고, 해당 서비스를 강제로 종료시켜 Server를 안정적인 상태로 유지한다.\nDB Connection Pool의 과다 사용(Db Conn Full)\nDB 처리 시간 지연, WAS-DB간 네트워크 지연, DB Lock 등에 의해 DB Connection이 과도하게 점유된 경우, 서비스는 가용 DB Connection을 할당 받을 때까지 지연된다. DB Connection 할당을 기다리는 서비스들이 누적되어 Request Thread Pool을 과도하게 점유하게 되면, 서비스 불능 상태까지 발생할 수 있다. 특정 DataSource의 DB Connection이 모두 소진된 경우, 할당 대기 시간을 짧게 줄이는 방법을 통해 장애를 격리함으로써 Server를 안정적인 상태로 유지한다.\n수행 시간이 긴 서비스(Long Transaction)\n일시적인 네트워크, 연계시스템 문제 등으로 서비스가 지연되거나 수행시간이 원래 긴 서비스가 존재하는 경우, 해당 서비스들이 Server의 가용한 Request Thread를 과도하게 점유하여 다른 서비스 수행에 지장을 줄 수 있다. 오래 걸리는 서비스들의 Request Thread 사용률을 제한하여 다른 서비스들의 QoS를 보장한다.\n서버 동작 불능(Hang)\nServer가 동장 불능 상태인 Hang 상태가 되면 Server에서 수행되는 모든 작업이 중단되는 것은 물론 Server가 설치된 시스템 전체에 영향을 줄 수도 있다. Hang 상태가 검출되면 즉시 재기동해 Server의 장애 상황을 해소하고 시스템 전체 장애 발생을 방지한다.\nOut of Memory 에러 발생(OOM)\n서비스 로직의 오류 또는 과도한 Memory 사용에 의해 Out of Memory(OOM) 에러가 발생할 수 있다. OOM이 발생하면 Server의 정상적인 동작을 보장할 수 없으므로, OOM 발생 여부를 빠르게 파악하여 신속히 자동으로 재기동함으로써 Server 장애 상황을 극복한다.\n사용자 폭주(Peak Control)\nServer의 처리 한계를 넘는 많은 사용자의 요청이 존재하는 경우, 서비스 지연 또는 불능 상태가 될 수 있다. 만약 사용자 요청이 특정 서비스에만 몰린다면 순서대로 진입하도록 요청을 제어하여 안정적인 서비스를 제공하면서도 사용자의 이탈을 막을 수 있다. 또한 다른 서비스 QoS도 보장할 수 있다.\n7.5.1. 진단/대응 Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Diagnostics Rule Setting 메뉴에서 진단/대응 Rule을 설정할 수 있다.\nFigure 35. Diagnostics Rule Setting 화면 진단/대응 유형 별로 Tab으로 구성되어 있으며, 기본적인 Default Rule 이 제공된다. New 버튼 을 클릭해 신규 Rule을 생성하거나, 기존의 Rule을 선택해 수정 및 삭제를 할 수 있다.\n각 진단 항목별로 다음과 같이 두 개의 Default Rule이 제공된다.\n진단 후 Report만 생성하는 Rule\n진단 후 Report 및 Dump를 생성하는 Rule(Action은 Disable되어 제공됨)\n진단 유형 별 Rule 설정 항목을 다음과 같다.\nTable 107. Request Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRequest Pool(%)\nRequest Pool 사용률 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nFAKE-PAGE: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 108. 대량 DB Data 요청 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRS Count\n서비스 내에서 요청한 DB Data 건수 임계\n10000\nExceptional URI\n진단에서 제외할 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nTHROW-EXCEPTION: Exception을 발생시켜 서비스를 강제로 종료\nNONE\nTable 109. DB Conn Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nDB Connection Pool(%)\nDB Connection Pool 사용량 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nDB-CONN-CONTROL: Datasource Connection 할당 대기 시간 동적 변경(대기 시간 설정 가능)\nNONE\nTable 110. Long Transaction 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nElapsed Time(s)\n진단 대상 서비스 수행 시간 임계\n300\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nTarget URI\n대상 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSERVICE-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 111. Hang 진단 Rule 항목 설명 기본값 Rule Name\nRule 명\nTimeout(ms)\n서버에 Health Check 시도 후, 응답 대기 시간 임계\n3000(ms)\nRetry Count\n서버에 Health Check 실패 시, 재시도 횟수\n3\nFullGC Duration(s)\nFull GC 횟수를 체크할 시간 간격\n60\nFullGC Count\nFull GC 횟수\n2\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nHang 진단 설정 항목간의 관계는 다음과 같다.\nFault 조건 : 서버 Hang에 의해 Health Check 시도 후 Timeout(s) 만큼 응답 없는 상황이 Retry Count 만큼 반복되면 Fault 상황으로 판단하여 Action을 수행함\nAnomaly 조건 : FullGC Duration(s) 간격 내 FullGC Count 만큼 Full GC 발생 횟수가 많다면 Anomaly 상황으로 판단하여 Action 없이 Waning 리포트만 생성함\nTable 112. OOM 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nOUT OF MEMORY\nOOM 발생 여부(Fault 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nMemory Leak\nMemory Leak 발생 여부(Anomaly 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nTable 113. Peak Control 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nTarget URI\nPeak Control 대상 서비스 URI\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nRelease Rate(%)\n이상 상황 해제 조건이 되는 Request Thread 사용률 임계\n10\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nPEAK-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\n7.5.2. Server Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Server Rule Setting 메뉴에서 진단/대응 Rule을 Server에 Mapping하고 Enable/Disable 할 수 있다.\n최초에는 아무 진단 Rule도 Mapping되어 있지 않으므로, Enable/Disable 기능을 수행하기 전에 진단/대응 Rule을 먼저 Mapping해야 한다. 각 서버의 행을 클릭하여 다음과 같이 서버에 진단/대응 Rule을 Mapping 할 수 있다.\nFigure 36. 진단 Rule Mapping 화면 진단/대응 Rule이 Mapping된 이후에는 다음과 같이 Server Rule Setting 화면에서 Rule을 Enable/Disable 할 수 있다.\nFigure 37. Server Rule Setting 화면 Peak Control 진단 Rule만 DIAGNOSTICS \u0026gt; Policy \u0026gt; Peak Control Rule Setting 메뉴에서 설정한다.\n7.6. Trace Trace는 장애 진단을 위해 해당 Request가 LENA Server 간 이동 경로 및 시간을 기록해 원인을 진단 할 수 있게 해준다. LEAN 에서 제공하는 Trace유형은 아래와 같다.\nSession Trace\nEvent Trace\nDIAGNOSTICS \u0026gt; Trace 메뉴의 하위 메뉴를 통해 여러 기능을 사용할 수 있다.\n7.6.1. Session Trace Session 의 Trace 정보(어느 Server에 해당 Session이 존재하는지)를 확인할 수 있다. Session을 찾기 위해서는 Cluster된 Session Server가 기동중이어야 한다.\nFigure 38. Session Trace 화면 조회 결과 항목은 다음과 같다.\nTable 114. Session Trace 조회 결과 항목 항목 설명 비고 Server Type\nServer의 유형\nSession Server: LENA Session Server\nLENA Server: LENA Application Server\nServer Name\nServer 이름\nSession Server인 경우, 검색 대상 Server가 Primary이고 검색 대상 서버의 Slave Server가 Secondary 이다\nCreate Time\nSession 생성 시각\nLast Update Time\nSession이 마지막으로 수정된 시각\nLast Access Time\nServer에 해당 Session을 마지막으로 호출한 시각\nAttribute\nSession Attribute\nContext\nSession의 Application Context\n7.6.2. Event Trace 장애로 판단되는 이벤트가 발생되었을 때, 해당 Request의 Trace 정보를 확인 할 수 있다.\nFigure 39. Event Trace 화면 Trace 정보는 일주일 동안만 보관된다. 이벤트가 발생한 날짜는 검색 조건의 Trace Date에 표시 된다. 검색 결과에서 Status 항목은 발생한 이벤트의 중요도를 의미한다.\nTable 115. Event Trace 검색 결과 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nSESSION ID\n해당 Request의 Session ID\nDetail\n상세정보를 확인할 수 있는 버튼\n검색 결과의 Detail의 상세 조회 버튼 을 누르면 상세 정보를 확인할 수 있다. 각 항목은 다음과 같다.\nTable 116. Event Trace 정보의 상세 정보 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nJVMRoute\nRequest를 처리한 WAS의 JVMRoute 값\nSESSION ID\n해당 Request의 SESSION ID\nSession Server\nRequest를 처리한 Session Server\n연결된 WAS의 Primary/Secondary Session Server로 표기됨\nURL\nRequest의 URL\nTrace되는 이벤트는 아래와 같다.(Event Code는 Log 파일을 보면 확인할 수 있다. 화면에서는 코드를 문장으로 풀이해 보여준다.)\nTable 117. Trace되는 이벤트 코드 및 설명 Event Code 설명 비고 sywz\nSession ID와 JVMRoute 정보가 다름.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession ID does not match with JVMRoute.\nwxso\nWAS에 Session정보 없으나 Session Server Session정보 있음.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession does not exist in Application Server.\nwosx\nWAS에 Session정보가 있으나 Session Server에 Session정보 없음.(Session Server 두 대를 재 기동 했을 경우 발생 할 수 있음.)\nSession does not exist in Session Server.\nwxsx\nWAS에 Session정보 없고, Session Server에 Session정보 없음.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession does not exist in any Server.\nwoxx\nWAS에 Session 정보가 있으나, Primary \u0026amp; Secondary session server와 연결 끊김.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nwxxx\nWAS에 Session 정보가 없고, Primary \u0026amp; Secondary session server와 연결 끊김.(WAS에 해당 Session이 Timeout 및 Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nsywz 이벤트와 wxso 이벤트가 한 Request에서 중복 발생되는 경우, 하나의 검색 결과에 두 이벤트가 모두 표시 된다.\n7.6.3. Trace Setting 다음은 Event/Time Trace 설정을 하는 화면이다.\nFigure 40. Trace Setting 화면 Trace 설정 항목은 아래와 같다.\nTable 118. Trace Setting 항목 항목 설명 비고 Trace On/Off\nTrace 여부\n재기동 없이 적용된다\nType\nUDP: Trace 생성 조건이 되면, UDP로 Manager에 Trace 정보를 전송\nLOG: Trace 생성 조건이 되면, Log로 Trace 정보 저장\nALL: Trace 생성 조건이 되면, UDP와 LOG 기능을 모두 사용\nData\nEVENT: Event가 발생한 경우 Trace 기록\nUID: 해당 UID인 Request만을 Trace로 기록\nUID\n입력된 UID인 Request만 Trace로 기록\n8. Topology 각 시스템의 구성현황을 한눈에 알아볼 수 있으며, 설치 및 설정기능을 제공하고, 자원 모니터링 및 기동/중지 제어를 할 수 있다.\nFigure 41. Topolopgy 화면 8.1. 화면 구성 System 영역, 토폴로지 영역, 자원 모니터링 영역, 서비스 트레이싱 영역으로 구분된다.\nSystem 영역\n등록된 System 리스트를 카드 형태로 제공한다.\n카드 내의 시스템 명 좌측의 아이콘은 시스템의 상태를 의미하는데 상태를 표시하는 기준은 시스템을 구성하는 Resource와 진단 결과에 따라 3단계로 나뉘어 나타낸다.\n파란색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Low, 진단 프로세스가 수행되지 않은 상태\n주황색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Middle 이하 또는 진단 프로세스 수행 결과가 Abnormal 상태\n붉은색 원 아이콘 : 시스템을 구성하는 일부 서버의 자원 사용량이 High 인 경우 또는 진단 프로세스 수행 결과가 Fault 상태\n시스템 명 하단의 시계 아이콘 은 시스템 내의 WAS들의 평균 응답시간을 의미하고, 사용자 아이콘 은 현재 사용자 수(최근 5분 동안) / 오늘 전체 사용자 수를 의미한다.\n자원사용량의 Low, Middle, High에 대한 기준은 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting \u0026gt; Dashboard 항목에서 변경 할 수 있다.\n토폴로지 영역\n시스템 별 노드와 서버 Instance 구성현황을 토폴로지 차트로 보여준다. 각 Node에 설치한 WEB, WAS, Session Server를 설치 및 실행, clustering 을 할 수 있고, 서버 상태 정보를 확인 할 수 있다. 뿐만 아니라 WEB Server-WAS 간 ,WAS-Session Server, WAS-Datasource간에 연동을 설정할 수 있다.\n자원 모니터링 영역\nNode와 Server의 CPU, Memory 등 상세 자원 모니터링 정보를 제공한다.\nService Tracing 영역\n특정 Client IP와 요청 Service Pattern을 기준으로 서비스를 트레이싱하여 Request 수, 평균 응답시간, 서비스 응답 error 수를 확인 할 수 있다.\n시스템목록 우측에 있는 설정 버튼 을 통해 다음의 사항을 변경 할 수 있다.\nChart Refresh Interval : 토폴로지 영역의 데이터 조회 주기\nRefresh Topology Chart : 토폴로지 영역의 차트 그리는 메타데이터 정합성 검증 및 복원\nSystem List System 목록에 보여줄 System 선택 및 순서 변경\nElements Show Endpoint : Endpoint 영역 표시 여부 설정\nShow Edge Info : Edge에 상세정보 표시 여부 설정\nShow Server Name : Server명 표시 여부 설정\nTransparency Node : 토폴로지 영역의 Node 투명도를 설정\nEdge : 토폴로지 영역의 Edge 투명도를 설정\n8.2. 토폴로지 영역 상세 토폴로지에서 뷰 모드에 따라 정보를 구분하여 보여준다.\nView All : 전체 정보를 보여준다.\nLow : 서버의 자원 사용량이 Low 인 인스턴스만 구분하여 보여준다.\nMiddle : 서버의 자원 사용량이 Middle 인 인스턴스만 구분하여 보여준다.\nHigh : 서버의 자원 사용량이 High 인 인스턴스만 구분하여 보여준다.\nStop/unknown : 중지된 인스턴스만 구분하여 보여준다.\n또 Cluster로 단위로 인스턴스들을 활성화하여 보여준다.\n진단기능이 설정되어 있는 WAS의 경우, 자원사용량을 체크하기 이전에 서버상태의 진단 결과가 Abnormal 또는 Fault 인지를 우선적으로 확인한다. 해당 상태로 판단되는 경우에는 High 상태로 표시해준다.\n8.2.1. Control [Edit: OFF] E2E (End to End)관점하에 Client부터 Database까지 상세한 모니터링 정보 및 제어 기능을 제공한다.\nFigure 42. Topolopgy Control [Edit: OFF] CLIENT 영역 Client는 사용자를 말하며, 사용자가 Web서버에 요청을 주고 받는 브라우저 화면 Rendering 시간 및 Script error 내용을 확인 할 수 있다.\nWEB 영역 WEB 영역에서는 설치된 WEB Node 와 WEB 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWeb Node는 Web 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWeb Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWeb Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Memory, Thread 상태 정보를 제공한다.\nWeb Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 3가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Service Control\nService Control은 무중단 적시배포 기능을 제공한다. 이것은 오류 서비스 발생시 이를 수정한 소스를 WAS에 긴급 배포하고 이 WAS를 호출 할 Web 서버(적시서버)를 구성한 후 오류가 발생된 서비스를 요청 받은 Web 서버들이 적시서버로 서비스를 포워딩하여 서비스가 정상적으로 제공되게 하는 방식이다.\n이 기능을 사용하려면 Web Server에서 LSC모듈이 사용되도록 설정이 되어 있어야 한다.(httpd-lsc.conf 파일에서 LscEnable을 On으로 변경 후 서버를 재기동한다.)\n제어시간, 제어조건(Header, Cookie, URL) 및 요청을 forwarding 할 서버(http://IP:Port)를 정의 후 저장하면 정의 된 내용에 따라 실시간으로 들어오는 요청을 해당 서버로 연결하여 서버 재기동 없이 서비스를 제공한다.\nMove to : Configuration\nCluster : Compare, Sync, Snapshot, Graceful Restart\nAPPLICATION 영역 APPLICATION 영역에서는 설치된 WAS Node 와 WAS 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWAS Node는 WAS가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWAS Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWAS Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Thread, Heap 상태 정보를 제공한다.\nWAS Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : Warning, CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 4가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Forced Stop\nManual Check : Thread Dump, Active Service Dump, Heap Dump\nMove to : Configuration, Monitoring\nCluster : Compare, Sync, Snapshot, Graceful Restart\nSESSION 영역 SESSION 영역에서는 설치된 Session Node 와 Session 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nSession Node는 Session 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nSession Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nSession Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Session Count, Heap 상태 정보를 제공한다.\nSession Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Session Count와 기본 정보\n제어 기능\nServer에 대해 크게 2가지 제어 기능을 제공한다.\nServer Control : Start, Stop\nMove to : Configuration\nDB 영역 DB 영역에서는 WAS와 연결된 Database 정보를 제공한다. Database는 RESOURCE 메뉴에서 등록되어 있어야 한다. 노드는 다른 영역과의 동일하게 표현하기 위해 가상의 노드로 표현하고 있다. 각 DB에 대한 모니터링 정보나 제어 기능은 제공하지 않는다.\nEdge 정보 연결선은 각 인스턴스 간, 또는 인스턴스와 Database간의 연결을 의미하며, 서버 평균 응답시간 및 연결된 Connection 수를 나타낸다.\nClient-WEB : Connection 수(Client 브라우저 렌더링 평균 완료 시간(ms)/Web Server 평균응답시간(ms))\nWEB-APPLICATION : Active Connection 수(WAS 평균응답시간(ms))\nAPPLICATION-DB : Active Datasource 사용률 (%)\nEnd to End 모니터링기능은 기본적으로 off상태로 설정되어 있다.\n따라서 Client-WEB, WEB-APPLICATION 사이의 브라우저 렌더링 평균응답시간 또는 Server의 평균응답시간을 보기 위해서는 다음의 순서대로 설정을 해주어야한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\nweb server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n8.2.2. Control [Edit: ON] 토폴로지 영역 우측상단에 Edit 버튼 을 선택하면 편집모드로 전환된다. 여기에서는 시스템 내의 노드와 인스턴스 설치 기능을 제공한다.\nFigure 43. Topolopgy Control [Edit: ON] Node 노드의 설치/수정/삭제 동작 방식은 node와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nNode 버튼 을 선택 후 설치하고자 하는 영역 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n수정\n변경하고자 하는 노드를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 노드를 선택한다.\n우클릭 버튼을 누르면 Hide, Unregister, Uninstall 메뉴 중 원하는 기능을 선택한다.\n노드 삭제시 노드 안에 설치된 서버는 한대도 없어야 한다.\nInstance 서버의 설치/수정/삭제 동작 방식은 server와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nInstance 버튼 을 선택 후 설치하고자 하는 영역의 노드 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n서버가 하나도 설치되어 있지 않은 노드 목록은 각 영역의 아래에 회색바탕 위에 있는 사각버튼으로 제공된다. 빈 노드에 서버를 설치하고 싶은 경우 해당 노드버튼을 더블클릭한다.\n수정\n변경하고자 하는 서버를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 서버를 선택한다.\n우클릭 버튼을 누르면 Unregister, Delete 메뉴 중 원하는 기능을 선택한다.\nEdge Edge는 서버와 서버의 연결을 의미하며 WEB-APPLICATION, APPLICATION-SESSION, APPLICATION-DB 영역 안의 서버들을 연결 할 수 있다.\n연결\nEdge 버튼 을 선택 후 연결하고자 하는 시작서버 선택 후 드래그하여 도착서버와 연결한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\nAPPLICATION-SESSION 간에 연결하는 경우, 실선은 Primary Server, 점선은 Secondary Server를 의미한다.\n연결 정보 변경\n변경하고자 하는 edge를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n연결 해제\n삭제하고자 하는 edge를 선택한다.\n우클릭 버튼의 메뉴인 Delete 버튼을 선택한다.\nCluster CLUSTER 메뉴에서 제공하는 Server Cluster기능을 설정 할 수 있다.\n생성\nCluster 버튼 을 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n변경\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역의 Delete 버튼 을 선택한다.\n8.3. 서비스 트레이싱 영역 상세 특정 서버의 IP 혹은 Service Pattern을 입력 후 Start 버튼 을 선택하면 입력한 정보를 기준으로 서비스를 트레이싱하여 Request 수, error를 확인 할 수 있다. 트레이싱 하는 동안 서비스 트레이싱 영역 우측에 Xlog 정보도 제공하므로 필요에 따라 xlog를 선택하여 상세한 정보를 확인할 수 있다.\n서비스 트레이싱 기능을 사용하기 위해서는 다음의 순서대로 설정을 해주어야 한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\ntracing 대상 Web server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; tracing 대상 Web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\ntracing 대상 WAS의 advertiser.conf파일에서 enable.send.profile.info값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n9. Admin 9.1. IAM Manager의 사용자 관리 및 사용자 별 메뉴 권한 관리 기능을 제공한다.\n9.1.1. Users (사용자 관리) 사용자 목록 ADMIN \u0026gt; Users 메뉴에서 Manager 사용자의 생성, 수정, 삭제 기능을 제공한다.\nFigure 44. Users 화면 사용자 관리의 속성은 아래와 같다.\nTable 119. 사용자 관리 속성 항목(*는 필수값) 설명 비고 Use ID(*)\n사용자 식별자\nUser Name(*)\n사용자 이름\nPassword(*)\n사용자 비밀번호\n비밀번호는 특수문자, 숫자, 영문자 혼합의 최소 8자 이상이어야 한다\nUpdater\n사용자 데이터 수정 및 생성자\nLast Update\n사용자 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n기본적으로 관리자 권한을 가진 계정을 두 개 제공한다.(비상용) 제공되는 계정 외에 사용자를 추가하여 사용하기를 권장한다.\n사용자 등록 New 버튼 을 클릭하여 신규 사용자 등록을 준비한다.\n사용자 ID, 사용자 명, 사용자 패스워드를 입력한다.\n사용자 패스워드는 암호화되어 저장된다.\n패스워드는 글자수가8~20자, 영어 대소문자, 숫자, 특수문자(!@#$%^*+=-) 조합으로 작성한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nPassword 암호화는 해쉬 알고리즘(SHA-512)을 사용한다.\n사용자 수정 수정할 사용자를 선택한다.\n수정 버튼 을 클릭하여 사용자명, 사용자 패스워드를 변경한다.\n사용자 패스워드는 암호화되어 저장된다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nManager 에 로그인시 7 번 이상 실패하면 해당아이디는 잠김 상태가 되어 사용할 수가 없다.\n잠김 상태를 해제하기 위해서는 사용자 관리 화면에서 해당 아이디의 패스워드를 수정해주어야 한다.\n패스워드 수정을 위해 Manager 에 로그인 한 계정이 없는 경우에는, $LENA_HOME/bin/reset-manager-pw.sh 를 실행하여 패스워드를 수정할 수 있다.\n사용자 삭제 삭제할 사용자를 선택한다.\n삭제 버튼 을 클릭하여 사용자를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\n사용자가 1명 남은 경우는 삭제할 수 없다.\n9.1.2. Auths (권한관리) Manager는 메뉴 별 권한 관리를 위해 권한 그룹을 생성해야 한다. ADMIN \u0026gt; Auths 메뉴를 통해 권한 그룹을 생성, 수정, 삭제할 수 있다.\n권한 목록 Figure 45. Auths 화면 권한 관리의 속성은 아래와 같다.\nTable 120. 권한 관리 속성 항목(*는 필수값) 설명 비고 Auth ID(*)\n권한 식별자\nAuth Name(*)\n권한 이름\nDescription\n등록된 권한에 대한 설명\nUpdater\n권한 데이터 수정 및 생성자\nLast Update\n권한 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n권한 생성 New 버튼 을 클릭하여 신규권한 등록을 준비한다.\n권한 ID, 권한 명, 권한 설명을 입력한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다\n권한 수정 수정할 권한을 선택한다.\n수정 버튼 을 클릭하여 권한 명, 권한 설명을 변경 한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n권한 삭제 삭제할 권한을 선택한다.\n삭제 버튼 을 클릭하여 권한을 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n9.1.3. User-Auth Mapping (사용자 권한 관리) Manager 사용자는 메뉴 사용 권한 획득을 위해 최소한 1개의 그룹에 소속되어 있어야 한다. 관리자는 권한 그룹을 선택하여 사용자를 배속시킬 수 있다. \"권한 관리\" 화면을 통해 등록한 권한 중 하나를 선택하고 여러 셔플 버튼을 사용하여 사용자의 권한을 제어한다.\n사용자 권한 조회 Figure 46. User-Auth Mapping 화면 사용자 권한 관리의 속성은 아래와 같다.\nTable 121. 사용자 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한 관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nID\n사용자 식별자\nName\n사용자 이름\n사용자 권한 맵핑 사용자를 배속시킬 권한을 선택한다.\n권한 선택 시 선택 가능 사용자와 선택된 사용자가 화면에 출력된다.\n선택 가능 사용자를 선택한다.\n사용자를 배속 시키거나 제외 시킨다.\n단일 우측 셔플 버튼 을 클릭하여 선택한 사용자를 배속시킨다.\n전체 우측 셔플 버튼 을 클릭하여 모든 사용자를 배속시킨다.\n단일 좌측 셔플 버튼 을 클릭하여 선택한 사용자를 제외시킨다.\n전체 좌측 셔플 버튼 을 클릭하여 모든 사용자를 제외시킨다.\nSave 버튼 을 클릭하여 사용자 권한 관리 정보를 저장한다.\n9.1.4. Menu-Auth Mapping (메뉴 권한 관리) LENA Manager에서 생성한 권한 별로 접근 가능한 메뉴를 설정할 수 있다. 권한 선택을 통해 생성한 권한 중 메뉴를 설정할 하나의 권한을 선택한다. LENA Manager에 등록된 모든 메뉴를 보여주는 메뉴 목록 중 접근 제어를 설정할 메뉴를 선택하고 메뉴권한을 설정한다.\n메뉴 권한 조회 Figure 47. Menu-Auth Mapping 화면 메뉴 권한 관리의 속성은 아래와 같다.\nTable 122. 메뉴 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nMenu Name\nLENA Manager에 등록된 메뉴 중 좌측 메뉴 목록에서 선택한 메뉴 이름\nAuth\n선택한 권한의 메뉴접근가능여부 표시\nDefault \"N\"\n\"SERVER\", \"CLUSTER\", \"RESOURCE\" 메뉴의 하위 화면에서 Node, Server, Server Cluster, Resource 을 추가할 경우 자동으로 \"메뉴 권한 관리\" 화면의 메뉴 목록에 추가한 항목이 조회된다.\n따라서 신규 메뉴를 추가하고 싶을 경우 \"SERVER\", \"CLUSTER\", \"RESOURCE\" 하위 화면에서 각 항목을 등록 및 생성하면 된다.\nServer에 대한 권한을 변경해야 할 경우 아래 메뉴에 동일하게 권한을 반영해야 한다.\n\"SERVER\" 하위의 해당 Server\n\"CLUSTER\" 하위의 해당 Server\n만약 이를 지키지 않고, Server Cluster 하위의 일부 Server 메뉴에 대해 다음과 같이 권한을 설정할 경우를 고려해보자.(예시, 권장사항 아님)\n\"SERVER\" 하위의 해당 Server : 권한 있음\n\"CLUSTER\" 하위의 해당 Server : 권한 없음\n이 경우 메뉴 및 Server Cluster, Server 권한은 아래와 같이 표현된다.\nServer Cluster를 구성하는 Server 개수 : \"CLUSTER\" 하위 Server 권한 기준으로 권한이 있는 Server 개수\nServer Cluster의 하위 메뉴 : \"CLUSTER\" 하위 Server의 메뉴 권한 기준으로 권한이 있는 Server만 보임\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 목록 : Server Cluster의 구성 정보를 나타내야 하므로, \"CLUSTER\" 하위 권한과 무관하게 모든 Server 목록 조회\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 상세 링크 : 개별 Server에 대한 접근이므로, \"SERVER\" 메뉴 하위의 Server 권한이 없는 Server에 대한 접근을 막음\n메뉴 권한 맵핑 권한을 설정할 메뉴를 선택한다.\n권한 선택 시 메뉴에 대한 권한까지 조회된다.\n메뉴 목록에서 권한을 설정할 메뉴를 선택한다.\n메뉴 선택 시 메뉴 권한 목록에 메뉴 권한이 표시된다\n권한 변경이 필요할 경우 Y 혹은 N을 선택한다.\nSave 버튼 을 클릭하여 메뉴 권한 정보를 저장한다.\n9.2. License Manager를 통해 각 Node별 현재 적용된 라이선스를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.2.1. License 목록 License화면을 열면 Node별로 현재 적용된 License의 목록을 조회할 수 있다.\nLicense의 상태는 Status 항목을 살펴보면 확인 할 수 있다.\nFigure 48. License의 목록 화면 9.2.2. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 123. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Standard\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n라이선스의 만료기간 15일 전부터 알림메세지를 제공한다. 알림메세지는 Manager 우측 상단의 종 아이콘 에서 확인 할 수 있다.\n9.2.3. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.2.4. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 49. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh 이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/dev Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Standard CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/dev CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.2.5. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.2.6. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.3. License(Scaling) Manager를 통해 현재 적용된 Manager License를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.3.1. Manager License Manager License의 상태, 사용량, 사용기간을 확인할 수 있다. Upload Manager License 버튼 을 통해 License 파일을 업로드할 수 있다. 업로드된 License 는 Scale-out 시 VM 으로 전송되어 서버 기동시 인증역할을 수행한다.\n9.3.2. License 목록 Node별로 현재 적용된 License의 목록을 조회할 수 있다. License의 상태는 Status 항목을 보면 확인할 수 있다.\nFigure 50. License의 목록 화면 9.3.3. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 124. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Enterprise, Standard, Developer\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n9.3.4. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.3.5. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 51. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh (Windows 버전의 경우 check-license.bat)이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/1.3 Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Enterprise CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/1.3 CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.3.6. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.3.7. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.4. Security (서비스 제어) Application Server에 IP또는 URL기반으로 사용자 요청을 제한하는 기능이다.\n9.4.1. Rule Setting (Rule 설정) 특정 IP나 URL에서 요청을 제어하고 싶은 경우 화면을 통해 신규 Rule을 설정한다. 신규 Rule 설정 및 Rule 삭제의 편의성을 제공하기 위해 검색기능을 제공한다. 전체 Application에 적용되는 Server속성은 에러페이지로 처리할 수 있다\nFigure 52. Rule Setting 화면 Rule 목록의 Use 컬럼은 해당 Rule이 Application Server에 적용되어 있는지 여부를 나타낸다.\nRule 추가 시 설정 가능한 속성은 아래와 같다.\nTable 125. Rule 추가 시 설정 가능한 속성 항목(*는 필수값) 설명 비고 Rule Name(*)\n추가하는 Rule의 이름\nDescription\n추가하는 Rule에 대한 설명\nRule Type\n제어할 단위\nIP, URL\nAllow IP(*)\n허가할 요청 IP\n정규식 형태로 입력 가능\nDeny IP(*)\n거부할 요청 IP\n정규식 형태로 입력 가능\nControl Time(*)\nRule을 적용할 시간단위\nError Message(html)(*)\n제어로 인해 Filtering된 요청에 대한 출력할 에러 페이지\n제어유형이 \"IP with DateTime\"인 Rule에 Proxy Server로 중계되는 Application Server 를 적용한다면, Proxy Server의 보안적 특성으로 인해 User IP를 구할 수 없어 Rule 적용이 되지 않을 수 있다.\n생성된 Rule 중 적용된 Rule은 삭제 할 수 없다.\n9.4.2. Rule Applying (Rule 적용) 추가된 Rule 중 하나를 선택하여 Application Server에 적용한다. 적용 편의성을 위해 Rule유형, 적용단위, Rule명에 대한 검색기능을 제공한다.\nRule 목록에서 하나를 선택하여 Rule 적용에서 셔플 버튼들을 이용하여 적용 대상을 선택하고, On/Off 버튼 을 클릭하여 적용 및 저장한다. 적용 대상에서 제외를 하고 싶을 경우에도 셔플 버튼들을 이용하여 제외시킨다.\nFigure 53. Rule Applying 화면 Rule 현황 및 적용 화면에서 사용되는 속성들은 Rule설정 화면과 유사하며 아래의 속성들은 추가적인 속성들이다.\nTable 126. 추가적인 속성 항목 설명 비고 Node Name\n등록된 Node group 하위의 Node 명\nServer Name\n등록된 Node하위의 Server 명\n선택한 Rule에 신규 대상이 추가될 경우 적용 단위에 따라 server.xml 혹은 context.xml 에 추가되고, 적용된 대상에서 제외할 경우 위의 설정 파일에 추가된 Rule 설정이 삭제된다.\n9.4.3. Service Control Log (Rule 적용결과 조회) Rule이 적용된 항목들에 대한 처리 결과가 목록으로 출력된다. 처리 결과 확인의 편의성을 위해 Rule유형, 적용단위, Rule명, 로그시간에 대한 검색기능을 제공한다.\nFigure 54. Service Control Log 화면 처리 목록에서 사용되는 속성들은 아래와 같다.\nTable 127. 로그 정보의 항목 항목 설명 비고 Controlled Date\nRule설정이 적용된 요청의 처리시간\nRemote Address\n처리된 원격지 주소\nRequest URL\n처리된 요청의 URL\nHTTP Method\n처리된 요청의 HTTP Method\nRule 명\n요청을 처리하는데 적용된 Rule 이름\nRule 이력의 경우 Manager의 /conf/manager.conf 설정파일 내 access filter log 취합 Listener 사용여부를 true로 설정해야 한다. Log의 경우 각 서버의 logs 폴더 내 access_filter.log.\"날짜\".txt 파일에 기록되며 주기적으로 Manager 가 각 server 의 log 를 취합하여 Database 에 저장한다. (이때 취합된 Log 는 access_filter_log.\"날짜\".txt.gathered 파일에 backup된다) Database에 취합된 Log는 처리목록 화면에서 확인 가능하다.\nmanager.conf 내 설정 파일 항목의 설정 예는 아래와 같다.\n#access filter log 취합 리스너 사용여부 및 동작주기(초) default는 false, 60 accessfilter.listener=false accessfilter.interval=60 9.5. Patch 설치된 LENA에 대한 기능 개선 및 버그 수정을 위한 패치를 제공한다.\nPatch는 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nPatch 기능은 CLI 및 Management UI를 통하여 실행이 가능하며, 패치 시 서비스에 문제가 발생하는 경우 Restore 기능을 통하여 원복 할 수 있다.\n패치 순서는 다음과 같다.\n패치파일 업로드\nManager 패치 적용\nNode 패치 적용\n서버(Application Server, Session Server) 패치 적용\n패치 Commit\n복구 순서는 다음과 같다.\n서버 패치 복구\nNode 패치 복구\nManager 패치 복구\n복구 Commit\nCLI로 패치하는 방식은 Appendix를 참고한다.\n9.5.1. Overview 패치파일의 업로드 기능을 제공하며, Manager와 각 Node별 Node Agent의 패치 반영상태 정보를 조회한다.\nPatch 파일 업로드 Patch Info 영역에서는 매니저에 업로드 된 패치파일 중, 최상위 버전의 상세정보를 표시한다.\nTable 128. Patch Info 항목 항목 설명 비고 Patch File Ver.\n패치파일의 버전 정보\nRelease Date\n패치파일의 배포 일자\nPatch Note\n상세(노트) 버튼 을 눌러 상세한 패치노트 내용을 조회한다.\n패치노트 팝업표시\n패치파일을 업로드하는 과정은 다음과 같다.\n업로드 버튼 을 클릭한다.\n패치 가능 상태인지를 확인 후 정상이면 패치파일 업로드를 위한 팝업을 띄운다\n패치 가능 상태 조건 Manager에 등록된 Node가 모두 기동상태여야한다.\npatch가 commit상태여야 한다.\nmanager 기준으로 node와 server가 모두 같은 버전이어야 한다.\nmanager에 등록되지 않은 서버가 존재하지 않는다.\nunregister된 서버존재시 manager에 등록\n노드엔진 하위 servers폴더에 서버가 존재시 해당 폴더 삭제\n업로드 할 패치파일을 선택하면 자동으로 업로드가 실행된다.\n업로드 가능한 파일은 zip과 tar.gz이며 이외의 파일을 업로드 할 경우 에러메시지가 출력된다.\nManager Patch Manager Info 영역에서는 Manager의 패치상태를 표시하고, Manager의 패치 및 복구를 실행할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 129. Manager Info 항목 항목 설명 비고 Patch Status\nManager의 패치 적용 상태\n해 아이콘 : Manager가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Manager가 최신 패치를 적용하지 않은(patch available) 상태\nCurrent Ver.\nManager의 현재 버전\nPatch Ver.\nPatch 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nManager Info화면의 History 항목에 표시된 상세(노트) 버튼 을 클릭하면 팝업창을 통해 패치 실행 이력을 확인할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 130. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPervious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\nPatch Manager Info 하단에 있는 Patch 버튼 을 클릭하면 최신 패치를 적용한다.\nHandwork에 기술된 내용 패치실행 후 필요한 수작업이므로, 기술된 내용을 실행하여 반영하여야 한다. Handwork 작업 후 팝업창 하단의 체크박스를 해제하면 Manager Patch Info화면의 Handwork 버튼이 흰색으로 변경된다.\nManager 패치를 적용하면 Node와 Server의 패치 적용 후 Commit 버튼 을 누르기 전까지 Node의 설치/등록, Server의 설치/등록/복제 등의 기능을 수행 할 수 없다.\n패치 후 반드시 브라우저 캐시를 삭제하여야 패치버전의 Manager를 사용할 수 있다.\nRestore Manager Info 하단에 있는 Restore 버튼 을 클릭하면 패치 이전 버전으로 복구된다.\n복구는 Manager에 등록된 모든 노드의 패치 상태가 Patch Available 인 경우에 수행한다.\nCommit Manager, Node, Server의 모든 패치를 적용 후 Commit버튼을 눌러 확정한다. 확정 이후에는 이전버전으로 되돌릴 수 없다.\nNode Patch Node Patch Status 영역은 매니저에 등록된 node에 대해서, 최신패치가 적용된 서버의 개수와 패치가 적용되지 않은 서버의 개수를 종합해서 보여준다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다\nTable 131. Node Patch Status 항목 항목 설명 비고 Status\nnode의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Node Agent가 최신 패치를 적용하지 않은(patch available) 상태\n반구 아이콘 : Node Agent는 최신 패치를 적용하였으나, Node 에 설치된 Server에는 최신 패치가 적용되지 않은 상태\n느낌표 아이콘 : Node agent가 lena-manager와 호환이 되지 않는 상태.\nNode name\nnode명\nAddress\nnode의 IP\nNode Version\nNode의 현재 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nWAS\nWeb Application Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nSession Server\nSession Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nNode Patch 버튼 을 클릭하면 제공되는 팝업창에서 Node 선택 후 해당 Node에 대한 패치 또는 복구를 진행 할 수 있다.\nWindow OS 환경에 설치되어 있는 Node는 Manager가 아닌 CLI를 통해 패치를 수행한다.\nServer Cluster Patch Status Server Cluster 별 Patch 현황을 표시한다.\n화면에 표시되는 각 항목에 대한 설명은 다음과 같다.\nTable 132. Server Cluster Patch Status 항목 항목 설명 비고 Status\ncluster의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : 일부 서버가 최신 패치를 적용하지 않은(patch available) 상태\nCluster Group\ncluster그룹명\nCluster Name\ncluster이름\nLENA Patch\nApplication Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch available : 최신패치가 적용되지 않은 서버의 개수\n9.5.2. WAS Node/Cluster에 포함된 Application Server에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위, cluster 단위)으로 검색한다.\nTable 133. Application Server Patch Status 항목 항목 설명 비고 Patch Status\nApplication Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nApplication Server가 설치되어있는 Node명\nName\nApplication Server 이름\nType\nApplication 서버 타입\nStandard : Application Server Standard Edition\nEnterprise : Application Server Enterprise Edition\nIP\nApplication Server가 설치된 Node의 IP\nHTTP Port\nApplication Server의 HTTP Connector port\nAJP Port\nApplication Server의 AJP Connector port\nStart/Stop\nApplication Server의 기동 및 중지 실행\nCurrent Ver.\nApplication Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 134. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.5.3. Session Server Session Server들에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위)으로 검색한다.\nTable 135. Session Server Patch Status 항목 항목 설명 비고 Patch Status\nSession Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nSession Server가 설치되어있는 Node명\nName\nSession Server 이름\nType\nSession 서버 타입\nPort\nSession Server의 port\nStart/Stop\nSession Server의 기동 및 중지 실행\nCurrent Ver.\nSession Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 136. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.6. Preferences 9.6.1. Action Trace Manager를 통해 각 사용자가 수행하는 추가/수정/삭제 작업의 수행 이력은 로그로 남는다. Action Trace에서는 이러한 수행이력을 조회/추적하는 기능을 제공한다.\nFigure 55. Action Trace 화면 이력 조회 조회 조건을 입력 후 클릭하면 이력을 조회할 수 있다. 목록 중 하나를 선택하면 상세정보도 확인할 수 있다.\n조회 화면에 표기되는 항목은 아래와 같다.\nTable 137. 이력 상세 정보 항목 항목 설명 비고 Trace Date\nAction을 수행한 시간\nStatus\nAction 수행 결과\n성공 : Success, 실패 : Fail\nClient IP\nAction을 수행한 사용자의 IP 주소\nUser ID\nAction을 수행한 사용자 ID\nAction\n수행한 활동(Action) 명\nMethod\nAction에 사용된 Method 이름\nRequest\nLENA Manager Http Request URL\nInput\nHttp Request Input 파라미터\n위 항목 중 \"Input\" 은 Request 파라미터를 그대로 저장하기 때문에, Server ID, Node ID, Server Cluster ID가 데이터 관리용 Key값 (일련번호, 캡쳐화면에서 \"serverID=31\"로 표시된 부분)으로 보여진다. 해당 Server/Node/Cluster의 상세정보를 조회하기 위해서는 \"Action Trace Detail\" 정보 하단에 있는 \"Search ID\" 기능을 활용한다. 이 기능의 입출력 항목은 아래와 같다.\nTable 138. Search ID 기능의 입출력 항목 항목 설명 비고 ID\n좌측 Combo : serverId / nodeId / serverCluster Id 중 택일\n우측 : Input 에 있는 ID 값을 입력\n입력항목\nData\n검색된 Server/Node/Cluster 정보\n출력항목\n9.6.2. Documentation LENA 소개자료와 매뉴얼을 다운로드 받을 수 있다.\n9.6.3. Manager Environment Manager 환경 설정을 위한 정보를 제공한다.\nManager Environment Manager 환경 설정 정보 중 env-manager.sh/bat에 저장하는 정보를 제공한다.\nManager Allow IPs : Manager에 접근 가능한 IP항목을 설정한다.\nJava Home Path : Manager에서 사용하는 java home 경로를 설정한다.\nManager Configuration Manager 환경 설정 정보 중 manager.conf에 저장하는 정보를 제공한다.\n기본적으로 제공하는 2가지 항목을 제공한다.\nuse JMX for Server Status : JMX를 통해 서버 상태 정보를 조회할지 여부(default : false)\nuse Server Delete Protection : Manager에서 서버 삭제 기능 사용금지 여부(default : false)\n화면 우측의 설정 버튼 을 클릭하면 상세 정보를 확인 및 변경 할 수 있다.\nMetadata Refresh Topology 메뉴에서 시스템 별 구성정보를 topology 차트로 그리기 위해 사용되는 메타데이터의 정합성 검증 및 복원 기능을 수행한다.\nReset manager address of all registered nodes Manager에 등록된 노드들에게 변경된 Manager Address를 일괄적으로 변경시켜주는 기능을 제공한다.\n9.6.4. Manager HA Manager 이중화에 대한 설정을 관리하고, 이중화 상태에 대한 현황조회를 할 수 있다.\nManager 이중화는 Primary와 Secondary로 구분되어 기동된 LENA Manager간의 Database와 주요 파일들을 동기화 함으로써 Prmary Manager가 비가동시 임시적으로 Secondary Manager 가 Primary의 서비스를 대행하는 기능이다.\nSecondary Manager가 대행하는 서비스의 기능은 다음 두가지 이다.\nServer Cluster - Scaling 서비스\nService Cluster - Server Template 및 License 다운로드\nManager 이중화를 위해서는 각 Manager의 역할에 따라 환경설정 파일인 'env-manager.sh' 파일의 다음 부분을 수정하여 기동하여야 한다.\nLENA Manager 환경변수 파일 (env-manager.sh) 설정 CATALINA_OPTS=\u0026quot; ${CATALINA_OPTS} -Dspring.profiles.active=ha-none\u0026quot; 위 파일에서 설정되는 spring.profiles 프로퍼티의 값은 다음 3가지 설정이 가능하며, 잘못 기입되었을 경우 Manager가 정상기동 되지 않는다.\nha-none : 기본 값으로, 이중화를 하지 않는 단독 실행형 Manager\nha-primary : 이중화시 Primary Manager 역할 수행\nha-secondary : 이중화시 Secondary Manager 역할 수행\nLocal Manager 현재의 Manager 정보를 제공한다. Manager의 역할에 관계없이, 현재의 관리화면을 제공하는 Manager 자신을 Local Manager, 원격지 Manager를 Remote Manager라 칭한다.\nTable 139. Local Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 항상 Active 상태이다.\nStart Time\nLocal Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nLocal Manager에 설정된 Remote Manager의 연결정보가 실제 Remote Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nRemote Manager 원격지 Manager의 정보를 제공한다.\nTable 140. Remote Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 정상적으로 연결되어 있을 경우 Active 로 표기되며, 연결되어 있지 않을 경우 InActive로 표기된다.\nStart Time\nRemote Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nRemote Manager에 설정된 Remote Manager의 연결정보가 실제 Local Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nAddress\nRemote Manager의 주소로 연결정보를 설정할때 사용된다.\nHttp Port\nRemote Manager의 Http 서비스 Port로 연결정보를 설정할때 사용한다.\nConnection Test 버튼 을 눌러 Remote Manager의 Address와 Http Port를 이용하여 실제 Connection이 가능한지 테스트를 할 수 있다.\nPrimary Manager와 Secondary Manager는 Pairing을 통해 상호 동기화를 위한 정보를 설정할 수 있다. Sync Settings 버튼 을 눌러 Remote Manager와 설정정보를 동기화 하는 Paring을 수행할 수 있다.\nLatest Sync Status 이중화된 Manager간 Database 및 File 동기화 최신 이력을 조회할 수 있다.\nTable 141. Latest Sync Status 정보 항목 항목 설명 비고 Type\nDatabase 또는 File\nStatus\n정상일때 초록색 ○ 아이콘, 오류 발생시 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nTime\n동기화 시도 시간\nResult\n동기화 성공여부\nMessage\n동기화 수행시 생성된 결과 메시지\n목록 버튼\n목록 버튼 을 눌러 이전 동기화 이력을 조회 할 수 있다. 이력은 총 10개 까지 표기되며, Manager 기동 후의 이력만 표기되고, Remote Manager에서 발생한 동기화 정보는 정상 연결시에만 표기된다.\n10. Appendix 10.1. LENA 시스템 요구사항 LENA를 설치하고 사용하기 위한 최소 요구사항은 다음과 같다.\n구분 JVM Memory Disk 비고 기본 설치 패키지\nJDK 1.8 이상\n1 GB 이상\nroot를 제외한 용량 800 MB 이상\n각 구성요소 설치 파일 제공\nOS / CPU\nOS CPU (2 core 이상 권장) Linux 계열 (Kernel 2.6이상)\nIntel x86 Series (64-bit)\nSolaris 9, 10, 11\nSPARC / Intel X86 Series (64-bit)\nHP-UX 11.x, 11i, 11iV2, 11iV3\nPA-RISC / Intel Itanium 64\nIBM AIX 5L, 6L, 7L\nPOWER Systems (64-bit)\nMS Windows 2008, 2012, 2016, 2019\nIntel x86 Series (64-bit)\nLENA Edition File Size LENA Enterprise Edition\n400 MB\nLENA Standard Edition\n200 MB\n구분 JVM Disk Space 최소 Memory 기본 Memory Manager\nJDK 1.8 \u0026#43;\n약 450 MB\n512 MB\n1 GB\nNode Agent\nJDK 1.8 \u0026#43;\n-\n64 MB\n256 MB\nApplication Server\nJDK 1.8 \u0026#43;\n약 100 MB\n512 MB\n2 GB\nWeb Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n-\nSession Server\nJDK 1.8 \u0026#43;\n약 50 MB\n512 MB\n1 GB\n10.2. Manager 지원 브라우저 Manager의 기능을 사용할 수 있는 브라우저로는 Chrome/Edge(버전 70 이상), Firefox(버전 62 이상) 이 있다. IE의 경우 일부기능이 정상적으로 동작하지 않기 때문에 다른 브라우저를 사용하기를 권장한다. 브라우저 권장 최소 사이즈는 1680*900 이다.\n10.3. 지원 Spec별 버전 Specification Version 비고 Java Development Kit (JDK)\n1.8~\nJava Servlet\n3.1\nJava Server Pages (JSP)\n2.3\nExpression Language (EL)\n2.2\nJavaServer Pages Standard Tag Library (JSTL)\n1.2\nEnterprise JavaBeans (EJB)\n3.2\nJava Message Service (JMS)\n1.1\nJava Transaction API (JTA)\n1.2\nJava API for RESTful Services (JAX-RS)\n2.0\nJava API for XML Web Services (JAX-WS)\n2.2\n10.4. Manager DB파일 백업 Manager의 내부데이터 관리를 위한 HSQL DB의 파일은 주기적으로(1일) 백업파일을 생성하고 있다. 생성위치는 ${LENA_HOME}/repository/backup/lena-manager/script 이다.\n기본적으로 30일 이전 백업정보는 삭제하도록 되어 있는데 보관기간을 변경하고 싶은 경우, ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, dbbackup.size=보관기간 을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.5. Manager 의 내부이력 삭제 Manager가 내부적으로 남기는 이력은 주기적으로 삭제하도록 스케쥴링이 되어 있다. 삭제하는 정보는 Action Trace 이력과 Server History 이력이다.\n기본적으로 Action Trace이력은 30일까지만 보관하고, Server History 이력은 90일까지 보관하고 있다. 이 보관기간을 변경하고 싶은 경우 ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, actiontrace.size=보관기간, serverhistory.size=보관기간을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.6. Manager 의 admin 패스워드 초기화 Manager의 admin사용자 패스워드를 분실하거나 비밀번호 오류횟수가 초과하였을 경우에는 console를 통하여 패스워드를 초기화해야 한다.\nManager가 설치된 장비에 console(telnet or ssh)로 접속한다.\n$LENA_HOME/bin/reset_manager_pw.sh 파일을 실행한다.\n패스워드를 초기화 할 user인 admin을 입력한다.\n초기화할 패스워드를 입력한다. 단, 패스워드는 8자리이상, 알파벳/숫자/특수문자의 조합으로 입력한다. 패스워드는 보안을 위해 console에 표시되지 않는다.\n[bin]$ ./reset-manager-pw.sh ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------- | 1. USER_ID is the user id to reset | ex : admin | 2. NEW_PASSWORD is the password to change | - password rule #1 : more than 8 length | - password rule #2 : inclusion of one or more alphabet characters | - password rule #3 : inclusion of one or more numerical digits | - password rule #4 : inclusion of one or more special characters +------------------------------------------------------------------------------- Input USER_ID for installation. (q:quit) administrator Input NEW_PASSWORD for installation. (q:quit) The password has been changed successfully. Execution is completed.!! 10.7. LENA 설치 권장 OS파라미터(CentOS기준) LENA 설치 시 OS파라미터는 max user processes 값을 8192 이상으로 설정하는 것을 권장한다.\nparameter 권장값 기본값 max user processes\n8192\n1024\nopen files\n8192\n1024\nCentOS기준으로 max user processes 설정은 다음과 같이 ‘ulimit –a’ 명령어를 실행하여 확인을 할 수 있다.\n$ ulimit -a + core file size (blocks, -c) 0 + data seg size (kbytes, -d) unlimited + scheduling priority (-e) 0 + file size (blocks, -f) 8192 + pending signals (-i) 14891 + max locked memory (kbytes, -l) 64 + max memory size (kbytes, -m) unlimited + open files (-n) 1024 + pipe size (512 bytes, -p) 8 + POSIX message queues (bytes, -q) 819200 + real-time priority (-r) 0 + stack size (kbytes, -s) 10240 + cpu time (seconds, -t) unlimited + *max user processes (-u) 1024* + virtual memory (kbytes, -v) unlimited + file locks (-x) unlimited CentOS를 기준으로 명령어 ‘ulimit –u’와 ‘ulimit –n’로 프로세스 수와 오픈파일 개수를 설정할 수 있다. 위 변경사항을 영구적으로 반영하기 위해서는 각 유저의 profile (.profile, .bash_profile)에 ulimit 실행명령을 추가하거나, 강제 설정할 수 있다 (CentOS 기준).\n*$ cat $HOME/.bash_profile* *.. (생략)* *ulimit -u 8192* *ulimit -n 8192* 또 다른 설정 방법으로는 /etc/security/limits.conf (CentOS 기준) 파일을 열어서 프로세스 최대수(nproc)와 오픈파일 최대수(nofile)를 설정한다.\n*$ cat /etc/security/limits.conf* *.. (생략)* ** soft nproc 8192* ** hard nproc 8192* ** soft nofile 8192* ** hard nofile 8192* 10.8. LENA 주기적으로 증가하는 파일 항목 경로 삭제주기 월 예상 증가량 비고 Manager정기점검로깅\nLENA_HOME/repository/monitoringDB/maintenance\n6개월\n10MB\n서버 6대 기준의 예상 증가량\n자동삭제\nManager모니터링, 진단리포트\nLENA_HOME/repository/monitoringDB/{yyyyMMdd}\n7일\nN/A\n자동삭제\nManager진단통계\nLENA_HOME/repository/monitoringDB/statistics\n영구\n1MB 이하\nManagerDB백업파일\nLENA_HOME/repository/backup/database\n30일\n100MB 이하\n자동삭제\nManager로그\nLENA_HOME/logs/lena-manager\n30일\n100MB 이하\n자동삭제\nAgent로그\nLENA_HOME/logs/lena-agent\n30일\nN/A\n자동삭제\nInstaller로그\nLENA_HOME/logs/lena-installer\n영구\n1MB 이하\nPatch적용파일\nLENA_HOME/etc/patch\n영구\nN/A\n패치시에만 생성됨\n패치완료후 삭제가능\nPatch백업파일\nLENA_HOME/etc/backup/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\nPatch로그\nLENA_HOME/logs/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\n서버인스턴스로그\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/logs\n영구\n부하에 따라 판단\n경로변경가능\n서버인스턴스 히스토리\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/history\n영구\nN/A\nManager를 통해 서버설정 변경시에 설정파일 변경분만 생성\n서버인스턴스 스냅샷\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/snapshot\n영구\nN/A\nManager를 통해 Cluster Snapshot을 생성하는 경우만 생성\nWAS 덤프파일\nLENA_HOME/repository/monitoringDB/dump\n영구\nN/A\nManager를 통해 WAS 덤프를 수행하는 경우에만 생성\n10.9. Patch CLI (Command Line Interface) Patch는 설치된 LENA에 대한 기능 개선 및 버그 수정을 위해 제공되는 기능이다. 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nManagement UI를 통해 실행하는 방법은 patch 에서 제공한다. 여기에서는 CLI를 통해 패치 및 복원하는 방법에 대해 설명한다.\n10.9.1. 패치파일 업로드 및 압축해제 전달받은 패치파일을 LENA가 설치된 서버로 FTP등을 이용하여 개별적으로 업로드 한다.\n업로드 한 파일은 아래와 같은 위치에 압축을 해제하고 버전명으로 디렉토리의 명칭을 변경한다.Manager를 통하여 업로드하면 자동으로 해당 경로에 압축이 해제된다.\n노드/서버 패치파일 경로: /engn001/lena/1.3.1/etc/patch/{패치버전} Manager 패치파일 경우: /engn001/lena/1.3.1/repository/patch/{패치버전} 10.9.2. Patch Node Patch patch.sh를 실행하여 Node를 패치한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-node Node 패치과정에서 Node는 재기동 된다.\n[bin]$ ./patch.sh lena-node ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:06:43:915 [INFO] Patch started to lena-node 2018-05-28 14:06:47:075 [INFO] Stopping node-agent ... 2018-05-28 14:06:52:595 [INFO] Starting node-agent 2018-05-28 14:06:52:748 [INFO] Patch completed to lena-node ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140643905 PATCH_TARGET : lena-node PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Manager Patch patch.sh를 실행하여 Manager를 패치한다.\nmanager 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-manager Manager 패치과정에서 Manager는 재기동 된다.\n[bin]$ ./patch.sh lena-manager ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:05:32:752 [INFO] Patch started to manager 2018-05-28 14:05:36:032 [INFO] Stopping manager ... 2018-05-28 14:05:46:062 [INFO] Starting manager 2018-05-28 14:05:47:066 [INFO] Patch completed to manager ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140532668 PATCH_TARGET : lena-manager PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Server Patch patch.sh를 실행하여 개별적인 서버를 패치한다.\nnode가 설치된 서버에서 실행하여야 하고, LENA 서버 설치 유형별로 별도로 실행한다. 서버 패치를 위해서는 노드패치가 선행되어야 한다.\nWAS standard type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-se WAS enterprise type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-ee Session Server 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-session Table 142. patch.sh의 입력 인수 및 입력 항목 항목 설명 비고 PATCH_TARGET\n패치 타겟 (patch.sh의 인수로 입력)\nlena-node\nlena-manager\nlena-se\nlena-ee\nlena-session\nSERVER_ID\n패치 타겟에 해당하는 서버 ID\nlena-node, lena-manager 패치에는 불필요\n[bin]$ ./patch.sh lena-ee ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:17:18:840 [INFO] Patch started to lena-se Input SERVER_ID for execution. (q:quit) wasEE_9100 ... 2018-05-28 14:17:26:820 [INFO] Saving patch history 2018-05-28 14:17:26:842 [INFO] Patch completed to lena-se ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528141639064 PATCH_TARGET : lena-ee PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! 10.9.3. History history.sh를 실행하여 패치 이력을 확인한다. 기본이력은 원복된 이력은 제외하고 보여주며, 전체이력은 모든 이력을 보여준다.\n기본이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh 전체이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh all [bin]$ ./history.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch History 1 lena-node / patch-20180528140643905 - action : PATCH - id : patch-20180528140643905 - target : lena-node - serverId : lena-node - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140643903 - timestamp : 20180528140643905 - restored : false - handwork-status : NO_WORK 2 lena-manager / patch-20180528140532668 - action : PATCH - id : patch-20180528140532668 - target : lena-manager - serverId : lena-manager - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140532666 - timestamp : 20180528140532668 - restored : false - handwork-status : NEED_WORK - start of handwork-detail ... - end of handwork-detail 3 lena-ee / patch-20180528141639064 - action : PATCH - id : patch-20180528141639064 - target : lena-ee - serverId : wasEE_9100 - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528141639062 - timestamp : 20180528141639064 - restored : false - handwork-status : NO_WORK history is completed.!! 10.9.4. Restore restore.sh를 실행하여 적용한 패치에 대한 원복을 진행한다. (패치 적용 문제 발생 시)\nRestore를 실행하면 패치 시점에 변경된 파일을 변경이전 상태로 복원한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/restore.sh \u0026lt;PATCH_HISTORY_ID\u0026gt; (PATCH_HISTORY_ID는 ./ history.sh 로 조회되는 id 값이다.) [bin]$ ./restore.sh patch-20180423130610713 ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:40:05:404 [INFO] Restore started to lena-ee ... 2018-05-28 14:40:05:532 [INFO] Restore completed to lena-ee ========================= Execution Result ======================== MESSAGE : Restore succeeded RESULT : Success =================================================================== restore is completed.!! 10.9.5. Version 확인 version.sh를 실행하여 현재 설치된 서버에 대한 패치상태를 확인할 수 있다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/version.sh [bin]$ ./version.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch Information 1. Base Information - Version : 1.3.1.1 (Up to date) - LENA_HOME : /engn001/lena/1.3.1 2. lena-manager 2.1 - id : lena-manager / version : 1.3.1.1 (Up to date) 3. lena-se 3.1 - id : wasSE_9100 / version : 1.3.1.1 (Up to date) 3.2 - id : wasSE_9200 / version : 1.3.1.1 (Up to date) 4. lena-ee 4.1 - id : wasEE_9300 / version : 1.3.1.0 (Patch available to 1.3.1.1) 4.2 - id : wasEE_9400 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5. lena-session 5.1 - id : session_5000 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5.2 - id : session_5500 / version : 1.3.1.0 (Patch available to 1.3.1.1) version is completed.!! 10.10. Session Server 상세 Application Server의 Session Clustering은 별도의 Session Server를 설치하여 Session을 공유해 Clustering 한다. Session Server는 별도 VM위에서 작동하는 Standalone 모드와 Application Server에 Session Server 모듈을 탑재한 Embedded 모드가 있다.\n10.10.1. Session Server Standalone 모드 설치 설치방법은 “3.5.2. Install\" 항목을 참조한다.\n기동/중지 및 기동여부 확인 기동/중지 및 기동여부 확인은 \"3.5.6 Start/Stop” 에서 확인한다.\n환경설정 Session Server가 설치된 위치를 ${ZODIAC_HOME}이라 칭한다. Session Server는 LENA home 하위 /servers 폴더에 위치한다.\n환경설정 정보는 ${ZODIAC_HOME}/session.conf 에 관리한다. 환경설정으로 변경 가능한 설정 항목은 아래와 같다.\n항목 설명 server_id\nserver ID\nserver_name\nserver Name\nprimary_port\n해당 Session Server의 TCP listening port\nsession_max_count\n최대 HTTP세션수\nserver_recv_queue_size\nSecondary Server나 Application Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\nserver_req_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등)을 담는 Queue size\nresp_queue_size\n타 Server가 요청한 Session 정보에 대한 응답을 담는 Queue size\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다. 각 Application Server 의 설정과 일치시키는 것이 좋다.\nso_timeout\nApplication Server와의 연결에서 read timeout\nthread_request_handler\nrequest Queue 에 쌓은 데이터 처리하는 Thread 개수.\nthread_data_handler\nreceive Queue 에 쌓은 데이터 처리하는 Thread 개수.\ndebug_clustering\nDebug용 Log를 남길지 여부\nenable_auto_was_sync\ntrue로 설정 했을때, 장애 등으로 재 연결된 WAS에 Sync 요청을 보내 WAS의 Session 데이터를 Sync 한다.\nenable_auto_peer_sync\n(장애 등으로) 재 연결된 Secondary Session Server에 Sync 요청을 보내 Slave Session Server의 Session 데이터를 Sync 할지 여부\nserver_expire_sec\n서버에서 HTTP세션 정보를 expire 시키는 시간 (Session Timeout)\n0인 경우, Application에서 설정한 session의 timeout 시간을 사용\nserver_expire_check_sec\nSession Timeout 체크 주기. (단위 : 초)\nsecondary_host\nSecondary 세션서버의 주소\nsecondary_port\nSecondary 세션서버의 주소\nenable_ready_after_sync\nSecondary Server와 Session 데이터를 동기화를 수행한 후에, 연결된 WAS에 Clustering 서비스 제공 가능 상태(Ready)로 전송할지 여부 (true는 동기화 후 ready 상태 전송)\nwait_server_ready_timeout\n해당 시간 이 될 때까지 ready상태(Session Clustering서비스 제공가능 상태) 가 안되면 자동으로 ready 상태를 만들어준다.\nserver_ready_time\n기동 시 Secondary Server와의 연결 대기 시간 (해당 값 * 100 ms).\nmax_logoutset\n최대 로그아웃 된 HTTP 세션 수\nenable_auto_logout_sync\ntrue 인 경우, session entry 정보를 sync 할 때, logout 정보도 같이 sync 한다. (sticky가 아닌 round-robin일 경우 필요하다)\n로그 로그는 ${LENA_HOME}/logs/session-server/lena-[Session Server Name]_[YYYYMMDD].log 로 남는다. 로그를 확인하고자 한다면 ${ZODIAC_HOME}/log.sh 파일을 실행시켜 확인 할 수도 있다.\n[session_5002]$ ./log.sh 5월 09, 2018 02:55:50 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 02:55:54 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33138 5월 09, 2018 02:55:55 오후 [ZODIAC] SERVER_READY, no peer, time=5000 5월 09, 2018 02:59:57 오후 [ZODIAC] Zodiac Stop 5월 09, 2018 03:00:00 오후 [ZODIAC] Zodiac Session Server 1.3.0 20160420 5월 09, 2018 03:00:01 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 03:00:01 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33359 5월 09, 2018 03:00:03 오후 [ZODIAC] ACCEPT SERVER /127.0.0.1:46818 5월 09, 2018 03:00:04 오후 [ZODIAC] SYNC[session_5002] recv bulk sessions : #0 recv bulk logout sessions : #0 recv bulk dupInfo : #0 2ms 5월 09, 2018 03:00:04 오후 [ZODIAC] SERVER_READY sync is done 5월 09, 2018 03:00:05 오후 [ZODIAC] TCP Primary name=session_5002 /127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC start 127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC Send bulk sessions send to 127.0.0.1:5002 #0 and logout session send : 0 and dupInfo send : 0 Console Zodiac Session Server는 JMX를 통해 Session Server 정보 조회 및 Application Server Sync 명령을 수행 할 수 있다. ${ZODIAC_HOME} 의 console.sh 파일을 실행시켜 Zodiac Session Server의 JMX 기능을 사용한다.\n[session_5002]$ ./console.sh =====zodiac session server JMX Console===== ------------------------------------------------------------ - Usage: ./console.sh \u0026lt;COMMAND\u0026gt; - - \u0026lt;COMMAND\u0026gt; is one of the following: - - 1. was_list - - 2. status - - 3. was_serverq - - 4. was_sync - - It needs WAS ID - - example: ./console.sh was_sync \u0026lt;was id\u0026gt; - - 5. search - - It needs SESSION ID. - - example: ./console.sh search \u0026lt;session id\u0026gt; - ------------------------------------------------------------ 다음은 console.sh의 명령어에 대한 설명이다.\nApplication Server List\n현재 Session Server에 연결된 Application Server List를 보여준다.\nShell명령어 console.sh was_list 를 실행하면 된다.\n[session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}} Session Server Status\n현재 Session Server의 상태 값을 보여준다.\nShell명령어 console.sh status 를 실행하면 된다.\n[session_5002]$ ./console.sh status =====zodiac session server JMX Console===== RUN OPERATION: getStatusString\\{request_getfresh_logout:0,session_count:0,req_lost:0,request_ getfresh_not_new:0,request_getfresh_nodata:0,request_getnew_secondary:0,session_expired:0,request_getnew_logout:0,session_timeout:1800,request_getnew_nodata:0,session_max_count:2000000 ,logout_from_nodes:0,pid:32705,session_recv_lost:0,logout_from_secondary:0,request_getfresh_secondary:0,request_getfresh:0,request_getnew:0,logout_count:0,data_from_nodes:0,resp_lost:0,request_getfresh_data:0,data_from_secondary:0} Session Server ServerQ Status\nZodiac Session Server의 ServerQ 상태를 보여준다. ServerQ는 Session Server에 연결된 Application Server의 접속을 관리하는 모듈이다. 여기서 보여주는 데이터는 Application Server 에서 보내는 Session 정보(data)와 Request 정보(Request)를 담는 Queue 정보이다.\nShell명령어 console.sh was_serverq 를 실행하면 된다.\n[session_5002]$ ./console.sh was_serverq =====zodiac session server JMX Console===== PRINT ATTRIBUTEdataQ.size: 0requestQ.size: 0dataQ.overCnt: 0requestQ.overCnt: 0 Session Id Search\n입력한 Session ID와 일치하는 Session을 가지고 있는 Application Server List 를 보여준다.\nShell명령어 console.sh search [Session ID] 를 실행하면 된다.\n[session_5002]$ ./console.sh search B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285 + =====zodiac session server JMX Console===== RUN OPERATION: search RESULT:\\{'AE4_29100'=\\{lastAccessTime='2018-05-24 15:55:48.503',context='ROOT',attributeNames=[sessiontest.counter, ARGO_DUPLICATION_STATUS],lastUpdateTime='2018-05-24 15:55:48.501',addr='/127.0.0.1:44568',id=B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285,createTime='2018-05-24 15:55:43.241'}} Application Server Session Sync\nApplication Server의 Session 정보를 Session Server로 sync하는 경우 실행한다.\nShell명령어 console.sh was_sync [Application Server jvmName(was_list에서 jvmName으로 출력되는 값)] 를 실행하면 된다.\n[session_5002]$ [session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}}} [session_5002]$ ./console.sh was_sync bde0fbb29e8100285 =====zodiac session server JMX Console===== RUN OPERATION: serverSyncsync complete Session Server failover Session Server는 Primary/Secondary로 구성되어있고, 실시간으로 Session 정보를 동기화 한다. Application Server는 Primary/Secondary Session Server와 접속을 유지하고 있기 때문에 Primary Session Server 장애가 생겼을 경우, 장애 감지 시점 이후부터 Secondary Session Server로 Failover 된다.\n10.10.2. Session Server Embedded 모드 Session Server Embedded 모드는, Application Server 내에 Session Server Module을 내장하는 방식이다.\n환경 설정 Embedded 모드로 Session Server 설정을 하려면 Manager의 Application Server 설정 화면에서 설정하거나 ${LENA_HOME}/servers/[ApplicationServer명]/conf/session.conf 를 수정한다.\n화면에 표시되는 항목에 대한 설명은 아래와 같다.\n항목 설명 비고 Mode\nEmbedded 또는 Standalone Session Server의 Client 모드 선택\nEmbedded Host\nSession Cluster의 Primary서버의 노드명 과 서버명\nEmbedded Port\nSession Cluster의 Primary서버의 서비스 포트\nSecondary Server Host\nSession Cluster의 Secondary 서버의 노드명 과 서버명\nSecondary Server Port\nSession Cluster의 Secondary 서버의 서비스 포트\nMulti Login Control\n다중 로그인 체크 여부\nfalse\nLogout Page (Multi Login)\n다중 로그인시 먼저 로그인 한 사용자에게 표시되는 로그아웃 결과 페이지\nLogout Message (Multi Login)\n다중 로그인시 로그아웃 결과 메시지, ajax Client에게 JSON 타입으로 제공됨\nExpected Page for Multi Check\nManager 에서는 설정할 수 있는 설정 값은 정해져 있다. 기본적으로 default 설정을 따르도록 한다.\n아래는 session.conf 파일로 변경 가능한 환경설정 값이다.\n항목 설명 기본값 enable_clustering\nSession clustering 할지 여부. False면 Session Server에서 session을 find하지 않는다.\nTRUE\ndebug_clustering\ndebug 할지 여부\nFALSE\nprimary_host\nPrimary Session Server의 주소\nEmbedded 모드인 경우에는 Embedded Host 값\n127.0.0.1\nprimary_port\nPrimary Session Server의 port\nEmbedded 모드인 경우에는 Embedded Port 값\n5005\nsecondary_host\nSecondary Session Server의 주소,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용된다.\nEmbedded 모드인 경우에는 Slave Server Host 값\n127.0.0.1\nsecondary_port\nSecondary Session Server의 port,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용\nEmbedded 모드인 경우에는 Slave Server Port 값\n5006\nrecv_queue_size\n타 Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\n512\nreq_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등) Queue size\n512\nresp_queue_size\n타 Server로부터 수신한 Session 정보 요청에 대한 응답을 담는 Queue size\n512\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\n512\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다.\n3000\nso_timeout\nSession Server와의 연결에서 read timeout\n8000\ntcp_open_try_interval\nSession Server에 연결이 끊어진 경우 재 연결 시도를 위한 간격\n5000\nfind_timeout\nApplication Server에서 트랜잭션이 세션을 검색할 때 서버 응답을 기다리는 시간 이 시간 동안 서버가 응답이 없으면 Application Server은 해당 세션을 서버가 가지고 있지 않은 것으로 간주한다\n500\nwait_server_ready_cnt\nServer와 통신연결은 되었으나, Server 상태가 ready가 아닌 경우 최대 설정 초만큼 기다린다. -1인 경우 무한대로 기다린다.\n-1\nserver_embedded\nsession server 모듈을 embedded 할지 여부. True면 session server 모듈을 embedded 한다.\nfalse\nmax_logoutset\n로그아웃된 HTTP 세션을 보관하는 set 크기\n20000\ncheck.duplication.login\n중복 로그인 체크 여부\nfalse\n주1) 타 Server : 연결된 Session Server 또는 Cluster된 Application Server\nVersion 1.3.1.3\nLast updated 2022-04-28 12:58:50 +0900 "},{"id":16,"href":"/docs/1.3.1/1.3.1.4/userguide/","title":"User Guide","parent":"1.3.1.4","content":" \u003c!DOCTYPE html\u003e User Guide User Guide LENA Support\nlena-support@lgcns.com\nversion 1.3.1.4 Table of Contents 1. Overview 1.1. LENA는 무엇입니까? 1.2. LENA 특징 1.3. LENA 구성 요소 및 주요 개념 1.3.1. Management Module 1.3.2. Server Module 1.4. LENA 작동방식 1.5. Edition 별 제공 Spec 2. Log In/Out 2.1. Log In 2.2. Log Out 2.3. Theme 변경 3. Dashboard 4. Server 4.1. System 4.1.1. 목록 4.1.2. 등록 4.1.3. 수정 4.1.4. 삭제 4.2. Node 4.2.1. 목록 4.2.2. Install 4.2.3. Register 4.2.4. 수정 4.2.5. 삭제 4.2.6. Start 4.2.7. Stop 4.2.8. Change Java Home 4.3. WAS 4.3.1. 목록 4.3.2. Install 4.3.3. Clone 4.3.4. Register 4.3.5. 수정 4.3.6. 삭제 4.3.7. Start/Stop 4.3.8. 설정 정보 관리 4.3.9. Resource 관리 4.3.10. Application 배포 4.4. Web Server 4.4.1. 목록 4.4.2. Install 4.4.3. Clone 4.4.4. Register 4.4.5. 수정 4.4.6. 삭제 4.4.7. Start/Stop 4.4.8. 설정 정보 관리 4.5. Session Server 4.5.1. 목록 4.5.2. Install 4.5.3. Register 4.5.4. 수정 4.5.5. 삭제 4.5.6. Start/Stop 4.5.7. 설정 정보 관리 5. Cluster 5.1. Server Cluster 5.1.1. Server Cluster 목록 5.1.2. Server Cluster 생성 5.1.3. Server Cluster 삭제 5.1.4. Server Cluster 상세 5.1.5. Scaling 6. Resource 6.1. Database 6.1.1. Database 등록 6.1.2. Database 수정 6.2. DataSource 6.2.1. DataSource 등록 6.2.2. DataSource 수정 6.2.3. DataSource 삭제 6.2.4. JDBC Driver Upload 6.2.5. DataSource Import 6.3. JTA 6.3.1. JTA 등록 6.3.2. JTA 수정 6.3.3. JTA 삭제 6.3.4. JTA Import 6.4. JMS 6.4.1. JMS 등록 6.4.2. JMS 수정 6.4.3. JMS 삭제 6.4.4. JMS Import 6.5. Application 6.5.1. Application 등록 6.5.2. Application 수정 6.5.3. Application 삭제 6.5.4. Application Upload 7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 7.1.2. 현황 모니터링 상세 7.1.3. 모니터링 설정 7.2. Analysis Dashboard 7.2.1. Performance Map 7.2.2. Analysis Summary 7.2.3. Instance Map 7.3. Event Dashboard 7.3.1. Event 종류 7.3.2. Event Dashboard를 통한 Event 관리 7.4. 통계 7.4.1. 연간 진단/대응 통계 7.4.2. 리포트 7.4.3. 알림 7.5. 진단 및 대응 7.5.1. 진단/대응 Rule 설정 7.5.2. Server Rule 설정 7.6. Trace 7.6.1. Session Trace 7.6.2. Event Trace 7.6.3. Trace Setting 8. Topology 8.1. 화면 구성 8.2. 토폴로지 영역 상세 8.2.1. Control [Edit: OFF] 8.2.2. Control [Edit: ON] 8.3. 서비스 트레이싱 영역 상세 9. Admin 9.1. IAM 9.1.1. Users (사용자 관리) 9.1.2. Auths (권한관리) 9.1.3. User-Auth Mapping (사용자 권한 관리) 9.1.4. Menu-Auth Mapping (메뉴 권한 관리) 9.2. License 9.2.1. License 목록 9.2.2. License 상세 9.2.3. License 업로드 / 복구 9.2.4. License 관련 시스템 현황 체크 9.2.5. Host기반 License 체크 설정 9.2.6. 시간 정보 조회 9.3. License(Scaling) 9.3.1. Manager License 9.3.2. License 목록 9.3.3. License 상세 9.3.4. License 업로드 / 복구 9.3.5. License 관련 시스템 현황 체크 9.3.6. Host기반 License 체크 설정 9.3.7. 시간 정보 조회 9.4. Security (서비스 제어) 9.4.1. Rule Setting (Rule 설정) 9.4.2. Rule Applying (Rule 적용) 9.4.3. Service Control Log (Rule 적용결과 조회) 9.5. Patch 9.5.1. Overview 9.5.2. WAS 9.5.3. Session Server 9.6. Preferences 9.6.1. Action Trace 9.6.2. Documentation 9.6.3. Manager Environment 9.6.4. Manager HA 10. Appendix 10.1. LENA 시스템 요구사항 10.2. Manager 지원 브라우저 10.3. 지원 Spec별 버전 10.4. Manager DB파일 백업 10.5. Manager 의 내부이력 삭제 10.6. Manager 의 admin 패스워드 초기화 10.7. LENA 설치 권장 OS파라미터(CentOS기준) 10.8. LENA 주기적으로 증가하는 파일 10.9. Patch CLI (Command Line Interface) 10.9.1. 패치파일 업로드 및 압축해제 10.9.2. Patch 10.9.3. History 10.9.4. Restore 10.9.5. Version 확인 10.10. Session Server 상세 10.10.1. Session Server Standalone 모드 10.10.2. Session Server Embedded 모드 1. Overview 1.1. LENA는 무엇입니까? LENA는 Enterprise 환경에서 JAVA J2EE Web Application을 서비스하는데 필요한 모든 구성 요소가 포함된 웹 미들웨어 솔루션이다.\nLENA는 실질적인 웹 서비스를 제공하는 Server 제품들과 이를 통합적으로 관리하기 위한 Web UI 기반의 Manager Console로 이루어져있다. 사용자는 Manager Console을 통해 Server 설치부터 Parameter 설정 및 각 제품간 연동 등을 손쉽게 수행할 수 있으며, LENA만의 사용자 친화적인 UX/UI 설계로 웹 미들웨어 솔루션 사용에 익숙하지 않은 사용자라도 빠르게 사용법을 습득하여 웹 미들웨어 관련 지식을 갖출 수 있다.\nLENA는 데이터 센터/클라우드 환경에서 웹 미들웨어 운영자들로부터 다년간의 운영 노하우를 집약하여 다양한 편의 기능을 제공한다. 이와 함께 대규모 트랜잭션 안정적으로 처리하고 서비스 장애를 최소화 할 수 있도록 고가용성, 내결함성을 보완한 Clustering, 장애 진단/대응 기능을 제공한다.\n다음 절은 LENA의 특징들에 대해 더 상세히 설명한다.\n1.2. LENA 특징 Enterprise 요건 제공 LENA Web Application Server EE (J2EE Edition)는 Enterprise Web Application을 실행시키는데 필요한 EJB, JTA/XA, JMS, JAX-WS 등 J2EE Spec을 지원한다. 또한 타사 WAS에 비해 기동성능, Application Deploy성능의 향상을 이루었고, CPU/Memory 등 자원 사용 효율성 역시 향상되었다. 고가용성을 위해 필수인 Session Clustering을 위해 Session Server를 Enterprise Edition에서 기본으로 제공한다.\nOpensource 호환성 보장 LENA Web Server, LENA WAS는 Opensource Base로 구현되어 완벽한 Opensource 호환성을 보장한다. Opensource 기반으로 작성된 Web Application이 별도의 수정 없이 LENA에 적용되므로 전환 Effort를 대폭 절감할 수 있다. 또한 Library 및 설정 관련하여 표준 기술을 사용하므로 Vendor 종속성을 해결하여 사용자의 IT Ownership을 강화할 수 있다.\n지능형 장애 진단/대응 및 서비스 추적 Thread Pool Full / Hang / Out of memory 등 대표적인 장애 상황들에 대해 사전 정의된 Rule 기반으로 진단을 수행하여 적절한 조치를 수행할 수 있다. 실시간으로 수집되는 Monitoring 데이터를 기반으로 분석하여 Server가 실제 장애로 이어지기 전에 Fake Page 우회 혹은 강제 재기동 등을 통해 장애 상황을 방지하거나 장애로 이어지더라도 장애 시간을 최소화할 수 있다. 이와 동시에 관련된 Dump와 Report를 제공하여 원인 분석을 수행할 수 있게 한다.\nMulti-Server 관리 및 Centralized Operation 여러 LENA Web Server와 LENA WAS를 하나의 Cluster로 묶을 수 있어 Single Operation으로 여러 Server를 동시에 제어할 수 있다. 일관적인 설정 동기화와 함께 Graceful Restart혹은 Rolling Restart를 통해 안정적인 반영이 가능하다. 또한 Cluster로 묶이지 않은 Server들에 대해서도 Multi Control을 지원한다.\n운영 관점의 차별화 기능 제공 웹 미들웨어 솔루션을 운영하기에 편리한 다양한 편의 기능을 제공한다. Template 기반의 간단하고 빠른 Server설치와 Server 복제 기능을 이용하여 원하는 구성 Set을 짧은 시간 안에 구축이 가능하다. Topology View를 통해 Server 모듈 간 구성 및 연동 정보를 한눈에 확인할 수 있어 가시성을 향상할 수 있다. Dashboard를 통해 운영 중인 시스템의 Event와 성능 현황 등을 확인할 수 있다. 그 밖에 Multi Account 관리를 통해 메뉴/자원의 접근 권한 설정이 가능하며, 운영자 Action Tracing, 설정 변경 정보 History 추적 및 Restore 기능을 제공한다.\n1.3. LENA 구성 요소 및 주요 개념 LENA는 Binary Package를 통해 제공이 되며 그 안에 필요한 모든 구성 요소를 포함하고 있다. 구성 요소는 크게 두 범주로 나누어진다.\nLENA를 운영 관리하기 위한 Management Module로 LENA Manager Console과 LENA Node Agent가 포함된다.\n실질적인 Web Service를 담당하는 Server Module로 LENA Web Server, LENA WAS(Web Application Server), LENA Session Server를 포함된다.\n다음은 각 구성 요소 별 상세 설명과 함께 이에 따른 주요 개념을 다룬다.\n1.3.1. Management Module LENA Manager LENA Manager는 Web UI를 통해 LENA의 모든 자원/기능을 설정 및 제어할 수 있도록 설계된 Web Application이다. LENA Package에 준비된 스크립트를 통해 설치 및 기동할 수 있다. LENA Manager를 통해 Server 설치/관리를 수행하려면 Node Agent 및 Advertiser와의 연동을 구성해야 한다.\n다음은 LENA Manager에서 제공하는 대표적인 기능과 개념에 대해 설명한다. 아래에 설명되지 않은 상세 사항들에 대해서는 “운영자가이드”를 참조한다.\nDashboard\nLENA Node, Server의 자원 현황과 Event 확인\nServer\nLENA Node의 등록, Web Server, WAS, Session Server 를 설치, 설정 관리 및 기동/중지 제어\nSystem\nLENA Node, Server가 관리되는 최소 단위. 하나의 System하위에는 여러 Node를 등록할 수 있으나, 하나의 Node는 여러 System에 중복 등록이 불가하다.\nNode\nNode Agent와 1:1로 대응되는 개념. Manager에서 원격지에 있는 Server에 명령을 수행하기 위해선 Node Agent를 통해야 한다.\nCluster\nMulti-Server 관리. 하나의 System 내의 Server들에 대해서만 Cluster 구성이 가능하며, 하나의 Server는 여러 Cluster에 속할 수 없다.\nServer Cluster\n여러 LENA Web Server, WAS를 하나의 묶음으로 관리할 수 있다. 설정 동기화, 통합 재 기동 등의 다양한 편의 기능 제공.\nResource\nLENA에서 제공하는 Module이 아니지만 LENA Server와 밀접하게 연동되는 자원에 대해 명세를 정의함으로써 Resource로 사용한다. Resource는 LENA WAS별로 Local 설정할 수 있지만, Resource 메뉴를 통해 Global 설정하여 WAS에서 공통 Import하는 방식을 통해 중복된 작업을 피할 수 있다.\nDatabase\nDBMS의 IP, Port, Driver 등 물리적 명세를 정의. 하나의 DBMS와 1:1로 대응된다.\nDatasource\nDB Connection Pool을 LENA WAS에서 구성하기 위해 JNDI Name, Url, User ID/Password등을 지정한다. 하나의Database하위에 여러 Datasource를 구성할 수 있다.\nApplication\nLENA WAS를 통해 실행할 Application의 위치와 Context Path를 지정한다.\nTopology\nLENA Manager상에 설치되고 연동 구성되어 있는 LENA Web Server, LENA WAS, LENA Session Server 등의 구성 현황을 Topology Diagram 형식으로 표현한다. 이 기능을 통해 Server의 간단한 설치와 기동/중지 제어도 가능하다.\nDiagnostics\nLENA Node와 Server에 대한 자원 모니터링과 그에 연계된 다양한 기능 탑재.\nLENA Node Agent LENA Node Agent는 LENA Manager에 Node를 등록할 때 Node와 1:1로 대응되며 LENA Package에 기본적으로 설치되어 있으며 준비된 스크립트를 통해 기동할 수 있다. 주요 역할은 LENA Manager를 통해 Node 하위의 Server에 명령을 수행할 때 Node Agent가 이를 담당하며 모니터링 및 상태 데이터를 LENA Manager로 전송하는 기능도 수행한다. 물리 서버 당 1개의 Node Agent를 설치하는 것이 기본이지만, 필요에 따라 여러 개의 Node Agent를 구성할 수 있다. LENA Web Server, LENA WAS, LENA Session Server는 LENA Node 하위에 구성되며, LENA Node는 하나의 System 하위에 구성된다.\n1.3.2. Server Module LENA Web Server LENA Web Server는 정적 컨텐츠를 전송할 수 있으며 LENA WAS와 Reverse Proxy 형태로 연동하여 LENA WAS가 제공하는 Web Application 서비스의 front-end 역할을 수행한다. 그 외 선택적으로 다양한 추가 기능을 이용할 수 있는데, Domain/URI 기반 분기 및 Load Balancing 기능과 보안 레이어(SSL)를 제공하는 것이 대표적이다.\nLENA WAS (Web Application Server) LENA WAS는 Java Web Application을 실행하여 Web Application 서비스를 제공한다. DB Connection Pool을 이용하기 위한 Datasource 연동 기능과 Session Clustering을 이용하기 위한 Session Server 연동 기능을 포함하고 있다. 다음은 LENA WAS의 두 가지 Type을 설명한다.\nLENA WAS SE (Standard Edition)\nJava Class 파일을 처리하기 위한 Servlet Engine과 JSP 파일을 처리하기 위한 JSP Engine으로만 구성되어 있으며 WAR Type의 Web Application만 실행할 수 있다. LENA WAS EE에 비해 상대적으로 가볍고 빠르다는 장점이 있다.\nLENA WAS EE (Enterprise Edition)\nLENA WAS SE가 제공하는 Engine 외에도 EJB Engine, JMS Engine 등 J2EE Spec을 지원하며, WAR/EJB/EAR Type의 Application을 실행할 수 있다. 또한 2 Phase Commit을 위한 XA Datasource를 지원한다.\nLENA WAS는 내부적으로 Advertiser Module을 탑재하고 있으며 이는 LENA WAS의 JVM 내부 모니터링 결과를 JMX를 통해 수집하여 LENA Manager로 전달한다.\nLENA Session Server LENA Session Server는 여러 LENA WAS 간의 Session을 공유하여 WAS 다중화를 통한 고 가용성을 보장하기 위해 제공된다. LENA Enterprise Edition을 사용할 경우 기본으로 제공되며 2개의 LENA Session Server를 Active-Active Clustering (양방향 Active-Standby)을 통해 Session Clustering을 구성할 수 있다. LENA Session Server를 사용하기 위해 Application에서 별도의 설정을 할 필요가 없이 LENA Manager에서 간단한 설정만으로 구현이 가능하다.\n단, Session-clustering을 하기 위해선 HTTP Session에 저장되는 모든 객체는 직렬화(Serializable)되어야한다.\n1.4. LENA 작동방식 Manager에 등록된 Node에는 Node Agent, Application Server에는 Advertiser가 설치되어 있다.\n운영자는 Manager의 UI를 통해 각 Node Agent에 Server에 대한 제어요청(예: Start, Stop, Reload, Dump, 설정변경 등)을 보내고, Node Agent가 이를 수신하여 제어를 실행한다.\nNode Agent, Advertiser는 주기적으로 모니터링 데이터를 Manager로 전송하고, 운영자는 Monitoring Dashboard와 같은 Manager의 UI를 통해서 각 서버의 자원 현황을 확인할 수 있다. Session Server의 경우 자기 자신의 모니터링 데이터를 직접 Manager에 전달한다.\nFigure 1. LENA Mechanism Table 1. LENA 구성 요소 별 설명 구성요소 설명 Manager\nAgent를 통한 Server제어와 모니터링 기능 제공\nRepository\nManager 운영을 위한 File/DB 탑재\nNode\nNode Agent를 탑재. Node하위에 Server Module이 설치됨\nNode Agent\n- Server 설치/복제/패치\n- Server 기동/중지 제어\n- Server 설정 관리\n- Node, Web Server, WAS, Session Server 상태 정보\n- Node, Web Server 자원 모니터링 데이터 제공\nAdvertiser\nWAS 자원 모니터링 데이터 제공\nWAS\nJava Web Application 서비스 제공\nWeb Server\nWAS와 Reverse Proxy 형태로 연동하여 Web 서비스의 Front-end 역할\nSession Server\n- WAS와 Session Clustering 연동하여 고가용성 구현\n- Session Server 모니터링 데이터 제공\n1.5. Edition 별 제공 Spec LENA 는 Application Server 의 기능 제공 범위에 따라 Standard와 Enterprise Edition으로 구분된다. Standard Edition이 Web Application 중심의 Spec을 지원하는 반면, Enterprise Edition은 JTA, JMS, EJB등 J2EE Spec을 지원하며 Session Clustering을 제공한다. 각 Edition별 제공되는 기능 또는 스펙은 아래와 같다.\nTable 2. Edition별 제공 기능과 스펙 기능/Spec (LENA-Manager 기준) Standard Enterprise Server\nWeb Server\n●\n●\nWAS (SE)\n●\n●\nWAS (EE)\n-\n●\nSession Server\n-\n●\nResource\nDatabase\n●\n●\nDataSource (일반)\n●\n●\nDataSource (XA)\n-\n●\nJTA\n-\n●\nJMS\n-\n●\nApplication (WAR)\n●\n●\nApplication (EJB, EAR)\n-\n●\nCluster\n-\n●\nTopology\n●\n●\nSecurity\n●\n●\nDiagnostics\nMonitoring\n●\n●\n진단/대응\n-\n●\nPatch\n●\n●\n(범례 : ● 제공됨, - 제공되지 않음)\n2. Log In/Out Manager에 로그인과 로그아웃하는 기능을 제공한다.\n2.1. Log In Figure 2. Manager 접속화면 로그인 페이지 하단 좌측에는 설치된 버전이, 우측에는 기술지원 연락처가 기술되어 있다.\n로그인 시도시, 7번 이상의 비밀번호 오류가 발생하는 경우 해당 계정으로 로그인을 할 수 없다. 이런 경우 console을 통해 패스워드를 초기화 해야한다. (자세한 내용은 Appendix에서 'Manager 의 admin 패스워드 초기화' 항목을 참고한다.)\n2.2. Log Out Manager 상단 우측의 문 아이콘 을 이용하여 로그아웃을 할 수 있다.\n2.3. Theme 변경 Manager 상단 우측의 수레바퀴 아이콘 메뉴의 Dark Theme 메뉴를 통해 테마를 설정 할 수 있다. 라이트 모드와 다크 모드 두 가지 중에 선택이 가능하다.\n3. Dashboard Manager에서 관리되는 시스템 별 구성 정보, 자원 모니터링, 이벤트, 라이센스 등의 정보를 요약하여 제공한다.\nFigure 3. Dashboard 화면 좌측의 시스템 목록에는 로그인 한 사용자에게 권한이 있는 시스템 목록이 제공된다. All은 권한이 있는 모든 시스템의 정보를 통합하여 보여준다.\nTable 3. Dashboard 항목 항목 설명 비고 INVENTORY\nNode\nSystem 에 포함된 Node의 수\n범례: Node의 타입 별 갯수\nWeb type : Web Server를 설치 할 수 있는 노드 수\nWAS type : WAS, Session Server를 설치 할 수 있는 노드 수\nServer\nSystem에 포함된 Server 타입 별 갯수\nNode Status\nSystem에 포함된 Node의 자원(CPU, Memory, DISK) 사용률 상태\n범례\nHigh / Middle / Low\nNot working : 정지 상태의 Node(Agent) 갯수\nServer Status\nSystem에 포함된 Server의 자원 사용률 상태\nWeb : CPU, Memory, Thread 체크\nWAS : Heap Memory, Thread Pool 체크\nSession : Heap Memory 체크\n범례\nHigh / Middle / Low\nNot working : 정지 또는 Hang 상태인 서버의 갯수\nSERVER CLUSTER\nServer Cluster\nserver cluster 수\nMember\nserver cluster에 속해 있는 타입별 서버 총 수\nCHECK\nModified Server\nSystem에 포함된 Server중 재기동이 필요한 서버 존재여부\nOut of Cluster Sync\nsync가 필요한 Server Cluster 존재여부\nDiagnostic Report\n진단 프로세스 수행 후 발행된 레포트 갯수\nEVENT\nError\nSystem에 포함된 Server에서 발생된 Error 갯수\nStuck Thread\nSystem에 포함된 Server에서 발생된 Stuck Thread 갯수\nOOM\nSystem에 포함된 Server에서 발생된 Out Of Memory 갯수\nFull GC\nSystem에 포함된 Server에서 발생된 Full GC 갯수\nRESOURCE\nDB Resource\nRESOURCE메뉴에서 등록되어 관리되는 Database와 Datasource 수\nDatasource의 범례\nUsed : WAS에서 사용 중인 Datasource 수\nNot Used : WAS에서 미사용 중인 Datasource 수\nLICENSE\nLicense Status\n노드들의 라이선스 상태 (Trial 라이선스의 유효일 수 또는 상용라이선스의 유효일 수(종료일자기준 15일 전 부터) 표시)\n4. Server Node 및 WAS, Web Server, Session Server를 관리하기 위한 화면을 제공한다.\n특정 System 내의 Node 및 각 Server별 개수를 확인하고, 실시간으로 Node 및 Server 상태를 통합적으로 관리 할 수 있다.\n4.1. System System은 다수의 Server를 가지는 논리적인 그룹이다. \"DefaultSystem\"을 기본적으로 제공하며 사용자는 System을 생성, 수정, 삭제 할 수 있다.\n4.1.1. 목록 System 목록은 화면 좌측에 트리 형태로 제공된다.\nFigure 4. System List 4.1.2. 등록 등록(+) 버튼 을 클릭하여 목록에 \"Create System\" 을 생성한다.\n생성할 시스템 명을 입력한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n현재 로그인한 사용자의 권한이 해당 System에 매핑된다. 즉, 로그인한 사용자와 동일한 권한을 가진 사용자에게만 해당 System이 조회된다. (Node, Server, Resource 동일하게 적용됨)\n4.1.3. 수정 수정할 System을 선택한다.\n수정(연필) 버튼 을 클릭하여 선택한 System의 이름을 변경한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n4.1.4. 삭제 삭제할 System을 선택한다.\n삭제(-) 버튼 을 클릭한다.\nOK 버튼 을 클릭하여 저장한다.\n하위에 Node가 존재하는 System은 삭제할 수 없다. 즉, 빈 System만 삭제 가능하다.\n4.2. Node Node는 다수의 WAS, Web Server, Session Server를 가지는 물리적인 Server이다.\n4.2.1. 목록 Node List를 통하여 각 Node를 관리할 수 있다.\nFigure 5. Node List Node의 속성은 아래와 같다.\nTable 4. Node 속성 항목(*는 필수값) 설명 비고 Status\nNode의 현재상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nName(*)\nNode의 이름\nType(*)\nNode의 Type\n다음과 같은 타입을 제공함\nAll: 모든 종류의 Server 설치가능\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nAddress(*)\nNode의 IP주소\nPort(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nManager Address(*)\nManager IP 주소\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 Node정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Node정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 JAVA Home 설정과 Start/Stop을 수행할 수 있는 메뉴 제공\n4.2.2. Install Install 버튼 을 클릭하여 Node정보 등록을 준비한다.\nNode의 속성 값을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nTable 5. Install 시 설정하는 속성 항목(*는 필수값) 설명 비고 Node Type\nNode의 Type\n다음과 같은 타입을 제공함\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nNode Name(*)\nNode의 이름\nNode Address(*)\nNode의 IP주소\nNode Port(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nUser(*)\nNode 실행 사용자 계정\nNode Type이 Application인 경우, root 계정으로 실행 할 수 없음. Node Type이 Web인 경우 Web Server의 Port를 1024이하를 사용해야하는 경우에만 root 사용.\nPassword(*)\nNode 실행 사용자 계정 비밀번호\nSSH Port\n해당 Server에 접속할 SSH 포트\nLENA Home\nNode Agent가 설치 될 위치\nJAVA Installation\nJava 설치 여부\nJAVA Home\n설치된 JAVA 경로\nInstall 기능은 Linux 환경에서만 지원한다.\n4.2.3. Register Register 버튼 을 클릭하여 Node정보를 등록 가능한 상태로 변경한다.\nNode의 Name, Type, Address, Port, Manager Address(기본값이 제공됨) 속성을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nManager IP는 Node의 host IP로 자동 입력된다.\n네트워크 구성에 따라 자동 입력된 IP가 실제 네트워크 IP와 다른 경우가 발생할 수 있다.\n이때는 Manager IP를 수정하여 입력해야 한다.\n4.2.4. 수정 수정(연필) 버튼 을 클릭하여 Node정보를 수정 가능한 상태로 변경한다.\nNode의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n포트 정책이나 방화벽 정책 변경 등에 의해 Node의 Address나 Port를 변경해야 하는 경우, agent.conf의 설정정보를 수정 후 Node Agent를 재기동한다.\n이 때 변경된 정보를 Manager에서도 알 수 있도록 Node의 Address와 Port정보를 수정하여 입력한다.\n수정된 정보를 저장할 때 'Occured Read Timeout' 메세지가 발생하면 아래의 경우를 확인한다.\nNode Agent가 아닌 다른 곳에서 포트를 사용하는 경우\nNode Agent가 Hang이 걸린 경우\nNetwork 문제가 있는 경우\n4.2.5. 삭제 휴지통 버튼 을 클릭하여 Node정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nNode 하위에 Server가 등록되어 있는 경우 해당 Node를 삭제할 수 없다.\nUninstall은 Linux 환경에서만 지원되고, 삭제할 노드를 한 개만 선택한 경우 가능하다.\n4.2.6. Start 정지 상태인 노드를 기동 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Start 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Start 버튼 을 누른다.\n4.2.7. Stop 기동 상태인 노드를 정지 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Stop 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Stop 버튼 을 누른다.\n4.2.8. Change Java Home Node와 Node에 설치된 Server들의 JAVA Home 경로를 수정할 수 있다.\nJAVA Home Path를 수정한다.\nNode Java Home Path : Node Java Home Path를 편집한다.\nServer Java Home Path : 선택한 서버들의 JAVA Home 경로를 편집한다. (Web Node에서는 지원하지 않음)\nSave 버튼 을 누른다.\n4.3. WAS WAS를 관리하기 위한 화면을 제공한다. Node에 설치한 Server의 등록, 수정, 삭제를 수행하며, 그 외 Server의 설치, 제거 및 복제를 할 수 있다.\n4.3.1. 목록 WAS List를 통하여 각 WAS를 관리할 수 있다.\nFigure 6. Web Application Server List WAS의 속성은 아래와 같다.\nTable 6. WAS 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nType\nServer의 유형\n다음과 같은 타입을 제공함\nStandard\nEnterprise/EE\nEnterprise/SE\nHTTP Port\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.3.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer Type, Server ID 등을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.3. Clone Clone 버튼 을 클릭하여 Server의 복제를 준비한다.\nNode List에서 복제할 Server를 선택한다. 이때 Clone Server ID, Clone Service Port가 자동으로 입력된다.\nClone Server ID와 Service Port를 원하는 값으로 수정한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버에 배포되어 있는 어플리케이션 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, register 기능을 이용하여 기존에 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\nSystem \u0026gt; Application Server List Tab에서도 설치가 가능하다. 단, Node List에서 설치할 Node를 선택해야 한다.\n4.3.5. 수정 수정(연필) 버튼 을 클릭하여 Server정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.3.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nWAS를 삭제할 경우 서비스 제어(ADMIN \u0026gt; Security \u0026gt; Rule Applying 메뉴)의 적용 대상 목록에서 해당 Server는 삭제된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.3.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 WAS 가 서비스중인 모든 작업이 끝난 후 종료된다.\nGeneral 탭의 Shutdown Timeout 시간 이후에도 작업이 끝나지 않은경우 강제로 중지된다.\nServer를 시작하면 로그파일을 볼 수 있는 팝업이 실행된다. 팝업을 통해 Server의 정상 기동 여부를 확인할 수 있다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\n팝업 화면에서 Start / Stop 명령 이후에는 팝업을 닫더라도 요청한 명령이 중지되지 않는다. Forced Stop/Restart Server 목록 가장 우측의 추가 기능(\u0026#8230;\u0026#8203;) 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n강제 중지, 재시작을 수행하면 현재 서비스중인 모든 작업이 즉시 중지되므로 주의해야한다. 4.3.8. 설정 정보 관리 Server의 설정 정보를 변경하는 기능을 제공한다. Server 목록에서 변경하려는 Server 명을 선택한다. Standard Edition의 경우 General, Session, Logging, Web Config, Environment, Properties, Config Tree, History탭을 제공하며, 설정 정보 수정 시 백업을 하여 복원이 가능하다. Enterprise Edition는 Container 탭을 추가적으로 제공한다.\nServer 설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nGeneral Server의 일반적인 설정 정보를 관리한다. Port정보, Connector정보, Stuck Thread 관련 설정을 수정 및 저장 할 수 있다.\n설정 정보의 상세내용은 아래와 같다.\nServer Info\nServer의 주요 설정 값을 나타낸다.\nTable 7. 주요 설정 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nHTTP 포트번호 - 71 (자동계산)\nHTTPS Port\nHTTPS 포트번호\nHTTP 포트번호 + 363 (자동계산)\nShutdown Port\nShutdown 명령 문자열을 받기 위한 포트\nHTTP 포트번호 - 75 (자동계산)\nInstall Path\nServer 설치 경로\nJava Home Path\nJava Home 경로\nMinimum Heap Size(m)(*)\nWAS에 설정할 최소 Heap 사이즈(Megabyte)\nDefault : 512\nMaximum Heap Size(m)(*)\nWAS에 설정할 최대 Heap 사이즈(Megabyte)\nDefault : 512\nApplication Base\nApplication의 Base 디렉토리\nServer가 stop 상태이거나, appBase에 deploy이된 Application이 없을 경우에만 수정이 가능하다.\nJvmRoute\nServer의 Unique한 Identifier\nSystem Property에 설정되어 있는 값을 우선함.\n없을 경우 server.xml의 값을 사용\n(Hostname + Port의 조합으로 생성됨)\nAuto Deploy\n어플리케이션 변경 시 자동 Deploy 여부\nDefault : false\nApplication별 DocBase에 war 파일을 재 업로드 할 경우 감지됨\nDeploy On Startup\nWAS 기동 시 Application Deploy 여부\nDefault : true\nShutdown Timeout\nServer 종료 시 실행중인 작업이 존재할 경우 대기하는 시간(초)\nDefault : 86400\nConnector\nServer에서 사용하는 Connector 설정 값을 나타낸다.\nTable 8. 주요 설정 항목(*는 필수값) 설명 기본값 Protocol Type\n프로토콜 유형\nHTTP/1.1, AJP/1.3\nport\n포트번호\nredirect Port\nRedirect 포트\nHTTPS Port와 동일\nconnection Timeout\n커넥션 타임아웃(ms)\nHTTP : 20000,\nAJP : 60000\nURIEncoding\nURI byte를 변환하기 위한 Character Encoding\nUTF-8\nserver\nHttp Response에 대한 Server Header를 재정의하여 Server 정보 노출을 방지\nServer\nmaxThreads\nConnector가 생성할 수 있는 최대 Thread 수\n256\nminSpareThreads\nConnector생성시 확보하는 최소 Thread 수\n10\nmaxQueueSize\nRequest Queue 의 최대길이\nInteger.MAX_VALUE\npacketSize\nAJP packet 크기\n8192\nenableLookups\nDNS LookUp 사용여부. 사용하지 않을 시 성능에 유리하다\nfalse\ncompression\nHTTP message Body 압축여부(off, on:Text만, force:전체)\noff\ntcpNoDelay\nTCP 패킷을 Delay 없이 전송\ntrue\nStuck Thread\nStuck Thread의 설정값을 나타낸다.\nTable 9. 주요 설정 항목(*는 필수값) 설명 비고 Threshold(s)\nStuck Thread를 식별하기 위한 최소 시간(s)\nInterrupt Thread Threshold\nStuck Thread를 중단하기 위한 최소 시간(s)\nStuck Thread 판별 이후 n초 뒤 종료시키려면 \"Threshold+n\"값 입력\nService Point\nEndpoint Address의 설정값을 나타낸다.\nTable 10. 주요 설정 항목(*는 필수값) 설명 비고 Endpoint Address\nWAS의 대표 서비스 도메인 주소\nSession Session Cluster 기능을 사용할지 여부를 설정한다.\nEmbedded Session Server 모드\nWAS에 Session Server 모듈을 Embedded하여 동작하는 경우 선택한다. Mode 항목에서 Embedded Session Server Mode를 선택하게 되면, Server 관리 화면에서 Session Server 리스트에 Embedded Type으로 표시된다.\nTable 11. 주요 설정 항목(*는 필수값) 설명 기본값 Embedded Host\n해당 WAS를 의미\n자기 자신의 IP (변경불가)\nEmbedded Port\n해당 WAS에서 사용할 Embedded Session Server 용 port 정보\nSecondary Server Host\nSlave Server 호스트 IP\nSecondary Server Port\nSlave Server Port\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nClient 모드\n별도의 Session Server를 연결하여 동작하는 방식이다. Mode 항목에서 Client Mode를 선택한다.\nClient 모드에서 Primary Server와 Secondary Server 설정 시 사전에 Session Server가 구성되어 있어야한다.\nTable 12. 주요 설정 항목(*는 필수값) 설명 기본값 Primary Server Host\nPrimary Session Server 호스트\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nPrimary Server Port\nPrimary Session Server 포트\nSecondary Server Host\nSecondary Session Server 호스트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nSecondary Server Port\nSecondary Session Server 포트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nExternal Stored Session\nSession객체를 로컬 WAS에 저장하지 않고 Session Server에 저장\nfalse\nShare session in applications\nMulti Application간 Session객체를 공유\nClient Mode에서만 설정가능\nfalse\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nSession 기능은 Enterprise Edition에서 제공되는 기능이다.\nLogging Server의 Logging 설정 정보를 관리한다.\nLog Home\nTable 13. 주요 설정 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nAccess Log\nRequest에 대한 Access 로그의 설정값을 나타낸다.\nTable 14. 주요 설정 항목(*는 필수값) 설명 비고 Directory\nLog 디렉토리\n절대경로 또는 $CATALINA_BASE의 상대경로로 지정할 수 있음\nPattern\nLogging field의 Layout\nPrefix\nLog 파일의 prefix\nSuffix\nLog 파일의 suffix\nHandler\nHandler 설정 정보의 상세내용은 아래와 같다.\nTable 15. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nHandler의 클래스명\nType\nHandler의 유형\nConsoleHandler와 FileHandler 선택 가능\nLevel\nHandler의 로그레벨\nFilter\njava.util.logging.Filter의 구현체\nFormatter\njava.util.logging.Formatter의 구현체\nDefault : java.util.logging.SimpleFormatter\nEncoding\nHandler의 Character Encoding\nRoot\nRoot Logger여부\nLogger\nLogger 설정 정보의 상세 내용은 아래와 같다.\nTable 16. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nLogger 이름 지정\nLevel(*)\nLogger의 로그레벨\nHandler(*)\nLogger가 어떠한 Handler를 사용할지 선택\nConsoleHandler가 기본 선택\nServer의 로그설정 파일은 $CATALINA_HOME($CATALINA_BASE)/conf/logging.properties 이다.\nWeb Config Global web.xml의 설정을 관리하는 화면을 제공한다. 필요 항목을 수정한 후 Save 버튼 을 클릭하여 저장한다.\n설정 정보의 상세내용은 아래와 같다.\nDefault Servlet\nTable 17. 주요 설정 항목(*는 필수값) 설명 기본값 Listings\nWelcome파일이 없을 때, Directory Listing을 허용할지 여부\nfalse\nInput\nInput buffer size in bytes\n2048\nOutput\nOutput buffer size in bytes\n2048\nReadonly\nPUT, DELETE 등의 HTTP메소드를 허용하지 않음\ntrue\nFileEncoding\nFile Encoding\nplatform default\nShowServerInfo\nDirectory Listing이 허용되어 있을 때 Server 정보를 표시할지 여부\ntrue\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n1 (음수: disable / 0: 가장 마지막)\nJSP Engine\nTable 18. 주요 설정 항목(*는 필수값) 설명 기본값 CheckInterval\nDevelopment가 false일 때 jsp의 변경을 검사하여 재컴파일할지 확인하는 주기(s)\n0 (0: 비활성화 / 양수: 해당 주기로 활성화)\nDevelopment\nDevelopment 여부. Development가 true인 경우에는 modificationTestInterval 값을 주기로 하여 변경을 검사함\ntrue (0: 매 access마다 점검)\nGenStringAsCharArray\nString생성을 Char Array로 할지 여부\nfalse\nModificationTestInterval\nDevelopment가 true일 경우에 동작하는 jsp 변경 검사 주기\n4\nTrimSpaces\n응답에서 쓸데 없는 whitespace를 제거하여 응답바이트를 줄임\nfalse\nJavaEncoding\nJava소스를 generate할때의 Encoding\nUTF8\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n3\nJSP Page Encoding\nTable 19. 주요 설정 항목(*는 필수값) 설명 비고 URL Pattern\nPage Encoding을 적용할 JSP Page의 URL Pattern\nPage Encoding\n적용할 Page Encoding을 지정\nSession\nTable 20. 주요 설정 항목(*는 필수값) 설명 비고 SessionTimeout\n세션 타임아웃 시간(분)\nDefault : 30\nWelcome File List\nTable 21. 주요 설정 항목(*는 필수값) 설명 비고 File(*)\nDirectory index로 호출할 경우에 service할 파일을 순서대로 지정함\nEnvironment JVM 옵션, Start Shell의 설정과 System Properties(Enterprise Edition인 경우만 제공)를 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nJVM Setting ($CATALINA_HOME/bin/setenv.sh): Server 실행을 위한 JVM 옵션\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh): Server 시작을 위한 Shell Script\nJVM_ROUTE 값은 여기서 직접 수정하지 않고, General 탭의 Server Info 영역에 있는 JvmRoute 항목의 불러오기 버튼 을 사용하여 수정한다. 여기서 직접 수정할 경우 Manager DB의 정보가 Update되지 않아 DB값 불일치가 발생한다.\nSystem.properties($CATALINA_HOME/conf/system.properties) (이 항목은 Enterprise Edition에서만 확인할 수 있다)\nCatalina.properties ($CATALINA_HOME/conf/catalina.properties): Server의 Catalina 설정\n$CATALINA_HOME은 WAS의 기본 설치 디렉토리이다. $CATALINA_BASE는 본래 하나의 WAS에 복수개의 Instance를 사용하고자 할 때 디렉토리를 생성하여 Instance별로 지정하여 사용되지만 LENA에서는 WAS와 Instance가 1:1 관계라 $CATALINA_HOME이 곧 $CATALINA_BASE로 사용된다.\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Properties Server의 System Properties 와 System Environments를 확인하는 화면을 제공한다. System Properties 중 Key Properties 를 별도로 제공하여 Server경로, JAVA버전 등의 주요 정보를 확인할 수 있다. Server가 기동된 상태에서만 정보를 확인할 수 있다.\nContainer Enterprise Edition의 경우 EJB Container의 설정 변경 기능을 제공한다. container설정 없이 Server를 기동하면 EJB에서 필요한 container가 default 설정으로 생성된다. default설정 외에 변경이 필요한 설정이 있을 경우에는 container를 생성하여 설정을 변경해야 한다.\n기본 설정\nTable 22. 기본 설정 항목(*는 필수값) 설명 비고 ID(*)\nContainer의 식별자\nType(*)\nContainer의 유형\nCMP_ENTITY 설정\nTable 23. CMP_ENTITY 설정 항목(*는 필수값) 설명 비고 CmpEngineFactory\nFactory 클래스 명\nDefault : org.apache.openejb.core.cmp.jpa.JpaCmpEngineFactory\nBMP_ENTITY 설정\nTable 24. BMP_ENTITY 설정 항목(*는 필수값) 설명 비고 PoolSize\nBean pool의 크기 지정\nDefault : 10\nSTATELESS 설정\nTable 25. STATELESS 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nMaxSize\nBean pool의 최대 개수\nDefault : 10\nMinSize\nBean pool의 최소 개수\nDefault : 0\nStrictPooling\nPool이 최대치에 도달했을 때 동작방식 지정. StrictPooling은 pool size를 늘리지 않고 기다림\nDefault : true\nMaxAge\nPool에서 제거되기까지의 최대 시간(h)\nDefault : 0\nReplaceAged\nMaxAge에 도달했을 때 Replace할지 여부\nDefault : true\nReplaceFlushed\npool에서 Flush될 때 Replace할지 여부\nDefault : false\nMaxAgeOffset\nMaxAge 사용량\nDefault : -1\nIdleTimeout\n인스턴스가 pool에서 idle상태로 있을 수 있는 최대 시간(m)\nDefault : 0\nGarbageCollection\n풀을 줄이기 위한 메커니즘으로 garbage collection을 허용할지 여부\nDefault : false\nSweepInterval\n컨테이너가 풀을 정리하고 만료된 instance들을 제거하는 주기(m)\nDefault : 5\nCallbackThreads\nThread Pool 사이즈. 이 값은 컨테이너에 배포되어 있는 모든 Bean들에게 공유됨\nDefault : 5\nCloseTimeout\n풀이 닫히고 PostConstruct 메소드가 호출될때까지 기다리는 최대 시간(m)\nDefault : 5\nSINGLETON 설정\nTable 26. SINGLETON 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nSTATEFUL 설정\nTable 27. STATEFUL 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nCache\nStateful 빈 인스턴스를 관리할 cache\nDefault : org.apache.openejb.core.stateful.SimpleCache\nPassivator\nPassivator클래스 지정\nDefault : org.apache.openejb.core.stateful.SimplePassivator\nTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 20\nFrequency\n빈 캐쉬가 idle상태인 빈들을 확인하는 주기(s)\nDefault : 60\nCapacity\nStateful SessionBean 컨테이너에 대한 bean pool의 크기\nDefault : 1000\nBulkPassivate\n한번에 passivate할 instance의 개수\nDefault : 100\nMESSAGE 설정\nTable 28. MESSAGE 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\nResource Adapter 지정\nDefault : Default JMS Resource Adapter\nMessageListenerInterface\nMessageListener 지정\nDefault : Javax.jms.MessageListener\nActivationSpecClass\nActivation Spec Class 지정\nDefault : org.apache.activemq.ra.ActiveMQActivationSpec\nInstanceLimit\nInstance 최대 개수\nDefault : 10\nAudit WAS에서 발생한 이벤트로 수집/관리하는 기능이다.\n수집된 이벤트 정보는 이벤트 대시보드에서 확인할 수 있다. 이벤트 대시보드 관련 내용은 Event Dashboard를 참고한다.\n총 네 가지 타입의 Detection Rule을 설정해 이벤트를 수집할 수 있다.\nTable 29. OOM Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : true\nTable 30. Stuck Thread Detection Rule 항목 설명 비고 Enable\nStuck Thread 발생을 감지한다\nDefault : false\nLenaStuckThreadDetectionValve 는 server.xml 내에 기본적으로 설정되어 있으며, LenaStuckThreadDetectionValve 관련 설정은 SERVER \u0026gt; Server 선택 \u0026gt; General 탭 화면의 Stuck Thread 항목에서 할 수 있다.\n사용자 요청의 처리 시간이 Threshold 설정 값을 초과한 경우 이벤트가 발생되어 Manager로 전송된다.\nTable 31. Full GC Detection Rule 항목 설명 비고 Enable\nFull GC 발생을 감지한다\nDefault : false\nTable 32. Exception Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : false\nException Class Pattern\n감지할 Exception 패턴을 지정한다. 해당 패턴의 Exception을 상속한 Exception도 검출한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nExclude Exception Class Pattern\n감지에서 제외할 Exception 패턴을 지정한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nEnable Full Stack\nException이 여러 Cause를 가지고 있을 때, 요약 정보가 아닌 내용 전체를 표시할 지 여부\nDefault : true\nFull Stack Max Line\nException Stack Trace에서 표현할 Line 수. 각 Cause by 별로 설정한 수 만큼의 Line이 수집된다. 너무 큰 수로 지정하면 수집 및 저장관리에 부하가 발생할 수 있다\nDefault : 3\n검출이 가능한 Exception 클래스는 Java 자체적인 라이브러리에 포함된 Exception이 아닌, Application이나 Framework의 Exception이다. 너무 많은 량의 이벤트가 발생하지 않도록 Exception 패턴을 정의해야 한다.\nAudit 기능은 Enterprise Edition에서 제공되는 기능이다.\nConfig Tree WAS의 설치경로 하위의 /conf 폴더 하위 설정 파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 WAS 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 유형별로 History를 관리한다. 수정 일시와 설정 파일 Type을 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정 파일로 복원할 수 있다.\n4.3.9. Resource 관리 Server메뉴 하위의 Resources메뉴를 선택하면 해당 Server에 관련된 Resource정보를 관리할 수 있는 화면이 표시된다. 기본적으로 DataSource, JMS, JTA Resource에 대한 정보를 관리할 수 있다. (JMS, JTA Resource는 Enterprise Server일 경우에만 지원)\nWAS에 Resource 를 설정하는 방법은 다음과 같다.\n추가 : New 버튼 을 클릭하여 Resource를 추가한다. (Datasource, JMS 가능)\n삭제 : Delete 버튼 을 클릭하여 Resource를 삭제한다. (Datasource, JMS 가능)\n가져오기 : Import 버튼 을 클릭하여 RESOURCE 메뉴에서 등록된 Resource를 가져온다. (Datasource, JMS, JTA 가능)\nDataSource WAS의 Application이 사용할 수 있는 JNDI DataSource를 관리하는 기능을 제공한다. JNDI를 설정하여 Server에서 실행되는 모든 Application이 공유하여 사용할 수 있으며, 각각의 Application에 JNDI 설정을 하여 사용할 수도 있다. Enterprise Edition의 경우 JTA를 지원하여 속성이 추가된다.\nServer DataSource 설정 Server에서 실행되는 모든 Application이 공유하는 DataSource를 설정한다. Server에서 사용 가능한 DataSource의 목록을 조회할 수 있으며, DataSource의 등록, 수정, 삭제가 가능하다.\nDataSource의 상태를 체크하기 위한 접속테스트도 수행할 수 있다.\nDataSource의 속성은 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭하면 표시된다.\nTable 33. DataSource 속성 항목(*는 필수값) 설명 비고 Scope(*)\nDataSource를 사용할 범위\n다음과 같은 스코프를 제공함\nContext: 모든 Application이 공유하도록 Datasource 정보가 공통 context 영역에 설정된다.\nGlobal: GlobalNamingResource영역에 Datasource 정보가 설정되고, 어플리케이션 개별적으로 DataSource Link List에서 설정하여 사용한다.\nGlobal+ResourceLink: GlobalNamingResource 영역에 Datasource정보가 설정되고 Datasource 링크는 공통 context영역에 설정된다.\nJNDI Name(*)\nGlobal DataSource의 JNDI명\nDatabases\n공통으로 사용할 데이터소스의 정보를 설정\nResource Name\nDatabases의 이름\nAddress(Host/Port)\n공통으로 사용할 아이피와 포트\nDriverClassName\nJDBC Driver 클래스명\nURL(*)\nJDBC URL\nUsername(*)\n접속 사용자명\nPassword(*)\n접속 패스워드\nencryption을 체크할 경우 패스워드를 암호화하여 저장한다. 보안을 위해 암호화하는 것을 권장한다.\nEncryption Level\n인증 정보에 대한 암호화 범위 지정\nDefault : Password only\nDefaultAutoCommit\nPool에서 생성된 Connection들의 자동 Commit 상태\nDefault : JDBC driver의 기본값\nAutoReconnection\nTestOnBorrow와 TestOnWhileIdle의 값을 설정할 때 사용.\ntrue/false에 따라 두 값도 동일하게 설정됨.\nUser Definded 선택시 두 값을 사용자가 직접 설정 가능\nInitialSize\nPool의 초기 Connection 수\nDefault : 10\nMaxActive\nPool의 최대 Connection 수\nDefault : 100\nMinIdle\n최소 Idle Connection 수\nDefault : 10\nMaxIdle\n최대 Idle Connection 수\nDefault : 100\nMaxWait\nPool에 가용한 Connection이 없을 경우 대기하는 최대시간(ms)\nDefault : 30000\nMinEvictableIdleTimeMillis\n해당 시간 이상 idle 상태로 Pool에 존재한 Connection은 제거 대상이 됨 (ms)\nDefault : 60000 (60s)\n(XaDataSource = true로 설정하였을 시 1800000 (30m))\nValidationQuery\nConnection 유효성 검증 쿼리\nDefault : null\nValidationInterval\nConnection 유효성 검증 주기(ms)\nDefault : 3000\nTestOnBorrow\nPool에서 커넥션을 꺼내기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestOnReturn\nPool에 커넥션을 반납하기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestWhileIdle\nIdle 상태의 커넥션에 대해 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nLogValidationErrors\nvalidation query 수행 후 오류 발생 시 오류 출력 여부\nDefault : default(false)\nTimeBetweenEvictionRunsMillis\n사용되지 않은 Connection을 추출하는 Thread 실행주기(ms)\nDefault : 5000\nRemoveAbandoned\nConnection 유실 검출 여부\nDefault : default\nRemoveAbandonedTimeout\n유실Connection을 판단하기 위한 Timeout 값(s)\nDefault : 60\nLogAbandoned\nConnection 유실 처리시 로깅여부\nDefault : default\nAbandonWhenPercentageFull\nConnection pool이 설정한 점유율을 초과해야지만 abandon을 수행함\nDefault : 0\nJdbcInterceptors\n유연하고 플러그 가능한 인터셉터를 사용하여 사용자 정의 기능을 추가할 수 있음\nQueryTimeout 설정시 QueryTimeoutInterceptor(queryTimeout=시간(초)) 입력\nDefault 값이 true 또는 false가 아닌 default 인 경우, JDBC Driver의 기본값이 사용된다.\nEnterprise Edition의 추가 속성은 아래와 같다.\nTable 34. Enterprise Edition 추가 속성 항목(*는 필수값) 설명 비고 JtaManaged\nJTA 사용여부\nDefault : false\nXaDataSource\nXA 사용여부\nDefault : false\nXADataSource설정은 JTA가 설정되어야만 사용할 수 있으며, XADataSource를 설정하게 되면 validationInterval, logValidationErrors, abandonWhenPercentageFull 속성을 사용할 수 없다.\nDataSource를 Context 범위로 설정하면 모든 Application이 공유한다.\nEnterpriseServer에서 DataSource를 Context 범위로도 설정할 수 있으나, EJB에서는 Lookup이 불가능하다. EnterpriseServer에서는 Global + ResourceLink 범위로 설정하는 것을 권장한다.\nPassword 암호화 알고리즘은 AES를 사용하고 있다. 암호화를 위한 키 값은 Manager LENA Home 하위 /conf/repository/manager.conf 파일과 각 WAS Home 하위 /conf/advertiser.conf 내에서 “datasource.key=키값”으로 관리한다.\nDatabases\nURL 설정 시 공통을 사용할 정보를 Databases를 만들어 등록한다.\n추가(+) 버튼 을 클릭하면 팝업창이 생성된다.\nDatabases를 구분할 Resource Name을 입력한다.\n자동으로 채워진 DriverClassName 을 확인한다. 변경할 필요가 있을 경우 변경한다.\nAddress(아이피 및 포트)를 입력한 후 저장한다.\nJDBC driver Upload\nManager를 통해 JDBC Driver library를 upload 할 수 있다.\nDataSource 상세 정보 하위의 Upload 버튼 을 클릭하면 아래와 같이 upload를 위한 화면이 출력된다.\nSearch버튼을 통해 upload 할 파일을 선택한다. Upload 할 파일은 JDBC Driver library 이므로 JAR 형식의 파일만 선택할 수 있다.\nUpload 버튼을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nJDBC Driver 파일이 upload되는 경로는 ${SERVER_HOME}/lib/datasource이다.\nConnection Test\nDataSource 상세 화면에서 Connection Test 버튼 을 클릭하면 설정된 DataSource에 대한 연결 테스트를 수행할 수 있다. 정상적으로 연결이 된 경우 \"JDBC Connection is successfully tested\" 라는 문구가 출력된다.\n만약 \"Driver Class[클래스명] does not exist.\" 라는 오류 문구가 출력될 경우, 해당 driver class가 정상적으로 업로드 되어 있으며 이에 대한 classpath가 설정되어 있는지 확인한다.\nclasspath는 WAS 상세 \u0026gt; Environment \u0026gt; JVM Settings 내에 추가한다.\n설정 예 CLASSPATH=\u0026quot;$\\{CLASSPATH}:$\\{CATALINA_HOME}/lib/datasource/ojdbc6.jar\u0026quot; JMS Enterprise Edition의 경우 JMS관련 Resource를 정의할 수 있다. Active MQ Resource Adapter, JMS Connection Factory, Queue, Topic설정을 각각 추가, 수정, 삭제할 수 있다.\nTable 35. 주요 설정 항목(*는 필수값) 설명 비고 ID(*)\nResource의 식별자\nType(*)\nResource의 유형\n다음과 같은 타입을 제공함\nActiveMQResourceAdapter\nJMSConnectionFactory\nQueue\nTopic\nActive MQ Resource Adapter 설정\nTable 36. 주요 설정 항목(*는 필수값) 설명 비고 BrokerXmlConfig\nBroker 설정\nDefault : broker:(tcp://localhost:61616)?useJmx=false\nServerUrl\nBroker 주소\nDefault : vm://localhost?waitForStart=20000\u0026amp;async=true\nDataSource\nDatasource for persistence messages\nStartupTimeout\nStartup 최대 대기시간(s)\nDefault : 10\nJMS Connection Factory 설정\nTable 37. 주요 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\n사용할 Resource Adapter 지정\nTransactionSupport\nGlobal Transaction 여부 지정\n다음과 같은 타입을 제공함\nXA\nLOCAL\nNONE\nPoolMaxSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최대 개수\nDefault : 10\nPoolMinSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최소 개수\nDefault : 0\nConnectionMaxWaitTimeout\n커넥션 최대 대기시간\nDefault : 5 Seconds\nConnectionMaxIdleTimeout\n반납되기전 최대 idle시간\nDefault : 15 Minutes\nQueue 설정\nTable 38. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nQueue의 이름 지정\nTable 39. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nTopic의 이름 지정\nJMS 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\nJTA Enterprise Edition의 경우 Transaction Manager의 설정 변경 기능을 제공한다.\nTransaction Manager의 설정을 기본 설정으로 사용하려면 Managed Type을 Auto로 선택한다. (설치 시 default)\nTransaction Manager의 설정을 변경하고자 한다면 User Defined를 선택한다. (User Defined를 선택시 Recovery 옵션은 default로 \"No\"가 선택된다)\n주요 설정\nTable 40. 주요 설정 항목(*는 필수값) 설명 비고 Managed Type\nUser Defined Transaction Manager 여부 선택\nDefault : Auto\nID(*)\nTransaction Manager의 이름\nDefault Timeout\nTimeout 지정\nDefault : 10 minutes\nRecovery\nTransaction 오류 시 복원여부 설정\nTrue를 선택한 경우 Logging 설정이 열림\nTransaction Recovery Logging Option\nTable 41. Transaction 오류 시 복구를 위한 로깅 설정 항목(*는 필수값) 설명 비고 Directory\n로그파일을 생성할 디렉토리 위치\nDefault : txlog\nFile Name\n로그 파일 명\nDefault : howl\nFile Extension\n로그 파일의 확장자\nDefault : log\nMax Log Files\n생성되는 로그파일의 최대 개수\nDefault : 2\nMax Block Per File\n파일당 최대 블록 수\nDefault : -1\nBuffer Size\n버퍼사이즈(kb)\nDefault : 32\nMax Buffers\n버퍼의 최대값\nDefault : 0\nMin Buffers\n버퍼의 최소값\nDefault : 4\nAdler32 Checksum\nAdler32 Checksum, Checksum Enabled 설정이 모두 \"Yes\"인 경우 Adler32 알고리즘을 사용하여 checksum을 계산\nDefault : Yes\nChecksum Enabled\nBuffer의 Contents를 Disk에 기록 전 체크\nDefault : Yes\nThreads Waiting\n대기하는 스레드의 최대 갯수\nDefault : -1\nFlush SleepTime\nForceManager의 총 sleep 시간\nDefault : 50 Milliseconds\nJTA 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.3.10. Application 배포 목록 화면 상단의 SERVER 메뉴를 선택하여 Server 현황을 조회한다. 좌측 메뉴에서 배포할 Server의 Application을 선택한다. 배포가 완료된 Application의 목록을 조회하는 화면을 제공한다.\nApplication 목록의 항목은 아래와 같다.\nTable 42. Application List 항목 항목 설명 비고 Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nBase Name\nBase 명\nContext Path\nContext 경로\nDocBase\nApplication의 위치\nStatus\nApplication 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nAction 버튼\n아래와 같은 기능을 제공함\nUndeploy(휴지통) 버튼\nApplication Start 버튼\nApplication Stop 버튼\nApplication Reload 버튼\nView 버튼\n아래와 같은 기능을 제공함\nweb.xml View(문서) 버튼\nDeploy Application 을 배포하기 위한 속성은 아래와 같다.\nTable 43. Application 배포 속성 항목(*는 필수값) 설명 비고 Application Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축을 풀지 않고 배포\nDefault : true\nDocBase(*)\nApplication의 위치\nUpload 선택(파일) 버튼 을 통해 파일을 업로드 할 수 있음\nApplication Upload 별도의 배포 시스템이 없는 경우 Manager를 통해 application을 upload 할 수 있다.\n서버를 선택한 후 Applications 를 선택하여 Application 화면으로 이동한다.\nApplications 화면 하단의 Application Deploy 영역에서, DocBase 항목 우측 끝에 있는 Upload 선택(파일) 버튼 을 클릭하면 파일시스템 화면이 출력된다.\nupload 할 target 디렉토리(Server 쪽 Host)를 선택한다.\nUpload 버튼 을 클릭하면 application 파일을 선택할 수 있는 팝업이 생성된다.\n배포할 application 파일을 선택하고 Upload 버튼 을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nImport Import 버튼 을 클릭하여, [Resource] 메뉴에서 등록한 Application 정보를 가져와 배포할 수 있다.\n설정 정보 관리 Application 목록조회 화면에서 Application Name을 선택하면 Application 설정 관리화면을 조회할 수 있다. Application Descriptor 와 DataSource에 대한 설정 및 관리 기능을 제공한다.\nApplication 설정 변경은 선택한 Server에서만 가능하다.\nApplication Settings Application Descriptor에 설정된 정보를 관리한다.\n뒤로가기(\u0026#8592;) 버튼 을 클릭하여 Application 목록화면으로 돌아갈 수 있다. Expand all 버튼 을 클릭하여 Context의 추가적인 속성을 설정할 수 있다.\nDocBase와 ContextPath는 수정할 수 없으며, 속성의 자세한 정보는 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭해 확인할 수 있다.\nTable 44. Application Setting 항목(*는 필수값) 설명 비고 DocBase(*)\nApplication의 Document Base\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축은 풀리지 않고, 웹 애플리케이션은 단지 압축된 채로 재배치\nDefault : true\nreloadable\nApplication 변경 시(Class File) 재 반영 여부\nprivileged\nContainer Servlet의 사용 여부\ncookies\nsession identifier 통신에 cookie 사용 여부\nuseHttpOnly\nclient side에서 스크립트를 활용하여 session ID로의 접근 차단 여부\nsessionCookieDomain\n설정했을 경우 웹 어플리케이션에서 설정된 모든 도메인을 덮어씀. 설정하지 않을 경우 웹 어플리케이션에 의해 구분된 domain이 사용됨\nsessionCookieName\n설정하면 해당 이름으로 모든 세션 쿠키가 생성됨\nDefault : JSESSIONID\nsessionCookiePath\n설정할 경우 웹 어플리케이션은 해당 경로를 사용\nuseNaming\nJ2EE 플랫폼을 위한 JNDI InitialContext를 사용하기 위해 설정\nDefault : true\nAdd Attribute 버튼 을 사용하여 속성 값을 추가할 수 있다.\nDataSource Link List Global DataSource를 Application에서 사용할 수 있도록 설정 기능을 제공한다.\nDataSource 링크 관리의 속성은 아래와 같다.\nTable 45. DataSource 링크 관리 속성 항목(*는 필수값) 설명 Name(*)\nApplication에서 사용할 JNDI 이름\nJNDI Name(*)\nGlobal DataSource의 JNDI이름\nUserName\nDataSource 접속 사용자 명\nURL\nJDBC URL\nDescription\nDataSource에 대한 설명\n+ 아이콘\nNew 버튼, 수정(연필) 버튼 을 클릭하여 선택된 DataSource정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 DataSource 정보가 삭제됨을 표시\nNew 버튼 을 클릭하면 신규 설정을 추가할 수 있고, Save 버튼 을 클릭하면 변경된 설정이 저장된다.\nWAS에 설정된 Datasource 중 Scope가 Global 또는 Global + ResourceLink로 되어있는 Datasource가 신규 설정시 JNDI Name의 선택항목으로 나온다.\n4.4. Web Server Web Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Web Server의 등록, 수정, 삭제가 가능하며, 시작과 종료를 수행할 수 있다.\n4.4.1. 목록 Web Server List를 통하여 각 Web Server를 관리할 수 있다.\nWeb Server의 속성은 아래와 같다.\nTable 46. Web Server 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nHTTP Port\nHTTP 포트번호\nHTTPS Port\nHTTPS 포트번호\nSSL\nShell 실행시 SSL 기반의 패스워드 사용여부\nWeb Server에 SSL 관련 설정을 해야함\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 - 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.4.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer ID와 Service Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.3. Clone Clone 버튼 을 클릭하여 Web Server의 복제를 준비한다.\nNode List를 선택하여 복제할 Server를 선택한다.\nClone Server ID와 Service Port를 입력한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버의 Document Root 디렉토리에 있는 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.5. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.4.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 General 탭의 Stop Mode 에 따라 종료 방식이 달라진다.\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Server Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\nForced Stop/Restart Server 목록 가장 우측의 \u0026#8230;\u0026#8203; 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n4.4.8. 설정 정보 관리 Web Server의 설정 정보를 변경하는 기능을 제공한다. Web Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\nGeneral Web Server의 일반적인 설정 값과 Connection, Process 정보를 편집할 수 있다.\nWeb Server의 설정 정보는 저장 시 설정 파일에 대한 Validation을 수행하게 되어 있으며, 설정 파일 오류로 인한 Server 기동 장애가 발생을 최소화하고 있다.\n설정 파일 오류 시 파일이 저장되지 않고 오류 메시지가 출력된다\n오류 메시지 예 AH00526: Syntax error on line 253 … Argument for 'Require all' must be 'granted' or 'denied' 설정 정보의 상세 내용은 다음과 같다.\nServer Info (env.sh과 /conf/httpd.conf 파일 관리)\nTable 47. Server Info 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP Port\nHTTPS Port(*)\nHTTPS Port\nStaging HTTP Port\nStaging 모드로 기동 시 사용하는 서비스 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nStaging HTTPS Port\nStaging 모드로 기동 시 사용하는 HTTPS 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nInstall Path\nServer 설치 경로\nDocument Root(*)\nWeb Server에서 제공하는 문서들이 저장되어 있는 기본 폴더 경로\nWelcome Page\n웹사이트의 초기페이지 문서로 어떤 파일을 사용할 것인지 정의\nStop Mode\nWEB 서버 종료시 참조하는 옵션\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\nDirectory/Path\n어떤 서비스와 기능을 허용/거부 할지를 설정할 웹 문서들이 있는 디렉토리 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\nIndexes : welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\nFollowSymLinks : Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory\n/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정 파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형이 존재함\n* None : 어떠한 지시자도 허용하지 않음 * All : 모든 지시자 사용가능 * AuthConfig : 사용자 인증 지시자 허용 * FileInfo : 문서 유형 제어 지시자 허용 * Indexes : 디렉토리 Indexing 제어 지시자 허용 * Limit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nConnection Info (/conf/extra/httpd-default.conf 파일 관리)\nTable 48. Connection Info 항목(*는 필수값) 설명 비고 Timeout(*)\n클라이언트와 Server간에 연결 후 일정 시간 동안 아무 이벤트가 발생하지 않았을 때 Server가 기다리다가 연결을 끊을 시간(s)\nDefault : 60\nKeepAlive(*)\n특정 한 프로세스가 특정 사용자의 요청작업을 계속해서 처리할지 여부\nDefault : On\nMaxKeepAliveRequests(*)\nKeepAlive가 On일 때 유효한 값으로 하나의 프로세스가 특정 사용자의 요청을 지정한 횟수만큼 처리\n이 값을 넘어서면 해당 프로세스는 죽고 다른 프로세스가 요청을 처리함\nDefault : 100\nKeepAliveTimeout(*)\nKeepAlive가 On 일 때 유효한 값으로 설정한 시간 동안 요청이 없으면 연결을 끊기 위해 타임아웃 시킴(s)\nDefault : 5\nRequestReadTimeout(*)\n사용자로부터 request header와 body를 받기 위해 기다리는 시간\n설정된 시간 안에 받지 못하면 408 REQUEST TIME OUT 에러를 보냄\nDefault : header=20-40,MinRate=500 body=20,MinRate=500\nProcess Info (/conf/extra/httpd-mpm.conf 파일 관리)\nTable 49. Process Info 항목(*는 필수값) 설명 비고 StartServers(*)\nWeb Server 기동 시 초기화 되는 Server 프로세스 수\nDefault : 2\nServerLimit(*)\nMaxClients가 생성할 수 있는 최대 프로세스 값\nDefault : 8\nThreadLimit(*)\nThreadsPerChild의 설정 가능한 최대 값\nDefault : 128\nMinSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 적을 때 Thread가 이 값까지 늘어나 유지\nDefault : 128\nMaxSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 많을 때 Thread가 이 값까지 줄어들어 유지\nDefault : 256\nThreadsPerChild(*)\n각각의 자식 프로세스가 생성하는 Thread 수\nDefault : 128\nMaxRequestWorkers(*)\n전체 자식 프로세스가 생성할 수 있는 최대 Thread 수\nDefault : 1024\nMaxConnectionPerChild(*)\n자식 프로세스가 서비스 할 수 있는 최대 요청 수. 이 값만큼 요청을 처리한 후 종료한다.\nDefault : 0 (0: 제한없음)\nWeb Server 가 mpm event 방식을 사용할 수 있는 환경인 경우 Process Info 설정을 간편하게 할 수 있는 기능을 제공한다.\nWeb Server 의 Process Info 설정 시 우측 상단의 Auto Calculation 을 체크하면 기본 제공되는 설정 값 유효성 검사 외에 간편 자동계산 기능이 제공된다.\n규칙 유효성 검사 자동 계산 StartServer ≤ ServerLimit\n●\n-\nThreadsPerChild ≤ ThreadLimit\n●\n-\nThreadsPerChild + MinSpareThreads ≤ MaxSpareTheads\n●\nThreadsPerChild 변경 시 MinSpareThreads, MaxSpareThreads 자동 계산\nServerLimit × ThreadLimit ≤ MaxRequestWorkers\n●\nServerLimit, ThreadLimit 변경 시 MaxRequestWorkers 자동 계산\nPagespeed Info\nTable 50. Pagespeed Info 항목(*는 필수값) 설명 비고 Enabled(*)\nmod_pagespeed를 적용하여 Web Server가 제공하는 Resource에 대한 최적화를 수행하여 사이트 속도를 높일지 여부\nDefault : off\n다음과 같은 옵션을 제공함\non : Resource들에 대해 최적화 허용\noff : 추가적인 최적화를 중지하나, 기존에 최적화 되어있는 Resource들에 대한 접근 허용\nunplugged : 최적화 중지 및 접근 불허\nRewriteLevel(*)\n모듈이 rewrite할 필터의 Level 설정\nDefault : default(CoreFilters)\n다음과 같은 옵션을 제공함\nCoreFilters : 사전에 대부분의 웹사이트에서 안전하다고 생각하는 필터가 포함되어있음\nOptimizeForBandwidth : 안전성을 강화하며, Pagespeed를 인식하지 못하는 사이트에서 사용하기 적합\nPassThrough : 필터를 전부 수동으로 입력\nFileCachePath(*)\nCaching 될 File들이 저장되는 디렉토리의 경로\nLogDirPath(*)\nLog를 기록할 디렉토리의 경로\nEnableFilters\n사용할 필터들의 목록\nDisableFilters\n사용하지 않을 필터들의 목록\nAllow URI\nrewrite를 허용할 Resource들의 와일드카드(*)를 포함한 URI\n예) /.js\nDisallow URI\nrewrite를 허용하지 않을 와일드카드(*)를 포함한 URI\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다.\nConnector Web Server의 Connector정보와 Load Balancer정보를 편집할 수 있다. Connector Info 영역의 정보는 Web Server 내에 설정된 Load Balancer의 기본 설정 값을, Load Balancer영역은 Web Server와 WAS를 연계하는 정보를 관리한다.\n설정 정보의 상세 내용은 다음과 같다.\nConnector Info (/conf/extra/httpd-jk.conf와 /conf/extra/workers.properties 파일 관리)\nTable 51. Connector Info 항목(*는 필수값) 설명 비고 Type(*)\nWeb Server와 WAS가 통신할 때 사용하는 프로토콜\najp 13\nLoad Balancing Factor(*)\nWAS의 부하 분산 지수. 즉, 작업량 할당 비율\nDefault : 1\nSocket Timeout(*)\nJK와 WAS 간에 응답 대기 시간(TCP socket 내부적인 상태에 대한 timeout을 의미, s)\nDefault : 300\nSocket Connect Timeout(*)\nJK와 WAS 간의 socket 연결 대기시간\nDefault : 5000\nSocket Keepalive(*)\nWeb Server와 WAS 간에 방화벽이 있는 경우 inactive 상태인 connection은 버리게 되어 있는데 OS에 keep alive 메시지를 보내서 방화벽이 inactive connection을 잘라버리는 것을 막을지 여부 설정\nDefault : true\nConnect Timeout(*)\nJK와 WAS 간에 연결이 완료된 후, ajp13 프로토콜에서의 cping request에 대한 cpong respond 대기 시간(ms)\nDefault : 10000\nConnection Pool Size(*)\nJK와 WAS 간에 커넥션을 cache하는 크기\nDefault : 128\nConnection Pool Min Size(*)\nJK와 WAS 간에 커넥션을 cache하는 최소 크기\nDefault : 32\nConnection Pool Timeout(*)\nConnection pool에서socket을 close 하기까지 open된 socket을 유지하는 시간\nWAS에서 connectionTimeout 설정과 같이 설정해야 함\nLog Level(*)\n에러 로그 파일의 기록 내용을 얼마나 자세히 기록할지 지정\nDefault : error\nLog Format(*)\n로그 파일에 어떤 포맷으로 로그를 남길지 설정\nStatus(*)\nServer 상태 모니터링 설정값 셋팅 여부\nEnable 선택시 Status Url과 Allow IP를 설정할 수 있음\nDefault : Enable\nStatus Url(*)\nServer 상태 모니터링 URL\nDefault : /jk-status/\nStatus Allow IP(*)\nServer 상태 모니터링 URL에 접근 가능한 IP\nDefault : 127.0.0.1\nLoad Balancer Info\n(/conf/extra/workers.propertes, /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties, /conf/extra/vhost/\\{Virtual Host ID}.conf 파일 관리)\nTable 52. Load Balancer Info 항목(*는 필수값) 설명 비고 LB ID(*)\nLoad Balancer명\nSticky Session\nSession ID를 기반으로 라우팅을 지원할지 여부\nDefault : true\nStatus Enabled\nServer 상태 모니터링 사용여부\n동일 Virtual Host에 적용된 Load Balancer에 대해서는 일괄 적용됨\nDefault : N\nVirtual Host ID(*)\nLoad Balancer를 적용할 Virtual Host ID\nVirtual Host 탭을 통해 관리됨\nSession Cookie\nSession Cookie Name을 변경하고자 할 경우 설정 (WAS에서 Session Cookie Name 변경시 같이 변경해줘야 함)\nDefault: JSESSIONID\nURI Patterns(*)\nWeb server로 들어온 요청들에 대해 URI패턴을 검사하여 WAS로 전달하는 uri mapping을 정의\nMethod(*)\nLoad Balancer 가 부하를 분산하기 적절한 worker를 판별하는데 사용할 메서드\n다음과 같은 타입을 제공함\nR[equest] : 요청수가 가장 적은 worker 선택. (Default)\nS[ession] : 연결된 세션이 가장 적은 worker 선택\nN[ext] : S[ession]과 비슷하지만 더 적은 수의 session을 분산해야 하는 경우 선택\nT[raffic] : JK와 AJP커넥터 사이에 네트워크 트래픽이 가장 작은 worker 선택\nB[usyness] : 요청 수를 기반으로 가장 부하가 적은 worker 선택 Redirect\n해당 worker가 error 상태일 때 받은 요청을 대신 처리할 failover worker를 설정\nDefault : Round Robin\nLB Factor\n작업량 할당 비율. 해당 worker가 얼마나 많은 일을 할지 정의 (5로 설정할 경우 1로 설정한 다른 worker보다 5배 더 많은 request를 받음)\nURI Pattern 정보는 /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties 파일에 관리된다.\nWAS List의 [+] 버튼을 통해 Load Balancer와 연계되는 WAS를 추가할 수 있으며, 추가된 WAS의 ⓧ 버튼을 통해 해당 WAS를 제외할 수 있다.\n연계 WAS 정보는 /conf/extra/workers.properties 파일에 관리된다.\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nVirtual Host Web Server의 Virtual Host 정보를 등록/수정/삭제할 수 있다.\nNew 버튼, Delete 버튼 을 통해 Virtual Host를 등록/삭제할 수 있다.\n1개 이상의 Load Balancer를 적용한 Virtual Host는 삭제할 수 없다. 만약 해당 Virtual Host를 삭제하려면, 먼저 Connector 탭을 통해 Load Balancer의 Virtual Host ID를 다른 Virtual Host ID로 변경해야 한다.\nSSL Enabled와 Rewrite Enabled를 체크한 경우 아래와 같이 상세 항목 영역이 추가로 출력된다.\n설정 정보의 상세 내용은 다음과 같다.\n(/conf/extra/vhost/\\{Virtual Host ID}.conf, /conf/extra/rewrite/rewrite_\\{Virtual Host ID}.conf, /conf/extra/ssl/ssl_\\{Virtual Host ID}.conf 파일 관리)\nTable 53. Virtual Host 설정 정보 항목(*는 필수값) 설명 비고 Virtual Host ID(*)\nVirtual Host 이름\nPort(*)\n해당 가상호스트가 사용하는 HTTP Port\nDocumentRoot(*)\n해당 가상호스트의 홈페이지 디렉토리 위치\nServer의 DocumentRoot 변수인 ${DOC_ROOT}를 활용하여 동일하게 혹은, 그 하위로 지정가능\nServerName(*)\n해당 가상호스트의 도메인 명\nServerAlias\n해당 가상호스트가 사용하는 ServerAlias\n와일드카드 문자 포함 가능(*.example.com)\nErrorLog(*)\n해당 가상호스트의 웹 에러로그 파일 위치\nCustomLog(*)\n해당 가상호스트의 웹 로그파일 위치\nDirectory/Path\nDocumentRoot에서 지정한 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\n-Indexes는 welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\n-FollowSymLinks는 Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형을 제공함\nNone : 어떠한 지시자도 허용하지 않음\nAll : 모든 지시자 사용가능\nAuthConfig : 사용자 인증 지시자 허용\nFileInfo : 문서 유형 제어 지시자 허용\nIndexes : 디렉토리 Indexing 제어 지시자 허용\nLimit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nRewirte Enabled\nRewrite사용여부\nRewirte Conf\nRewrite관련 상세 설정. 지정한 Rewrite Condition에 따라 Rewrite Rule에 설정한 rule대로 rewrite함\nProxy Enabled\nProxy 사용여부\nconf/extra/proxy 디렉토리에 설정파일이 위치한다. 필요한경우 ProxyPreserveHost 를 셋업하면 요청의 host 명을 유지할 수 있다. default 값은 off 이며 필요한 경우 on 한다. (ex: application 에서 redirect 사용 시)\nProxy Pass Match\nbackend와 연동하기 위한 정규식 패턴과 Target 서비스 도메인주소\nDNS Lookup Interval\nDNS Lookup 주기(s)\nDefault: 10\nSSL Enabled\nSSL 사용여부\nSSLPort(*)\nHTTPS Port\nSSLCertificateFile(*)\nSSL 인증서 경로\nSSLCertificateKeyFile(*)\nSSL인증서 Key파일 경로\nSSLCertificateChainFile\nFile of PEM-encoded Server CA Certificate\nSSLCACertificateFile\nROOT인증서 경로\nHttps Redirect Enabled\nHttp\u0026#8594;Https Redirect 사용여부\nSSL Log Separation\nSSL Log 설정 분리 사용여부\nSSLErrorLog\nSSL Error Log 설정\nSSLCustomLog\nSSL Custom Log 설정\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nLogging Web Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 54. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nError Log\nWeb server가 진단정보와 request를 처리하는 도중에 발생한 오류를 기록할 때 사용된다. Server가 시작하거나 동작하는데 문제가 발생시 여기에 설정된 위치의 파일을 먼저 확인한다.\nTable 55. Error Log 항목(*는 필수값) 설명 비고 Location(*)\nWeb server의 에러로그파일 위치를 지정\nLog Level(*)\n에러로그파일의 기록내용을 얼마나 자세하게 기록할 지 지정\nCustom Log\n로그파일 이름과 형식을 설정한다. 환경변수를 사용하여 request의 특징에 따라 선택적으로 로그를 남길 수 있다.\nTable 56. Custom Log 항목(*는 필수값) 설명 비고 Location(File|Pipe)(*)\nFile: 에러로그 파일 위치\nPipe: 파이프 문자 \"|\" 뒤에 로그 정보를 표준 입력으로 받을 프로그램 경로\nFormat|Nickname(*)\n로그파일에 기록할 내용\nLog Format으로 정의한 nickname을 쓰거나 직접 로그 포맷을 작성\nEnv\nServer의 환경 변수 유무에 따라 로그를 기록할지 여부 작성\n예를 들어, 영어권 사용자의 요청과 비영어권 사용자의 요청을 다른 로그파일에 기록하고 싶은 경우 다음과 같이 설정할 수 있다.\n설정 예 Location Format Env logs/english_log common english logs/non_english_log common !english Log Format\n로그파일에 사용할 형식을 설정한다.\nTable 57. Log Format 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\nNickname(*)\nCustomLog에서 사용할 로그포맷 명\nLog Format with logio\nTable 58. Log Format with logio 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\n%I와 %O 변수를 사용해 request와 head를 포함하여 보내고 받는 byte 측정이 가능\nNickname(*)\nCustomLog에서 사용할 로그포맷 명\ncombinedio는 mod_logio_module이 로드되어 있어야 함\nEnv\nRequest의 조건에 따라 환경변수를 설정할 때 사용한다.\nTable 59. Env 항목(*는 필수값) 설명 비고 Attribute(*)\nHTTP 요청 헤더(ex: Host, User-Agent, Referer, Accept-Language), 요청 속성 중 하나(Remote_Host, Remote_Addr, Server_Addr, Request_Method, Request_Protocol, Request_RUI) 또는 요청과 연관된 환경 변수 이름\nRegex(*)\nPerl 호환 정규식\nEnv-variable[=value](*)\n설정할 변수명과 설정값(optional)\nVarname, !varname 또는 varname=value\nCase\nEnv-variable에 대소문자 구분할지 여부\nWith case : 대소문자 구분\nNo case : 대수문자 구분없음\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nEnvironment JVM 옵션, Start Shell의 설정 등을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 되어 있다. 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Config Tree Web Server의 ${SERVER_HOME}/conf 디렉토리 하위 설정파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 Web Server 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 History를 관리한다. 수정 일시를 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정파일로 복원할 수 있다.\n4.5. Session Server Session Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Session Server의 등록, 수정, 삭제가 가능하며, 시작과 종료 Shell을 실행할 수 있다.\n4.5.1. 목록 Session Server List를 통하여 각 WAS를 관리할 수 있다.\nFigure 7. Session Server List Session Server의 속성은 아래와 같다.\nTable 60. Session Server 속성 항목(*는 필수값) 설명 비고 Status\nSession Server의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nSession Server의 이름\nAddress\nSession Server의 IP주소\nServer ID\nServer의 ID\nPort\nService 포트번호\nServer Type\nSession Server의 유형\nStandalone\nEmbedded\nStart/Stop\nServer의 시작 및 종료\n+ 아이콘\n+Register 버튼 또는 연필 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Restart를 수행할 수 있는 메뉴 제공\nSession Server는 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.5.2. Install Install 버튼 을 클릭한다.\nServer ID와 Service Port, Mirror Server IP/Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 이전에 설치된 Server 정보를 확인한다.\n4.5.3. Register Register 버튼 을 클릭한다.\n등록할 Server를 클릭한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.4. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.5. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.5.6. Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\n4.5.7. 설정 정보 관리 General Server의 설정 정보를 변경하는 기능을 제공한다. Session Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\n환경설정에서 변경 가능한 속성은 아래와 같다.\nConfiguration\nTable 61. Configuration 항목(*는 필수값) 설명 비고 Primary Host(*)\nServer의 Service Host(IP)\nPrimary Port(*)\nServer의 Service Port\nMirror Server Host(*)\nPair Server의 Host(IP)\nMirror Serror Port(*)\nPair Server의 Service Port\nShare session in applications\nMulti Applications 간 Session 공유 여부 설정.\nWAS에서도 이 항목을 동일한 값으로 처리해야 적용됨.\nstandalone에서만 가능함.\nSession Timeout Sec\nSession server의 session expired time 설정.\nstandalone에서만 가능함.\nConnected WAS List\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 62. Connected WAS List 항목(*는 필수값) 설명 비고 Server Name\nWAS의 Name\nHost\nWAS가 설치된 Host명\nStatus (Session Server의 상태 정보 제공)\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 63. Status 항목(*는 필수값) 설명 Session Count\n현재 Session 개수\nLogout Count\nLogout 요청으로 Logout 된 Session 수\nSession Max Count\nSession 저장 최대 개수\nSession Timeout\nSession timeout 시간(ms)\nRequest Getnew Logout\nWAS에서 전달된 GET_FRESH Request에 대한 Logout 응답 횟수\nData From Nodes\nWAS에서 전달된 Session 개수\nRequest Getnew Nodata\nWAS에서 전달된 GET_FRESH Request에 대한 NODATA 응답 횟수\nRequest Getnew\nWAS에서 GET_SESSION Request했을 때 늘어난 횟수\nPid\nSession이 standalone일 경우 프로세스 ID\nRequest Getfresh Data\nWAS에서 GET_FRESH Request 가 왔을 때 해당 Session이 있는 경우 횟수\nRequest Getfresh Logout\nWAS에서 GET_FRESH Request가 왔을 때 해당 Session이 Logout 된 횟수\nSession Recv Lost\nSession receive가 유실된 개수\nLogout From Nodes\n다른 was에서 logout 된 횟수\nSession Expired\nSession Time Out 시간으로 Expired 된 Session 수\nRequest Getfresh Nodata\nWAS 에서 GET_FRESH_SESSION request했는데 데이터가 없을 경우 늘어난 횟수\nData From Secondary\nSlave server에서 온 Data 개수\nRequest Getfresh\nWAS에서 GET_FRESH Request 요청 횟수\nLogout From Secondary\nSlave Server에서 Logout Request가 전달 된 횟수\nReq Lost\nRequest 유실 개수\nResp Lost\nResponse Queue의 사이즈 이상으로 Response 가 수신되어 손실된 Response 개수\nRequest Getfresh Secondary\nSlave Server에서 GET_FRESH Request 요청 횟수\nRequest Getfresh Not New\nWAS에서 전달된GET_FRESH Request에 대한 NOT_NEW Response 횟수\nRequest Getnew Secondary\nSlave Server에서 GET_SESSION request했을 때 늘어난 횟수\nLogging Session Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 64. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nEnvironment Start Shell의 설정을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false 5. Cluster 5.1. Server Cluster Server Cluster는 동일한 서비스 제공을 위해 동일한 구성으로 구동되는 Application Server와 Web Server의 묶음이다.\nFigure 8. Server Cluster 화면 5.1.1. Server Cluster 목록 매니저에 등록된 Server Cluster 목록은 좌측메뉴에서 Server Cluster를 선택하면 확인 할 수 있다.\nServer Cluster List 테이블에서 제공되는 속성은 아래와 같다.\nTable 65. Server Cluster 속성 항목 설명 비고 Select\n삭제를 위한 콤보박스\nServer Cluster Name\nCluster 명\nServers\nServer Cluster를 구성하는 각 Server별 개수\nApplication Server\nWeb Servers\n5.1.2. Server Cluster 생성 Server Cluster 생성에서는 Server Cluster를 구성할 Application Server 목록과 Web Server 목록을 선택한다.\nServer Cluster Group을 선택하고 Server Cluster 목록 하단의 +New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nServer Cluster의 기본 정보를 입력한다.\nServer Cluster Name: Server Cluster명을 입력한다.\nApplication Server Type: Server Cluster의 멤버로 사용될 Application의 Type을 선택한다. Standard와 Enterprise 두가지 유형이 있다.\nEnable Scaling: Auto Scaling기능 사용여부를 선택한다. 이 옵션은 server cluster 생성 후에는 변경 할 수 없다.(이 기능은 Container Edition에서만 지원하며, 사용하기 위해선 manager.conf에서 scaling.enable를 true로 설정한다.)\nDescription: Server Cluster와 관련하여 필요한 설명들을 입력한다.\n선택한 Application Server Type에 해당하는 서버 목록이 아래 Application server in server cluster 영역에 조회된다. Selectable Servers 에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다. Web servers in server cluster 영역에서 마찬가지로 Selectable Servers에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다.\n하나의 Server는 하나의 Server Cluster에만 지정할 수 있으므로, 다른 Server Cluster에 매핑되지 않은 Application Server와 Web Server만 Selectable Servers 목록에 조회된다.\nV Save 버튼 을 클릭하여 저장한다.\n좌측 트리에 입력한 server cluster명의 메뉴가 추가되었음을 확인할 수 있다.\n5.1.3. Server Cluster 삭제 좌측 Server Cluster 트리메뉴에서 Server Cluster Group을 선택한다.\nServer Cluster List에서 삭제할 Server Cluster의 Select 컬럼의 체크박스를 선택한다.\n- Delete 버튼 을 클릭하여 삭제한다.\n5.1.4. Server Cluster 상세 Overview 좌측 메뉴 또는 Server Cluster Group 상세에서 Server Cluster를 선택하면 Server Cluster에 대한 Overview 화면이 출력된다.\nServer Cluster 상세 영역의 항목 및 버튼이 제공하는 기능은 아래와 같다.\nTable 66. Server Cluster 상세 영역의 항목 및 버튼 항목 또는 버튼명 기능 Server Cluster Name\nServer Cluster 명\nApplication Server Type\nServer Cluster에 구성되어 있는 Application Server 유형(변경 불가)\nServer Config Synchronization Policy\nServer Cluster 동기화 수행(Sync 버튼 선택) 중 오류 발생시 처리 정책\nServer Config Synchronization Policy의 option은 아래와 같다. (기본값 : Force)\nStop : 설정 동기화 중 오류 발생 시 즉시 중지\nRollback : 설정 동기화 중 오류 발생 시 전체 rollback\nForce : 설정 동기화 중 오류 발생 시 해당 Server를 건너뛰고 다음 수행\nEnable Scaling\nServer Cluster의 Auto Scaling 기능 사용여부(변경 불가)\nDescription\nServer Cluster에 대한 설명\nCompare 버튼\nServer Cluster 내 Application Server와 Web Server, Session Server의 동기화 상태를 비교한다.\nServer 유형별 비교 항목은 아래와 같으며, 이는 아래 Server 목록 영역 각각의 컬럼에 출력된다.\nServer Config, Application, Resource 및 Session 비교는 각 Server 유형별 Master Server를 기준으로 한다.\nApplication Server Server Config : Application Server 설정 정보 동일 여부\nApplication : 각 Application Server에 deploy된 Application이 동일 여부\nResource : Resource 설정 동일 여부\nSession : Session Clustering을 위한 Session Server 설정 동일 여부\nWeb Server Server Config : Web Server 설정 정보 동일 여부\nConnect to WAS : Server Cluster 내 모든 Application Server와 연계되어 있는지 여부\nSync 버튼\nServer Cluster 내 Application Server의 Server Config, Application, Resource, Session 정보를 동기화한다.\nServer Cluster 내 Web Server의 Server Config와 WAS 연계 정보를 동기화한다.\nSnapshot 버튼\n동기화된 Server Cluster에 대해 현재 상태를 Snapshot으로 저장한다. 생성된 Snapshot은 Snapshot 탭에서 확인할 수 있다.\nSnapshot에는 Application Source도 포함된다. 따라서 과도하게 Snapshot을 생성하면 시스템 디스크 용량을 많이 차지할 수 있으므로 꼭 필요한 경우에만 생성하고 불필요한 Snapshot은 Snapshot 탭을 통해 삭제해야 한다.\nGraceful Restart 버튼\nServer Cluster 내 Web Server와 Application Server를 순차적으로 재기동한다. Graceful Stop을 수행하므로 처리 중인 service가 모두 종료된 후 Server가 stop 된다.\n처리 순서는 아래와 같다. ()로 표현된 절차는 생략 가능하다.\nWeb Server Stop\nApplication Stop\n(Application Source 업로드)\nApplication Server Start\n(별도 port로 테스트를 위해 Web Server를 staging port로 Start)\nWeb Server Start\nV Save 버튼\n변경된 Server Cluster 상세 설정 내용을 저장한다.\n동기화 상태 조회 Server Cluster의 동기화 상태는 Compare 버튼 을 선택하여 비교 후 그 결과를 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\n동일 또는 유효한 상태인 경우 상태가 초록색 원 아이콘 으로 출력된다.\nServer의 상태가 동일하지 않을 경우 붉은색 원 아이콘 으로 나타나며, 해당 아이콘을 클릭하면 별도의 팝업창이 출력되어 Server별 상세 정보를 확인할 수 있다.\n또한 각 Server 목록에서 Server Name을 클릭하면 해당 Server 상세 화면으로 이동할 수 있다.\nApplication Server의 Server Config 상세\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nApplication Server의 Application 상세\nApplication의 Deploy 상태 비교 결과가 출력된다.\nApplication Server의 Resource 상세\nApplication Server의 Resource 비교 결과가 출력된다.\nApplication Server의 Session 상세\nApplication Server의 Session 설정 비교 결과가 출력된다. 팝업창에는 Master Server에 설정된 세션 정보를 제공한다.\nWeb Server의 Server Config\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nWeb Server의 Connect to WAS\n해당 Web Server가 Server Cluster에 속한 모든 Application Server에만 연계되어 있을 때 초록색 원 아이콘 상태로 출력되며 그 외의 경우에는 붉은색 원 아이콘 으로 표시된다. 붉은색 원 아이콘 을 클릭하면 별도의 팝업창이 출력되어 상세 정보를 확인할 수 있다.\n팝업창에는 Web Server에 연계되어 있는 Application Server가 모두 Server Cluster에 등록된 Server인지에 대한 상세 정보를 출력한다((Web Server Status). 또한 Server Cluster에 등록된 모든 Application Server가 해당 Web Server에 연계되어 있는지에 대한 상세 정보를 출력한다.(Application Server Status)\n상태 동기화 수행 Server Cluster의 동기화 수행은 [.button]#Sync 버튼#을 선택하여 진행 한다. 그 결과는 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\nGraceful Restart Graceful Restart 기능은 처리중인 업무의 처리 종료를 보장하면서 Server Cluster 내 모든 서버에 대한 재기동을 수행할 때 사용된다. 수행시 아래와 같은 절차를 통해 수행된다. (Server Cluster 내 모든 서버에 적용됨)\nGraceful Restart 시작 전\nStart Process 버튼을 클릭하면 Graceful Restart 작업이 시작된다.\nWeb Server Stop 단계\nWeb Server에 대한 Stop을 수행한다. 수행 중인 Thread가 모두 종료된 후 Web Server가 Stop된다.\nApplication Server Stop 단계\nApplication Server에 대한 Stop을 수행한다. 본 단계는 모든 Web Server가 종료된 후 활성화된다.\n소스 배포 (생략 가능) 단계\nApplication Server에 대한 소스 배포(업로드)를 수행한다. 별도의 배포 시스템이 있는 경우 이 단계는 생략 가능하다.\nApplication Server Start 단계\nApplication Server에 대한 Start를 수행한다. 기동 로그를 함께 조회할 수 있다.\nWeb Server를 Staging mode로 Start (생략 가능) 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nWeb Server Start 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nGraceful Restart 완료\nApplication Server Server Cluster 내 Application Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Application Server의 Master Server 선택, 동기화할 설정파일 지정 및 JDBC Driver 동기화 여부를 설정할 수 있다.\nMaster Server\nServer Cluster내 Application Server 중 Master Server를 지정한다.\nServer Configs for Synchronization\nServer Cluster 내의 Application Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Application Server의 Home 하위의 상대 경로이다.\nSync JDBC Drivers\nManager Repository 경로/lib/datasource/폴더 하위 모든 jar파일을 동기화대상에 포함할지 여부를 선택한다.\nJDBC Driver는 Runtime시 Jar파일 교체에 따른 오류를 방지하기 위해 Sync 대상 서버에 해당 JDBC Driver가 없을 경우에만 동기화 된다.\nApplication 관리 Application Server 목록에서 서버를 선택시 하단의 Application 탭을 통해 선택된 서버의 Application 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Application에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nResource 관리 Application Server 목록에서 서버를 선택시 하단의 DataSource, JMS, JTA 탭을 통해 선택된 서버의 DataSource, JMS, JTA의 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Datasource, JMS, JTA에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nSession 관리 Application Server 목록에서 서버를 선택시 하단의 Session 탭을 통해 선택된 서버의 Session 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Session에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nApplication Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Application Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 67. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nAll Web Server Sync: Clone후 web서버와 연동 동기화\nAll Web Server Graceful Restart : Clone후 Web서버 재기동 여부\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 application 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Application Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nApplication Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Application Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Application Server의 Server Config, Application, Resource, Session 설정을 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Application Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\n팝업창의 Action 항목에는 Force Restart 버튼 과 Next 버튼 이 제공된다.\nTable 68. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Next 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nTable 69. Rolling Restart 팝업창 버튼 설명 버튼명 기능 Start\n팝업창에 보여지는 대상서버의 재기동을 시작한다. 테이블의 위에서부터 순차적으로 진행된다.\nPause\n재기동작업을 일시 중지한다. 중지 / 기동을 수행중인 경우 수행중인 명령이 중단되지는 않으며, 다음 작업은 대기하게 된다.\nResume\n재기동작업을 재개한다. Pause 전 완료한 작업 이후부터 시작된다.\nForce Restart\n중지가 정상적을 되지 않는경우 본 버튼을 통해 강제 중지후 기동할 수 있다. 재기동 수행중인 서버가 중지 완료될때까지만 화면에 보여진다.\nNext\n현재 재기동중인 서버의 작업이 완료되기 전, 다음 서버의 재기동작업을 바로 진행하고 싶은경우 Next 버튼을 통해 다음 서버의 재기동을 수행할 수 있다. Next 를 수행해도 앞 서버들의 재기동 작업은 계속 수행된다.\nWeb Server Server Cluster 내 Web Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Web Server의 Master Server 선택, 동기화 할 설정파일목록을 설정할 수 있다.\nMaster Server :\nServer Cluster내 Web Server 중 Master Server를 지정한다.\nServer Configs for Synchronization :\nServer Cluster 내의 Web Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Web Server의 Home 하위의 상대 경로이다.\nConnector Web Server의 상세 connector정보들을 확인 및 수정 할 수 있다.\nWeb Server 목록에서 서버를 선택시 하단의 Connector 탭을 통해 선택된 서버의 Connector 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Connector에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nWeb Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Web Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 70. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Web Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nWeb Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Web Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Web Server의 Server Config, Connect was를 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Web Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\nTable 71. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Skip 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nSnapshot Overview Tab의 Snapshot 버튼을 클릭하면 Snapshot 생성을 위한 창이 출력되며 OK 버튼을 클릭하면 Server Cluster의 Snapshot이 생성된다.\nSnapshot은 Server Cluster가 동기화 상태인 경우에만 생성할 수 있다.\nSnapshot 탭을 통해 Snapshot 목록을 관리하는 화면을 제공한다. 일자를 입력 받아 Snapshot 이력을 조회한다. Snapshot이력에 대한 자세한 사항을 조회 할 수 있으며, 원하는 시점으로 복원하는 기능도 제공한다.\nSnapshot 목록의 Detail 항목에 있는 목록 버튼 을 클릭하면 해당 snapshot에 대한 상세정보를 조회할 수 있다.\nSnapshot 정보는 각 server별로 관리하므로 특정 Snapshot 생성 이후 Cluster에 추가된 server는 해당 Snapshot으로의 복원 대상에서 제외된다. (이 경우 Snapshot 복원 후 다시 Sync를 수행해야 모든 server가 동일한 구성을 가질 수 있다.) 또한 Snapshot 이후 Cluster에서 특정 server가 삭제되면 해당 server의 Snapshot 정보는 모두 삭제된다. Snapshot을 만들 때 소스코드는 Snapshot에 복사 되지 않으며 복사되는 설정파일은 기본설정파일 과 application설정파일, enterprise.xml 까지만 Snapshot에 포함된다.\nSnapshot을 생성할 경우 디스크 용량에 부하를 줄 수 있으므로 주의하여 생성한다. 또한 생성된 Snapshot은 자동으로 삭제되지 않고 사용자가 직접 삭제해야 한다. 따라서 불필요한 Snapshot을 적절한 시기에 삭제하는 것을 권장한다.\n5.1.5. Scaling Server Cluster 생성시 Enable Scaling 옵션을 True로 선택하면 CSP 또는 Cloud 플랫폼이 제공하는 Auto-Scaling(Infra Scaling)에 따른 서비스 Scaling을 지원한다. 이 기능은 VM의 OS가 Linux이고, VM Instance 생성시 Init-Script (예 : AWS EC2의 UserData)가 제공되는 환경에서만 지원된다.\nCloud환경에서 Scaleing 은 일반적으로 다음과 같은 절차로 수행된다.\nVM Image 생성 (LENA Node, LENA Server 및 Application 등이 포함된 Image)\nVM Init-Script 작성\nLENA Manager에 Scaling Policy 설정\n사전 설정한 Scaling Trigger 조건 (Resource 임계치 조건) 발생시 VM Auto-Scaling Out 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-Out시 Cloud Init-Script에 따라 LENA Node Agent 및 Server의 등록, 설정동기화, License 발급 수행 (LENA 영역)\nResource 임계치가 정상화되면 VM Scale-in 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-in 후, Node Agent Alive 체크 실패가 LENA Manager에 설정된 횟수 만큼 발생하면, 해당 Node 및 Server를 LENA Manager에서 제거 (LENA 영역)\n다음에서는 위의 절차중 LENA의 Scaling 지원영역과 관련된 Scaling Policy 설정 , VM Init-Script 관련 부분, LENA Node Agent / Server의 등록과 관련된 내용에 대해서 설명한다.\nScaling 기능은 Infra Scaling시 실행되는 Init-Script내에서 필요 환경변수 설정하고 LENA Scaling 실행 명령인 scale.sh 호출함으로서 Scale-Out이 실행된다. Manager에 설정된 Rule에 따라 Node Agent 통신 불가 인식 시 또는 VM 소멸시 stop-agent.sh을 옵션 설정하여 명시적으로 호출할 시 Scale-In이 실행된다.\nScale Out\nScale Out은 환경변수 설정하고 scale.sh을 호출함으로써 수행된다. AWS를 예를들면 AutoScaling그룹의 시작 템플릿에서 UserData에 해당 Script를 작성하여 실행한다. 미리 Manager에 Scaling License가 배포되어 있어야 Scaling License를 다운받아 서버가 정상 기동할 수 있다.\nInit-Script Init-Script에는 필요한 환경변수를 설정하고, scale.sh을 호출하는 절차가 작성된다. Scale Out 관련 scale.sh에서 참조하는 환경 변수는 다음과 같다.\nTable 72. scale.sh 참조 환경변수 환경변수 설명 LENA_MANAGER_ADDRESS\n필수 옵션으로, Node, Server에 대한 Scaling 처리를 수행할 LENA Manager의 서비스 주소로 형식은 {IP주소}:(HttpPort} 이다.\n이 환경변수로 이중화된 Manager에 대한 Fail-Over 설정을 할 수 있다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속이 실패하면 두번째 Manager에 접속을 시도한다. 지정된 시간(기본 10분)동안 Manager와의 접속이 성공할때 까지 과정을 반복적으로 수행한다.\nJAVA_HOME\nNode Agent 및 Server에서 사용할 Java의 설치 위치 이다.\nLENA_CLUSTER_NAME\nServer Cluster 명, Scale된 Server가 등록될 대상 Server Cluster의 이름 이다. 현재 존재하는 Server Cluster명을 기입해야만 정상적으로 Scaling이 수행된다.\nLENA_USER, LENA_GROUP\nNode Agent 및 Server를 기동할 OS 사용자 및 그룹\nLENA_WAS_SCALING\nWAS 서버의 Scaling 수행 여부\nLENA_WAS_HOME\nWAS 서버의 설치 위치\nLENA_WAS_AGENT_PORT\nWAS 서버의 Node Agent 서비스 포트\nLENA_WEB_SCALING\nWeb 서버의 Scaling 실행 여부\nLENA_WEB_HOME\nWeb 서버의 설치 위치\nLENA_WEB_AGENT_PORT\nWeb 서버의 Node Agent 서비스 포트\nLENA_WEB_OPENSSL_VER\nOS에 설치된 OpenSSL의 Version으로, Web서버 기동을 위해 필요하다.\n지원되는 버전은 1.0.1, 1.0.2 , 1.1.1 이고, 기본 값은 1.0.2 이다.\nLENA_IMAGE_TYPE\nVM Image의 유형으로 LENA 패키지만 설치된 'base\u0026#8217;와 Server까지 설치된 'golden' 가 있다. 'base\u0026#8217;는 Scaling Mode 중 'clone\u0026#8217;에 대응되며, 'golden\u0026#8217;은 Scaling Mode중 'sync' / 'nosync\u0026#8217;에 대응된다.\nWAS_CONFIG_DATA\n개별 WAS의 설정정보로 Json 형식으로 정의된다. Session Cluster 정보, Datasource 정보를 설정할 수 있고, 이는 실제 구성된 Server의 설정정보를 변경한다.\n환경 변수 적용 및 scale.sh 호출 예시 (Init-Script) export LENA_MANAGER_ADDRESS=10.200.30.213:7700,10.200.30.214:7700 export LENA_CLUSTER_NAME=cust-g3r export LENA_USER=lena export LENA_GROUP=lena export LENA_WAS_SCALING=Y export LENA_WAS_HOME=/engn001/lena/1.5.0 export LENA_WAS_AGENT_PORT=16800 export LENA_WEB_SCALING=Y export LENA_WEB_HOME=/engn001/lenaw/1.5.0 export LENA_WEB_AGENT_PORT=16900 export LENA_WEB_OPENSSL_VER=1.0.2 export LENA_IMAGE_TYPE=base export WAS_CONFIG_DATA='[ { \u0026quot;server_id\u0026quot;: \u0026quot;comm_core_was-8980\u0026quot;, \u0026quot;session_cluster\u0026quot;: { \u0026quot;primary_port\u0026quot;: \u0026quot;5480\u0026quot;, \u0026quot;secondary_port\u0026quot;: \u0026quot;5480\u0026quot; }, \u0026quot;datasource\u0026quot;: [ { \u0026quot;jndi_name\u0026quot;: \u0026quot;jdbc/petclinic\u0026quot;, \u0026quot;url\u0026quot;: \u0026quot;jdbc:mysql://10.200.30.7:63306/petclinic\u0026quot; } ] } ]' if [ \u0026quot;$LENA_WAS_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WAS_HOME/bin/scale.sh; fi if [ \u0026quot;$LENA_WEB_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WEB_HOME/bin/scale.sh; fi Scale-in\nScale-in은 Scale-Out과정을 통해 등록된 Node와 Server를 해지하는 과정으로 1) Manager의 Scheduler에 의한 Node Agent로 부터 응답이 없는 Node와 해당 Node에 설치된 Server를 자동으로 등록해지하거나 또는 2) Option을 추가한 stop-agent.sh을 직접 호출하여 명시적으로 실행할 수 있다. stop-agent.sh의 옵션 정보는 다음과 같다.\nTable 73. stop-agent.sh의 옵션 정보 옵션 설명 -ur${Manager Address(IP:Port)}\n필수 옵션, Node 또는 Server를 등록해지 (Ur egister)한다.\n입력 파라미터는 Manager의 주소로 형식은 ${IP주소}:${HttpPort} 이다.\n이 옵션은 Manager에 대한 Fail-Over 처리가 가능하다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속을 실패하면 두번째 Manager에 접속을 시도한다.\n-f\n강제 등록해지 여부, 선택사항\n-f 옵션이 설정되었을 경우 Server Cluster에서 등록해지 된다.\n-rt ${time - milliseconds}\n\"Retry Time\" , Optional\n해당시간 만큼 Retry한다. Retry 주기는 3초, 기본 Retry Time은 10초임\n옵션 사용 예시 # Manager에서 Node / Server 정보를 모두 제거 한다. # Manager License 사용량 산정에서 해당 서버의 사용량이 중지된다. stop-agent.sh -ur 10.80.44.55:78700 -f Scaling Overview Scaling 탭을 선택하면 제공되는 화면 상단의 테이블은 Node 타입 별 현재 Scaling 현황을 보여준다.\nInitial Node : 현재 Server Cluster에 포함되어 있는 노드 수\nScaled Node : Scaling 정책에 따라 생성된 노드 수\nToday Event : 오늘 하루 Scaling 이벤트 발생 횟수\nLatest Event : 최근에 발생된 Scaling 이벤트 발생시간\nPolicy Scaling시 적용되는 Naming Rule과 같은 정책 정보를 정의 할 수 있다.\nCommon Policy System : Scaling 적용 시스템 명\nSync Button Enabled : Server Cluster 기능의 Sync버튼 활성화 여부\nScaling Mode : Server Scaling 유형\nnosync : Node와 Server를 등록하고 Cluster에 등록한다.\nsync : Node와 Server를 등록하고 Cluster에 등록 후 Cluster Config 기반 Sync 수행, Scaling 되는 신규 Server에 대해서만 Sync를 수행한다.\nclone : Node를 등록하고 Cluster에 등록 후 Master Server를 복제(Clone)하여 Server를 설치하고 Cluster에 등록 및 Web/WAS Sync 수행\nWeb-WAS Connection Scope : Web-WAS 연계 방식\nnone (Using Proxy) : 별도의 Web-WAS 연계를 수행하지 않음\nJK Mesh - Cluster Servers : Cluster내 서버간의 연계를 수행, Web의 경우 신규등록되는 Web서버와 Cluster내 Server들을 연계, WAS의 경우 신규등록되는 WAS 서버와 Cluster내 Web서버와의 연계, nosync Mode일때는 Web서버에 설정된 LoadBalancer를 동기화 하지않고 LoadBalancer별로 Cluster내 WAS를 연계함으로서 Blue-Green 배포방식을 지원\nJK Mesh - Servers on same machine : 동일 VM 내에 있는 Web-WAS 만을 대상으로 연계 수행\nWAS Node Node Naming Rule : WAS 노드 명명 규칙\nServer Naming Rule : WAS 명명 규칙\nWait For WAS Start Up : WAS가 Scale-Out되었을 때 기동대기 여부이다. 'Y\u0026#8217;인 경우 기동된 후 다음 절차 (예 : WEB 서버 재기동)를 수행한다.\nWait Time for WAS Start Up : 최대 WAS 기동대기 시간. Wait For WAS Start Up이 'Y\u0026#8217;일 경우에도 해당 시간이 지나면 다음 절차를 수행한다.\nWEB Node Node Naming Rule : WEB 노드 명명 규칙\nServer Naming Rule : Web 서버 명명 규칙\n명명규칙에서 사용되는 Convention(예약어)은 다음과 같다.\n#{IP} : 각 단위가 '-'로 구분된 Node 또는 Server IP 주소\n#{IP[4]} : Node 또는 Server의 IP 주소 중 4번째 숫자\n#{PORT} : Node Agent 또는 Server의 HTTP 서비스 주소\n#{MASTER_NAME} : Master Server의 이름\n#{HOSTNAME} : Node 또는 Server가 설치된 VM의 Host명\n#{HOSTNAME[R4]} : VM Host명의 오른쪽 끝 4자리\n해당 항목의 정보를 저장 후 Save 버튼 을 눌러 저장한다.\nWAS Scaling Template / Web Scaling Template Sync모드 Scaling시에 동기화되는 파일 목록과 내용을 조회할 수 있다. 보여지는 File 목록들은 해당 Server Cluster의 Master Server로 부터 Manual 방식으로 복사 하여 생성된다. 화면의 Create 버튼 을 누르면 수동으로 파일이 생성된다. 돋보기 버튼 을 눌러 파일의 상세내용을 조회할 수 있고, 현재 Master Server의 설정파일과 비교한 결과를 확인할 수 있다.\nHistory 날짜 및 시간을 기준으로 Scaling 이벤트의 history를 조회할 수 있다. Scaling이 발생한 날짜를 선택하고 시간을 입력한 후 Search 버튼 을 눌러 해당 시간에 발행한 Scaling Event를 조회한다.\nScaling 기능은 Enterprise Edition에서만 제공되는 기능이다.\n6. Resource 6.1. Database 좌측 메뉴에서 Database를 선택하면 Database Resource 목록이 조회된다.\nFigure 9. Database 목록 조회 화면 6.1.1. Database 등록 Database Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n입력 항목을 입력한다.\nResource Name을 입력한다.\nDriverClassName을 확인 후 원하는 벤더의 드라이버를 선택한다.\nAddress(host/Port) 정보를 입력한다.\nSave 버튼 을 클릭해 저장한다.\n6.1.2. Database 수정 Database Resource 목록에서 수정하려는 Database Resource의 체크박스를 선택한다.\nDatabase Resource의 항목을 수정한 후 저장한다.\n내용이 수정될 경우 해당 Database Resource에 연결된 DataSoruce Resource및 WAS의 설정에 전파되므로, 해당 Database Resource 하위에 연결된 DataSoruce Resource가 존재할 경우 입력창이 기본적으로 Disable 된다. Edit 버튼 을 클릭하면 수정할 수 있다.\n6.2. DataSource 좌측 메뉴에서 DataSource를 선택하면 DataSource Resource 목록이 조회된다.\nFigure 10. DataSource 목록 조회 화면 6.2.1. DataSource 등록 DataSource Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nResource Name 필드에 논리적인 이름을 입력한다.\nServer Type을 설정한다. Server Type은 Standard, Enterprise 중에 선택하여야 하며, 이 후 같은 Type의 서버에서만 Import하여 사용할 수 있다.\nDataSource의 상세 설정을 한다(\u0026lt;Server DataSource 설정\u0026gt;\u0026gt;의 상세 항목 설명 참고)\nUpload 버튼 을 클릭하여 해당 DataSource의 Driver를 Manager서버에 등록한다. 미리 등록된 Driver는 운영자가 Server에 Import하는 시점에 해당 Server로 전송된다.\nSave 버튼 버튼을 클릭하여 저장한다.\nManager에 업로드 된 JDBC Driver는, 운영자가 Server에 해당 DataSource Resource를 Import하는 시점에 해당 Server로 전송된다. 전송된 JDBC Driver는 {서버홈경로}/lib/datasource 디렉토리에 위치하며 Classpath에 자동으로 등록된다.\n6.2.2. DataSource 수정 DataSource Resource 목록에서 수정하고자 하는 행을 선택하면 DataSource Resource 수정 화면이 표시된다.\n변경하고자 하는 설정을 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 11. DataSource 상세 정보 화면 DataSource Resource 정보를 수정한 후 저장하면 해당 DataSource Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server를 재기동하면 해당 설정이 적용된다.\nStandard Type으로 설정한 DataSource Resource를 Standard 서버에 Import 한 후에 Server Type을 Enterprise로 변경할 수 없다.\nClasspath 등록 후 DataSource Resource 삭제 시, Classpath는 삭제되지 않음에 유의해야 한다.\n6.2.3. DataSource 삭제 DataSource Resource 목록에서 삭제할 DataSource Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer 또는 Application에서 Import하여 Registered Server 또는 Registered Application이 존재하는 경우, 해당 DataSource Resource는 삭제할 수 없다.\n6.2.4. JDBC Driver Upload DataSource Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Driver File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Driver File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Driver File을 Upload한다.\n6.2.5. DataSource Import 생성한 DataSource Resource를 Import해서 사용하고 있는 Server 목록(Scope가 Context, Global, Global + Link인 경우) 또는 Application목록(Scope가 Application인 경우)은 DataSource Resource 상세 조회 시 하단 영역에 표시된다.\nDataSource 상세 화면에서 DataSource Import 하기 Scope가 Context, Global, Global + Link인 DataSource Resource는 자신을 Import하는 Server를 등록할 수 있다.\nDataSource 관리 화면에서 특정 DataSource Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 DataSource를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 DataSource Resource가 Import 된다.\nImport된 DataSource Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 DataSource Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; DataSource 탭을 클릭하면, 해당 Server의 DataSource Resource 목록 조회 및 DataSource Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 DataSource Resource 목록이 조회된다.\nImport 하고자 하는 DataSource Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 DataSource Resource를 Import 한다.\nDataSource Resource를 Import 하게 되면 해당 DataSource Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 DataSource Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; DataSource 화면에서 조회할 수 있다.\nStandard Server에서는 Enterprise Type의 DataSource Resource를 Import 할 수 없다.(목록에 표시되지 않음)\nImport한 DataSource Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; DataSource 화면으로 이동하여 변경한다.\n6.3. JTA 좌측 메뉴에서 JTA를 선택하면 JTA Resource 목록이 조회된다.\nFigure 12. JTA 목록 조회 화면 6.3.1. JTA 등록 JTA 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.3.2. JTA 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 13. JTA 상세 정보 화면 JTA Resource 정보를 수정한 후 저장하게 되면 해당 JTA Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.3.3. JTA 삭제 JTA 목록에서 삭제할 JTA Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JTA Resource를 삭제할 수 없다.\n6.3.4. JTA Import 생성한 JTA Resource를 Import해서 사용하고 있는 Server 목록은 JTA Resource 상세 조회 시 하단 영역에 표시된다.\nJTA 상세 화면에서 JTA Import 하기 JTA 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JTA Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JTA Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JTA Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JTA 탭을 클릭하면, 해당 Server의 JTA Resource 목록 조회 및 JTA Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JTA Resource 목록이 조회된다.\nImport 하고자 하는 JTA Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JTA Resource를 Import 한다.\nJTA Resource를 Import 하게 되면 해당 JTA Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JTA Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JTA 화면에서 조회할 수 있다.\nImport한 JTA Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JTA 화면으로 이동하여 변경한다.\n6.4. JMS 좌측 메뉴에서 JMS를 선택하면 JMS Resource 목록이 조회된다.\nFigure 14. JMS 목록 조회 화면 6.4.1. JMS 등록 JMS 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n등록할 JMS Resource의 유형을 선택하면 하단에 선택한 유형에 맞게 설정 정보가 표시된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.4.2. JMS 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 15. JMS 상세 정보 화면 JMS Resource 정보를 수정한 후 저장하게 되면 해당 JMS Resource 가 사용되는 Server 에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.4.3. JMS 삭제 JMS 목록에서 삭제할 JMS Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JMS Resource를 삭제할 수 없다.\n6.4.4. JMS Import 생성한 JMS Resource를 Import해서 사용하고 있는 Server 목록은 JMS Resource 상세 조회 시 하단 영역에 표시된다.\nJMS 상세 화면에서 JMS Import 하기 JMS 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JMS Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JMS Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JMS Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JMS 탭을 클릭하면, 해당 Server의 JMS Resource 목록 조회 및 JMS Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JMS Resource 목록이 조회된다.\nImport 하고자 하는 JMS Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JMS Resource를 Import 한다.\nJMS Resource를 Import 하게 되면 해당 JMS Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JMS Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JMS 화면에서 조회할 수 있다.\nImport한 JMS Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JMS 화면으로 이동하여 변경한다.\n6.5. Application 좌측 메뉴에서 Application를 선택하면 Application Resource 목록이 조회된다.\nFigure 16. Application 목록 조회 화면 6.5.1. Application 등록 Application 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.\nApplication Type이 WAR일 경우에는 추가로 설정할 수 있는 항목이 표시된다.(상세 설정 값은 Application Settings 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.5.2. Application 수정 Application Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 17. Application 상세 정보 화면 Application Resource 정보를 수정한 후 저장하게 되면 해당 Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.5.3. Application 삭제 Application 목록에서 삭제할 Application Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 Application Resource를 삭제할 수 없다.\n6.5.4. Application Upload Application Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Application File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Application File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Application File을 Upload한다.\nApplication Import 생성한 Application Resource를 Import해서 사용하고 있는 Server 목록은, Application Resource 상세 조회 하단 영역에 표시된다.\nApplication 상세 화면에서 Application Import 하기 Application 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nApplication 관리 화면에서 특정 Application Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 Application를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 Application Resource가 Import 된다.\nImport된 Application Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 Application Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Applications 메뉴를 클릭하면, 해당 Server의 Application Resource 목록 조회 및 Application Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 Application Resource 목록이 조회된다.\nImport 하고자 하는 Application Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 Application Resource를 Import 한다.\nApplication Resource를 Import 하게 되면 해당 Application Resource와 Server간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 Application Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; Application 화면에서 조회할 수 있다.\nImport한 Application Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; Application 화면으로 이동하여 변경한다.\n7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 Monitoring Dashboard 화면은 하단에 3개의 탭을 제공하고 있고 선택된 탭에 따라 상단에 제공되는 요약정보가 변경된다.\n탭 별로 제공되는 정보는 다음과 같다.\nNode 탭 등록된 Node별 Server 모니터링 정보 제공\nServer Cluster 탭 Server Cluster 그룹별로 등록된 Server 모니터링 정보 제공\nService Cluster 탭 Service Cluster 그룹별로 등록된 Container 모니터링 정보 제공\n각 정보의 조회 주기를 설정할 수 있으며, WAS의 경우 Function 컬럼에 있는 팝업 버튼 을 클릭하면 상세 모니터링 화면으로 이동할 수 있다.\nMonitoring Dashboard 화면은 다음과 같다.\nFigure 18. Monitoring Dashboard의 Node 탭 화면 Figure 19. Monitoring Dashboard의 Server Cluster 탭 화면 Figure 20. Monitoring Dashboard의 Service Cluster 탭 화면 Service Cluster 탭은 Container Edition에서 제공되는 기능이다.\nMonitoring Dashboard 화면에서 사용된 속성들은 아래와 같다. 사용률 형태로 제공하는 정보의 색상은 Status Range 속성을 이용해 변경할 수 있다. (이 장의 하위 절인 모니터링 기본 설정 참고)\nTable 74. Node 상태 항목 설명 비고 CPU\nNode의CPU 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nMemory\nNode의 Memory 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nDisk\nNode의 Disk 사용률\nEngine이 설치된 Disk 사용률로써 Default 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nTable 75. Application Server 상태 항목 설명 비고 Status\nServer 기동여부, 진단결과발행여부(구급차 아이콘) 및 자동대응수행여부(방패 아이콘)\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap Memory\nApplication Server에서 사용되는 Heap Memory 사용률\nThread Pool\nApplication Server가 Pool로 관리하는 Request Thread 사용률을 Connector(Ajp, Http) 별로 표시\nDataSource\nApplication Server가 Pool로 관리하는 Datasource Connection 사용률\nSession Clustering\nApplication Server에 설정된 Session Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 76. Web Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nCPU\nWeb Server 프로세스의 CPU 사용률\nMemory\nWeb Server 프로세스의 Memory 사용률\nThread\nWeb Server의 Thread 수 (Active / Max)\nConnected WAS\nWeb Server와 연결된 WAS 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 77. Session Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap\nSession Server에서 사용되는 Heap Memory 사용률\nSession Count\nActive 상태인 Session 비율\nMirror Server\nMirror Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\n각 서버를 즉시 제어할 수 있는 기능을 다음과 같이 함께 제공된다.\nTable 78. Application Server 제어 기능 항목 설명 비고 Thread Dump\nThread Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nActive Service Dump\nActive Service Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nHeap Dump\nHeap Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nForced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nForced Restart\n서버 강제 재시작\n대기 시간 없이 즉시 강제 재시작\nAll Diagnostics Disable\n해당 서버에 적용된 진단/대응 기능을 모두 Disable 처리\nFigure 21. Dump 창 Heap Dump, Thread Dump, Active Service Dump를 생성하고 다운로드 할 수 있다. 일반적으로 Dump는 서버에서 Out Of Memory등의 오류, Thread Pool의 과다 사용, 서비스 지연 등이 발생한 경우 원인 파악을 위해 생성한다.\n생성하려는 Dump 타입에 따라 Thread Dump 버튼 , Active Service Dump 버튼 , Heap Dump 버튼 을 클릭해 Dump를 생성한다. 생성된 Dump는 Web Application Server가 존재하는 Host내 저장되는데, Thread Dump는 {log_home}/logs/tdump, Active Service Dump는 {log_home}/logs/sdump, HeapDump 파일은 Dump파일은 {log_home}/logs/hdump 경로에 저장된다.\nDelete 버튼 을 클릭하여 Dump 파일을 삭제할 수 있다. Download 버튼 을 클릭해 Dump 파일을 다운로드 할 수 있으며, 다운 로드 시 해당 Dump 파일이 시스템 현황 Dump 파일과 함께 zip 형태로 다운로드 된다.\nDump 관리 화면의 항목은 다음과 같다.\nTable 79. Dump 화면 항목 항목 설명 비고 File Name\n생성된 파일 이름\n날짜를 포함한 문자열로 자동 생성된다\nSize\n생성된 파일의 사이즈\nStatus\nDump 수행 시점의 System 및 Server의 상태\nDump 생성 시점의 시스템의 CPU, Memory 정보 및 Web Application Server의 주요 리소스 사용량 정보도 Dump 생성 시 함께 생성한다.\nView 버튼 을 클릭하여 생성된 Status 값을 확인할 수 있다\nTable 80. Web Server제어 기능 항목 설명 비고 Forced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nGraceful Stop\n서버 Graceful 종료\nMonitoring 정보가 표시되지 않는다면 등록된 Node/Server가 실제로 존재하는지, Node/Server와 통신이 잘 되는 상태인지 체크한다.\n7.1.2. 현황 모니터링 상세 Monitoring Dashboard에서 Function 컬럼에 있는 가운데 버튼(View Detail Chart) 을 선택하면 상세한 Thread, Memory, 서비스 정보를 모니터링할 수 있다.\nSystem 창 Web Application Server의 Memory, Thread, Service 정보를 확인할 수 있다.\nFigure 22. System 탭 Memory Chart 실시간 Memory 사용량 정보가 표시된다. 제공하는 정보로는 GC Time(Garbage Collection 소요 시간), GC Count, Heap Used(Total Memory - Free Memory), Total Memory(서버에서 사용중인 총 메모리)가 있다. 차트의 붉은 점선은 사용 가능한 최대 Heap Memory를 의미한다. 따라서 차트에서 Heap Memory 사용량이 일반적인 GC패턴이 아닌 긴 시간동안 연속적으로 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread Chart Web Application Server가 사용자의 요청을 처리하기 위해 Pool 로 관리하고 있는 Request Thread 사용 현황을 볼 수 있는 Line Chart이다. 차트의 붉은 점선은 사용할 수 있는 Request Thread의 최대치를 의미한다. 때문에 차트에서 Request Thread 수가 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread List Web Application Server의 모든 Thread를 확인할 수 있다. 출력된 Thread 이름이나 Thread 상태를 기준으로 필터링 할 수 있다. Thread List의 항목은 아래와 같다.\nTable 81. Thread List 항목 항목 설명 비고 Thread ID\n고유 Thread ID\nName\nThread 이름\nStat\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nCPU\n지정된 Thread에 대한 CPU 사용시간\nTx Id\n트랜잭션 ID\nElapsed\nThread가 수행되는데 걸린 시간\nService Name\nThread가 수행한 서비스 이름\n+ 버튼 을 눌러 다음과 같은 상세 정보를 확인할 수 있다.\nTable 82. Thread 상세 정보 항목 항목 설명 비고 threadId\n고유 Thread ID\nthreadName\nThread 이름\nState\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nthreadCpuTime\n현재 Thread를 포함한 모든 Thread의 CPU 시간\nthreadUserTime\n현재 Thread의 CPU 시간\nblockedCount\nBlock된 합계\nblockedTime\nBlock된 누적 경과시간\nwaitedCount\n대기한 Thread의 합계\nwaitedTime\n대기한 Thread의 누적 경과시간\nlockOwnerId\nlock된 Object를 소유한 Thread의 ID\nlockName\nlock된 Object이름\nlockOwnerName\nlock된 Object를 소유한 Thread의 이름\nstackTrace\nstackTrace\nActive Service List 서비스 정보 및 해당 서비스를 처리하고 있는 Thread 정보를 확인할 수 있다. 해당 정보 내 항목은 Thread List 항목과 유사하며, 다음과 같은 추가 항목이 존재한다.\nTable 83. Active Service List 항목 항목 설명 비고 Sql\n현재 수행 중인 SQL문\nDataSource 창 Application Server에 설정된 DataSource 정보를 확인할 수 있다.\nFigure 23. DataSource 탭 화면 DataSource Chart Active Connection 수와 Idle Connection 수가 Chart에 실시간으로 표시된다. 차트의 붉은 점선은 설정된 최대 Connection 수를 의미한다. Active Connections가 붉은 점선에 근접할 경우 유의해야 한다. 콤보박스에서 DataSource를 선택하여 다른 DataSource를 모니터링 할 수 있다.\n최대 Connection 수는 DataSource 정보 등록화면의 maxConnection 속성을 통해 변경할 수 있다.\nDataSource Information 지정한 Datasource의 설정 정보를 확인할 수 있다.\n7.1.3. 모니터링 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting 메뉴에서 모니터링 기본 설정을 할 수 있다. 설정 항목은 다음과 같다.\nTable 84. 모니터링 관련 기본 설정 항목 항목 설명 기본값 Status Range\nMonitoring Dashboard 에서 Resource의 Low, Middle, High 기준을 설정한다.\n60% 미만일 경우 Low, 60% 이상일 경우 Middle, 80% 이상일 경우 High를 의미한다\nDiagnostics Interval\n진단 주기를 설정한다.\n10000(ms)\nDump Limit\n각 서버의 Dump(Thread/ActiveService/Heap) 디렉토리 별 Dump 개수 제한(0은 무제한을 의미)\n200(개)\n7.2. Analysis Dashboard Analysis Dashboard에서 시스템 단위로 실시간 장애 분석 현황 정보를 제공한다. 제공하는 정보 제공 유형은 아래와 같다.\nPerformance Map\nAnalysis Summary\nInstance Map\nFigure 24. Analysis Dashboard 7.2.1. Performance Map Analysis Dashboard의 좌측 상단에 보이는 Performance Map은 \"Thread \u0026amp; Elapsed\", \"Thread\", \"Elapsed\" 기준으로 시스템의 상태 정보를 각각 제공한다. 각 시스템은 Chart상에서 색깔을 가진 원으로 표시된다. 시스템의 상태 별 색상은 다음과 같다.\nNormal: 녹색\nAnomaly: 주황색(진단 결과로 Anomaly 상황이 검출됨)\nFault: 붉은색(진단 결과로 Fault 상황이 검출됨)\nChart에서 X축과 Y축의 의미는 다음과 같다.\nTable 85. Performance Map Chart의 X, Y축 의미 항목 설명 비고 Thread \u0026amp; Elapsed Chart\nX축: 시스템 내 Web Application Server의 평균 Thread 사용률\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nThread Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server의 평균 Thread 사용률\nElapsed Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nChart 상단에 표시되는 System 상태 요약 정보는 다음과 같다.\nTable 86. System 상태 요약 정보 항목 항목 설명 비고 Normal\n정상 System의 수\nSlow\n응답 시간이 오래 걸리는 System의 수\nHeavy\nThread pool사용량이 많은 System의 수\nSlow \u0026amp; Heavy\nSlow하고 Heavy한 System의 수\nChart 하단의 슬라이드 바를 조작해 이전 상태 정보를 볼 수 있으며, 이전 10분 아이콘, 다음 10분 아이콘, 일시 정지 아이콘, 재생 아이콘, 현재 시간 이동 아이콘 을 클릭해 시간을 이동할 수 있다. Dashboard에 처음 진입하면 전체 시스템이 표시되며, Chart 내에서 표시되는 시스템이나 범례를 클릭해서 특정 시스템만 선택해 볼 수 있다. 다시 전체 시스템 전체를 보려면 우측 상단의 All System 아이콘 을 클릭한다.\n시스템 아이콘 위에서 마우스 우클릭을 하면 다음과 같은 기능을 수행할 수 있다.\nTable 87. 시스템 아이콘에서 우클릭 시 사용 가능한 기능 항목 설명 비고 Topology View\nTopology View 화면으로 이동\nService Analysis\nSystem Detail 팝업 창 표시\nMonitoring\nMonitoring Dashboard 화면으로 이동\nStatistics\nStatistics 화면으로 이동\n시스템 우클릭 기능 중에 Service Analysis 클릭 시 표시되는 팝업 창은 다음과 같다. WEB, WAS, SESSION 서버의 현재 상태가 좌측에 표시된다. 우측에는 Transaction Heat Map Chart를 볼 수 있으며, 영역을 드래그 하면 상세 정보를 확인할 수 있다.\nFigure 25. System Detail 화면 Transaction 정보는 LENA Dashboard에서 Service Trace 기능을 통해 수집했던 경우에만 남는다.\n다음은 Transaction Heat Map Chart내의 원하는 영역을 드래그 한 후 표시되는 Transaction 목록에서 특정 Transaction을 선택했을 때 볼 수 있는 상세 정보 화면이다.\nFigure 26. Transaction 상세 정보 화면 상세 정보는 CLIENT(사용자 브라우저 관련), WEB(LENA WEB Server 관련), WAS(LENA WEB Application Server 관련) 측면의 데이터로 구성된다. 각 유형 별 정보에서 볼 수 있는 항목은 다음과 같다.\nTable 88. CLIENT 관련 데이터의 항목 항목 설명 비고 domain lookup time\n브라우저가 서버와 접속하기 위한 domain lookup 시간\nconnection time\n브라우저가 서버와 connection 을 맺는 시간\nserver response time\n브라우저가 서버에 요청을 하고 응답을 받은 전체 시간\nrendering time\n브라우저의 화면 rendering 시간\ntotal complete time\n브라우저에서 처리되는 전체 시간\nerror resource(line)\n스크립트 에러 발생 시, 에러가 발생한 라인\nerror content\n스크립트 에러 발생 시, 발생한 에러 내용\nTable 89. WEB 관련 데이터의 항목 항목 설명 비고 elapsed time\nWEB에서 처리 수행 시간\nWAS 관련 데이터의 항목 기본 정보\nTable 90. 기본정보 항목 설명 비고 objName\n요청을 처리한 서버 명\nendtime\n요청 처리 완료 시간\nelapsed\n요청 처리 수행 시간\nservice\n요청 서비스 명\nipaddr\n호출한 아이피 정보\ncpu\nCPU 사용 시간\nsqlCount\n수행된 쿼리 수\nsqlTime\n쿼리 수행 시간\n프로파일 정보\nTable 91. 프로파일 정보 항목 설명 비고 #\n프로파일 단계 순서를 나타내는 인덱스\np#\n내부 단계인 경우 자신이 속한 부모 인덱스\nTIME\n해당 단계가 시작된 시간\nT-GAP\n현재 단계의 시작 시간과 이전 단계의 시작 시간의 차이\nCPU\nCPU 사용 시간\nCONTENTS\n각 단계의 내용\nCLIENT 와 WEB 관련 정보는 E2E 기능이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n프로파일 정보는 WAS에서 프로파일 설정이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n7.2.2. Analysis Summary 현재 검출된 진단 결과 건수, 오늘 발생한 전체 진단 결과 건수, 지난 날(Default: 1일 전) 발생한 진단 결과 건수의 요약 정보를 보여준다.\nTable 92. 분석 요약 정보 항목 항목 설명 비고 ANOMALY\nFault 상태는 아니지만 주의 깊게 봐야 하는 진단 결과 건수\nFAULT\nFault 상태로 진단된 결과 건수\nRecent Events는 가장 최근에 발생한 진단 결과를 보여주며, 해당 항목을 클릭하면 Report 정보를 확인할 수 있다.\n7.2.3. Instance Map Performance Map에서 특정 시스템을 선택하면, 화면 하단에서 시스템 내 서버 정보 및 진단 결과를 보여주는 Time Line Chart를 볼 수 있다. 서버는 상태에 따라 다른 색으로 표시되며, 특정 서버를 토글 해 우측 Time Line Chart에서 보이거나 안보이게 할 수 있다. 진단 후 Anomaly나 Fault 상황이 검출되면 Time Line에 주황색(Anomaly 상황)이나 붉은색(Fault)으로 표시되는데, 해당 영역을 더블 클릭하면 Report를 확인할 수 있다.\n7.3. Event Dashboard Event Dashboard를 통해 WAS에서 발생한 이벤트 현황 정보를 제공한다.\n이벤트 정보는 WAS에서 생성되어 UDP로 Manager에 전달된다. WAS가 전송한 이벤트 정보는 Manager의 DB에 일정 기간(3달) 동안 보관되며, 해당 이벤트의 상세 SQL 및 Exception Trace 정보는 데이터 크기가 크므로 7일간만 보관된다.\n7.3.1. Event 종류 다음과 같이 4가지 종류의 이벤트가 존재한다.\nWAS의 Out Of Memory Error 발생 이벤트\nWAS의 Full GC 발생 이벤트\nWAS의 Stuck Thread 발생 이벤트\nWAS의 Exception 발생 이벤트\nWAS Exception 이벤트는 아래 두 가지 상황에서 생성되어 Manager로 전송된다.\n사용자 요청에 대해 Servlet의 service 메서드 바깥까지 Exception 이 Throw 되는 경우\n사용자가 설정한 타입의 Exception이 발생한 경우\n7.3.2. Event Dashboard를 통한 Event 관리 LENA Manager 의 Event Dashboard에서 수집된 Event를 관리할 수 있다.\nFigure 27. Event Dashboard 이벤트 발생 추세를 일자 별 라인 차트로 확인할 수 있다. 모든 System 대상으로 볼 수 있으며 특정 System이나 Server 등을 지정해 조회할 수 있다. 달력 버튼 을 클릭해 날자를 변경할 수 있다.\n이벤트 목록의 항목은 다음과 같다.\nTable 93. Event List 항목 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함. 4가지 이벤트는 기본적으로 WARNING이며 변경할 수 있음.\nINFO\nWARNING(DEFAULT)\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nSystem Name\n시스템 이름\nMessage\n이벤트 메시지\nError 이벤트는 발생한 Exception 명을, Stuck Thread 이벤트는 Stuck Thread가 발생했음을 알리는 메시지를 남김\nEvent Date\n이벤트 발생 시각\n( 삭제 버튼 )\n이벤트 삭제 시 선택하는 버튼\n개별 이벤트 행을 클릭하면 아래와 같은 Event 상세 정보를 확인할 수 있다.\nFigure 28. Event 상세 정보 화면 Event 상세 정보의 공통 항목은 다음과 같다.\nTable 94. Event 상세 정보의 공통 항목(Event Common Info) 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함.\nWARNING\nINFO\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nTarget Type\n대상 서버 유형\n다음 유형이 존재함\nWAS\nSERVICE-CLUSTER\nSystem Name\n시스템 이름\nEvent Date\n이벤트 발생 시각\nEvent 별로 서로 다른 상세 정보 항목은 다음과 같다.\nTable 95. Out Of Memory 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Heap Dump File Name\nOut Of Memory Error 발생 시 자동 생성된 Heap Dump 파일 이름\nTable 96. Full GC 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Full GC Start Time\nFull GC 시작 시각\nFull GC End Time\nFull GC 종료 시각\nPrevious Full GC Start Time\n바로 직전 Full GC 시작 시각\nPrevious Full GC End Time\n바로 직전 Full GC 종료 시각\nMemory Usage Before Full GC (MB)\nFull GC 수행 전 메모리 사용량\nMemory Usage After Full GC (MB)\nFull GC 수행 후 메모리 사용량\nTable 97. Stuck Thread 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nThreshold(ms)\nLenaStuckThreadDetectionValve에 설정한 임계값\nActive Time(ms)\nStuck Thread 감지 시점의 해당 서비스 처리 시간\nStack Trace\nStuck Thread 감지 시점의 Stack Trace\nTable 98. Error 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nRemote Addr\nClient 리모트 주소\nCustom Info\n사용자 정의 코드 정보\n사용자가 커스텀 Servlet Filter를 사용해 지정한 Key, Value\nException Trace\n발생한 Exception의 Trace\n7.4. 통계 7.4.1. 연간 진단/대응 통계 DIAGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 메뉴에서 서버 별 연간 진단 결과를 차트를 통해 제공한다.\nFigure 29. Statistics 화면 위 화면에서 다음과 같은 내용을 확인할 수 있다.\nDiagnostics Calendar\n한 칸이 하루를 의미하며, 연간 통계 차트의 일자에 Mouse Over를 하면 해당 일자에 발생한 진단 횟수를 확인할 수 있다.\nDaily Diagnostics Detail\nDiagnostics Calendar에서 특정 일자를 클릭하면, 화면 하단에 선택한 일자의 시간대 별 진단 발생 그래프가 표시 된다.\n7.4.2. 리포트 진단 및 대응 기능이 수행되면 Report가 자동으로 생성된다. Report는 7일간 보관되며 오래된 Report는 자동으로 삭제된다.\n진단/대응 리포트 목록 DAIGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 화면에서 특정 서버를 선택한 후, Report List 버튼 을 클릭하면 진단/대응 리포트 목록 화면을 볼 수 있다. 진단/대응 리포트 목록 화면은 아래와 같다.\nFigure 30. 진단/대응 리포트 목록 화면 View 버튼 을 선택하여 Report를 확인할 수 있다.\n리포트 공통 정보 Report의 내용은 진단 결과에 따라 다르게 표시되지만, 다음과 같은 공통 정보를 가진다.\nFigure 31. 진단/대응 리포트 화면 위와 같이 이상 현상이 지속된 기간 내에 검출된 진단 결과간의 인과 관계를 도식화해 제공하며, 화면 하단에는 각 진단 결과가 어느 시간대에 생성됐는지 보여준다.\nAnomaly 상황은 진단/대응 Rule에 설정한 설정 내용의 일부만 충족된 상황을 의미하며 주황색으로 표시되고, Fault 상황은 진단/대응 Rule에 설정한 설정 내용의 모두를 만족한 상황을 의미하며 붉은색으로 표시된다.\n리포트 상세 정보 Report 하단의 Time Line에서, 특정 시간대의 특정 진단 유형을 클릭하면 다음과 같이 상세 정보를 확인할 수 있다.\nFigure 32. 진단/대응 리포트 상세 정보 Report 상세 정보의 항목은 다음과 같다.\nTable 99. Report 상세 정보 항목 항목 설명 비고 Root Cause\n원인이 되는 진단 항목\n해당 진단 결과를 야기한 원인이 되는 진단 항목을 의미하며, 만약 해당 진단 결과의 원인이 되는 다른 진단 항목이 존재한다면 다른 진단 항목이 표시됨\nAnalysis Rule\n진단/대응 Rule에 설정된 임계\nFault Analysis Raw Data\n진단 근거가 되는 Back Data\nPre-Action for Fault Tolerance\n수행된 Action 및 Dump 파일 명\nRecommended Solution\n조치 가능한 해결책\n진단/대응 유형 별 Back Data 항목은 다음과 같다.\nRequest Full 진단 Report의 Back Data는, 가장 많이 호출된 5개의 서비스 정보이다.\nTable 100. Request Full 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\n대량 DB Data 요청 진단 Report의 Back Data는, 대량 DB Data 요청을 가장 많이 한 5개의 서비스 정보이다.\nTable 101. 대량 DB Data 요청 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nCount\n해당 서비스 요청 수\nBlocked Count\nBlock된 DB 데이터 조회 건수\nDB Conn Full 진단 Report의 Back Data는, 과다 점유된 DataSource Connection Pool 정보이다.\nTable 102. DB Conn Full 진단 Report의 Back Data 항목 항목 설명 비고 DataSource Name\nDataSource 이름\nDB Connection Pool Usage Rate\nDB Connection Pool 사용률\nLong Transaction 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 103. Long Transaction 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nPeak Control 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 104. Peak Control 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nOOM 진단 Report의 Back Data는, OOM 발생 여부 및 메모리 사용 정보이다.\nTable 105. OOM 진단 Report의 Back Data 항목 항목 설명 비고 OOM Occurred\nOOM 발생 여부\nHeap Usage Rate\nHeap Memory 사용률\nFull GC Count\nFull GC 발생 횟수\nMemory Leak\nMemory Leak 발생 여부\nHeap Dump\nHeap Dump가 생성된 경우 파일 이름\nHang 진단 Report의 Back Data는, 서버 상태 및 시스템 리소스 정보이다.\nTable 106. Hang 진단 Report의 Back Data 항목 항목 설명 비고 Node CPU Rate\nNode Agent가 측정한 시스템의 CPU 사용률\nNode Memory Rate\nNode Agent가 측정한 시스템의 Memory 사용률\nProcess CPU Rate\n서버의 CPU 사용률\nFull GC Count\n서버의 Full GC 횟수\n7.4.3. 알림 진단/대응을 통해 Report가 생성되면, 다음과 같이 LENA Manager 우측 상단의 종 아이콘 을 통해 확인 가능하다.\nFigure 33. 진단/대응 결과 알림 알림 내용을 선택하면 생성된 Report를 바로 확인할 수 있으며, 알림 내용을 확인하고 더 이상 표시하지 않기를 원한다면 x 버튼 을 클릭한다. 알림이 많은 경우 Manager 우측 상단의 종 아이콘 을 선택한 후 Notifications 화면에서 일괄적으로 확인을 할 수 있다.\nFigure 34. 진단/대응 결과 알림 목록 일괄 확인 Home 아이콘 을 클릭하면 선택한 알림에 대한 진단 이력 화면으로 이동한다. V 아이콘 을 클릭하는 것은 선택한 알림을 확인했다는 것을 의미하며, 이렇게 클릭한 알림은 Manager 우측 상단의 종 아이콘 에 더이상 표시되지 않는다.\nNotifications 화면에서는 1개월 이내의 지난 알림에 대한 이력을 확인할 수 있다. 1개월이 지난 데이터는 자동으로 삭제된다.\n7.5. 진단 및 대응 진단 및 대응 기능을 사용하면, 장애 가능성 사전에 진단하고 적절한 대응을 자동으로 수행하여 Server 안정성을 높일 수 있다.\n진단 기능은 Rule기반으로 Server의 장애 가능성(또는 장애 상황)을 자동으로 판단하는 기능이다.\n대응 기능은 진단 결과를 기반으로 적절한 Server 제어를 통해 장애 상황를 이겨내고 안정적인 서비스를 할 수 있도록 지원하는 기능이다.\n진단 대상 유형은 다음과 같다.\nRequest Pool의 과다 사용(Reqeust Full)\n과도한 서비스 요청으로 Server의 가용한 Request Thread가 모두 소진되면, 서비스 요청이 지연되거나 서비스 불가 상태에 빠질 수 있다. Request Thread 사용량 기반으로 과도한 서비스 요청 여부를 파악하고, 자동으로 해당 요청을 임시 페이지로 우회시켜 Server를 안정적인 상태로 유지한다.\n대량 DB Data 요청(Bulk DB Data Request)\n서비스가 대량 DB 데이터를 처리하는 경우, 메모리를 과도하게 사용하면서 OOM 현상, 잦은 Full GC에 의한 서버 Hang 현상 등이 발생할 수 있다. 서비스의 대량 DB 데이터 요청 여부를 파악하고, 해당 서비스를 강제로 종료시켜 Server를 안정적인 상태로 유지한다.\nDB Connection Pool의 과다 사용(Db Conn Full)\nDB 처리 시간 지연, WAS-DB간 네트워크 지연, DB Lock 등에 의해 DB Connection이 과도하게 점유된 경우, 서비스는 가용 DB Connection을 할당 받을 때까지 지연된다. DB Connection 할당을 기다리는 서비스들이 누적되어 Request Thread Pool을 과도하게 점유하게 되면, 서비스 불능 상태까지 발생할 수 있다. 특정 DataSource의 DB Connection이 모두 소진된 경우, 할당 대기 시간을 짧게 줄이는 방법을 통해 장애를 격리함으로써 Server를 안정적인 상태로 유지한다.\n수행 시간이 긴 서비스(Long Transaction)\n일시적인 네트워크, 연계시스템 문제 등으로 서비스가 지연되거나 수행시간이 원래 긴 서비스가 존재하는 경우, 해당 서비스들이 Server의 가용한 Request Thread를 과도하게 점유하여 다른 서비스 수행에 지장을 줄 수 있다. 오래 걸리는 서비스들의 Request Thread 사용률을 제한하여 다른 서비스들의 QoS를 보장한다.\n서버 동작 불능(Hang)\nServer가 동장 불능 상태인 Hang 상태가 되면 Server에서 수행되는 모든 작업이 중단되는 것은 물론 Server가 설치된 시스템 전체에 영향을 줄 수도 있다. Hang 상태가 검출되면 즉시 재기동해 Server의 장애 상황을 해소하고 시스템 전체 장애 발생을 방지한다.\nOut of Memory 에러 발생(OOM)\n서비스 로직의 오류 또는 과도한 Memory 사용에 의해 Out of Memory(OOM) 에러가 발생할 수 있다. OOM이 발생하면 Server의 정상적인 동작을 보장할 수 없으므로, OOM 발생 여부를 빠르게 파악하여 신속히 자동으로 재기동함으로써 Server 장애 상황을 극복한다.\n사용자 폭주(Peak Control)\nServer의 처리 한계를 넘는 많은 사용자의 요청이 존재하는 경우, 서비스 지연 또는 불능 상태가 될 수 있다. 만약 사용자 요청이 특정 서비스에만 몰린다면 순서대로 진입하도록 요청을 제어하여 안정적인 서비스를 제공하면서도 사용자의 이탈을 막을 수 있다. 또한 다른 서비스 QoS도 보장할 수 있다.\n7.5.1. 진단/대응 Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Diagnostics Rule Setting 메뉴에서 진단/대응 Rule을 설정할 수 있다.\nFigure 35. Diagnostics Rule Setting 화면 진단/대응 유형 별로 Tab으로 구성되어 있으며, 기본적인 Default Rule 이 제공된다. New 버튼 을 클릭해 신규 Rule을 생성하거나, 기존의 Rule을 선택해 수정 및 삭제를 할 수 있다.\n각 진단 항목별로 다음과 같이 두 개의 Default Rule이 제공된다.\n진단 후 Report만 생성하는 Rule\n진단 후 Report 및 Dump를 생성하는 Rule(Action은 Disable되어 제공됨)\n진단 유형 별 Rule 설정 항목을 다음과 같다.\nTable 107. Request Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRequest Pool(%)\nRequest Pool 사용률 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nFAKE-PAGE: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 108. 대량 DB Data 요청 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRS Count\n서비스 내에서 요청한 DB Data 건수 임계\n10000\nExceptional URI\n진단에서 제외할 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nTHROW-EXCEPTION: Exception을 발생시켜 서비스를 강제로 종료\nNONE\nTable 109. DB Conn Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nDB Connection Pool(%)\nDB Connection Pool 사용량 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nDB-CONN-CONTROL: Datasource Connection 할당 대기 시간 동적 변경(대기 시간 설정 가능)\nNONE\nTable 110. Long Transaction 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nElapsed Time(s)\n진단 대상 서비스 수행 시간 임계\n300\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nTarget URI\n대상 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSERVICE-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 111. Hang 진단 Rule 항목 설명 기본값 Rule Name\nRule 명\nTimeout(ms)\n서버에 Health Check 시도 후, 응답 대기 시간 임계\n3000(ms)\nRetry Count\n서버에 Health Check 실패 시, 재시도 횟수\n3\nFullGC Duration(s)\nFull GC 횟수를 체크할 시간 간격\n60\nFullGC Count\nFull GC 횟수\n2\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nHang 진단 설정 항목간의 관계는 다음과 같다.\nFault 조건 : 서버 Hang에 의해 Health Check 시도 후 Timeout(s) 만큼 응답 없는 상황이 Retry Count 만큼 반복되면 Fault 상황으로 판단하여 Action을 수행함\nAnomaly 조건 : FullGC Duration(s) 간격 내 FullGC Count 만큼 Full GC 발생 횟수가 많다면 Anomaly 상황으로 판단하여 Action 없이 Waning 리포트만 생성함\nTable 112. OOM 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nOUT OF MEMORY\nOOM 발생 여부(Fault 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nMemory Leak\nMemory Leak 발생 여부(Anomaly 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nTable 113. Peak Control 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nTarget URI\nPeak Control 대상 서비스 URI\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nRelease Rate(%)\n이상 상황 해제 조건이 되는 Request Thread 사용률 임계\n10\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nPEAK-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\n7.5.2. Server Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Server Rule Setting 메뉴에서 진단/대응 Rule을 Server에 Mapping하고 Enable/Disable 할 수 있다.\n최초에는 아무 진단 Rule도 Mapping되어 있지 않으므로, Enable/Disable 기능을 수행하기 전에 진단/대응 Rule을 먼저 Mapping해야 한다. 각 서버의 행을 클릭하여 다음과 같이 서버에 진단/대응 Rule을 Mapping 할 수 있다.\nFigure 36. 진단 Rule Mapping 화면 진단/대응 Rule이 Mapping된 이후에는 다음과 같이 Server Rule Setting 화면에서 Rule을 Enable/Disable 할 수 있다.\nFigure 37. Server Rule Setting 화면 Peak Control 진단 Rule만 DIAGNOSTICS \u0026gt; Policy \u0026gt; Peak Control Rule Setting 메뉴에서 설정한다.\n7.6. Trace Trace는 장애 진단을 위해 해당 Request가 LENA Server 간 이동 경로 및 시간을 기록해 원인을 진단 할 수 있게 해준다. LEAN 에서 제공하는 Trace유형은 아래와 같다.\nSession Trace\nEvent Trace\nDIAGNOSTICS \u0026gt; Trace 메뉴의 하위 메뉴를 통해 여러 기능을 사용할 수 있다.\n7.6.1. Session Trace Session 의 Trace 정보(어느 Server에 해당 Session이 존재하는지)를 확인할 수 있다. Session을 찾기 위해서는 Cluster된 Session Server가 기동중이어야 한다.\nFigure 38. Session Trace 화면 조회 결과 항목은 다음과 같다.\nTable 114. Session Trace 조회 결과 항목 항목 설명 비고 Server Type\nServer의 유형\nSession Server: LENA Session Server\nLENA Server: LENA Application Server\nServer Name\nServer 이름\nSession Server인 경우, 검색 대상 Server가 Primary이고 검색 대상 서버의 Slave Server가 Secondary 이다\nCreate Time\nSession 생성 시각\nLast Update Time\nSession이 마지막으로 수정된 시각\nLast Access Time\nServer에 해당 Session을 마지막으로 호출한 시각\nAttribute\nSession Attribute\nContext\nSession의 Application Context\n7.6.2. Event Trace 장애로 판단되는 이벤트가 발생되었을 때, 해당 Request의 Trace 정보를 확인 할 수 있다.\nFigure 39. Event Trace 화면 Trace 정보는 일주일 동안만 보관된다. 이벤트가 발생한 날짜는 검색 조건의 Trace Date에 표시 된다. 검색 결과에서 Status 항목은 발생한 이벤트의 중요도를 의미한다.\nTable 115. Event Trace 검색 결과 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nSESSION ID\n해당 Request의 Session ID\nDetail\n상세정보를 확인할 수 있는 버튼\n검색 결과의 Detail의 상세 조회 버튼 을 누르면 상세 정보를 확인할 수 있다. 각 항목은 다음과 같다.\nTable 116. Event Trace 정보의 상세 정보 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nJVMRoute\nRequest를 처리한 WAS의 JVMRoute 값\nSESSION ID\n해당 Request의 SESSION ID\nSession Server\nRequest를 처리한 Session Server\n연결된 WAS의 Primary/Secondary Session Server로 표기됨\nURL\nRequest의 URL\nTrace되는 이벤트는 아래와 같다.(Event Code는 Log 파일을 보면 확인할 수 있다. 화면에서는 코드를 문장으로 풀이해 보여준다.)\nTable 117. Trace되는 이벤트 코드 및 설명 Event Code 설명 비고 sywz\nSession ID와 JVMRoute 정보가 다름.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession ID does not match with JVMRoute.\nwxso\nWAS에 Session정보 없으나 Session Server Session정보 있음.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession does not exist in Application Server.\nwosx\nWAS에 Session정보가 있으나 Session Server에 Session정보 없음.(Session Server 두 대를 재 기동 했을 경우 발생 할 수 있음.)\nSession does not exist in Session Server.\nwxsx\nWAS에 Session정보 없고, Session Server에 Session정보 없음.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession does not exist in any Server.\nwoxx\nWAS에 Session 정보가 있으나, Primary \u0026amp; Secondary session server와 연결 끊김.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nwxxx\nWAS에 Session 정보가 없고, Primary \u0026amp; Secondary session server와 연결 끊김.(WAS에 해당 Session이 Timeout 및 Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nsywz 이벤트와 wxso 이벤트가 한 Request에서 중복 발생되는 경우, 하나의 검색 결과에 두 이벤트가 모두 표시 된다.\n7.6.3. Trace Setting 다음은 Event/Time Trace 설정을 하는 화면이다.\nFigure 40. Trace Setting 화면 Trace 설정 항목은 아래와 같다.\nTable 118. Trace Setting 항목 항목 설명 비고 Trace On/Off\nTrace 여부\n재기동 없이 적용된다\nType\nUDP: Trace 생성 조건이 되면, UDP로 Manager에 Trace 정보를 전송\nLOG: Trace 생성 조건이 되면, Log로 Trace 정보 저장\nALL: Trace 생성 조건이 되면, UDP와 LOG 기능을 모두 사용\nData\nEVENT: Event가 발생한 경우 Trace 기록\nUID: 해당 UID인 Request만을 Trace로 기록\nUID\n입력된 UID인 Request만 Trace로 기록\n8. Topology 각 시스템의 구성현황을 한눈에 알아볼 수 있으며, 설치 및 설정기능을 제공하고, 자원 모니터링 및 기동/중지 제어를 할 수 있다.\nFigure 41. Topolopgy 화면 8.1. 화면 구성 System 영역, 토폴로지 영역, 자원 모니터링 영역, 서비스 트레이싱 영역으로 구분된다.\nSystem 영역\n등록된 System 리스트를 카드 형태로 제공한다.\n카드 내의 시스템 명 좌측의 아이콘은 시스템의 상태를 의미하는데 상태를 표시하는 기준은 시스템을 구성하는 Resource와 진단 결과에 따라 3단계로 나뉘어 나타낸다.\n파란색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Low, 진단 프로세스가 수행되지 않은 상태\n주황색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Middle 이하 또는 진단 프로세스 수행 결과가 Abnormal 상태\n붉은색 원 아이콘 : 시스템을 구성하는 일부 서버의 자원 사용량이 High 인 경우 또는 진단 프로세스 수행 결과가 Fault 상태\n시스템 명 하단의 시계 아이콘 은 시스템 내의 WAS들의 평균 응답시간을 의미하고, 사용자 아이콘 은 현재 사용자 수(최근 5분 동안) / 오늘 전체 사용자 수를 의미한다.\n자원사용량의 Low, Middle, High에 대한 기준은 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting \u0026gt; Dashboard 항목에서 변경 할 수 있다.\n토폴로지 영역\n시스템 별 노드와 서버 Instance 구성현황을 토폴로지 차트로 보여준다. 각 Node에 설치한 WEB, WAS, Session Server를 설치 및 실행, clustering 을 할 수 있고, 서버 상태 정보를 확인 할 수 있다. 뿐만 아니라 WEB Server-WAS 간 ,WAS-Session Server, WAS-Datasource간에 연동을 설정할 수 있다.\n자원 모니터링 영역\nNode와 Server의 CPU, Memory 등 상세 자원 모니터링 정보를 제공한다.\nService Tracing 영역\n특정 Client IP와 요청 Service Pattern을 기준으로 서비스를 트레이싱하여 Request 수, 평균 응답시간, 서비스 응답 error 수를 확인 할 수 있다.\n시스템목록 우측에 있는 설정 버튼 을 통해 다음의 사항을 변경 할 수 있다.\nChart Refresh Interval : 토폴로지 영역의 데이터 조회 주기\nRefresh Topology Chart : 토폴로지 영역의 차트 그리는 메타데이터 정합성 검증 및 복원\nSystem List System 목록에 보여줄 System 선택 및 순서 변경\nElements Show Endpoint : Endpoint 영역 표시 여부 설정\nShow Edge Info : Edge에 상세정보 표시 여부 설정\nShow Server Name : Server명 표시 여부 설정\nTransparency Node : 토폴로지 영역의 Node 투명도를 설정\nEdge : 토폴로지 영역의 Edge 투명도를 설정\n8.2. 토폴로지 영역 상세 토폴로지에서 뷰 모드에 따라 정보를 구분하여 보여준다.\nView All : 전체 정보를 보여준다.\nLow : 서버의 자원 사용량이 Low 인 인스턴스만 구분하여 보여준다.\nMiddle : 서버의 자원 사용량이 Middle 인 인스턴스만 구분하여 보여준다.\nHigh : 서버의 자원 사용량이 High 인 인스턴스만 구분하여 보여준다.\nStop/unknown : 중지된 인스턴스만 구분하여 보여준다.\n또 Cluster로 단위로 인스턴스들을 활성화하여 보여준다.\n진단기능이 설정되어 있는 WAS의 경우, 자원사용량을 체크하기 이전에 서버상태의 진단 결과가 Abnormal 또는 Fault 인지를 우선적으로 확인한다. 해당 상태로 판단되는 경우에는 High 상태로 표시해준다.\n8.2.1. Control [Edit: OFF] E2E (End to End)관점하에 Client부터 Database까지 상세한 모니터링 정보 및 제어 기능을 제공한다.\nFigure 42. Topolopgy Control [Edit: OFF] CLIENT 영역 Client는 사용자를 말하며, 사용자가 Web서버에 요청을 주고 받는 브라우저 화면 Rendering 시간 및 Script error 내용을 확인 할 수 있다.\nWEB 영역 WEB 영역에서는 설치된 WEB Node 와 WEB 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWeb Node는 Web 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWeb Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWeb Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Memory, Thread 상태 정보를 제공한다.\nWeb Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 3가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Service Control\nService Control은 무중단 적시배포 기능을 제공한다. 이것은 오류 서비스 발생시 이를 수정한 소스를 WAS에 긴급 배포하고 이 WAS를 호출 할 Web 서버(적시서버)를 구성한 후 오류가 발생된 서비스를 요청 받은 Web 서버들이 적시서버로 서비스를 포워딩하여 서비스가 정상적으로 제공되게 하는 방식이다.\n이 기능을 사용하려면 Web Server에서 LSC모듈이 사용되도록 설정이 되어 있어야 한다.(httpd-lsc.conf 파일에서 LscEnable을 On으로 변경 후 서버를 재기동한다.)\n제어시간, 제어조건(Header, Cookie, URL) 및 요청을 forwarding 할 서버(http://IP:Port)를 정의 후 저장하면 정의 된 내용에 따라 실시간으로 들어오는 요청을 해당 서버로 연결하여 서버 재기동 없이 서비스를 제공한다.\nMove to : Configuration\nCluster : Compare, Sync, Snapshot, Graceful Restart\nAPPLICATION 영역 APPLICATION 영역에서는 설치된 WAS Node 와 WAS 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWAS Node는 WAS가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWAS Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWAS Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Thread, Heap 상태 정보를 제공한다.\nWAS Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : Warning, CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 4가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Forced Stop\nManual Check : Thread Dump, Active Service Dump, Heap Dump\nMove to : Configuration, Monitoring\nCluster : Compare, Sync, Snapshot, Graceful Restart\nSESSION 영역 SESSION 영역에서는 설치된 Session Node 와 Session 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nSession Node는 Session 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nSession Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nSession Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Session Count, Heap 상태 정보를 제공한다.\nSession Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Session Count와 기본 정보\n제어 기능\nServer에 대해 크게 2가지 제어 기능을 제공한다.\nServer Control : Start, Stop\nMove to : Configuration\nDB 영역 DB 영역에서는 WAS와 연결된 Database 정보를 제공한다. Database는 RESOURCE 메뉴에서 등록되어 있어야 한다. 노드는 다른 영역과의 동일하게 표현하기 위해 가상의 노드로 표현하고 있다. 각 DB에 대한 모니터링 정보나 제어 기능은 제공하지 않는다.\nEdge 정보 연결선은 각 인스턴스 간, 또는 인스턴스와 Database간의 연결을 의미하며, 서버 평균 응답시간 및 연결된 Connection 수를 나타낸다.\nClient-WEB : Connection 수(Client 브라우저 렌더링 평균 완료 시간(ms)/Web Server 평균응답시간(ms))\nWEB-APPLICATION : Active Connection 수(WAS 평균응답시간(ms))\nAPPLICATION-DB : Active Datasource 사용률 (%)\nEnd to End 모니터링기능은 기본적으로 off상태로 설정되어 있다.\n따라서 Client-WEB, WEB-APPLICATION 사이의 브라우저 렌더링 평균응답시간 또는 Server의 평균응답시간을 보기 위해서는 다음의 순서대로 설정을 해주어야한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\nweb server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n8.2.2. Control [Edit: ON] 토폴로지 영역 우측상단에 Edit 버튼 을 선택하면 편집모드로 전환된다. 여기에서는 시스템 내의 노드와 인스턴스 설치 기능을 제공한다.\nFigure 43. Topolopgy Control [Edit: ON] Node 노드의 설치/수정/삭제 동작 방식은 node와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nNode 버튼 을 선택 후 설치하고자 하는 영역 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n수정\n변경하고자 하는 노드를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 노드를 선택한다.\n우클릭 버튼을 누르면 Hide, Unregister, Uninstall 메뉴 중 원하는 기능을 선택한다.\n노드 삭제시 노드 안에 설치된 서버는 한대도 없어야 한다.\nInstance 서버의 설치/수정/삭제 동작 방식은 server와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nInstance 버튼 을 선택 후 설치하고자 하는 영역의 노드 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n서버가 하나도 설치되어 있지 않은 노드 목록은 각 영역의 아래에 회색바탕 위에 있는 사각버튼으로 제공된다. 빈 노드에 서버를 설치하고 싶은 경우 해당 노드버튼을 더블클릭한다.\n수정\n변경하고자 하는 서버를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 서버를 선택한다.\n우클릭 버튼을 누르면 Unregister, Delete 메뉴 중 원하는 기능을 선택한다.\nEdge Edge는 서버와 서버의 연결을 의미하며 WEB-APPLICATION, APPLICATION-SESSION, APPLICATION-DB 영역 안의 서버들을 연결 할 수 있다.\n연결\nEdge 버튼 을 선택 후 연결하고자 하는 시작서버 선택 후 드래그하여 도착서버와 연결한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\nAPPLICATION-SESSION 간에 연결하는 경우, 실선은 Primary Server, 점선은 Secondary Server를 의미한다.\n연결 정보 변경\n변경하고자 하는 edge를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n연결 해제\n삭제하고자 하는 edge를 선택한다.\n우클릭 버튼의 메뉴인 Delete 버튼을 선택한다.\nCluster CLUSTER 메뉴에서 제공하는 Server Cluster기능을 설정 할 수 있다.\n생성\nCluster 버튼 을 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n변경\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역의 Delete 버튼 을 선택한다.\n8.3. 서비스 트레이싱 영역 상세 특정 서버의 IP 혹은 Service Pattern을 입력 후 Start 버튼 을 선택하면 입력한 정보를 기준으로 서비스를 트레이싱하여 Request 수, error를 확인 할 수 있다. 트레이싱 하는 동안 서비스 트레이싱 영역 우측에 Xlog 정보도 제공하므로 필요에 따라 xlog를 선택하여 상세한 정보를 확인할 수 있다.\n서비스 트레이싱 기능을 사용하기 위해서는 다음의 순서대로 설정을 해주어야 한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\ntracing 대상 Web server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; tracing 대상 Web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\ntracing 대상 WAS의 advertiser.conf파일에서 enable.send.profile.info값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n9. Admin 9.1. IAM Manager의 사용자 관리 및 사용자 별 메뉴 권한 관리 기능을 제공한다.\n9.1.1. Users (사용자 관리) 사용자 목록 ADMIN \u0026gt; Users 메뉴에서 Manager 사용자의 생성, 수정, 삭제 기능을 제공한다.\nFigure 44. Users 화면 사용자 관리의 속성은 아래와 같다.\nTable 119. 사용자 관리 속성 항목(*는 필수값) 설명 비고 Use ID(*)\n사용자 식별자\nUser Name(*)\n사용자 이름\nPassword(*)\n사용자 비밀번호\n비밀번호는 특수문자, 숫자, 영문자 혼합의 최소 8자 이상이어야 한다\nUpdater\n사용자 데이터 수정 및 생성자\nLast Update\n사용자 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n기본적으로 관리자 권한을 가진 계정을 두 개 제공한다.(비상용) 제공되는 계정 외에 사용자를 추가하여 사용하기를 권장한다.\n사용자 등록 New 버튼 을 클릭하여 신규 사용자 등록을 준비한다.\n사용자 ID, 사용자 명, 사용자 패스워드를 입력한다.\n사용자 패스워드는 암호화되어 저장된다.\n패스워드는 글자수가8~20자, 영어 대소문자, 숫자, 특수문자(!@#$%^*+=-) 조합으로 작성한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nPassword 암호화는 해쉬 알고리즘(SHA-512)을 사용한다.\n사용자 수정 수정할 사용자를 선택한다.\n수정 버튼 을 클릭하여 사용자명, 사용자 패스워드를 변경한다.\n사용자 패스워드는 암호화되어 저장된다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nManager 에 로그인시 7 번 이상 실패하면 해당아이디는 잠김 상태가 되어 사용할 수가 없다.\n잠김 상태를 해제하기 위해서는 사용자 관리 화면에서 해당 아이디의 패스워드를 수정해주어야 한다.\n패스워드 수정을 위해 Manager 에 로그인 한 계정이 없는 경우에는, $LENA_HOME/bin/reset-manager-pw.sh 를 실행하여 패스워드를 수정할 수 있다.\n사용자 삭제 삭제할 사용자를 선택한다.\n삭제 버튼 을 클릭하여 사용자를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\n사용자가 1명 남은 경우는 삭제할 수 없다.\n9.1.2. Auths (권한관리) Manager는 메뉴 별 권한 관리를 위해 권한 그룹을 생성해야 한다. ADMIN \u0026gt; Auths 메뉴를 통해 권한 그룹을 생성, 수정, 삭제할 수 있다.\n권한 목록 Figure 45. Auths 화면 권한 관리의 속성은 아래와 같다.\nTable 120. 권한 관리 속성 항목(*는 필수값) 설명 비고 Auth ID(*)\n권한 식별자\nAuth Name(*)\n권한 이름\nDescription\n등록된 권한에 대한 설명\nUpdater\n권한 데이터 수정 및 생성자\nLast Update\n권한 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n권한 생성 New 버튼 을 클릭하여 신규권한 등록을 준비한다.\n권한 ID, 권한 명, 권한 설명을 입력한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다\n권한 수정 수정할 권한을 선택한다.\n수정 버튼 을 클릭하여 권한 명, 권한 설명을 변경 한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n권한 삭제 삭제할 권한을 선택한다.\n삭제 버튼 을 클릭하여 권한을 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n9.1.3. User-Auth Mapping (사용자 권한 관리) Manager 사용자는 메뉴 사용 권한 획득을 위해 최소한 1개의 그룹에 소속되어 있어야 한다. 관리자는 권한 그룹을 선택하여 사용자를 배속시킬 수 있다. \"권한 관리\" 화면을 통해 등록한 권한 중 하나를 선택하고 여러 셔플 버튼을 사용하여 사용자의 권한을 제어한다.\n사용자 권한 조회 Figure 46. User-Auth Mapping 화면 사용자 권한 관리의 속성은 아래와 같다.\nTable 121. 사용자 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한 관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nID\n사용자 식별자\nName\n사용자 이름\n사용자 권한 맵핑 사용자를 배속시킬 권한을 선택한다.\n권한 선택 시 선택 가능 사용자와 선택된 사용자가 화면에 출력된다.\n선택 가능 사용자를 선택한다.\n사용자를 배속 시키거나 제외 시킨다.\n단일 우측 셔플 버튼 을 클릭하여 선택한 사용자를 배속시킨다.\n전체 우측 셔플 버튼 을 클릭하여 모든 사용자를 배속시킨다.\n단일 좌측 셔플 버튼 을 클릭하여 선택한 사용자를 제외시킨다.\n전체 좌측 셔플 버튼 을 클릭하여 모든 사용자를 제외시킨다.\nSave 버튼 을 클릭하여 사용자 권한 관리 정보를 저장한다.\n9.1.4. Menu-Auth Mapping (메뉴 권한 관리) LENA Manager에서 생성한 권한 별로 접근 가능한 메뉴를 설정할 수 있다. 권한 선택을 통해 생성한 권한 중 메뉴를 설정할 하나의 권한을 선택한다. LENA Manager에 등록된 모든 메뉴를 보여주는 메뉴 목록 중 접근 제어를 설정할 메뉴를 선택하고 메뉴권한을 설정한다.\n메뉴 권한 조회 Figure 47. Menu-Auth Mapping 화면 메뉴 권한 관리의 속성은 아래와 같다.\nTable 122. 메뉴 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nMenu Name\nLENA Manager에 등록된 메뉴 중 좌측 메뉴 목록에서 선택한 메뉴 이름\nAuth\n선택한 권한의 메뉴접근가능여부 표시\nDefault \"N\"\n\"SERVER\", \"CLUSTER\", \"RESOURCE\" 메뉴의 하위 화면에서 Node, Server, Server Cluster, Resource 을 추가할 경우 자동으로 \"메뉴 권한 관리\" 화면의 메뉴 목록에 추가한 항목이 조회된다.\n따라서 신규 메뉴를 추가하고 싶을 경우 \"SERVER\", \"CLUSTER\", \"RESOURCE\" 하위 화면에서 각 항목을 등록 및 생성하면 된다.\nServer에 대한 권한을 변경해야 할 경우 아래 메뉴에 동일하게 권한을 반영해야 한다.\n\"SERVER\" 하위의 해당 Server\n\"CLUSTER\" 하위의 해당 Server\n만약 이를 지키지 않고, Server Cluster 하위의 일부 Server 메뉴에 대해 다음과 같이 권한을 설정할 경우를 고려해보자.(예시, 권장사항 아님)\n\"SERVER\" 하위의 해당 Server : 권한 있음\n\"CLUSTER\" 하위의 해당 Server : 권한 없음\n이 경우 메뉴 및 Server Cluster, Server 권한은 아래와 같이 표현된다.\nServer Cluster를 구성하는 Server 개수 : \"CLUSTER\" 하위 Server 권한 기준으로 권한이 있는 Server 개수\nServer Cluster의 하위 메뉴 : \"CLUSTER\" 하위 Server의 메뉴 권한 기준으로 권한이 있는 Server만 보임\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 목록 : Server Cluster의 구성 정보를 나타내야 하므로, \"CLUSTER\" 하위 권한과 무관하게 모든 Server 목록 조회\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 상세 링크 : 개별 Server에 대한 접근이므로, \"SERVER\" 메뉴 하위의 Server 권한이 없는 Server에 대한 접근을 막음\n메뉴 권한 맵핑 권한을 설정할 메뉴를 선택한다.\n권한 선택 시 메뉴에 대한 권한까지 조회된다.\n메뉴 목록에서 권한을 설정할 메뉴를 선택한다.\n메뉴 선택 시 메뉴 권한 목록에 메뉴 권한이 표시된다\n권한 변경이 필요할 경우 Y 혹은 N을 선택한다.\nSave 버튼 을 클릭하여 메뉴 권한 정보를 저장한다.\n9.2. License Manager를 통해 각 Node별 현재 적용된 라이선스를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.2.1. License 목록 License화면을 열면 Node별로 현재 적용된 License의 목록을 조회할 수 있다.\nLicense의 상태는 Status 항목을 살펴보면 확인 할 수 있다.\nFigure 48. License의 목록 화면 9.2.2. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 123. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Standard\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n라이선스의 만료기간 15일 전부터 알림메세지를 제공한다. 알림메세지는 Manager 우측 상단의 종 아이콘 에서 확인 할 수 있다.\n9.2.3. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.2.4. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 49. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh 이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/dev Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Standard CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/dev CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.2.5. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.2.6. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.3. License(Scaling) Manager를 통해 현재 적용된 Manager License를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.3.1. Manager License Manager License의 상태, 사용량, 사용기간을 확인할 수 있다. Upload Manager License 버튼 을 통해 License 파일을 업로드할 수 있다. 업로드된 License 는 Scale-out 시 VM 으로 전송되어 서버 기동시 인증역할을 수행한다.\n9.3.2. License 목록 Node별로 현재 적용된 License의 목록을 조회할 수 있다. License의 상태는 Status 항목을 보면 확인할 수 있다.\nFigure 50. License의 목록 화면 9.3.3. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 124. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Enterprise, Standard, Developer\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n9.3.4. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.3.5. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 51. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh (Windows 버전의 경우 check-license.bat)이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/1.3 Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Enterprise CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/1.3 CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.3.6. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.3.7. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.4. Security (서비스 제어) Application Server에 IP또는 URL기반으로 사용자 요청을 제한하는 기능이다.\n9.4.1. Rule Setting (Rule 설정) 특정 IP나 URL에서 요청을 제어하고 싶은 경우 화면을 통해 신규 Rule을 설정한다. 신규 Rule 설정 및 Rule 삭제의 편의성을 제공하기 위해 검색기능을 제공한다. 전체 Application에 적용되는 Server속성은 에러페이지로 처리할 수 있다\nFigure 52. Rule Setting 화면 Rule 목록의 Use 컬럼은 해당 Rule이 Application Server에 적용되어 있는지 여부를 나타낸다.\nRule 추가 시 설정 가능한 속성은 아래와 같다.\nTable 125. Rule 추가 시 설정 가능한 속성 항목(*는 필수값) 설명 비고 Rule Name(*)\n추가하는 Rule의 이름\nDescription\n추가하는 Rule에 대한 설명\nRule Type\n제어할 단위\nIP, URL\nAllow IP(*)\n허가할 요청 IP\n정규식 형태로 입력 가능\nDeny IP(*)\n거부할 요청 IP\n정규식 형태로 입력 가능\nControl Time(*)\nRule을 적용할 시간단위\nError Message(html)(*)\n제어로 인해 Filtering된 요청에 대한 출력할 에러 페이지\n제어유형이 \"IP with DateTime\"인 Rule에 Proxy Server로 중계되는 Application Server 를 적용한다면, Proxy Server의 보안적 특성으로 인해 User IP를 구할 수 없어 Rule 적용이 되지 않을 수 있다.\n생성된 Rule 중 적용된 Rule은 삭제 할 수 없다.\n9.4.2. Rule Applying (Rule 적용) 추가된 Rule 중 하나를 선택하여 Application Server에 적용한다. 적용 편의성을 위해 Rule유형, 적용단위, Rule명에 대한 검색기능을 제공한다.\nRule 목록에서 하나를 선택하여 Rule 적용에서 셔플 버튼들을 이용하여 적용 대상을 선택하고, On/Off 버튼 을 클릭하여 적용 및 저장한다. 적용 대상에서 제외를 하고 싶을 경우에도 셔플 버튼들을 이용하여 제외시킨다.\nFigure 53. Rule Applying 화면 Rule 현황 및 적용 화면에서 사용되는 속성들은 Rule설정 화면과 유사하며 아래의 속성들은 추가적인 속성들이다.\nTable 126. 추가적인 속성 항목 설명 비고 Node Name\n등록된 Node group 하위의 Node 명\nServer Name\n등록된 Node하위의 Server 명\n선택한 Rule에 신규 대상이 추가될 경우 적용 단위에 따라 server.xml 혹은 context.xml 에 추가되고, 적용된 대상에서 제외할 경우 위의 설정 파일에 추가된 Rule 설정이 삭제된다.\n9.4.3. Service Control Log (Rule 적용결과 조회) Rule이 적용된 항목들에 대한 처리 결과가 목록으로 출력된다. 처리 결과 확인의 편의성을 위해 Rule유형, 적용단위, Rule명, 로그시간에 대한 검색기능을 제공한다.\nFigure 54. Service Control Log 화면 처리 목록에서 사용되는 속성들은 아래와 같다.\nTable 127. 로그 정보의 항목 항목 설명 비고 Controlled Date\nRule설정이 적용된 요청의 처리시간\nRemote Address\n처리된 원격지 주소\nRequest URL\n처리된 요청의 URL\nHTTP Method\n처리된 요청의 HTTP Method\nRule 명\n요청을 처리하는데 적용된 Rule 이름\nRule 이력의 경우 Manager의 /conf/manager.conf 설정파일 내 access filter log 취합 Listener 사용여부를 true로 설정해야 한다. Log의 경우 각 서버의 logs 폴더 내 access_filter.log.\"날짜\".txt 파일에 기록되며 주기적으로 Manager 가 각 server 의 log 를 취합하여 Database 에 저장한다. (이때 취합된 Log 는 access_filter_log.\"날짜\".txt.gathered 파일에 backup된다) Database에 취합된 Log는 처리목록 화면에서 확인 가능하다.\nmanager.conf 내 설정 파일 항목의 설정 예는 아래와 같다.\n#access filter log 취합 리스너 사용여부 및 동작주기(초) default는 false, 60 accessfilter.listener=false accessfilter.interval=60 9.5. Patch 설치된 LENA에 대한 기능 개선 및 버그 수정을 위한 패치를 제공한다.\nPatch는 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nPatch 기능은 CLI 및 Management UI를 통하여 실행이 가능하며, 패치 시 서비스에 문제가 발생하는 경우 Restore 기능을 통하여 원복 할 수 있다.\n패치 순서는 다음과 같다.\n패치파일 업로드\nManager 패치 적용\nNode 패치 적용\n서버(Application Server, Session Server) 패치 적용\n패치 Commit\n복구 순서는 다음과 같다.\n서버 패치 복구\nNode 패치 복구\nManager 패치 복구\n복구 Commit\nCLI로 패치하는 방식은 Appendix를 참고한다.\n9.5.1. Overview 패치파일의 업로드 기능을 제공하며, Manager와 각 Node별 Node Agent의 패치 반영상태 정보를 조회한다.\nPatch 파일 업로드 Patch Info 영역에서는 매니저에 업로드 된 패치파일 중, 최상위 버전의 상세정보를 표시한다.\nTable 128. Patch Info 항목 항목 설명 비고 Patch File Ver.\n패치파일의 버전 정보\nRelease Date\n패치파일의 배포 일자\nPatch Note\n상세(노트) 버튼 을 눌러 상세한 패치노트 내용을 조회한다.\n패치노트 팝업표시\n패치파일을 업로드하는 과정은 다음과 같다.\n업로드 버튼 을 클릭한다.\n패치 가능 상태인지를 확인 후 정상이면 패치파일 업로드를 위한 팝업을 띄운다\n패치 가능 상태 조건 Manager에 등록된 Node가 모두 기동상태여야한다.\npatch가 commit상태여야 한다.\nmanager 기준으로 node와 server가 모두 같은 버전이어야 한다.\nmanager에 등록되지 않은 서버가 존재하지 않는다.\nunregister된 서버존재시 manager에 등록\n노드엔진 하위 servers폴더에 서버가 존재시 해당 폴더 삭제\n업로드 할 패치파일을 선택하면 자동으로 업로드가 실행된다.\n업로드 가능한 파일은 zip과 tar.gz이며 이외의 파일을 업로드 할 경우 에러메시지가 출력된다.\nManager Patch Manager Info 영역에서는 Manager의 패치상태를 표시하고, Manager의 패치 및 복구를 실행할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 129. Manager Info 항목 항목 설명 비고 Patch Status\nManager의 패치 적용 상태\n해 아이콘 : Manager가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Manager가 최신 패치를 적용하지 않은(patch available) 상태\nCurrent Ver.\nManager의 현재 버전\nPatch Ver.\nPatch 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nManager Info화면의 History 항목에 표시된 상세(노트) 버튼 을 클릭하면 팝업창을 통해 패치 실행 이력을 확인할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 130. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPervious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\nPatch Manager Info 하단에 있는 Patch 버튼 을 클릭하면 최신 패치를 적용한다.\nHandwork에 기술된 내용 패치실행 후 필요한 수작업이므로, 기술된 내용을 실행하여 반영하여야 한다. Handwork 작업 후 팝업창 하단의 체크박스를 해제하면 Manager Patch Info화면의 Handwork 버튼이 흰색으로 변경된다.\nManager 패치를 적용하면 Node와 Server의 패치 적용 후 Commit 버튼 을 누르기 전까지 Node의 설치/등록, Server의 설치/등록/복제 등의 기능을 수행 할 수 없다.\n패치 후 반드시 브라우저 캐시를 삭제하여야 패치버전의 Manager를 사용할 수 있다.\nRestore Manager Info 하단에 있는 Restore 버튼 을 클릭하면 패치 이전 버전으로 복구된다.\n복구는 Manager에 등록된 모든 노드의 패치 상태가 Patch Available 인 경우에 수행한다.\nCommit Manager, Node, Server의 모든 패치를 적용 후 Commit버튼을 눌러 확정한다. 확정 이후에는 이전버전으로 되돌릴 수 없다.\nNode Patch Node Patch Status 영역은 매니저에 등록된 node에 대해서, 최신패치가 적용된 서버의 개수와 패치가 적용되지 않은 서버의 개수를 종합해서 보여준다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다\nTable 131. Node Patch Status 항목 항목 설명 비고 Status\nnode의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Node Agent가 최신 패치를 적용하지 않은(patch available) 상태\n반구 아이콘 : Node Agent는 최신 패치를 적용하였으나, Node 에 설치된 Server에는 최신 패치가 적용되지 않은 상태\n느낌표 아이콘 : Node agent가 lena-manager와 호환이 되지 않는 상태.\nNode name\nnode명\nAddress\nnode의 IP\nNode Version\nNode의 현재 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nWAS\nWeb Application Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nSession Server\nSession Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nNode Patch 버튼 을 클릭하면 제공되는 팝업창에서 Node 선택 후 해당 Node에 대한 패치 또는 복구를 진행 할 수 있다.\nWindow OS 환경에 설치되어 있는 Node는 Manager가 아닌 CLI를 통해 패치를 수행한다.\nServer Cluster Patch Status Server Cluster 별 Patch 현황을 표시한다.\n화면에 표시되는 각 항목에 대한 설명은 다음과 같다.\nTable 132. Server Cluster Patch Status 항목 항목 설명 비고 Status\ncluster의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : 일부 서버가 최신 패치를 적용하지 않은(patch available) 상태\nCluster Group\ncluster그룹명\nCluster Name\ncluster이름\nLENA Patch\nApplication Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch available : 최신패치가 적용되지 않은 서버의 개수\n9.5.2. WAS Node/Cluster에 포함된 Application Server에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위, cluster 단위)으로 검색한다.\nTable 133. Application Server Patch Status 항목 항목 설명 비고 Patch Status\nApplication Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nApplication Server가 설치되어있는 Node명\nName\nApplication Server 이름\nType\nApplication 서버 타입\nStandard : Application Server Standard Edition\nEnterprise : Application Server Enterprise Edition\nIP\nApplication Server가 설치된 Node의 IP\nHTTP Port\nApplication Server의 HTTP Connector port\nAJP Port\nApplication Server의 AJP Connector port\nStart/Stop\nApplication Server의 기동 및 중지 실행\nCurrent Ver.\nApplication Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 134. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.5.3. Session Server Session Server들에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위)으로 검색한다.\nTable 135. Session Server Patch Status 항목 항목 설명 비고 Patch Status\nSession Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nSession Server가 설치되어있는 Node명\nName\nSession Server 이름\nType\nSession 서버 타입\nPort\nSession Server의 port\nStart/Stop\nSession Server의 기동 및 중지 실행\nCurrent Ver.\nSession Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 136. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.6. Preferences 9.6.1. Action Trace Manager를 통해 각 사용자가 수행하는 추가/수정/삭제 작업의 수행 이력은 로그로 남는다. Action Trace에서는 이러한 수행이력을 조회/추적하는 기능을 제공한다.\nFigure 55. Action Trace 화면 이력 조회 조회 조건을 입력 후 클릭하면 이력을 조회할 수 있다. 목록 중 하나를 선택하면 상세정보도 확인할 수 있다.\n조회 화면에 표기되는 항목은 아래와 같다.\nTable 137. 이력 상세 정보 항목 항목 설명 비고 Trace Date\nAction을 수행한 시간\nStatus\nAction 수행 결과\n성공 : Success, 실패 : Fail\nClient IP\nAction을 수행한 사용자의 IP 주소\nUser ID\nAction을 수행한 사용자 ID\nAction\n수행한 활동(Action) 명\nMethod\nAction에 사용된 Method 이름\nRequest\nLENA Manager Http Request URL\nInput\nHttp Request Input 파라미터\n위 항목 중 \"Input\" 은 Request 파라미터를 그대로 저장하기 때문에, Server ID, Node ID, Server Cluster ID가 데이터 관리용 Key값 (일련번호, 캡쳐화면에서 \"serverID=31\"로 표시된 부분)으로 보여진다. 해당 Server/Node/Cluster의 상세정보를 조회하기 위해서는 \"Action Trace Detail\" 정보 하단에 있는 \"Search ID\" 기능을 활용한다. 이 기능의 입출력 항목은 아래와 같다.\nTable 138. Search ID 기능의 입출력 항목 항목 설명 비고 ID\n좌측 Combo : serverId / nodeId / serverCluster Id 중 택일\n우측 : Input 에 있는 ID 값을 입력\n입력항목\nData\n검색된 Server/Node/Cluster 정보\n출력항목\n9.6.2. Documentation LENA 소개자료와 매뉴얼을 다운로드 받을 수 있다.\n9.6.3. Manager Environment Manager 환경 설정을 위한 정보를 제공한다.\nManager Environment Manager 환경 설정 정보 중 env-manager.sh/bat에 저장하는 정보를 제공한다.\nManager Allow IPs : Manager에 접근 가능한 IP항목을 설정한다.\nJava Home Path : Manager에서 사용하는 java home 경로를 설정한다.\nManager Configuration Manager 환경 설정 정보 중 manager.conf에 저장하는 정보를 제공한다.\n기본적으로 제공하는 2가지 항목을 제공한다.\nuse JMX for Server Status : JMX를 통해 서버 상태 정보를 조회할지 여부(default : false)\nuse Server Delete Protection : Manager에서 서버 삭제 기능 사용금지 여부(default : false)\n화면 우측의 설정 버튼 을 클릭하면 상세 정보를 확인 및 변경 할 수 있다.\nTable 139. JMX for Server Status: true 사용시 WAS Status 표시 Status\nStatus 명\n설명\nStarted\nWAS 및 Application 모두 정상 기동 상태\nStarted(Warning)\nWAS 정상 기동, Application 일부(또는 전체) 기동 안 된 상태\nStopped\nWAS 중지 상태\nError\nWAS Status 확인 불가 상태\nMetadata Refresh Topology 메뉴에서 시스템 별 구성정보를 topology 차트로 그리기 위해 사용되는 메타데이터의 정합성 검증 및 복원 기능을 수행한다.\nReset manager address of all registered nodes Manager에 등록된 노드들에게 변경된 Manager Address를 일괄적으로 변경시켜주는 기능을 제공한다.\n9.6.4. Manager HA Manager 이중화에 대한 설정을 관리하고, 이중화 상태에 대한 현황조회를 할 수 있다.\nManager 이중화는 Primary와 Secondary로 구분되어 기동된 LENA Manager간의 Database와 주요 파일들을 동기화 함으로써 Prmary Manager가 비가동시 임시적으로 Secondary Manager 가 Primary의 서비스를 대행하는 기능이다.\nSecondary Manager가 대행하는 서비스의 기능은 다음 두가지 이다.\nServer Cluster - Scaling 서비스\nService Cluster - Server Template 및 License 다운로드\nManager 이중화를 위해서는 각 Manager의 역할에 따라 환경설정 파일인 'env-manager.sh' 파일의 다음 부분을 수정하여 기동하여야 한다.\nLENA Manager 환경변수 파일 (env-manager.sh) 설정 CATALINA_OPTS=\u0026quot; ${CATALINA_OPTS} -Dspring.profiles.active=ha-none\u0026quot; 위 파일에서 설정되는 spring.profiles 프로퍼티의 값은 다음 3가지 설정이 가능하며, 잘못 기입되었을 경우 Manager가 정상기동 되지 않는다.\nha-none : 기본 값으로, 이중화를 하지 않는 단독 실행형 Manager\nha-primary : 이중화시 Primary Manager 역할 수행\nha-secondary : 이중화시 Secondary Manager 역할 수행\nLocal Manager 현재의 Manager 정보를 제공한다. Manager의 역할에 관계없이, 현재의 관리화면을 제공하는 Manager 자신을 Local Manager, 원격지 Manager를 Remote Manager라 칭한다.\nTable 140. Local Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 항상 Active 상태이다.\nStart Time\nLocal Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nLocal Manager에 설정된 Remote Manager의 연결정보가 실제 Remote Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nRemote Manager 원격지 Manager의 정보를 제공한다.\nTable 141. Remote Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 정상적으로 연결되어 있을 경우 Active 로 표기되며, 연결되어 있지 않을 경우 InActive로 표기된다.\nStart Time\nRemote Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nRemote Manager에 설정된 Remote Manager의 연결정보가 실제 Local Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nAddress\nRemote Manager의 주소로 연결정보를 설정할때 사용된다.\nHttp Port\nRemote Manager의 Http 서비스 Port로 연결정보를 설정할때 사용한다.\nConnection Test 버튼 을 눌러 Remote Manager의 Address와 Http Port를 이용하여 실제 Connection이 가능한지 테스트를 할 수 있다.\nPrimary Manager와 Secondary Manager는 Pairing을 통해 상호 동기화를 위한 정보를 설정할 수 있다. Sync Settings 버튼 을 눌러 Remote Manager와 설정정보를 동기화 하는 Paring을 수행할 수 있다.\nLatest Sync Status 이중화된 Manager간 Database 및 File 동기화 최신 이력을 조회할 수 있다.\nTable 142. Latest Sync Status 정보 항목 항목 설명 비고 Type\nDatabase 또는 File\nStatus\n정상일때 초록색 ○ 아이콘, 오류 발생시 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nTime\n동기화 시도 시간\nResult\n동기화 성공여부\nMessage\n동기화 수행시 생성된 결과 메시지\n목록 버튼\n목록 버튼 을 눌러 이전 동기화 이력을 조회 할 수 있다. 이력은 총 10개 까지 표기되며, Manager 기동 후의 이력만 표기되고, Remote Manager에서 발생한 동기화 정보는 정상 연결시에만 표기된다.\n10. Appendix 10.1. LENA 시스템 요구사항 LENA를 설치하고 사용하기 위한 최소 요구사항은 다음과 같다.\n구분 JVM CPU Memory Disk Support OS 비고 기본 설치 패키지\nJDK 1.8 이상\n2 Core 이상\n4 GB 이상\nroot를 제외한 용량 10GB 이상\nLinux (centos7 이상) 또는 Windows 7이상\n각 구성요소 설치 파일 제공\n10.2. Manager 지원 브라우저 Manager의 기능을 사용할 수 있는 브라우저로는 Chrome/Edge(버전 70 이상), Firefox(버전 62 이상) 이 있다. IE의 경우 일부기능이 정상적으로 동작하지 않기 때문에 다른 브라우저를 사용하기를 권장한다. 브라우저 권장 최소 사이즈는 1680*900 이다.\n10.3. 지원 Spec별 버전 Specification Version 비고 Java Development Kit (JDK)\n1.8~\nJava Servlet\n3.1\nJava Server Pages (JSP)\n2.3\nExpression Language (EL)\n2.2\nJavaServer Pages Standard Tag Library (JSTL)\n1.2\nEnterprise JavaBeans (EJB)\n3.2\nJava Message Service (JMS)\n1.1\nJava Transaction API (JTA)\n1.2\nJava API for RESTful Services (JAX-RS)\n2.0\nJava API for XML Web Services (JAX-WS)\n2.2\n10.4. Manager DB파일 백업 Manager의 내부데이터 관리를 위한 HSQL DB의 파일은 주기적으로(1일) 백업파일을 생성하고 있다. 생성위치는 ${LENA_HOME}/repository/backup/lena-manager/script 이다.\n기본적으로 30일 이전 백업정보는 삭제하도록 되어 있는데 보관기간을 변경하고 싶은 경우, ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, dbbackup.size=보관기간 을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.5. Manager 의 내부이력 삭제 Manager가 내부적으로 남기는 이력은 주기적으로 삭제하도록 스케쥴링이 되어 있다. 삭제하는 정보는 Action Trace 이력과 Server History 이력이다.\n기본적으로 Action Trace이력은 30일까지만 보관하고, Server History 이력은 90일까지 보관하고 있다. 이 보관기간을 변경하고 싶은 경우 ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, actiontrace.size=보관기간, serverhistory.size=보관기간을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.6. Manager 의 admin 패스워드 초기화 Manager의 admin사용자 패스워드를 분실하거나 비밀번호 오류횟수가 초과하였을 경우에는 console를 통하여 패스워드를 초기화해야 한다.\nManager가 설치된 장비에 console(telnet or ssh)로 접속한다.\n$LENA_HOME/bin/reset_manager_pw.sh 파일을 실행한다.\n패스워드를 초기화 할 user인 admin을 입력한다.\n초기화할 패스워드를 입력한다. 단, 패스워드는 8자리이상, 알파벳/숫자/특수문자의 조합으로 입력한다. 패스워드는 보안을 위해 console에 표시되지 않는다.\n[bin]$ ./reset-manager-pw.sh ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------- | 1. USER_ID is the user id to reset | ex : admin | 2. NEW_PASSWORD is the password to change | - password rule #1 : more than 8 length | - password rule #2 : inclusion of one or more alphabet characters | - password rule #3 : inclusion of one or more numerical digits | - password rule #4 : inclusion of one or more special characters +------------------------------------------------------------------------------- Input USER_ID for installation. (q:quit) administrator Input NEW_PASSWORD for installation. (q:quit) The password has been changed successfully. Execution is completed.!! 10.7. LENA 설치 권장 OS파라미터(CentOS기준) LENA 설치 시 OS파라미터는 max user processes 값을 8192 이상으로 설정하는 것을 권장한다.\nparameter 권장값 기본값 max user processes\n8192\n1024\nopen files\n8192\n1024\nCentOS기준으로 max user processes 설정은 다음과 같이 ‘ulimit –a’ 명령어를 실행하여 확인을 할 수 있다.\n$ ulimit -a + core file size (blocks, -c) 0 + data seg size (kbytes, -d) unlimited + scheduling priority (-e) 0 + file size (blocks, -f) 8192 + pending signals (-i) 14891 + max locked memory (kbytes, -l) 64 + max memory size (kbytes, -m) unlimited + open files (-n) 1024 + pipe size (512 bytes, -p) 8 + POSIX message queues (bytes, -q) 819200 + real-time priority (-r) 0 + stack size (kbytes, -s) 10240 + cpu time (seconds, -t) unlimited + *max user processes (-u) 1024* + virtual memory (kbytes, -v) unlimited + file locks (-x) unlimited CentOS를 기준으로 명령어 ‘ulimit –u’와 ‘ulimit –n’로 프로세스 수와 오픈파일 개수를 설정할 수 있다. 위 변경사항을 영구적으로 반영하기 위해서는 각 유저의 profile (.profile, .bash_profile)에 ulimit 실행명령을 추가하거나, 강제 설정할 수 있다 (CentOS 기준).\n*$ cat $HOME/.bash_profile* *.. (생략)* *ulimit -u 8192* *ulimit -n 8192* 또 다른 설정 방법으로는 /etc/security/limits.conf (CentOS 기준) 파일을 열어서 프로세스 최대수(nproc)와 오픈파일 최대수(nofile)를 설정한다.\n*$ cat /etc/security/limits.conf* *.. (생략)* ** soft nproc 8192* ** hard nproc 8192* ** soft nofile 8192* ** hard nofile 8192* 10.8. LENA 주기적으로 증가하는 파일 항목 경로 삭제주기 월 예상 증가량 비고 Manager정기점검로깅\nLENA_HOME/repository/monitoringDB/maintenance\n6개월\n10MB\n서버 6대 기준의 예상 증가량\n자동삭제\nManager모니터링, 진단리포트\nLENA_HOME/repository/monitoringDB/{yyyyMMdd}\n7일\nN/A\n자동삭제\nManager진단통계\nLENA_HOME/repository/monitoringDB/statistics\n영구\n1MB 이하\nManagerDB백업파일\nLENA_HOME/repository/backup/database\n30일\n100MB 이하\n자동삭제\nManager로그\nLENA_HOME/logs/lena-manager\n30일\n100MB 이하\n자동삭제\nAgent로그\nLENA_HOME/logs/lena-agent\n30일\nN/A\n자동삭제\nInstaller로그\nLENA_HOME/logs/lena-installer\n영구\n1MB 이하\nPatch적용파일\nLENA_HOME/etc/patch\n영구\nN/A\n패치시에만 생성됨\n패치완료후 삭제가능\nPatch백업파일\nLENA_HOME/etc/backup/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\nPatch로그\nLENA_HOME/logs/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\n서버인스턴스로그\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/logs\n영구\n부하에 따라 판단\n경로변경가능\n서버인스턴스 히스토리\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/history\n영구\nN/A\nManager를 통해 서버설정 변경시에 설정파일 변경분만 생성\n서버인스턴스 스냅샷\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/snapshot\n영구\nN/A\nManager를 통해 Cluster Snapshot을 생성하는 경우만 생성\nWAS 덤프파일\nLENA_HOME/repository/monitoringDB/dump\n영구\nN/A\nManager를 통해 WAS 덤프를 수행하는 경우에만 생성\n10.9. Patch CLI (Command Line Interface) Patch는 설치된 LENA에 대한 기능 개선 및 버그 수정을 위해 제공되는 기능이다. 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nManagement UI를 통해 실행하는 방법은 patch 에서 제공한다. 여기에서는 CLI를 통해 패치 및 복원하는 방법에 대해 설명한다.\n10.9.1. 패치파일 업로드 및 압축해제 전달받은 패치파일을 LENA가 설치된 서버로 FTP등을 이용하여 개별적으로 업로드 한다.\n업로드 한 파일은 아래와 같은 위치에 압축을 해제하고 버전명으로 디렉토리의 명칭을 변경한다.Manager를 통하여 업로드하면 자동으로 해당 경로에 압축이 해제된다.\n노드/서버 패치파일 경로: /engn001/lena/1.3.1/etc/patch/{패치버전} Manager 패치파일 경우: /engn001/lena/1.3.1/repository/patch/{패치버전} 10.9.2. Patch Node Patch patch.sh를 실행하여 Node를 패치한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-node Node 패치과정에서 Node는 재기동 된다.\n[bin]$ ./patch.sh lena-node ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:06:43:915 [INFO] Patch started to lena-node 2018-05-28 14:06:47:075 [INFO] Stopping node-agent ... 2018-05-28 14:06:52:595 [INFO] Starting node-agent 2018-05-28 14:06:52:748 [INFO] Patch completed to lena-node ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140643905 PATCH_TARGET : lena-node PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Manager Patch patch.sh를 실행하여 Manager를 패치한다.\nmanager 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-manager Manager 패치과정에서 Manager는 재기동 된다.\n[bin]$ ./patch.sh lena-manager ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:05:32:752 [INFO] Patch started to manager 2018-05-28 14:05:36:032 [INFO] Stopping manager ... 2018-05-28 14:05:46:062 [INFO] Starting manager 2018-05-28 14:05:47:066 [INFO] Patch completed to manager ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140532668 PATCH_TARGET : lena-manager PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Server Patch patch.sh를 실행하여 개별적인 서버를 패치한다.\nnode가 설치된 서버에서 실행하여야 하고, LENA 서버 설치 유형별로 별도로 실행한다. 서버 패치를 위해서는 노드패치가 선행되어야 한다.\nWAS standard type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-se WAS enterprise type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-ee Session Server 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-session Table 143. patch.sh의 입력 인수 및 입력 항목 항목 설명 비고 PATCH_TARGET\n패치 타겟 (patch.sh의 인수로 입력)\nlena-node\nlena-manager\nlena-se\nlena-ee\nlena-session\nSERVER_ID\n패치 타겟에 해당하는 서버 ID\nlena-node, lena-manager 패치에는 불필요\n[bin]$ ./patch.sh lena-ee ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:17:18:840 [INFO] Patch started to lena-se Input SERVER_ID for execution. (q:quit) wasEE_9100 ... 2018-05-28 14:17:26:820 [INFO] Saving patch history 2018-05-28 14:17:26:842 [INFO] Patch completed to lena-se ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528141639064 PATCH_TARGET : lena-ee PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! 10.9.3. History history.sh를 실행하여 패치 이력을 확인한다. 기본이력은 원복된 이력은 제외하고 보여주며, 전체이력은 모든 이력을 보여준다.\n기본이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh 전체이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh all [bin]$ ./history.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch History 1 lena-node / patch-20180528140643905 - action : PATCH - id : patch-20180528140643905 - target : lena-node - serverId : lena-node - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140643903 - timestamp : 20180528140643905 - restored : false - handwork-status : NO_WORK 2 lena-manager / patch-20180528140532668 - action : PATCH - id : patch-20180528140532668 - target : lena-manager - serverId : lena-manager - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140532666 - timestamp : 20180528140532668 - restored : false - handwork-status : NEED_WORK - start of handwork-detail ... - end of handwork-detail 3 lena-ee / patch-20180528141639064 - action : PATCH - id : patch-20180528141639064 - target : lena-ee - serverId : wasEE_9100 - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528141639062 - timestamp : 20180528141639064 - restored : false - handwork-status : NO_WORK history is completed.!! 10.9.4. Restore restore.sh를 실행하여 적용한 패치에 대한 원복을 진행한다. (패치 적용 문제 발생 시)\nRestore를 실행하면 패치 시점에 변경된 파일을 변경이전 상태로 복원한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/restore.sh \u0026lt;PATCH_HISTORY_ID\u0026gt; (PATCH_HISTORY_ID는 ./ history.sh 로 조회되는 id 값이다.) [bin]$ ./restore.sh patch-20180423130610713 ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:40:05:404 [INFO] Restore started to lena-ee ... 2018-05-28 14:40:05:532 [INFO] Restore completed to lena-ee ========================= Execution Result ======================== MESSAGE : Restore succeeded RESULT : Success =================================================================== restore is completed.!! 10.9.5. Version 확인 version.sh를 실행하여 현재 설치된 서버에 대한 패치상태를 확인할 수 있다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/version.sh [bin]$ ./version.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch Information 1. Base Information - Version : 1.3.1.1 (Up to date) - LENA_HOME : /engn001/lena/1.3.1 2. lena-manager 2.1 - id : lena-manager / version : 1.3.1.1 (Up to date) 3. lena-se 3.1 - id : wasSE_9100 / version : 1.3.1.1 (Up to date) 3.2 - id : wasSE_9200 / version : 1.3.1.1 (Up to date) 4. lena-ee 4.1 - id : wasEE_9300 / version : 1.3.1.0 (Patch available to 1.3.1.1) 4.2 - id : wasEE_9400 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5. lena-session 5.1 - id : session_5000 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5.2 - id : session_5500 / version : 1.3.1.0 (Patch available to 1.3.1.1) version is completed.!! 10.10. Session Server 상세 Application Server의 Session Clustering은 별도의 Session Server를 설치하여 Session을 공유해 Clustering 한다. Session Server는 별도 VM위에서 작동하는 Standalone 모드와 Application Server에 Session Server 모듈을 탑재한 Embedded 모드가 있다.\n10.10.1. Session Server Standalone 모드 설치 설치방법은 “3.5.2. Install\" 항목을 참조한다.\n기동/중지 및 기동여부 확인 기동/중지 및 기동여부 확인은 \"3.5.6 Start/Stop” 에서 확인한다.\n환경설정 Session Server가 설치된 위치를 ${ZODIAC_HOME}이라 칭한다. Session Server는 LENA home 하위 /servers 폴더에 위치한다.\n환경설정 정보는 ${ZODIAC_HOME}/session.conf 에 관리한다. 환경설정으로 변경 가능한 설정 항목은 아래와 같다.\n항목 설명 server_id\nserver ID\nserver_name\nserver Name\nprimary_port\n해당 Session Server의 TCP listening port\nsession_max_count\n최대 HTTP세션수\nserver_recv_queue_size\nSecondary Server나 Application Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\nserver_req_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등)을 담는 Queue size\nresp_queue_size\n타 Server가 요청한 Session 정보에 대한 응답을 담는 Queue size\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다. 각 Application Server 의 설정과 일치시키는 것이 좋다.\nso_timeout\nApplication Server와의 연결에서 read timeout\nthread_request_handler\nrequest Queue 에 쌓은 데이터 처리하는 Thread 개수.\nthread_data_handler\nreceive Queue 에 쌓은 데이터 처리하는 Thread 개수.\ndebug_clustering\nDebug용 Log를 남길지 여부\nenable_auto_was_sync\ntrue로 설정 했을때, 장애 등으로 재 연결된 WAS에 Sync 요청을 보내 WAS의 Session 데이터를 Sync 한다.\nenable_auto_peer_sync\n(장애 등으로) 재 연결된 Secondary Session Server에 Sync 요청을 보내 Slave Session Server의 Session 데이터를 Sync 할지 여부\nserver_expire_sec\n서버에서 HTTP세션 정보를 expire 시키는 시간 (Session Timeout)\n0인 경우, Application에서 설정한 session의 timeout 시간을 사용\nserver_expire_check_sec\nSession Timeout 체크 주기. (단위 : 초)\nsecondary_host\nSecondary 세션서버의 주소\nsecondary_port\nSecondary 세션서버의 주소\nenable_ready_after_sync\nSecondary Server와 Session 데이터를 동기화를 수행한 후에, 연결된 WAS에 Clustering 서비스 제공 가능 상태(Ready)로 전송할지 여부 (true는 동기화 후 ready 상태 전송)\nwait_server_ready_timeout\n해당 시간 이 될 때까지 ready상태(Session Clustering서비스 제공가능 상태) 가 안되면 자동으로 ready 상태를 만들어준다.\nserver_ready_time\n기동 시 Secondary Server와의 연결 대기 시간 (해당 값 * 100 ms).\nmax_logoutset\n최대 로그아웃 된 HTTP 세션 수\nenable_auto_logout_sync\ntrue 인 경우, session entry 정보를 sync 할 때, logout 정보도 같이 sync 한다. (sticky가 아닌 round-robin일 경우 필요하다)\n로그 로그는 ${LENA_HOME}/logs/session-server/lena-[Session Server Name]_[YYYYMMDD].log 로 남는다. 로그를 확인하고자 한다면 ${ZODIAC_HOME}/log.sh 파일을 실행시켜 확인 할 수도 있다.\n[session_5002]$ ./log.sh 5월 09, 2018 02:55:50 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 02:55:54 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33138 5월 09, 2018 02:55:55 오후 [ZODIAC] SERVER_READY, no peer, time=5000 5월 09, 2018 02:59:57 오후 [ZODIAC] Zodiac Stop 5월 09, 2018 03:00:00 오후 [ZODIAC] Zodiac Session Server 1.3.0 20160420 5월 09, 2018 03:00:01 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 03:00:01 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33359 5월 09, 2018 03:00:03 오후 [ZODIAC] ACCEPT SERVER /127.0.0.1:46818 5월 09, 2018 03:00:04 오후 [ZODIAC] SYNC[session_5002] recv bulk sessions : #0 recv bulk logout sessions : #0 recv bulk dupInfo : #0 2ms 5월 09, 2018 03:00:04 오후 [ZODIAC] SERVER_READY sync is done 5월 09, 2018 03:00:05 오후 [ZODIAC] TCP Primary name=session_5002 /127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC start 127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC Send bulk sessions send to 127.0.0.1:5002 #0 and logout session send : 0 and dupInfo send : 0 Console Zodiac Session Server는 JMX를 통해 Session Server 정보 조회 및 Application Server Sync 명령을 수행 할 수 있다. ${ZODIAC_HOME} 의 console.sh 파일을 실행시켜 Zodiac Session Server의 JMX 기능을 사용한다.\n[session_5002]$ ./console.sh =====zodiac session server JMX Console===== ------------------------------------------------------------ - Usage: ./console.sh \u0026lt;COMMAND\u0026gt; - - \u0026lt;COMMAND\u0026gt; is one of the following: - - 1. was_list - - 2. status - - 3. was_serverq - - 4. was_sync - - It needs WAS ID - - example: ./console.sh was_sync \u0026lt;was id\u0026gt; - - 5. search - - It needs SESSION ID. - - example: ./console.sh search \u0026lt;session id\u0026gt; - ------------------------------------------------------------ 다음은 console.sh의 명령어에 대한 설명이다.\nApplication Server List\n현재 Session Server에 연결된 Application Server List를 보여준다.\nShell명령어 console.sh was_list 를 실행하면 된다.\n[session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}} Session Server Status\n현재 Session Server의 상태 값을 보여준다.\nShell명령어 console.sh status 를 실행하면 된다.\n[session_5002]$ ./console.sh status =====zodiac session server JMX Console===== RUN OPERATION: getStatusString\\{request_getfresh_logout:0,session_count:0,req_lost:0,request_ getfresh_not_new:0,request_getfresh_nodata:0,request_getnew_secondary:0,session_expired:0,request_getnew_logout:0,session_timeout:1800,request_getnew_nodata:0,session_max_count:2000000 ,logout_from_nodes:0,pid:32705,session_recv_lost:0,logout_from_secondary:0,request_getfresh_secondary:0,request_getfresh:0,request_getnew:0,logout_count:0,data_from_nodes:0,resp_lost:0,request_getfresh_data:0,data_from_secondary:0} Session Server ServerQ Status\nZodiac Session Server의 ServerQ 상태를 보여준다. ServerQ는 Session Server에 연결된 Application Server의 접속을 관리하는 모듈이다. 여기서 보여주는 데이터는 Application Server 에서 보내는 Session 정보(data)와 Request 정보(Request)를 담는 Queue 정보이다.\nShell명령어 console.sh was_serverq 를 실행하면 된다.\n[session_5002]$ ./console.sh was_serverq =====zodiac session server JMX Console===== PRINT ATTRIBUTEdataQ.size: 0requestQ.size: 0dataQ.overCnt: 0requestQ.overCnt: 0 Session Id Search\n입력한 Session ID와 일치하는 Session을 가지고 있는 Application Server List 를 보여준다.\nShell명령어 console.sh search [Session ID] 를 실행하면 된다.\n[session_5002]$ ./console.sh search B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285 + =====zodiac session server JMX Console===== RUN OPERATION: search RESULT:\\{'AE4_29100'=\\{lastAccessTime='2018-05-24 15:55:48.503',context='ROOT',attributeNames=[sessiontest.counter, ARGO_DUPLICATION_STATUS],lastUpdateTime='2018-05-24 15:55:48.501',addr='/127.0.0.1:44568',id=B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285,createTime='2018-05-24 15:55:43.241'}} Application Server Session Sync\nApplication Server의 Session 정보를 Session Server로 sync하는 경우 실행한다.\nShell명령어 console.sh was_sync [Application Server jvmName(was_list에서 jvmName으로 출력되는 값)] 를 실행하면 된다.\n[session_5002]$ [session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}}} [session_5002]$ ./console.sh was_sync bde0fbb29e8100285 =====zodiac session server JMX Console===== RUN OPERATION: serverSyncsync complete Session Server failover Session Server는 Primary/Secondary로 구성되어있고, 실시간으로 Session 정보를 동기화 한다. Application Server는 Primary/Secondary Session Server와 접속을 유지하고 있기 때문에 Primary Session Server 장애가 생겼을 경우, 장애 감지 시점 이후부터 Secondary Session Server로 Failover 된다.\n10.10.2. Session Server Embedded 모드 Session Server Embedded 모드는, Application Server 내에 Session Server Module을 내장하는 방식이다.\n환경 설정 Embedded 모드로 Session Server 설정을 하려면 Manager의 Application Server 설정 화면에서 설정하거나 ${LENA_HOME}/servers/[ApplicationServer명]/conf/session.conf 를 수정한다.\n화면에 표시되는 항목에 대한 설명은 아래와 같다.\n항목 설명 비고 Mode\nEmbedded 또는 Standalone Session Server의 Client 모드 선택\nEmbedded Host\nSession Cluster의 Primary서버의 노드명 과 서버명\nEmbedded Port\nSession Cluster의 Primary서버의 서비스 포트\nSecondary Server Host\nSession Cluster의 Secondary 서버의 노드명 과 서버명\nSecondary Server Port\nSession Cluster의 Secondary 서버의 서비스 포트\nMulti Login Control\n다중 로그인 체크 여부\nfalse\nLogout Page (Multi Login)\n다중 로그인시 먼저 로그인 한 사용자에게 표시되는 로그아웃 결과 페이지\nLogout Message (Multi Login)\n다중 로그인시 로그아웃 결과 메시지, ajax Client에게 JSON 타입으로 제공됨\nExpected Page for Multi Check\nManager 에서는 설정할 수 있는 설정 값은 정해져 있다. 기본적으로 default 설정을 따르도록 한다.\n아래는 session.conf 파일로 변경 가능한 환경설정 값이다.\n항목 설명 기본값 enable_clustering\nSession clustering 할지 여부. False면 Session Server에서 session을 find하지 않는다.\nTRUE\ndebug_clustering\ndebug 할지 여부\nFALSE\nprimary_host\nPrimary Session Server의 주소\nEmbedded 모드인 경우에는 Embedded Host 값\n127.0.0.1\nprimary_port\nPrimary Session Server의 port\nEmbedded 모드인 경우에는 Embedded Port 값\n5005\nsecondary_host\nSecondary Session Server의 주소,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용된다.\nEmbedded 모드인 경우에는 Slave Server Host 값\n127.0.0.1\nsecondary_port\nSecondary Session Server의 port,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용\nEmbedded 모드인 경우에는 Slave Server Port 값\n5006\nrecv_queue_size\n타 Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\n512\nreq_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등) Queue size\n512\nresp_queue_size\n타 Server로부터 수신한 Session 정보 요청에 대한 응답을 담는 Queue size\n512\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\n512\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다.\n3000\nso_timeout\nSession Server와의 연결에서 read timeout\n8000\ntcp_open_try_interval\nSession Server에 연결이 끊어진 경우 재 연결 시도를 위한 간격\n5000\nfind_timeout\nApplication Server에서 트랜잭션이 세션을 검색할 때 서버 응답을 기다리는 시간 이 시간 동안 서버가 응답이 없으면 Application Server은 해당 세션을 서버가 가지고 있지 않은 것으로 간주한다\n500\nwait_server_ready_cnt\nServer와 통신연결은 되었으나, Server 상태가 ready가 아닌 경우 최대 설정 초만큼 기다린다. -1인 경우 무한대로 기다린다.\n-1\nserver_embedded\nsession server 모듈을 embedded 할지 여부. True면 session server 모듈을 embedded 한다.\nfalse\nmax_logoutset\n로그아웃된 HTTP 세션을 보관하는 set 크기\n20000\ncheck.duplication.login\n중복 로그인 체크 여부\nfalse\n주1) 타 Server : 연결된 Session Server 또는 Cluster된 Application Server\nVersion 1.3.1.4\nLast updated 2022-05-03 13:34:11 +0900 "},{"id":17,"href":"/docs/1.3.2/1.3.2.0/userguide/","title":"User Guide","parent":"1.3.2.0","content":" \u003c!DOCTYPE html\u003e User Guide User Guide LENA Support\nlena-support@lgcns.com\nversion 1.3.2.0 Table of Contents 1. Overview 1.1. LENA는 무엇입니까? 1.2. LENA 특징 1.3. LENA 구성 요소 및 주요 개념 1.3.1. Management Module 1.3.2. Server Module 1.4. LENA 작동방식 1.5. Edition 별 제공 Spec 2. Log In/Out 2.1. Log In 2.2. Log Out 2.3. Theme 변경 3. Dashboard 4. Server 4.1. System 4.1.1. 목록 4.1.2. 등록 4.1.3. 수정 4.1.4. 삭제 4.2. Node 4.2.1. 목록 4.2.2. Install 4.2.3. Register 4.2.4. 수정 4.2.5. 삭제 4.2.6. Start 4.2.7. Stop 4.2.8. Change Java Home 4.3. WAS 4.3.1. 목록 4.3.2. Install 4.3.3. Clone 4.3.4. Register 4.3.5. 수정 4.3.6. 삭제 4.3.7. Start/Stop 4.3.8. 설정 정보 관리 4.3.9. Resource 관리 4.3.10. Application 배포 4.4. Web Server 4.4.1. 목록 4.4.2. Install 4.4.3. Clone 4.4.4. Register 4.4.5. 수정 4.4.6. 삭제 4.4.7. Start/Stop 4.4.8. 설정 정보 관리 4.5. Session Server 4.5.1. 목록 4.5.2. Install 4.5.3. Register 4.5.4. 수정 4.5.5. 삭제 4.5.6. Start/Stop 4.5.7. 설정 정보 관리 5. Cluster 5.1. Server Cluster 5.1.1. Server Cluster 목록 5.1.2. Server Cluster 생성 5.1.3. Server Cluster 삭제 5.1.4. Server Cluster 상세 5.1.5. Scaling 6. Resource 6.1. Database 6.1.1. Database 등록 6.1.2. Database 수정 6.2. DataSource 6.2.1. DataSource 등록 6.2.2. DataSource 수정 6.2.3. DataSource 삭제 6.2.4. JDBC Driver Upload 6.2.5. DataSource Import 6.3. JTA 6.3.1. JTA 등록 6.3.2. JTA 수정 6.3.3. JTA 삭제 6.3.4. JTA Import 6.4. JMS 6.4.1. JMS 등록 6.4.2. JMS 수정 6.4.3. JMS 삭제 6.4.4. JMS Import 6.5. Application 6.5.1. Application 등록 6.5.2. Application 수정 6.5.3. Application 삭제 6.5.4. Application Upload 7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 7.1.2. 현황 모니터링 상세 7.1.3. 모니터링 설정 7.2. Analysis Dashboard 7.2.1. Performance Map 7.2.2. Analysis Summary 7.2.3. Instance Map 7.3. Event Dashboard 7.3.1. Event 종류 7.3.2. Event Dashboard를 통한 Event 관리 7.4. 통계 7.4.1. 연간 진단/대응 통계 7.4.2. 리포트 7.4.3. 알림 7.5. 진단 및 대응 7.5.1. 진단/대응 Rule 설정 7.5.2. Server Rule 설정 7.6. Trace 7.6.1. Session Trace 7.6.2. Event Trace 7.6.3. Trace Setting 7.7. TunA APM 7.7.1. Connection Management 7.7.2. Module Management 7.7.3. Install Management 7.7.4. Host Management 7.7.5. WAS에서의 TunA 설정 8. Topology 8.1. 화면 구성 8.2. 토폴로지 영역 상세 8.2.1. Control [Edit: OFF] 8.2.2. Control [Edit: ON] 8.3. 서비스 트레이싱 영역 상세 9. Admin 9.1. IAM 9.1.1. Users (사용자 관리) 9.1.2. Auths (권한관리) 9.1.3. User-Auth Mapping (사용자 권한 관리) 9.1.4. Menu-Auth Mapping (메뉴 권한 관리) 9.2. License 9.2.1. License 목록 9.2.2. License 상세 9.2.3. License 업로드 / 복구 9.2.4. License 관련 시스템 현황 체크 9.2.5. Host기반 License 체크 설정 9.2.6. 시간 정보 조회 9.3. License(Scaling) 9.3.1. Manager License 9.3.2. License 목록 9.3.3. License 상세 9.3.4. License 업로드 / 복구 9.3.5. License 관련 시스템 현황 체크 9.3.6. Host기반 License 체크 설정 9.3.7. 시간 정보 조회 9.4. Security (서비스 제어) 9.4.1. Rule Setting (Rule 설정) 9.4.2. Rule Applying (Rule 적용) 9.4.3. Service Control Log (Rule 적용결과 조회) 9.5. Patch 9.5.1. Overview 9.5.2. WAS 9.5.3. Session Server 9.6. Preferences 9.6.1. Action Trace 9.6.2. Documentation 9.6.3. Manager Environment 9.6.4. Manager HA 10. Appendix 10.1. LENA 시스템 요구사항 10.2. Manager 지원 브라우저 10.3. 지원 Spec별 버전 10.4. Manager DB파일 백업 10.5. Manager 의 내부이력 삭제 10.6. Manager 의 admin 패스워드 초기화 10.7. LENA 설치 권장 OS파라미터(CentOS기준) 10.8. LENA 주기적으로 증가하는 파일 10.9. Patch CLI (Command Line Interface) 10.9.1. 패치파일 업로드 및 압축해제 10.9.2. Patch 10.9.3. History 10.9.4. Restore 10.9.5. Version 확인 10.10. DBCP 부가 기능 10.10.1. Application Server 제어 10.10.2. DBCP 로깅 10.11. Session Server 상세 10.11.1. Session Server Standalone 모드 10.11.2. Session Server Embedded 모드 1. Overview 1.1. LENA는 무엇입니까? LENA는 Enterprise 환경에서 JAVA J2EE Web Application을 서비스하는데 필요한 모든 구성 요소가 포함된 웹 미들웨어 솔루션이다.\nLENA는 실질적인 웹 서비스를 제공하는 Server 제품들과 이를 통합적으로 관리하기 위한 Web UI 기반의 Manager Console로 이루어져있다. 사용자는 Manager Console을 통해 Server 설치부터 Parameter 설정 및 각 제품간 연동 등을 손쉽게 수행할 수 있으며, LENA만의 사용자 친화적인 UX/UI 설계로 웹 미들웨어 솔루션 사용에 익숙하지 않은 사용자라도 빠르게 사용법을 습득하여 웹 미들웨어 관련 지식을 갖출 수 있다.\nLENA는 데이터 센터/클라우드 환경에서 웹 미들웨어 운영자들로부터 다년간의 운영 노하우를 집약하여 다양한 편의 기능을 제공한다. 이와 함께 대규모 트랜잭션 안정적으로 처리하고 서비스 장애를 최소화 할 수 있도록 고가용성, 내결함성을 보완한 Clustering, 장애 진단/대응 기능을 제공한다.\n다음 절은 LENA의 특징들에 대해 더 상세히 설명한다.\n1.2. LENA 특징 Enterprise 요건 제공 LENA Web Application Server EE (J2EE Edition)는 Enterprise Web Application을 실행시키는데 필요한 EJB, JTA/XA, JMS, JAX-WS 등 J2EE Spec을 지원한다. 또한 타사 WAS에 비해 기동성능, Application Deploy성능의 향상을 이루었고, CPU/Memory 등 자원 사용 효율성 역시 향상되었다. 고가용성을 위해 필수인 Session Clustering을 위해 Session Server를 Enterprise Edition에서 기본으로 제공한다.\nOpensource 호환성 보장 LENA Web Server, LENA WAS는 Opensource Base로 구현되어 완벽한 Opensource 호환성을 보장한다. Opensource 기반으로 작성된 Web Application이 별도의 수정 없이 LENA에 적용되므로 전환 Effort를 대폭 절감할 수 있다. 또한 Library 및 설정 관련하여 표준 기술을 사용하므로 Vendor 종속성을 해결하여 사용자의 IT Ownership을 강화할 수 있다.\n지능형 장애 진단/대응 및 서비스 추적 Thread Pool Full / Hang / Out of memory 등 대표적인 장애 상황들에 대해 사전 정의된 Rule 기반으로 진단을 수행하여 적절한 조치를 수행할 수 있다. 실시간으로 수집되는 Monitoring 데이터를 기반으로 분석하여 Server가 실제 장애로 이어지기 전에 Fake Page 우회 혹은 강제 재기동 등을 통해 장애 상황을 방지하거나 장애로 이어지더라도 장애 시간을 최소화할 수 있다. 이와 동시에 관련된 Dump와 Report를 제공하여 원인 분석을 수행할 수 있게 한다.\nMulti-Server 관리 및 Centralized Operation 여러 LENA Web Server와 LENA WAS를 하나의 Cluster로 묶을 수 있어 Single Operation으로 여러 Server를 동시에 제어할 수 있다. 일관적인 설정 동기화와 함께 Graceful Restart혹은 Rolling Restart를 통해 안정적인 반영이 가능하다. 또한 Cluster로 묶이지 않은 Server들에 대해서도 Multi Control을 지원한다.\n운영 관점의 차별화 기능 제공 웹 미들웨어 솔루션을 운영하기에 편리한 다양한 편의 기능을 제공한다. Template 기반의 간단하고 빠른 Server설치와 Server 복제 기능을 이용하여 원하는 구성 Set을 짧은 시간 안에 구축이 가능하다. Topology View를 통해 Server 모듈 간 구성 및 연동 정보를 한눈에 확인할 수 있어 가시성을 향상할 수 있다. Dashboard를 통해 운영 중인 시스템의 Event와 성능 현황 등을 확인할 수 있다. 그 밖에 Multi Account 관리를 통해 메뉴/자원의 접근 권한 설정이 가능하며, 운영자 Action Tracing, 설정 변경 정보 History 추적 및 Restore 기능을 제공한다.\n1.3. LENA 구성 요소 및 주요 개념 LENA는 Binary Package를 통해 제공이 되며 그 안에 필요한 모든 구성 요소를 포함하고 있다. 구성 요소는 크게 두 범주로 나누어진다.\nLENA를 운영 관리하기 위한 Management Module로 LENA Manager Console과 LENA Node Agent가 포함된다.\n실질적인 Web Service를 담당하는 Server Module로 LENA Web Server, LENA WAS(Web Application Server), LENA Session Server를 포함된다.\n다음은 각 구성 요소 별 상세 설명과 함께 이에 따른 주요 개념을 다룬다.\n1.3.1. Management Module LENA Manager LENA Manager는 Web UI를 통해 LENA의 모든 자원/기능을 설정 및 제어할 수 있도록 설계된 Web Application이다. LENA Package에 준비된 스크립트를 통해 설치 및 기동할 수 있다. LENA Manager를 통해 Server 설치/관리를 수행하려면 Node Agent 및 Advertiser와의 연동을 구성해야 한다.\n다음은 LENA Manager에서 제공하는 대표적인 기능과 개념에 대해 설명한다. 아래에 설명되지 않은 상세 사항들에 대해서는 “운영자가이드”를 참조한다.\nDashboard\nLENA Node, Server의 자원 현황과 Event 확인\nServer\nLENA Node의 등록, Web Server, WAS, Session Server 를 설치, 설정 관리 및 기동/중지 제어\nSystem\nLENA Node, Server가 관리되는 최소 단위. 하나의 System하위에는 여러 Node를 등록할 수 있으나, 하나의 Node는 여러 System에 중복 등록이 불가하다.\nNode\nNode Agent와 1:1로 대응되는 개념. Manager에서 원격지에 있는 Server에 명령을 수행하기 위해선 Node Agent를 통해야 한다.\nCluster\nMulti-Server 관리. 하나의 System 내의 Server들에 대해서만 Cluster 구성이 가능하며, 하나의 Server는 여러 Cluster에 속할 수 없다.\nServer Cluster\n여러 LENA Web Server, WAS를 하나의 묶음으로 관리할 수 있다. 설정 동기화, 통합 재 기동 등의 다양한 편의 기능 제공.\nResource\nLENA에서 제공하는 Module이 아니지만 LENA Server와 밀접하게 연동되는 자원에 대해 명세를 정의함으로써 Resource로 사용한다. Resource는 LENA WAS별로 Local 설정할 수 있지만, Resource 메뉴를 통해 Global 설정하여 WAS에서 공통 Import하는 방식을 통해 중복된 작업을 피할 수 있다.\nDatabase\nDBMS의 IP, Port, Driver 등 물리적 명세를 정의. 하나의 DBMS와 1:1로 대응된다.\nDatasource\nDB Connection Pool을 LENA WAS에서 구성하기 위해 JNDI Name, Url, User ID/Password등을 지정한다. 하나의Database하위에 여러 Datasource를 구성할 수 있다.\nApplication\nLENA WAS를 통해 실행할 Application의 위치와 Context Path를 지정한다.\nTopology\nLENA Manager상에 설치되고 연동 구성되어 있는 LENA Web Server, LENA WAS, LENA Session Server 등의 구성 현황을 Topology Diagram 형식으로 표현한다. 이 기능을 통해 Server의 간단한 설치와 기동/중지 제어도 가능하다.\nDiagnostics\nLENA Node와 Server에 대한 자원 모니터링과 그에 연계된 다양한 기능 탑재.\nLENA Node Agent LENA Node Agent는 LENA Manager에 Node를 등록할 때 Node와 1:1로 대응되며 LENA Package에 기본적으로 설치되어 있으며 준비된 스크립트를 통해 기동할 수 있다. 주요 역할은 LENA Manager를 통해 Node 하위의 Server에 명령을 수행할 때 Node Agent가 이를 담당하며 모니터링 및 상태 데이터를 LENA Manager로 전송하는 기능도 수행한다. 물리 서버 당 1개의 Node Agent를 설치하는 것이 기본이지만, 필요에 따라 여러 개의 Node Agent를 구성할 수 있다. LENA Web Server, LENA WAS, LENA Session Server는 LENA Node 하위에 구성되며, LENA Node는 하나의 System 하위에 구성된다.\n1.3.2. Server Module LENA Web Server LENA Web Server는 정적 컨텐츠를 전송할 수 있으며 LENA WAS와 Reverse Proxy 형태로 연동하여 LENA WAS가 제공하는 Web Application 서비스의 front-end 역할을 수행한다. 그 외 선택적으로 다양한 추가 기능을 이용할 수 있는데, Domain/URI 기반 분기 및 Load Balancing 기능과 보안 레이어(SSL)를 제공하는 것이 대표적이다.\nLENA WAS (Web Application Server) LENA WAS는 Java Web Application을 실행하여 Web Application 서비스를 제공한다. DB Connection Pool을 이용하기 위한 Datasource 연동 기능과 Session Clustering을 이용하기 위한 Session Server 연동 기능을 포함하고 있다. 다음은 LENA WAS의 두 가지 Type을 설명한다.\nLENA WAS SE (Standard Edition)\nJava Class 파일을 처리하기 위한 Servlet Engine과 JSP 파일을 처리하기 위한 JSP Engine으로만 구성되어 있으며 WAR Type의 Web Application만 실행할 수 있다. LENA WAS EE에 비해 상대적으로 가볍고 빠르다는 장점이 있다.\nLENA WAS EE (Enterprise Edition)\nLENA WAS SE가 제공하는 Engine 외에도 EJB Engine, JMS Engine 등 J2EE Spec을 지원하며, WAR/EJB/EAR Type의 Application을 실행할 수 있다. 또한 2 Phase Commit을 위한 XA Datasource를 지원한다.\nLENA WAS는 내부적으로 Advertiser Module을 탑재하고 있으며 이는 LENA WAS의 JVM 내부 모니터링 결과를 JMX를 통해 수집하여 LENA Manager로 전달한다.\nLENA Session Server LENA Session Server는 여러 LENA WAS 간의 Session을 공유하여 WAS 다중화를 통한 고 가용성을 보장하기 위해 제공된다. LENA Enterprise Edition을 사용할 경우 기본으로 제공되며 2개의 LENA Session Server를 Active-Active Clustering (양방향 Active-Standby)을 통해 Session Clustering을 구성할 수 있다. LENA Session Server를 사용하기 위해 Application에서 별도의 설정을 할 필요가 없이 LENA Manager에서 간단한 설정만으로 구현이 가능하다.\n단, Session-clustering을 하기 위해선 HTTP Session에 저장되는 모든 객체는 직렬화(Serializable)되어야한다.\n1.4. LENA 작동방식 Manager에 등록된 Node에는 Node Agent, Application Server에는 Advertiser가 설치되어 있다.\n운영자는 Manager의 UI를 통해 각 Node Agent에 Server에 대한 제어요청(예: Start, Stop, Reload, Dump, 설정변경 등)을 보내고, Node Agent가 이를 수신하여 제어를 실행한다.\nNode Agent, Advertiser는 주기적으로 모니터링 데이터를 Manager로 전송하고, 운영자는 Monitoring Dashboard와 같은 Manager의 UI를 통해서 각 서버의 자원 현황을 확인할 수 있다. Session Server의 경우 자기 자신의 모니터링 데이터를 직접 Manager에 전달한다.\nFigure 1. LENA Mechanism Table 1. LENA 구성 요소 별 설명 구성요소 설명 Manager\nAgent를 통한 Server제어와 모니터링 기능 제공\nRepository\nManager 운영을 위한 File/DB 탑재\nNode\nNode Agent를 탑재. Node하위에 Server Module이 설치됨\nNode Agent\n- Server 설치/복제/패치\n- Server 기동/중지 제어\n- Server 설정 관리\n- Node, Web Server, WAS, Session Server 상태 정보\n- Node, Web Server 자원 모니터링 데이터 제공\nAdvertiser\nWAS 자원 모니터링 데이터 제공\nWAS\nJava Web Application 서비스 제공\nWeb Server\nWAS와 Reverse Proxy 형태로 연동하여 Web 서비스의 Front-end 역할\nSession Server\n- WAS와 Session Clustering 연동하여 고가용성 구현\n- Session Server 모니터링 데이터 제공\n1.5. Edition 별 제공 Spec LENA 는 Application Server 의 기능 제공 범위에 따라 Standard와 Enterprise Edition으로 구분된다. Standard Edition이 Web Application 중심의 Spec을 지원하는 반면, Enterprise Edition은 JTA, JMS, EJB등 J2EE Spec을 지원하며 Session Clustering을 제공한다. 각 Edition별 제공되는 기능 또는 스펙은 아래와 같다.\nTable 2. Edition별 제공 기능과 스펙 기능/Spec (LENA-Manager 기준) Standard Enterprise Server\nWeb Server\n●\n●\nWAS (SE)\n●\n●\nWAS (EE)\n-\n●\nSession Server\n-\n●\nResource\nDatabase\n●\n●\nDataSource (일반)\n●\n●\nDataSource (XA)\n-\n●\nJTA\n-\n●\nJMS\n-\n●\nApplication (WAR)\n●\n●\nApplication (EJB, EAR)\n-\n●\nCluster\n-\n●\nTopology\n●\n●\nSecurity\n●\n●\nDiagnostics\nMonitoring\n●\n●\n진단/대응\n-\n●\nPatch\n●\n●\n(범례 : ● 제공됨, - 제공되지 않음)\n2. Log In/Out Manager에 로그인과 로그아웃하는 기능을 제공한다.\n2.1. Log In Figure 2. Manager 접속화면 로그인 페이지 하단 좌측에는 설치된 버전이, 우측에는 기술지원 연락처가 기술되어 있다.\n로그인 시도시, 7번 이상의 비밀번호 오류가 발생하는 경우 해당 계정으로 로그인을 할 수 없다. 이런 경우 console을 통해 패스워드를 초기화 해야한다. (자세한 내용은 Appendix에서 'Manager 의 admin 패스워드 초기화' 항목을 참고한다.)\n2.2. Log Out Manager 상단 우측의 문 아이콘 을 이용하여 로그아웃을 할 수 있다.\n2.3. Theme 변경 Manager 상단 우측의 수레바퀴 아이콘 메뉴의 Dark Theme 메뉴를 통해 테마를 설정 할 수 있다. 라이트 모드와 다크 모드 두 가지 중에 선택이 가능하다.\n3. Dashboard Manager에서 관리되는 시스템 별 구성 정보, 자원 모니터링, 이벤트, 라이센스 등의 정보를 요약하여 제공한다.\nFigure 3. Dashboard 화면 좌측의 시스템 목록에는 로그인 한 사용자에게 권한이 있는 시스템 목록이 제공된다. All은 권한이 있는 모든 시스템의 정보를 통합하여 보여준다.\nTable 3. Dashboard 항목 항목 설명 비고 INVENTORY\nNode\nSystem 에 포함된 Node의 수\n범례: Node의 타입 별 갯수\nWeb type : Web Server를 설치 할 수 있는 노드 수\nWAS type : WAS, Session Server를 설치 할 수 있는 노드 수\nServer\nSystem에 포함된 Server 타입 별 갯수\nNode Status\nSystem에 포함된 Node의 자원(CPU, Memory, DISK) 사용률 상태\n범례\nHigh / Middle / Low\nNot working : 정지 상태의 Node(Agent) 갯수\nServer Status\nSystem에 포함된 Server의 자원 사용률 상태\nWeb : CPU, Memory, Thread 체크\nWAS : Heap Memory, Thread Pool 체크\nSession : Heap Memory 체크\n범례\nHigh / Middle / Low\nNot working : 정지 또는 Hang 상태인 서버의 갯수\nSERVER CLUSTER\nServer Cluster\nserver cluster 수\nMember\nserver cluster에 속해 있는 타입별 서버 총 수\nCHECK\nModified Server\nSystem에 포함된 Server중 재기동이 필요한 서버 존재여부\nOut of Cluster Sync\nsync가 필요한 Server Cluster 존재여부\nDiagnostic Report\n진단 프로세스 수행 후 발행된 레포트 갯수\nEVENT\nError\nSystem에 포함된 Server에서 발생된 Error 갯수\nStuck Thread\nSystem에 포함된 Server에서 발생된 Stuck Thread 갯수\nOOM\nSystem에 포함된 Server에서 발생된 Out Of Memory 갯수\nFull GC\nSystem에 포함된 Server에서 발생된 Full GC 갯수\nRESOURCE\nDB Resource\nRESOURCE메뉴에서 등록되어 관리되는 Database와 Datasource 수\nDatasource의 범례\nUsed : WAS에서 사용 중인 Datasource 수\nNot Used : WAS에서 미사용 중인 Datasource 수\nLICENSE\nLicense Status\n노드들의 라이선스 상태 (Trial 라이선스의 유효일 수 또는 상용라이선스의 유효일 수(종료일자기준 15일 전 부터) 표시)\n4. Server Node 및 WAS, Web Server, Session Server를 관리하기 위한 화면을 제공한다.\n특정 System 내의 Node 및 각 Server별 개수를 확인하고, 실시간으로 Node 및 Server 상태를 통합적으로 관리 할 수 있다.\n4.1. System System은 다수의 Server를 가지는 논리적인 그룹이다. \"DefaultSystem\"을 기본적으로 제공하며 사용자는 System을 생성, 수정, 삭제 할 수 있다.\n4.1.1. 목록 System 목록은 화면 좌측에 트리 형태로 제공된다.\nFigure 4. System List 4.1.2. 등록 등록(+) 버튼 을 클릭하여 목록에 \"Create System\" 을 생성한다.\n생성할 시스템 명을 입력한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n현재 로그인한 사용자의 권한이 해당 System에 매핑된다. 즉, 로그인한 사용자와 동일한 권한을 가진 사용자에게만 해당 System이 조회된다. (Node, Server, Resource 동일하게 적용됨)\n4.1.3. 수정 수정할 System을 선택한다.\n수정(연필) 버튼 을 클릭하여 선택한 System의 이름을 변경한 후 엔터키를 입력한다.\nOK 버튼 을 클릭하여 저장한다.\n4.1.4. 삭제 삭제할 System을 선택한다.\n삭제(-) 버튼 을 클릭한다.\nOK 버튼 을 클릭하여 저장한다.\n하위에 Node가 존재하는 System은 삭제할 수 없다. 즉, 빈 System만 삭제 가능하다.\n4.2. Node Node는 다수의 WAS, Web Server, Session Server를 가지는 물리적인 Server이다.\n4.2.1. 목록 Node List를 통하여 각 Node를 관리할 수 있다.\nFigure 5. Node List Node의 속성은 아래와 같다.\nTable 4. Node 속성 항목(*는 필수값) 설명 비고 Status\nNode의 현재상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nName(*)\nNode의 이름\nType(*)\nNode의 Type\n다음과 같은 타입을 제공함\nAll: 모든 종류의 Server 설치가능\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nEngine No.\nNode의 엔진 넘버\nEngine No.는 LENA의 엔진 넘버를 의미하며 WAS의 Java Spec버전 별로 다르다.\nEN7: Java EE 6 / Servlet 3.0 지원\nEN8: Java EE 7 / Servlet 3.1 지원\nEN9: Java EE 8 / Servlet 4.0 지원\nEN10: Jakarta EE 10 / Servlet 6.0 지원\nAddress(*)\nNode의 IP주소\nPort(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nManager Address(*)\nManager IP 주소\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 Node정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Node정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 JAVA Home 설정과 Start/Stop을 수행할 수 있는 메뉴 제공\n4.2.2. Install Install 버튼 을 클릭하여 Node정보 등록을 준비한다.\nNode의 속성 값을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nTable 5. Install 시 설정하는 속성 항목(*는 필수값) 설명 비고 Node Type\nNode의 Type\n다음과 같은 타입을 제공함\nApplication: WAS와 Session Server 설치가능\nWeb: WEB Server 설치가능\nNode Name(*)\nNode의 이름\nNode Address(*)\nNode의 IP주소\nNode Port(*)\nNode Agent의 Port번호\nDefault : 16800(Node Type이 All 또는 Application인 경우), 16900(Node Type이 Web인 경우)\nUser(*)\nNode 실행 사용자 계정\nNode Type이 Application인 경우, root 계정으로 실행 할 수 없음. Node Type이 Web인 경우 Web Server의 Port를 1024이하를 사용해야하는 경우에만 root 사용.\nPassword(*)\nNode 실행 사용자 계정 비밀번호\nSSH Port\n해당 Server에 접속할 SSH 포트\nLENA Home\nNode Agent가 설치 될 위치\nJAVA Installation\nJava 설치 여부\nJAVA Home\n설치된 JAVA 경로\nInstall 기능은 Linux 환경에서만 지원한다.\n4.2.3. Register Register 버튼 을 클릭하여 Node정보를 등록 가능한 상태로 변경한다.\nNode의 Name, Type, Address, Port, Manager Address(기본값이 제공됨) 속성을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nManager IP는 Node의 host IP로 자동 입력된다.\n네트워크 구성에 따라 자동 입력된 IP가 실제 네트워크 IP와 다른 경우가 발생할 수 있다.\n이때는 Manager IP를 수정하여 입력해야 한다.\n4.2.4. 수정 수정(연필) 버튼 을 클릭하여 Node정보를 수정 가능한 상태로 변경한다.\nNode의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n포트 정책이나 방화벽 정책 변경 등에 의해 Node의 Address나 Port를 변경해야 하는 경우, agent.conf의 설정정보를 수정 후 Node Agent를 재기동한다.\n이 때 변경된 정보를 Manager에서도 알 수 있도록 Node의 Address와 Port정보를 수정하여 입력한다.\n수정된 정보를 저장할 때 'Occured Read Timeout' 메세지가 발생하면 아래의 경우를 확인한다.\nNode Agent가 아닌 다른 곳에서 포트를 사용하는 경우\nNode Agent가 Hang이 걸린 경우\nNetwork 문제가 있는 경우\n4.2.5. 삭제 휴지통 버튼 을 클릭하여 Node정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nNode 하위에 Server가 등록되어 있는 경우 해당 Node를 삭제할 수 없다.\nUninstall은 Linux 환경에서만 지원되고, 삭제할 노드를 한 개만 선택한 경우 가능하다.\n4.2.6. Start 정지 상태인 노드를 기동 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Start 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Start 버튼 을 누른다.\n4.2.7. Stop 기동 상태인 노드를 정지 시킬 수 있다.\nNode목록에서 해당 Node의 맨 우측 컬럼에 있는 \u0026#8230;\u0026#8203; 버튼 을 선택시 제공되는 Stop 메뉴를 선택하면 팝업창이 나타난다.\nUser, Password, SSH Port번호를 입력 후 Stop 버튼 을 누른다.\n4.2.8. Change Java Home Node와 Node에 설치된 Server들의 JAVA Home 경로를 수정할 수 있다.\nJAVA Home Path를 수정한다.\nNode Java Home Path : Node Java Home Path를 편집한다.\nServer Java Home Path : 선택한 서버들의 JAVA Home 경로를 편집한다. (Web Node에서는 지원하지 않음)\nSave 버튼 을 누른다.\n4.3. WAS WAS를 관리하기 위한 화면을 제공한다. Node에 설치한 Server의 등록, 수정, 삭제를 수행하며, 그 외 Server의 설치, 제거 및 복제를 할 수 있다.\n4.3.1. 목록 WAS List를 통하여 각 WAS를 관리할 수 있다.\nFigure 6. Web Application Server List WAS의 속성은 아래와 같다.\nTable 6. WAS 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nType\nServer의 유형\n다음과 같은 타입을 제공함\nStandard\nEnterprise/EE\nEnterprise/SE\nHTTP Port\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 수정(연필) 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.3.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer Type, Server ID 등을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.3.3. Clone Clone 버튼 을 클릭하여 Server의 복제를 준비한다.\nNode List에서 복제할 Server를 선택한다. 이때 Clone Server ID, Clone Service Port가 자동으로 입력된다.\nClone Server ID와 Service Port를 원하는 값으로 수정한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버에 배포되어 있는 어플리케이션 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, register 기능을 이용하여 기존에 설치된 Server 정보를 추가로 확인해야 한다.\nWAS서버의 원격 복제시에는 Node의 Engine No.가 같아야 WAS서버를 Clone할 수 있다.\n4.3.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\nSystem \u0026gt; Application Server List Tab에서도 설치가 가능하다. 단, Node List에서 설치할 Node를 선택해야 한다.\n4.3.5. 수정 수정(연필) 버튼 을 클릭하여 Server정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.3.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nWAS를 삭제할 경우 서비스 제어(ADMIN \u0026gt; Security \u0026gt; Rule Applying 메뉴)의 적용 대상 목록에서 해당 Server는 삭제된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.3.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 WAS 가 서비스중인 모든 작업이 끝난 후 종료된다.\nGeneral 탭의 Shutdown Timeout 시간 이후에도 작업이 끝나지 않은경우 강제로 중지된다.\nServer를 시작하면 로그파일을 볼 수 있는 팝업이 실행된다. 팝업을 통해 Server의 정상 기동 여부를 확인할 수 있다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\n팝업 화면에서 Start / Stop 명령 이후에는 팝업을 닫더라도 요청한 명령이 중지되지 않는다. Forced Stop/Restart Server 목록 가장 우측의 추가 기능(\u0026#8230;\u0026#8203;) 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n강제 중지, 재시작을 수행하면 현재 서비스중인 모든 작업이 즉시 중지되므로 주의해야한다. 4.3.8. 설정 정보 관리 Server의 설정 정보를 변경하는 기능을 제공한다. Server 목록에서 변경하려는 Server 명을 선택한다. Standard Edition의 경우 General, Session, Logging, Web Config, Environment, Properties, Config Tree, History탭을 제공하며, 설정 정보 수정 시 백업을 하여 복원이 가능하다. Enterprise Edition는 Container 탭을 추가적으로 제공한다.\nServer 설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nGeneral Server의 일반적인 설정 정보를 관리한다. Port정보, Connector정보, Stuck Thread 관련 설정을 수정 및 저장 할 수 있다.\n설정 정보의 상세내용은 아래와 같다.\nServer Info\nServer의 주요 설정 값을 나타낸다.\nTable 7. 주요 설정 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP 포트번호\nAJP Port\nAJP 포트번호\nHTTP 포트번호 - 71 (자동계산)\nHTTPS Port\nHTTPS 포트번호\nHTTP 포트번호 + 363 (자동계산)\nShutdown Port\nShutdown 명령 문자열을 받기 위한 포트\nHTTP 포트번호 - 75 (자동계산)\nInstall Path\nServer 설치 경로\nJava Home Path\nJava Home 경로\nMinimum Heap Size(m)(*)\nWAS에 설정할 최소 Heap 사이즈(Megabyte)\nDefault : 512\nMaximum Heap Size(m)(*)\nWAS에 설정할 최대 Heap 사이즈(Megabyte)\nDefault : 512\nApplication Base\nApplication의 Base 디렉토리\nServer가 stop 상태이거나, appBase에 deploy이된 Application이 없을 경우에만 수정이 가능하다.\nJvmRoute\nServer의 Unique한 Identifier\nSystem Property에 설정되어 있는 값을 우선함.\n없을 경우 server.xml의 값을 사용\n(Hostname + Port의 조합으로 생성됨)\nAuto Deploy\n어플리케이션 변경 시 자동 Deploy 여부\nDefault : false\nApplication별 DocBase에 war 파일을 재 업로드 할 경우 감지됨\nDeploy On Startup\nWAS 기동 시 Application Deploy 여부\nDefault : true\nShutdown Timeout\nServer 종료 시 실행중인 작업이 존재할 경우 대기하는 시간(초)\nDefault : 86400\nConnector\nServer에서 사용하는 Connector 설정 값을 나타낸다.\nTable 8. 주요 설정 항목(*는 필수값) 설명 기본값 Protocol Type\n프로토콜 유형\nHTTP/1.1, AJP/1.3\nport\n포트번호\nredirect Port\nRedirect 포트\nHTTPS Port와 동일\nconnection Timeout\n커넥션 타임아웃(ms)\nHTTP : 20000,\nAJP : 60000\nURIEncoding\nURI byte를 변환하기 위한 Character Encoding\nUTF-8\nserver\nHttp Response에 대한 Server Header를 재정의하여 Server 정보 노출을 방지\nServer\nmaxThreads\nConnector가 생성할 수 있는 최대 Thread 수\n256\nminSpareThreads\nConnector생성시 확보하는 최소 Thread 수\n10\nmaxQueueSize\nRequest Queue 의 최대길이\nInteger.MAX_VALUE\npacketSize\nAJP packet 크기\n8192\nenableLookups\nDNS LookUp 사용여부. 사용하지 않을 시 성능에 유리하다\nfalse\ncompression\nHTTP message Body 압축여부(off, on:Text만, force:전체)\noff\ntcpNoDelay\nTCP 패킷을 Delay 없이 전송\ntrue\nStuck Thread\nStuck Thread의 설정값을 나타낸다.\nTable 9. 주요 설정 항목(*는 필수값) 설명 비고 Threshold(s)\nStuck Thread를 식별하기 위한 최소 시간(s)\nInterrupt Thread Threshold\nStuck Thread를 중단하기 위한 최소 시간(s)\nStuck Thread 판별 이후 n초 뒤 종료시키려면 \"Threshold+n\"값 입력\nService Point\nEndpoint Address의 설정값을 나타낸다.\nTable 10. 주요 설정 항목(*는 필수값) 설명 비고 Endpoint Address\nWAS의 대표 서비스 도메인 주소\nSession Session Cluster 기능을 사용할지 여부를 설정한다.\nEmbedded Session Server 모드\nWAS에 Session Server 모듈을 Embedded하여 동작하는 경우 선택한다. Mode 항목에서 Embedded Session Server Mode를 선택하게 되면, Server 관리 화면에서 Session Server 리스트에 Embedded Type으로 표시된다.\nTable 11. 주요 설정 항목(*는 필수값) 설명 기본값 Embedded Host\n해당 WAS를 의미\n자기 자신의 IP (변경불가)\nEmbedded Port\n해당 WAS에서 사용할 Embedded Session Server 용 port 정보\nSecondary Server Host\nSlave Server 호스트 IP\nSecondary Server Port\nSlave Server Port\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nClient 모드\n별도의 Session Server를 연결하여 동작하는 방식이다. Mode 항목에서 Standalone Mode를 선택한다.\nClient 모드에서 Primary Server와 Secondary Server 설정 시 사전에 Session Server가 구성되어 있어야한다.\nTable 12. 주요 설정 항목(*는 필수값) 설명 기본값 Primary Server Host\nPrimary Session Server 호스트\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nPrimary Server Port\nPrimary Session Server 포트\nSecondary Server Host\nSecondary Session Server 호스트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nEnter manually 선택시 시스템 외부의 세션서버 설정이 가능\nSecondary Server Port\nSecondary Session Server 포트\nPrimaryServer와 연결이 끊어진 경우에만 사용\nExternal Stored Session\nSession객체를 로컬 WAS에 저장하지 않고 Session Server에 저장\nfalse\nShare session in applications\nMulti Application간 Session객체를 공유\nStandalone Mode에서만 설정가능\nfalse\nMulti Login Control\n이중 로그인 방지여부\nfalse (true인 경우 아래 3가지 항목이 제공)\nLogout Page (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종료 후 제공할 화면\nLogout Message (Multi Login)\n이중 로그인시 먼저 로그인한 사용자의 세션 종류 후 보여줄 메세지\nExcepted Page for Multi Check\n이중 로그인 체크 예외 URL\nSession 기능은 Enterprise Edition에서 제공되는 기능이다.\nLogging Server의 Logging 설정 정보를 관리한다.\nLog Home\nTable 13. 주요 설정 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nAccess Log\nRequest에 대한 Access 로그의 설정값을 나타낸다.\nTable 14. 주요 설정 항목(*는 필수값) 설명 비고 Directory\nLog 디렉토리\n절대경로 또는 $CATALINA_BASE의 상대경로로 지정할 수 있음\nPattern\nLogging field의 Layout\nPrefix\nLog 파일의 prefix\nSuffix\nLog 파일의 suffix\nHandler\nHandler 설정 정보의 상세내용은 아래와 같다.\nTable 15. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nHandler의 클래스명\nType\nHandler의 유형\nConsoleHandler와 FileHandler 선택 가능\nLevel\nHandler의 로그레벨\nFilter\njava.util.logging.Filter의 구현체\nFormatter\njava.util.logging.Formatter의 구현체\nDefault : java.util.logging.SimpleFormatter\nEncoding\nHandler의 Character Encoding\nRoot\nRoot Logger여부\nLogger\nLogger 설정 정보의 상세 내용은 아래와 같다.\nTable 16. 주요 설정 항목(*는 필수값) 설명 비고 Name(*)\nLogger 이름 지정\nLevel(*)\nLogger의 로그레벨\nHandler(*)\nLogger가 어떠한 Handler를 사용할지 선택\nConsoleHandler가 기본 선택\nServer의 로그설정 파일은 $CATALINA_HOME($CATALINA_BASE)/conf/logging.properties 이다.\nWeb Config Global web.xml의 설정을 관리하는 화면을 제공한다. 필요 항목을 수정한 후 Save 버튼 을 클릭하여 저장한다.\n설정 정보의 상세내용은 아래와 같다.\nDefault Servlet\nTable 17. 주요 설정 항목(*는 필수값) 설명 기본값 Listings\nWelcome파일이 없을 때, Directory Listing을 허용할지 여부\nfalse\nInput\nInput buffer size in bytes\n2048\nOutput\nOutput buffer size in bytes\n2048\nReadonly\nPUT, DELETE 등의 HTTP메소드를 허용하지 않음\ntrue\nFileEncoding\nFile Encoding\nplatform default\nShowServerInfo\nDirectory Listing이 허용되어 있을 때 Server 정보를 표시할지 여부\ntrue\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n1 (음수: disable / 0: 가장 마지막)\nJSP Engine\nTable 18. 주요 설정 항목(*는 필수값) 설명 기본값 CheckInterval\nDevelopment가 false일 때 jsp의 변경을 검사하여 재컴파일할지 확인하는 주기(s)\n0 (0: 비활성화 / 양수: 해당 주기로 활성화)\nDevelopment\nDevelopment 여부. Development가 true인 경우에는 modificationTestInterval 값을 주기로 하여 변경을 검사함\ntrue (0: 매 access마다 점검)\nGenStringAsCharArray\nString생성을 Char Array로 할지 여부\nfalse\nModificationTestInterval\nDevelopment가 true일 경우에 동작하는 jsp 변경 검사 주기\n4\nTrimSpaces\n응답에서 쓸데 없는 whitespace를 제거하여 응답바이트를 줄임\nfalse\nJavaEncoding\nJava소스를 generate할때의 Encoding\nUTF8\nLoadOnStartup\nWAS 기동 시 Servlet 로딩 순서 지정\n3\nJSP Page Encoding\nTable 19. 주요 설정 항목(*는 필수값) 설명 비고 URL Pattern\nPage Encoding을 적용할 JSP Page의 URL Pattern\nPage Encoding\n적용할 Page Encoding을 지정\nSession\nTable 20. 주요 설정 항목(*는 필수값) 설명 비고 SessionTimeout\n세션 타임아웃 시간(분)\nDefault : 30\nWelcome File List\nTable 21. 주요 설정 항목(*는 필수값) 설명 비고 File(*)\nDirectory index로 호출할 경우에 service할 파일을 순서대로 지정함\nEnvironment JVM 옵션, Start Shell의 설정과 System Properties(Enterprise Edition인 경우만 제공)를 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nJVM Setting ($CATALINA_HOME/bin/setenv.sh): Server 실행을 위한 JVM 옵션\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh): Server 시작을 위한 Shell Script\nJVM_ROUTE 값은 여기서 직접 수정하지 않고, General 탭의 Server Info 영역에 있는 JvmRoute 항목의 불러오기 버튼 을 사용하여 수정한다. 여기서 직접 수정할 경우 Manager DB의 정보가 Update되지 않아 DB값 불일치가 발생한다.\nSystem.properties($CATALINA_HOME/conf/system.properties) (이 항목은 Enterprise Edition에서만 확인할 수 있다)\nCatalina.properties ($CATALINA_HOME/conf/catalina.properties): Server의 Catalina 설정\n$CATALINA_HOME은 WAS의 기본 설치 디렉토리이다. $CATALINA_BASE는 본래 하나의 WAS에 복수개의 Instance를 사용하고자 할 때 디렉토리를 생성하여 Instance별로 지정하여 사용되지만 LENA에서는 WAS와 Instance가 1:1 관계라 $CATALINA_HOME이 곧 $CATALINA_BASE로 사용된다.\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Properties Server의 System Properties 와 System Environments를 확인하는 화면을 제공한다. System Properties 중 Key Properties 를 별도로 제공하여 Server경로, JAVA버전 등의 주요 정보를 확인할 수 있다. Server가 기동된 상태에서만 정보를 확인할 수 있다.\nContainer Enterprise Edition의 경우 EJB Container의 설정 변경 기능을 제공한다. container설정 없이 Server를 기동하면 EJB에서 필요한 container가 default 설정으로 생성된다. default설정 외에 변경이 필요한 설정이 있을 경우에는 container를 생성하여 설정을 변경해야 한다.\n기본 설정\nTable 22. 기본 설정 항목(*는 필수값) 설명 비고 ID(*)\nContainer의 식별자\nType(*)\nContainer의 유형\nCMP_ENTITY 설정\nTable 23. CMP_ENTITY 설정 항목(*는 필수값) 설명 비고 CmpEngineFactory\nFactory 클래스 명\nDefault : org.apache.openejb.core.cmp.jpa.JpaCmpEngineFactory\nBMP_ENTITY 설정\nTable 24. BMP_ENTITY 설정 항목(*는 필수값) 설명 비고 PoolSize\nBean pool의 크기 지정\nDefault : 10\nSTATELESS 설정\nTable 25. STATELESS 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nMaxSize\nBean pool의 최대 개수\nDefault : 10\nMinSize\nBean pool의 최소 개수\nDefault : 0\nStrictPooling\nPool이 최대치에 도달했을 때 동작방식 지정. StrictPooling은 pool size를 늘리지 않고 기다림\nDefault : true\nMaxAge\nPool에서 제거되기까지의 최대 시간(h)\nDefault : 0\nReplaceAged\nMaxAge에 도달했을 때 Replace할지 여부\nDefault : true\nReplaceFlushed\npool에서 Flush될 때 Replace할지 여부\nDefault : false\nMaxAgeOffset\nMaxAge 사용량\nDefault : -1\nIdleTimeout\n인스턴스가 pool에서 idle상태로 있을 수 있는 최대 시간(m)\nDefault : 0\nGarbageCollection\n풀을 줄이기 위한 메커니즘으로 garbage collection을 허용할지 여부\nDefault : false\nSweepInterval\n컨테이너가 풀을 정리하고 만료된 instance들을 제거하는 주기(m)\nDefault : 5\nCallbackThreads\nThread Pool 사이즈. 이 값은 컨테이너에 배포되어 있는 모든 Bean들에게 공유됨\nDefault : 5\nCloseTimeout\n풀이 닫히고 PostConstruct 메소드가 호출될때까지 기다리는 최대 시간(m)\nDefault : 5\nSINGLETON 설정\nTable 26. SINGLETON 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nSTATEFUL 설정\nTable 27. STATEFUL 설정 항목(*는 필수값) 설명 비고 AccessTimeOut\n호출간 대기시간 (Specifies the time to wait between invocations)\nDefault : 0 (means no timeout)\nCache\nStateful 빈 인스턴스를 관리할 cache\nDefault : org.apache.openejb.core.stateful.SimpleCache\nPassivator\nPassivator클래스 지정\nDefault : org.apache.openejb.core.stateful.SimplePassivator\nTimeOut\n호출간 대기시간\n(Specifies the time to wait between invocations)\nDefault : 20\nFrequency\n빈 캐쉬가 idle상태인 빈들을 확인하는 주기(s)\nDefault : 60\nCapacity\nStateful SessionBean 컨테이너에 대한 bean pool의 크기\nDefault : 1000\nBulkPassivate\n한번에 passivate할 instance의 개수\nDefault : 100\nMESSAGE 설정\nTable 28. MESSAGE 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\nResource Adapter 지정\nDefault : Default JMS Resource Adapter\nMessageListenerInterface\nMessageListener 지정\nDefault : Javax.jms.MessageListener\nActivationSpecClass\nActivation Spec Class 지정\nDefault : org.apache.activemq.ra.ActiveMQActivationSpec\nInstanceLimit\nInstance 최대 개수\nDefault : 10\nAudit WAS에서 발생한 이벤트로 수집/관리하는 기능이다.\n수집된 이벤트 정보는 이벤트 대시보드에서 확인할 수 있다. 이벤트 대시보드 관련 내용은 Event Dashboard를 참고한다.\n총 네 가지 타입의 Detection Rule을 설정해 이벤트를 수집할 수 있다.\nTable 29. OOM Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : true\nTable 30. Stuck Thread Detection Rule 항목 설명 비고 Enable\nStuck Thread 발생을 감지한다\nDefault : false\nLenaStuckThreadDetectionValve 는 server.xml 내에 기본적으로 설정되어 있으며, LenaStuckThreadDetectionValve 관련 설정은 SERVER \u0026gt; Server 선택 \u0026gt; General 탭 화면의 Stuck Thread 항목에서 할 수 있다.\n사용자 요청의 처리 시간이 Threshold 설정 값을 초과한 경우 이벤트가 발생되어 Manager로 전송된다.\nTable 31. Full GC Detection Rule 항목 설명 비고 Enable\nFull GC 발생을 감지한다\nDefault : false\nTable 32. Exception Detection Rule 항목 설명 비고 Enable\nOut Of Memory Error 발생을 감지한다\nDefault : false\nException Class Pattern\n감지할 Exception 패턴을 지정한다. 해당 패턴의 Exception을 상속한 Exception도 검출한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nExclude Exception Class Pattern\n감지에서 제외할 Exception 패턴을 지정한다. 최대 10개까지 지정 가능하며, * 패턴은 사용할 수 없다. ex) abc.dbc.ExampleException\nEnable Full Stack\nException이 여러 Cause를 가지고 있을 때, 요약 정보가 아닌 내용 전체를 표시할 지 여부\nDefault : true\nFull Stack Max Line\nException Stack Trace에서 표현할 Line 수. 각 Cause by 별로 설정한 수 만큼의 Line이 수집된다. 너무 큰 수로 지정하면 수집 및 저장관리에 부하가 발생할 수 있다\nDefault : 3\n검출이 가능한 Exception 클래스는 Java 자체적인 라이브러리에 포함된 Exception이 아닌, Application이나 Framework의 Exception이다. 너무 많은 량의 이벤트가 발생하지 않도록 Exception 패턴을 정의해야 한다.\nAudit 기능은 Enterprise Edition에서 제공되는 기능이다.\nConfig Tree WAS의 설치경로 하위의 /conf 폴더 하위 설정 파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 WAS 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 유형별로 History를 관리한다. 수정 일시와 설정 파일 Type을 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정 파일로 복원할 수 있다.\n4.3.9. Resource 관리 Server메뉴 하위의 Resources메뉴를 선택하면 해당 Server에 관련된 Resource정보를 관리할 수 있는 화면이 표시된다. 기본적으로 DataSource, JMS, JTA Resource에 대한 정보를 관리할 수 있다. (JMS, JTA Resource는 Enterprise Server일 경우에만 지원)\nWAS에 Resource 를 설정하는 방법은 다음과 같다.\n추가 : New 버튼 을 클릭하여 Resource를 추가한다. (Datasource, JMS 가능)\n삭제 : Delete 버튼 을 클릭하여 Resource를 삭제한다. (Datasource, JMS 가능)\n가져오기 : Import 버튼 을 클릭하여 RESOURCE 메뉴에서 등록된 Resource를 가져온다. (Datasource, JMS, JTA 가능)\nDataSource WAS의 Application이 사용할 수 있는 JNDI DataSource를 관리하는 기능을 제공한다. JNDI를 설정하여 Server에서 실행되는 모든 Application이 공유하여 사용할 수 있으며, 각각의 Application에 JNDI 설정을 하여 사용할 수도 있다. Enterprise Edition의 경우 JTA를 지원하여 속성이 추가된다.\nServer DataSource 설정 Server에서 실행되는 모든 Application이 공유하는 DataSource를 설정한다. Server에서 사용 가능한 DataSource의 목록을 조회할 수 있으며, DataSource의 등록, 수정, 삭제가 가능하다.\nDataSource의 상태를 체크하기 위한 접속테스트도 수행할 수 있다.\nDataSource의 속성은 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭하면 표시된다.\nTable 33. DataSource 속성 항목(*는 필수값) 설명 비고 Scope(*)\nDataSource를 사용할 범위\n다음과 같은 스코프를 제공함\nContext: 모든 Application이 공유하도록 Datasource 정보가 공통 context 영역에 설정된다.\nGlobal: GlobalNamingResource영역에 Datasource 정보가 설정되고, 어플리케이션 개별적으로 DataSource Link List에서 설정하여 사용한다.\nGlobal+ResourceLink: GlobalNamingResource 영역에 Datasource정보가 설정되고 Datasource 링크는 공통 context영역에 설정된다.\nJNDI Name(*)\nGlobal DataSource의 JNDI명\nDatabases\n공통으로 사용할 데이터소스의 정보를 설정\nResource Name\nDatabases의 이름\nAddress(Host/Port)\n공통으로 사용할 아이피와 포트\nDriverClassName\nJDBC Driver 클래스명\nURL(*)\nJDBC URL\nUsername(*)\n접속 사용자명\nPassword(*)\n접속 패스워드\nencryption을 체크할 경우 패스워드를 암호화하여 저장한다. 보안을 위해 암호화하는 것을 권장한다.\nEncryption Level\n인증 정보에 대한 암호화 범위 지정\nDefault : Password only\nDefaultAutoCommit\nPool에서 생성된 Connection들의 자동 Commit 상태\nDefault : JDBC driver의 기본값\nAutoReconnection\nTestOnBorrow와 TestWhileIdle의 값을 설정할 때 사용.\ntrue/false에 따라 두 값도 동일하게 설정됨.\nUser Definded 선택시 두 값을 사용자가 직접 설정 가능\nInitialSize\nPool의 초기 Connection 수\nDefault : 10\nMaxActive\nPool의 최대 Connection 수\nDefault : 100\nMinIdle\n최소 Idle Connection 수\nDefault : 10\nMaxIdle\n최대 Idle Connection 수\nDefault : 100\nMaxWait\nPool에 가용한 Connection이 없을 경우 대기하는 최대시간(ms)\nDefault : 30000\nMinEvictableIdleTimeMillis\n해당 시간 이상 idle 상태로 Pool에 존재한 Connection은 제거 대상이 됨 (ms)\nDefault : 60000 (60s)\n(XaDataSource = true로 설정하였을 시 1800000 (30m))\nValidationQuery\nConnection 유효성 검증 쿼리\nDefault : null\nValidationInterval\nConnection 유효성 검증 주기(ms)\nDefault : 3000\nTestOnBorrow\nPool에서 커넥션을 꺼내기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestOnReturn\nPool에 커넥션을 반납하기 전에 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nTestWhileIdle\nIdle 상태의 커넥션에 대해 validationQuery에 설정된 쿼리문을 수행하여 커넥션의 유효여부 확인\nDefault : default\nLogValidationErrors\nvalidation query 수행 후 오류 발생 시 오류 출력 여부\nDefault : default(false)\nTimeBetweenEvictionRunsMillis\n사용되지 않은 Connection을 추출하는 Thread 실행주기(ms)\nDefault : 5000\nRemoveAbandoned\nConnection 유실 검출 여부\nDefault : default\nRemoveAbandonedTimeout\n유실Connection을 판단하기 위한 Timeout 값(s)\nDefault : 60\nLogAbandoned\nConnection 유실 처리시 로깅여부\nDefault : default\nAbandonWhenPercentageFull\nConnection pool이 설정한 점유율을 초과해야지만 abandon을 수행함\nDefault : 0\nJdbcInterceptors\n유연하고 플러그 가능한 인터셉터를 사용하여 사용자 정의 기능을 추가할 수 있음\nQueryTimeout 설정시 QueryTimeoutInterceptor(queryTimeout=시간(초)) 입력\nDefault 값이 true 또는 false가 아닌 default 인 경우, JDBC Driver의 기본값이 사용된다.\nEnterprise Edition의 추가 속성은 아래와 같다.\nTable 34. Enterprise Edition 추가 속성 항목(*는 필수값) 설명 비고 JtaManaged\nJTA 사용여부\nDefault : false\nXaDataSource\nXA 사용여부\nDefault : false\nXADataSource설정은 JTA가 설정되어야만 사용할 수 있으며, XADataSource를 설정하게 되면 validationInterval, logValidationErrors, abandonWhenPercentageFull 속성을 사용할 수 없다.\nDataSource를 Context 범위로 설정하면 모든 Application이 공유한다.\nEnterpriseServer에서 DataSource를 Context 범위로도 설정할 수 있으나, EJB에서는 Lookup이 불가능하다. EnterpriseServer에서는 Global + ResourceLink 범위로 설정하는 것을 권장한다.\nPassword 암호화 알고리즘은 AES를 사용하고 있다. 암호화를 위한 키 값은 Manager LENA Home 하위 /conf/repository/manager.conf 파일과 각 WAS Home 하위 /conf/advertiser.conf 내에서 “datasource.key=키값”으로 관리한다.\nDatabases\nURL 설정 시 공통을 사용할 정보를 Databases를 만들어 등록한다.\n추가(+) 버튼 을 클릭하면 팝업창이 생성된다.\nDatabases를 구분할 Resource Name을 입력한다.\n자동으로 채워진 DriverClassName 을 확인한다. 변경할 필요가 있을 경우 변경한다.\nAddress(아이피 및 포트)를 입력한 후 저장한다.\nJDBC driver Upload\nManager를 통해 JDBC Driver library를 upload 할 수 있다.\nDataSource 상세 정보 하위의 Upload 버튼 을 클릭하면 아래와 같이 upload를 위한 화면이 출력된다.\nSearch버튼을 통해 upload 할 파일을 선택한다. Upload 할 파일은 JDBC Driver library 이므로 JAR 형식의 파일만 선택할 수 있다.\nUpload 버튼을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nJDBC Driver 파일이 upload되는 경로는 ${SERVER_HOME}/lib/datasource이다.\nConnection Test\nDataSource 상세 화면에서 Connection Test 버튼 을 클릭하면 설정된 DataSource에 대한 연결 테스트를 수행할 수 있다. 정상적으로 연결이 된 경우 \"JDBC Connection is successfully tested\" 라는 문구가 출력된다.\n만약 \"Driver Class[클래스명] does not exist.\" 라는 오류 문구가 출력될 경우, 해당 driver class가 정상적으로 업로드 되어 있으며 이에 대한 classpath가 설정되어 있는지 확인한다.\nclasspath는 WAS 상세 \u0026gt; Environment \u0026gt; JVM Settings 내에 추가한다.\n설정 예 CLASSPATH=\u0026quot;$\\{CLASSPATH}:$\\{CATALINA_HOME}/lib/datasource/ojdbc6.jar\u0026quot; JMS Enterprise Edition의 경우 JMS관련 Resource를 정의할 수 있다. Active MQ Resource Adapter, JMS Connection Factory, Queue, Topic설정을 각각 추가, 수정, 삭제할 수 있다.\nTable 35. 주요 설정 항목(*는 필수값) 설명 비고 ID(*)\nResource의 식별자\nType(*)\nResource의 유형\n다음과 같은 타입을 제공함\nActiveMQResourceAdapter\nJMSConnectionFactory\nQueue\nTopic\nActive MQ Resource Adapter 설정\nTable 36. 주요 설정 항목(*는 필수값) 설명 비고 BrokerXmlConfig\nBroker 설정\nDefault : broker:(tcp://localhost:61616)?useJmx=false\nServerUrl\nBroker 주소\nDefault : vm://localhost?waitForStart=20000\u0026amp;async=true\nDataSource\nDatasource for persistence messages\nStartupTimeout\nStartup 최대 대기시간(s)\nDefault : 10\nJMS Connection Factory 설정\nTable 37. 주요 설정 항목(*는 필수값) 설명 비고 ResourceAdapter\n사용할 Resource Adapter 지정\nTransactionSupport\nGlobal Transaction 여부 지정\n다음과 같은 타입을 제공함\nXA\nLOCAL\nNONE\nPoolMaxSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최대 개수\nDefault : 10\nPoolMinSize\nActiveMQ broker에 연결되는 물리적인 커넥션의 최소 개수\nDefault : 0\nConnectionMaxWaitTimeout\n커넥션 최대 대기시간\nDefault : 5 Seconds\nConnectionMaxIdleTimeout\n반납되기전 최대 idle시간\nDefault : 15 Minutes\nQueue 설정\nTable 38. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nQueue의 이름 지정\nTable 39. 주요 설정 항목(*는 필수값) 설명 비고 Destination\nTopic의 이름 지정\nJMS 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\nJTA Enterprise Edition의 경우 Transaction Manager의 설정 변경 기능을 제공한다.\nTransaction Manager의 설정을 기본 설정으로 사용하려면 Managed Type을 Auto로 선택한다. (설치 시 default)\nTransaction Manager의 설정을 변경하고자 한다면 User Defined를 선택한다. (User Defined를 선택시 Recovery 옵션은 default로 \"No\"가 선택된다)\n주요 설정\nTable 40. 주요 설정 항목(*는 필수값) 설명 비고 Managed Type\nUser Defined Transaction Manager 여부 선택\nDefault : Auto\nID(*)\nTransaction Manager의 이름\nDefault Timeout\nTimeout 지정\nDefault : 10 minutes\nRecovery\nTransaction 오류 시 복원여부 설정\nTrue를 선택한 경우 Logging 설정이 열림\nTransaction Recovery Logging Option\nTable 41. Transaction 오류 시 복구를 위한 로깅 설정 항목(*는 필수값) 설명 비고 Directory\n로그파일을 생성할 디렉토리 위치\nDefault : txlog\nFile Name\n로그 파일 명\nDefault : howl\nFile Extension\n로그 파일의 확장자\nDefault : log\nMax Log Files\n생성되는 로그파일의 최대 개수\nDefault : 2\nMax Block Per File\n파일당 최대 블록 수\nDefault : -1\nBuffer Size\n버퍼사이즈(kb)\nDefault : 32\nMax Buffers\n버퍼의 최대값\nDefault : 0\nMin Buffers\n버퍼의 최소값\nDefault : 4\nAdler32 Checksum\nAdler32 Checksum, Checksum Enabled 설정이 모두 \"Yes\"인 경우 Adler32 알고리즘을 사용하여 checksum을 계산\nDefault : Yes\nChecksum Enabled\nBuffer의 Contents를 Disk에 기록 전 체크\nDefault : Yes\nThreads Waiting\n대기하는 스레드의 최대 갯수\nDefault : -1\nFlush SleepTime\nForceManager의 총 sleep 시간\nDefault : 50 Milliseconds\nJTA 기능은 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.3.10. Application 배포 목록 화면 상단의 SERVER 메뉴를 선택하여 Server 현황을 조회한다. 좌측 메뉴에서 배포할 Server의 Application을 선택한다. 배포가 완료된 Application의 목록을 조회하는 화면을 제공한다.\nApplication 목록의 항목은 아래와 같다.\nTable 42. Application List 항목 항목 설명 비고 Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nBase Name\nBase 명\nContext Path\nContext 경로\nDocBase\nApplication의 위치\nStatus\nApplication 상태\n아래와 같은 상태를 제공함\nStarted(v)\nStop(ㅁ)\nError(!)\nAction 버튼\n아래와 같은 기능을 제공함\nUndeploy(휴지통) 버튼\nApplication Start 버튼\nApplication Stop 버튼\nApplication Reload 버튼\nView 버튼\n아래와 같은 기능을 제공함\nweb.xml View(문서) 버튼\nDeploy Application 을 배포하기 위한 속성은 아래와 같다.\nTable 43. Application 배포 속성 항목(*는 필수값) 설명 비고 Application Type\n배포할 Application의 형태\nEnterprise WAS Type 인 경우만 다음과 같은 타입을 제공함\nEJB\nEAR\nWAR\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축을 풀지 않고 배포\nDefault : true\nDocBase(*)\nApplication의 위치\nUpload 선택(파일) 버튼 을 통해 파일을 업로드 할 수 있음\nApplication Upload 별도의 배포 시스템이 없는 경우 Manager를 통해 application을 upload 할 수 있다.\n서버를 선택한 후 Applications 를 선택하여 Application 화면으로 이동한다.\nApplications 화면 하단의 Application Deploy 영역에서, DocBase 항목 우측 끝에 있는 Upload 선택(파일) 버튼 을 클릭하면 파일시스템 화면이 출력된다.\nupload 할 target 디렉토리(Server 쪽 Host)를 선택한다.\nUpload 버튼 을 클릭하면 application 파일을 선택할 수 있는 팝업이 생성된다.\n배포할 application 파일을 선택하고 Upload 버튼 을 클릭하면 선택한 파일이 target 디렉토리로 upload 된다.\nImport Import 버튼 을 클릭하여, [Resource] 메뉴에서 등록한 Application 정보를 가져와 배포할 수 있다.\n설정 정보 관리 Application 목록조회 화면에서 Application Name을 선택하면 Application 설정 관리화면을 조회할 수 있다. Application Descriptor 와 DataSource에 대한 설정 및 관리 기능을 제공한다.\nApplication 설정 변경은 선택한 Server에서만 가능하다.\nApplication Settings Application Descriptor에 설정된 정보를 관리한다.\n뒤로가기(\u0026#8592;) 버튼 을 클릭하여 Application 목록화면으로 돌아갈 수 있다. Expand all 버튼 을 클릭하여 Context의 추가적인 속성을 설정할 수 있다.\nDocBase와 ContextPath는 수정할 수 없으며, 속성의 자세한 정보는 아래와 같다. 최초 화면에서 보이지 않는 속성은 Expand all 버튼 을 클릭해 확인할 수 있다.\nTable 44. Application Setting 항목(*는 필수값) 설명 비고 DocBase(*)\nApplication의 Document Base\nContext Path(*)\nContext 경로\nunpackWAR\nWAR파일을 전개하고 나서 실행할 것인지의 여부.\n값이 false인 경우, WAR 파일의 압축은 풀리지 않고, 웹 애플리케이션은 단지 압축된 채로 재배치\nDefault : true\nreloadable\nApplication 변경 시(Class File) 재 반영 여부\nprivileged\nContainer Servlet의 사용 여부\ncookies\nsession identifier 통신에 cookie 사용 여부\nuseHttpOnly\nclient side에서 스크립트를 활용하여 session ID로의 접근 차단 여부\nsessionCookieDomain\n설정했을 경우 웹 어플리케이션에서 설정된 모든 도메인을 덮어씀. 설정하지 않을 경우 웹 어플리케이션에 의해 구분된 domain이 사용됨\nsessionCookieName\n설정하면 해당 이름으로 모든 세션 쿠키가 생성됨\nDefault : JSESSIONID\nsessionCookiePath\n설정할 경우 웹 어플리케이션은 해당 경로를 사용\nuseNaming\nJ2EE 플랫폼을 위한 JNDI InitialContext를 사용하기 위해 설정\nDefault : true\nAdd Attribute 버튼 을 사용하여 속성 값을 추가할 수 있다.\nDataSource Link List Global DataSource를 Application에서 사용할 수 있도록 설정 기능을 제공한다.\nDataSource 링크 관리의 속성은 아래와 같다.\nTable 45. DataSource 링크 관리 속성 항목(*는 필수값) 설명 Name(*)\nApplication에서 사용할 JNDI 이름\nJNDI Name(*)\nGlobal DataSource의 JNDI이름\nUserName\nDataSource 접속 사용자 명\nURL\nJDBC URL\nDescription\nDataSource에 대한 설명\n+ 아이콘\nNew 버튼, 수정(연필) 버튼 을 클릭하여 선택된 DataSource정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 DataSource 정보가 삭제됨을 표시\nNew 버튼 을 클릭하면 신규 설정을 추가할 수 있고, Save 버튼 을 클릭하면 변경된 설정이 저장된다.\nWAS에 설정된 Datasource 중 Scope가 Global 또는 Global + ResourceLink로 되어있는 Datasource가 신규 설정시 JNDI Name의 선택항목으로 나온다.\n4.4. Web Server Web Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Web Server의 등록, 수정, 삭제가 가능하며, 시작과 종료를 수행할 수 있다.\n4.4.1. 목록 Web Server List를 통하여 각 Web Server를 관리할 수 있다.\nWeb Server의 속성은 아래와 같다.\nTable 46. Web Server 속성 항목(*는 필수값) 설명 비고 Status\nServer의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nServer의 이름\nAddress\nServer의 IP주소\nServer ID\nServer의 ID\nHTTP Port\nHTTP 포트번호\nHTTPS Port\nHTTPS 포트번호\nSSL\nShell 실행시 SSL 기반의 패스워드 사용여부\nWeb Server에 SSL 관련 설정을 해야함\nServer의 시작 및 종료\n+ 아이콘\nRegister 버튼 또는 - 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Forced Stop과 Forced Restart를 수행할 수 있는 메뉴 제공\n4.4.2. Install Install 버튼 을 클릭하여 Server의 설치를 준비한다.\nServer ID와 Service Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.3. Clone Clone 버튼 을 클릭하여 Web Server의 복제를 준비한다.\nNode List를 선택하여 복제할 Server를 선택한다.\nClone Server ID와 Service Port를 입력한다.\n(Include External Source는 다른 노드로 서버를 복제하는 경우 사용가능하며, 복제할 서버의 Document Root 디렉토리에 있는 파일도 함께 복제하는지 여부를 설정한다.)\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 설치된 Server 정보를 추가로 확인해야 한다.\n4.4.4. Register Register 버튼 을 클릭한다.\n등록하려는 Server를 선택한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.5. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.4.6. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nServer Cluster에 묶여있는 서버는 삭제할 수 없다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.4.7. Start/Stop Single Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\nServer를 중지시 General 탭의 Stop Mode 에 따라 종료 방식이 달라진다.\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\nMulti Server Start/Stop 시작 혹은 종료하고자 하는 복수개의 Server를 선택한다.\nServer 목록 하단의 Multi Action 버튼 을 클릭한다.\n팝업창에서 Action Type을 선택 후 Action 버튼 을 클릭하여 복수개의 Server에 대한 시작 혹은 종료 작업을 수행한다.\nForced Stop/Restart Server 목록 가장 우측의 \u0026#8230;\u0026#8203; 버튼 을 클릭한다.\n강제 종료 혹은 강제 재시작을 수행한다.\n4.4.8. 설정 정보 관리 Web Server의 설정 정보를 변경하는 기능을 제공한다. Web Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\nGeneral Web Server의 일반적인 설정 값과 Connection, Process 정보를 편집할 수 있다.\nWeb Server의 설정 정보는 저장 시 설정 파일에 대한 Validation을 수행하게 되어 있으며, 설정 파일 오류로 인한 Server 기동 장애가 발생을 최소화하고 있다.\n설정 파일 오류 시 파일이 저장되지 않고 오류 메시지가 출력된다\n오류 메시지 예 AH00526: Syntax error on line 253 … Argument for 'Require all' must be 'granted' or 'denied' 설정 정보의 상세 내용은 다음과 같다.\nServer Info (env.sh과 /conf/httpd.conf 파일 관리)\nTable 47. Server Info 항목(*는 필수값) 설명 비고 HTTP Port(*)\nHTTP Port\nHTTPS Port(*)\nHTTPS Port\nStaging HTTP Port\nStaging 모드로 기동 시 사용하는 서비스 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nStaging HTTPS Port\nStaging 모드로 기동 시 사용하는 HTTPS 포트\nGraceful restart 시에 이용됨\nLENA는 기본 nostage 모드\nInstall Path\nServer 설치 경로\nDocument Root(*)\nWeb Server에서 제공하는 문서들이 저장되어 있는 기본 폴더 경로\nWelcome Page\n웹사이트의 초기페이지 문서로 어떤 파일을 사용할 것인지 정의\nStop Mode\nWEB 서버 종료시 참조하는 옵션\nStop : 기본 종료 옵션으로 현재 서비스중인 작업을 보장하지 않는다.\nGraceful Stop : 현재 서비스중인 작업을 완료한 후 종료한다. (Window 에서는 서비스 보장하지 않음)\nDirectory/Path\n어떤 서비스와 기능을 허용/거부 할지를 설정할 웹 문서들이 있는 디렉토리 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\nIndexes : welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\nFollowSymLinks : Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory\n/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정 파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형이 존재함\n* None : 어떠한 지시자도 허용하지 않음 * All : 모든 지시자 사용가능 * AuthConfig : 사용자 인증 지시자 허용 * FileInfo : 문서 유형 제어 지시자 허용 * Indexes : 디렉토리 Indexing 제어 지시자 허용 * Limit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nConnection Info (/conf/extra/httpd-default.conf 파일 관리)\nTable 48. Connection Info 항목(*는 필수값) 설명 비고 Timeout(*)\n클라이언트와 Server간에 연결 후 일정 시간 동안 아무 이벤트가 발생하지 않았을 때 Server가 기다리다가 연결을 끊을 시간(s)\nDefault : 60\nKeepAlive(*)\n특정 한 프로세스가 특정 사용자의 요청작업을 계속해서 처리할지 여부\nDefault : On\nMaxKeepAliveRequests(*)\nKeepAlive가 On일 때 유효한 값으로 하나의 프로세스가 특정 사용자의 요청을 지정한 횟수만큼 처리\n이 값을 넘어서면 해당 프로세스는 죽고 다른 프로세스가 요청을 처리함\nDefault : 100\nKeepAliveTimeout(*)\nKeepAlive가 On 일 때 유효한 값으로 설정한 시간 동안 요청이 없으면 연결을 끊기 위해 타임아웃 시킴(s)\nDefault : 5\nRequestReadTimeout(*)\n사용자로부터 request header와 body를 받기 위해 기다리는 시간\n설정된 시간 안에 받지 못하면 408 REQUEST TIME OUT 에러를 보냄\nDefault : header=20-40,MinRate=500 body=20,MinRate=500\nProcess Info (/conf/extra/httpd-mpm.conf 파일 관리)\nTable 49. Process Info 항목(*는 필수값) 설명 비고 StartServers(*)\nWeb Server 기동 시 초기화 되는 Server 프로세스 수\nDefault : 2\nServerLimit(*)\nMaxClients가 생성할 수 있는 최대 프로세스 값\nDefault : 8\nThreadLimit(*)\nThreadsPerChild의 설정 가능한 최대 값\nDefault : 128\nMinSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 적을 때 Thread가 이 값까지 늘어나 유지\nDefault : 128\nMaxSpareThreads(*)\nIdle 상태에서 Idle Thread 개수가 이 값보다 많을 때 Thread가 이 값까지 줄어들어 유지\nDefault : 256\nThreadsPerChild(*)\n각각의 자식 프로세스가 생성하는 Thread 수\nDefault : 128\nMaxRequestWorkers(*)\n전체 자식 프로세스가 생성할 수 있는 최대 Thread 수\nDefault : 1024\nMaxConnectionPerChild(*)\n자식 프로세스가 서비스 할 수 있는 최대 요청 수. 이 값만큼 요청을 처리한 후 종료한다.\nDefault : 0 (0: 제한없음)\nWeb Server 가 mpm event 방식을 사용할 수 있는 환경인 경우 Process Info 설정을 간편하게 할 수 있는 기능을 제공한다.\nWeb Server 의 Process Info 설정 시 우측 상단의 Auto Calculation 을 체크하면 기본 제공되는 설정 값 유효성 검사 외에 간편 자동계산 기능이 제공된다.\n규칙 유효성 검사 자동 계산 StartServer ≤ ServerLimit\n●\n-\nThreadsPerChild ≤ ThreadLimit\n●\n-\nThreadsPerChild + MinSpareThreads ≤ MaxSpareTheads\n●\nThreadsPerChild 변경 시 MinSpareThreads, MaxSpareThreads 자동 계산\nServerLimit × ThreadLimit ≤ MaxRequestWorkers\n●\nServerLimit, ThreadLimit 변경 시 MaxRequestWorkers 자동 계산\nPagespeed Info\nTable 50. Pagespeed Info 항목(*는 필수값) 설명 비고 Enabled(*)\nmod_pagespeed를 적용하여 Web Server가 제공하는 Resource에 대한 최적화를 수행하여 사이트 속도를 높일지 여부\nDefault : off\n다음과 같은 옵션을 제공함\non : Resource들에 대해 최적화 허용\noff : 추가적인 최적화를 중지하나, 기존에 최적화 되어있는 Resource들에 대한 접근 허용\nunplugged : 최적화 중지 및 접근 불허\nRewriteLevel(*)\n모듈이 rewrite할 필터의 Level 설정\nDefault : default(CoreFilters)\n다음과 같은 옵션을 제공함\nCoreFilters : 사전에 대부분의 웹사이트에서 안전하다고 생각하는 필터가 포함되어있음\nOptimizeForBandwidth : 안전성을 강화하며, Pagespeed를 인식하지 못하는 사이트에서 사용하기 적합\nPassThrough : 필터를 전부 수동으로 입력\nFileCachePath(*)\nCaching 될 File들이 저장되는 디렉토리의 경로\nLogDirPath(*)\nLog를 기록할 디렉토리의 경로\nEnableFilters\n사용할 필터들의 목록\nDisableFilters\n사용하지 않을 필터들의 목록\nAllow URI\nrewrite를 허용할 Resource들의 와일드카드(*)를 포함한 URI\n예) /.js\nDisallow URI\nrewrite를 허용하지 않을 와일드카드(*)를 포함한 URI\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다.\nConnector Web Server의 Connector정보와 Load Balancer정보를 편집할 수 있다. Connector Info 영역의 정보는 Web Server 내에 설정된 Load Balancer의 기본 설정 값을, Load Balancer영역은 Web Server와 WAS를 연계하는 정보를 관리한다.\n설정 정보의 상세 내용은 다음과 같다.\nConnector Info (/conf/extra/httpd-jk.conf와 /conf/extra/workers.properties 파일 관리)\nTable 51. Connector Info 항목(*는 필수값) 설명 비고 Type(*)\nWeb Server와 WAS가 통신할 때 사용하는 프로토콜\najp 13\nLoad Balancing Factor(*)\nWAS의 부하 분산 지수. 즉, 작업량 할당 비율\nDefault : 1\nRequest Read Timeout(*)\nJK와 WAS 간에 응답 대기 시간(TCP socket 내부적인 상태에 대한 timeout을 의미)\nDefault : 300 (s)\nSocket Connect Timeout(*)\nJK와 WAS 간의 socket 연결 대기시간\nDefault : 5 (s)\nSocket Keepalive(*)\nWeb Server와 WAS 간에 방화벽이 있는 경우 inactive 상태인 connection은 버리게 되어 있는데 OS에 keep alive 메시지를 보내서 방화벽이 inactive connection을 잘라버리는 것을 막을지 여부 설정\nDefault : true\nConnect Timeout(*)\nJK와 WAS 간에 연결이 완료된 후, ajp13 프로토콜에서의 cping request에 대한 cpong respond 대기 시간\nDefault : 10 (s)\nConnection Pool Size(*)\nJK와 WAS 간에 커넥션을 cache하는 크기\nDefault : 128\nConnection Pool Min Size(*)\nJK와 WAS 간에 커넥션을 cache하는 최소 크기\nDefault : 32\nConnection Pool Timeout(*)\nConnection pool에서socket을 close 하기까지 open된 socket을 유지하는 시간\nWAS에서 connectionTimeout 설정과 같이 설정해야 함\nLog Level(*)\n에러 로그 파일의 기록 내용을 얼마나 자세히 기록할지 지정\nDefault : error\nLog Format(*)\n로그 파일에 어떤 포맷으로 로그를 남길지 설정\nStatus(*)\nServer 상태 모니터링 설정값 셋팅 여부\nEnable 선택시 Status Url과 Allow IP를 설정할 수 있음\nDefault : Enable\nStatus Url(*)\nServer 상태 모니터링 URL\nDefault : /jk-status/\nStatus Allow IP(*)\nServer 상태 모니터링 URL에 접근 가능한 IP\nDefault : 127.0.0.1\nLoad Balancer Info\n(/conf/extra/workers.propertes, /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties, /conf/extra/vhost/\\{Virtual Host ID}.conf 파일 관리)\nTable 52. Load Balancer Info 항목(*는 필수값) 설명 비고 Load Balancer ID(*)\nLoad Balancer 를 구분하는 명칭\nSticky Session\nSession ID를 기반으로 라우팅을 지원할지 여부\nDefault : true\nSession Cookie\nSession Cookie Name을 변경하고자 할 경우 설정 + (WAS에서 Session Cookie Name 변경시 같이 변경해줘야 함)\nDefault: JSESSIONID\nURI Patterns(*)\nWeb server로 들어온 요청들에 대해 URI패턴을 검사하여 WAS로 전달하는 uri mapping을 정의\nMethod(*)\nLoad Balancer 가 부하를 분산하기 적절한 worker를 판별하는데 사용할 메서드\n다음과 같은 타입을 제공함\nR[equest] : 요청수가 가장 적은 worker 선택. (Default)\nS[ession] : 연결된 세션이 가장 적은 worker 선택\nN[ext] : S[ession]과 비슷하지만 더 적은 수의 session을 분산해야 하는 경우 선택\nT[raffic] : JK와 AJP커넥터 사이에 네트워크 트래픽이 가장 작은 worker 선택\nB[usyness] : 요청 수를 기반으로 가장 부하가 적은 worker 선택 Redirect\n해당 worker가 error 상태일 때 받은 요청을 대신 처리할 failover worker를 설정\nDefault : Round Robin\nLB Factor\n작업량 할당 비율. 해당 worker가 얼마나 많은 일을 할지 정의 (5로 설정할 경우 1로 설정한 다른 worker보다 5배 더 많은 request를 받음)\nURI Pattern 정보는 /conf/extra/uriworkermap/uriworkermap_\\{Virtual Host ID}.properties 파일에 관리된다.\nWAS List의 [+] 버튼을 통해 Load Balancer와 연계되는 WAS를 추가할 수 있으며, 추가된 WAS의 ⓧ 버튼을 통해 해당 WAS를 제외할 수 있다.\n연계 WAS 정보는 /conf/extra/workers.properties 파일에 관리된다.\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nVirtual Host Web Server의 Virtual Host 정보를 등록/수정/삭제할 수 있다.\nNew 버튼, Delete 버튼 을 통해 Virtual Host를 등록/삭제할 수 있다.\n1개 이상의 Load Balancer를 적용한 Virtual Host는 삭제할 수 없다. 만약 해당 Virtual Host를 삭제하려면, 먼저 Connector 탭을 통해 Load Balancer의 Virtual Host ID를 다른 Virtual Host ID로 변경해야 한다.\nSSL Enabled와 Rewrite Enabled를 체크한 경우 아래와 같이 상세 항목 영역이 추가로 출력된다.\n설정 정보의 상세 내용은 다음과 같다.\n(/conf/extra/vhost/\\{Virtual Host ID}.conf, /conf/extra/rewrite/rewrite_\\{Virtual Host ID}.conf, /conf/extra/ssl/ssl_\\{Virtual Host ID}.conf 파일 관리)\nTable 53. Virtual Host 설정 정보 항목(*는 필수값) 설명 비고 Virtual Host ID(*)\nVirtual Host 이름\nPort(*)\n해당 가상호스트가 사용하는 HTTP Port\nDocumentRoot(*)\n해당 가상호스트의 홈페이지 디렉토리 위치\nServer의 DocumentRoot 변수인 ${DOC_ROOT}를 활용하여 동일하게 혹은, 그 하위로 지정가능\nServerName(*)\n가상호스트 식별 하는 도메인 명\nServerAlias\n가상호스트가 사용하는 ServerAlias\n와일드카드 문자 포함 가능(*.example.com)\nCustomLog(*)\n가상호스트의 웹 로그파일 위치\nDirectory/Path\nDocumentRoot에서 지정한 경로\nDirectory/Options\n지정한 디렉토리 이하의 모든 파일과 디렉토리들에 적용할 접근 제어 설정\n-Indexes는 welcome page를 찾을 수 없을 때, Document Root 하위의 파일 목록을 보여주는 것을 방지\n-FollowSymLinks는 Document Root 하위에 기존의 웹문서 이외의 파일시스템에 심볼릭링크로 접근 하는 것을 방지\nDirectory/AllowOverride\nDocument Root 하위 디렉토리 별 리소스 접근 제어 설정파일 (일반적으로 AccessFileName : .htaccess)에 대하여 어떤 지시자 사용을 허가할 것인지 설정\n다음과 같은 유형을 제공함\nNone : 어떠한 지시자도 허용하지 않음\nAll : 모든 지시자 사용가능\nAuthConfig : 사용자 인증 지시자 허용\nFileInfo : 문서 유형 제어 지시자 허용\nIndexes : 디렉토리 Indexing 제어 지시자 허용\nLimit : 호스트 접근 제어 지시자 허용\nDirectory/Require\n인증된 사용자가 허가된 Action을 수행하는지 검증\nConnector Enable\n가상 호스트 Connector 설정 여부\nConnector Type/ID\n가상 호스트 Connector 를 설정 하는 경우 Jk/Proxy 유형에 따라 선택\nConnector Tab 에서 생성한 Connector 목록 표시.\nRewirte Enabled\nRewrite 사용여부\nRewirte Conf\nRewrite 관련 상세 설정. 지정한 Rewrite Condition 에 따라 Rewrite Rule에 설정한 rule 대로 rewrite함\nSSL Enabled\nSSL 사용여부\nSSLPort(*)\nHTTPS Port\nSSLCertificateFile(*)\nSSL 인증서 경로\nSSLCertificateKeyFile(*)\nSSL인증서 Key파일 경로\nSSLCertificateChainFile\nFile of PEM-encoded Server CA Certificate\nSSLCACertificateFile\nROOT인증서 경로\nHttps Redirect Enabled\nHttp\u0026#8594;Https Redirect 사용여부\nSSL Log Separation\nSSL Log 설정 분리 사용여부\nSSLCustomLog\nSSL Custom Log 설정\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nLogging Web Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 54. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nError Log\nWeb server가 진단정보와 request를 처리하는 도중에 발생한 오류를 기록할 때 사용된다. Server가 시작하거나 동작하는데 문제가 발생시 여기에 설정된 위치의 파일을 먼저 확인한다.\nTable 55. Error Log 항목(*는 필수값) 설명 비고 Location(*)\nWeb server의 에러로그파일 위치를 지정\nLog Level(*)\n에러로그파일의 기록내용을 얼마나 자세하게 기록할 지 지정\nLog Format\n로그파일에 사용할 형식을 설정한다.\nTable 56. Log Format 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\nNickname(*)\n사용할 로그포맷의 명칭\nLog Format with logio\nTable 57. Log Format with logio 항목(*는 필수값) 설명 비고 Format(*)\n로그파일에 어떤 포맷으로 로그를 남길지 설정\n%I와 %O 변수를 사용해 request와 head를 포함하여 보내고 받는 byte 측정이 가능\nNickname(*)\n사용할 로그포맷의 명칭\ncombinedio는 mod_logio_module이 로드되어 있어야 함\nEnv\nRequest의 조건에 따라 환경변수를 설정할 때 사용한다.\nTable 58. Env 항목(*는 필수값) 설명 비고 Attribute(*)\nHTTP 요청 헤더(ex: Host, User-Agent, Referer, Accept-Language), 요청 속성 중 하나(Remote_Host, Remote_Addr, Server_Addr, Request_Method, Request_Protocol, Request_RUI) 또는 요청과 연관된 환경 변수 이름\nRegex(*)\nPerl 호환 정규식\nEnv-variable[=value](*)\n설정할 변수명과 설정값(optional)\nVarname, !varname 또는 varname=value\nCase\nEnv-variable에 대소문자 구분할지 여부\nWith case : 대소문자 구분\nNo case : 대수문자 구분없음\n설정을 변경할 경우 수정된 사항의 반영을 위하여 Server의 재기동이 필요하다\nEnvironment JVM 옵션, Start Shell의 설정 등을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nCustom Settings ($CATALINA_HOME/bin/customenv.sh): 사용자 커스텀 환경변수 설정\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 되어 있다. 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false Config Tree Web Server의 ${SERVER_HOME}/conf 디렉토리 하위 설정파일들을 파일편집기를 통해 관리 할 수 있다.\nNode Agent를 실행하는 사용자가 Web Server 설정 정보 파일의 접근 권한이 있어야 수정이 가능하다. 접근 권한이 없을 경우 파일 Write 권한이 없어 편집 할 수 없다는 메시지가 출력 된다.\nHistory 설정 정보의 백업 및 복원 기능을 제공한다. 설정 정보를 수정하여 저장하면 History를 관리한다. 수정 일시를 입력하여 검색한다.\n보기(돋보기) 버튼 을 클릭하여 선택한 파일의 정보를 볼 수 있으며, Restore 버튼 을 클릭하여 해당 설정파일로 복원할 수 있다.\n4.5. Session Server Session Server를 관리하기 위한 화면을 제공한다. Node에 설치한 Session Server의 등록, 수정, 삭제가 가능하며, 시작과 종료 Shell을 실행할 수 있다.\n4.5.1. 목록 Session Server List를 통하여 각 WAS를 관리할 수 있다.\nFigure 7. Session Server List Session Server의 속성은 아래와 같다.\nTable 59. Session Server 속성 항목(*는 필수값) 설명 비고 Status\nSession Server의 상태\n아래와 같은 상태를 제공함\n* Started(v) * Stop(ㅁ) * Error(!)\nName(*)\nSession Server의 이름\nAddress\nSession Server의 IP주소\nServer ID\nServer의 ID\nPort\nService 포트번호\nServer Type\nSession Server의 유형\nStandalone\nEmbedded\nStart/Stop\nServer의 시작 및 종료\n+ 아이콘\n+Register 버튼 또는 연필 버튼 을 클릭하여 선택된 Server 정보가 변경 중임을 표시\n- 아이콘\n삭제(휴지통) 버튼 을 클릭하여 선택된 Server 정보가 삭제됨을 표시\nAction(\u0026#8230;\u0026#8203;) 버튼 을 클릭하면 Restart를 수행할 수 있는 메뉴 제공\nSession Server는 Enterprise Edition에서 제공되는 기능으로 되는 기능으로 Enterprise 버전의 WAS(lena-enterprise-[버전].tar.gz)를 설치 시 사용 가능하다.\n4.5.2. Install Install 버튼 을 클릭한다.\nServer ID와 Service Port, Mirror Server IP/Port를 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nNode에 실제 설치되어 있는 Server와 Manager에서 관리하는 Server의 정보에는 차이가 있을 수 있다. (console기반 설치 시)\nServer ID 중복 오류가 발생하는 경우, Register 기능을 이용하여 이전에 설치된 Server 정보를 확인한다.\n4.5.3. Register Register 버튼 을 클릭한다.\n등록할 Server를 클릭한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.4. 수정 수정(연필) 버튼 을 클릭하여 Server 정보를 수정 가능한 상태로 변경한다.\nServer의 속성을 수정한다.\nSave 버튼 을 클릭하여 저장한다.\n4.5.5. 삭제 삭제(휴지통) 버튼 을 클릭하여 Server 정보를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭한다.\nOK 버튼 을 누르면 삭제 유형을 선택하는 창이 출력된다.\nUnregister : Manager DB에서만 해당 Server 정보를 삭제하고 물리적인 Server engine은 유지 (추후 Register 버튼 을 통해 다시 등록 가능)\nUninstall : Manager DB에서 해당 Server 정보를 삭제하고 물리적인 Server engine도 삭제\nUninstall 선택시, 로그 디렉토리 삭제여부를 묻는 창이 출력된다.\nADMIN \u0026gt; Preference \u0026gt; Manager Environment 메뉴의 Manager Configuration 영역에서 use Server Delete Protection 값을 true로 설정하는 경우 Manager에서 서버가 uninstall되는 것을 방지 할 수 있다.\n4.5.6. Start/Stop Stop 버튼 을 클릭하여 Server를 종료한다.\nStart 버튼 을 클릭하여 Server를 시작한다.\n시작 가능한 상태일 경우에만 Start 버튼 이 활성화 된다.\n4.5.7. 설정 정보 관리 General Server의 설정 정보를 변경하는 기능을 제공한다. Session Server 목록에서 Server를 선택하면 설정 정보를 관리하는 화면으로 이동한다.\n환경설정에서 변경 가능한 속성은 아래와 같다.\nConfiguration\nTable 60. Configuration 항목(*는 필수값) 설명 비고 Primary Host(*)\nServer의 Service Host(IP)\nPrimary Port(*)\nServer의 Service Port\nMirror Server Host(*)\nPair Server의 Host(IP)\nMirror Serror Port(*)\nPair Server의 Service Port\nShare session in applications\nMulti Applications 간 Session 공유 여부 설정.\nWAS에서도 이 항목을 동일한 값으로 처리해야 적용됨.\nstandalone에서만 가능함.\nSession Timeout Sec\nSession server의 session expired time 설정.\nstandalone에서만 가능함.\nConnected WAS List\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 61. Connected WAS List 항목(*는 필수값) 설명 비고 Server Name\nWAS의 Name\nHost\nWAS가 설치된 Host명\nStatus (Session Server의 상태 정보 제공)\nRefresh 버튼 을 클릭하면 리스트를 갱신해준다.\nTable 62. Status 항목(*는 필수값) 설명 Session Count\n현재 Session 개수\nLogout Count\nLogout 요청으로 Logout 된 Session 수\nSession Max Count\nSession 저장 최대 개수\nSession Timeout\nSession timeout 시간(ms)\nRequest Getnew Logout\nWAS에서 전달된 GET_FRESH Request에 대한 Logout 응답 횟수\nData From Nodes\nWAS에서 전달된 Session 개수\nRequest Getnew Nodata\nWAS에서 전달된 GET_FRESH Request에 대한 NODATA 응답 횟수\nRequest Getnew\nWAS에서 GET_SESSION Request했을 때 늘어난 횟수\nPid\nSession이 standalone일 경우 프로세스 ID\nRequest Getfresh Data\nWAS에서 GET_FRESH Request 가 왔을 때 해당 Session이 있는 경우 횟수\nRequest Getfresh Logout\nWAS에서 GET_FRESH Request가 왔을 때 해당 Session이 Logout 된 횟수\nSession Recv Lost\nSession receive가 유실된 개수\nLogout From Nodes\n다른 was에서 logout 된 횟수\nSession Expired\nSession Time Out 시간으로 Expired 된 Session 수\nRequest Getfresh Nodata\nWAS 에서 GET_FRESH_SESSION request했는데 데이터가 없을 경우 늘어난 횟수\nData From Secondary\nSlave server에서 온 Data 개수\nRequest Getfresh\nWAS에서 GET_FRESH Request 요청 횟수\nLogout From Secondary\nSlave Server에서 Logout Request가 전달 된 횟수\nReq Lost\nRequest 유실 개수\nResp Lost\nResponse Queue의 사이즈 이상으로 Response 가 수신되어 손실된 Response 개수\nRequest Getfresh Secondary\nSlave Server에서 GET_FRESH Request 요청 횟수\nRequest Getfresh Not New\nWAS에서 전달된GET_FRESH Request에 대한 NOT_NEW Response 횟수\nRequest Getnew Secondary\nSlave Server에서 GET_SESSION request했을 때 늘어난 횟수\nLogging Session Server의 로그설정 정보를 편집할 수 있다.\n설정 정보의 상세 내용은 다음과 같다.\nLog Home\nTable 63. Log Home 항목(*는 필수값) 설명 비고 Log Home(*)\nLog Home 경로\ndefault 선택시 서버설치디렉토리 하위 logs 폴더로 설정, custom 선택시 Log Home Prefix항목에서 로그디렉토리 홈 경로 입력가능\nRetention Days(*)\n로그 최대 보관 일수\nDefault : 0(무제한)\nEnvironment Start Shell의 설정을 관리하는 화면을 제공한다. 파일 에디터를 통해 수정한 후 Save 버튼 을 클릭하여 저장한다.\nStart Shell ($CATALINA_HOME/env.sh) - Server 시작을 위한 Shell Script\n기본적으로 설정을 수정할 수 없도록 Disable 되어 있지만, 수정하고 싶은 경우 ADMIN \u0026gt; Manager Environment \u0026gt; Manager Configuration 항목에서 설정 버튼 을 클릭해 아래 설정을 false 로 변경한다.\nserver.environment.envshell.readonly=false 5. Cluster 5.1. Server Cluster Server Cluster는 동일한 서비스 제공을 위해 동일한 구성으로 구동되는 Application Server와 Web Server의 묶음이다.\nFigure 8. Server Cluster 화면 5.1.1. Server Cluster 목록 매니저에 등록된 Server Cluster 목록은 좌측메뉴에서 Server Cluster를 선택하면 확인 할 수 있다.\nServer Cluster List 테이블에서 제공되는 속성은 아래와 같다.\nTable 64. Server Cluster 속성 항목 설명 비고 Select\n삭제를 위한 콤보박스\nServer Cluster Name\nCluster 명\nServers\nServer Cluster를 구성하는 각 Server별 개수\nApplication Server\nWeb Servers\n5.1.2. Server Cluster 생성 Server Cluster 생성에서는 Server Cluster를 구성할 Application Server 목록과 Web Server 목록을 선택한다.\nServer Cluster Group을 선택하고 Server Cluster 목록 하단의 +New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nServer Cluster의 기본 정보를 입력한다.\nServer Cluster Name: Server Cluster명을 입력한다.\nApplication Server Type: Server Cluster의 멤버로 사용될 Application의 Type을 선택한다. Standard와 Enterprise 두가지 유형이 있다.\nEnable Scaling: Auto Scaling기능 사용여부를 선택한다. 이 옵션은 server cluster 생성 후에는 변경 할 수 없다.(이 기능은 Container Edition에서만 지원하며, 사용하기 위해선 manager.conf에서 scaling.enable를 true로 설정한다.)\nDescription: Server Cluster와 관련하여 필요한 설명들을 입력한다.\n선택한 Application Server Type에 해당하는 서버 목록이 아래 Application server in server cluster 영역에 조회된다. Selectable Servers 에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다. Web servers in server cluster 영역에서 마찬가지로 Selectable Servers에서 원하는 서버를 클릭 후 \u0026gt;\u0026gt; 버튼 을 눌러 Selected Servers 영역으로 옮긴다.\n하나의 Server는 하나의 Server Cluster에만 지정할 수 있으므로, 다른 Server Cluster에 매핑되지 않은 Application Server와 Web Server만 Selectable Servers 목록에 조회된다.\nEngine No.가 다른 WAS인스턴스를 하나의 Server Cluster로 구성할 수 없다.\nV Save 버튼 을 클릭하여 저장한다.\n좌측 트리에 입력한 server cluster명의 메뉴가 추가되었음을 확인할 수 있다.\n5.1.3. Server Cluster 삭제 좌측 Server Cluster 트리메뉴에서 Server Cluster Group을 선택한다.\nServer Cluster List에서 삭제할 Server Cluster의 Select 컬럼의 체크박스를 선택한다.\n- Delete 버튼 을 클릭하여 삭제한다.\n5.1.4. Server Cluster 상세 Overview 좌측 메뉴 또는 Server Cluster Group 상세에서 Server Cluster를 선택하면 Server Cluster에 대한 Overview 화면이 출력된다.\nServer Cluster 상세 영역의 항목 및 버튼이 제공하는 기능은 아래와 같다.\nTable 65. Server Cluster 상세 영역의 항목 및 버튼 항목 또는 버튼명 기능 Server Cluster Name\nServer Cluster 명\nApplication Server Type\nServer Cluster에 구성되어 있는 Application Server 유형(변경 불가)\nServer Config Synchronization Policy\nServer Cluster 동기화 수행(Sync 버튼 선택) 중 오류 발생시 처리 정책\nServer Config Synchronization Policy의 option은 아래와 같다. (기본값 : Force)\nStop : 설정 동기화 중 오류 발생 시 즉시 중지\nRollback : 설정 동기화 중 오류 발생 시 전체 rollback\nForce : 설정 동기화 중 오류 발생 시 해당 Server를 건너뛰고 다음 수행\nEnable Scaling\nServer Cluster의 Auto Scaling 기능 사용여부(변경 불가)\nDescription\nServer Cluster에 대한 설명\nCompare 버튼\nServer Cluster 내 Application Server와 Web Server, Session Server의 동기화 상태를 비교한다.\nServer 유형별 비교 항목은 아래와 같으며, 이는 아래 Server 목록 영역 각각의 컬럼에 출력된다.\nServer Config, Application, Resource 및 Session 비교는 각 Server 유형별 Master Server를 기준으로 한다.\nApplication Server Server Config : Application Server 설정 정보 동일 여부\nApplication : 각 Application Server에 deploy된 Application이 동일 여부\nResource : Resource 설정 동일 여부\nSession : Session Clustering을 위한 Session Server 설정 동일 여부\nWeb Server Server Config : Web Server 설정 정보 동일 여부\nConnect to WAS : Server Cluster 내 모든 Application Server와 연계되어 있는지 여부\nSync 버튼\nServer Cluster 내 Application Server의 Server Config, Application, Resource, Session 정보를 동기화한다.\nServer Cluster 내 Web Server의 Server Config와 WAS 연계 정보를 동기화한다.\nSnapshot 버튼\n동기화된 Server Cluster에 대해 현재 상태를 Snapshot으로 저장한다. 생성된 Snapshot은 Snapshot 탭에서 확인할 수 있다.\nSnapshot에는 Application Source도 포함된다. 따라서 과도하게 Snapshot을 생성하면 시스템 디스크 용량을 많이 차지할 수 있으므로 꼭 필요한 경우에만 생성하고 불필요한 Snapshot은 Snapshot 탭을 통해 삭제해야 한다.\nGraceful Restart 버튼\nServer Cluster 내 Web Server와 Application Server를 순차적으로 재기동한다. Graceful Stop을 수행하므로 처리 중인 service가 모두 종료된 후 Server가 stop 된다.\n처리 순서는 아래와 같다. ()로 표현된 절차는 생략 가능하다.\nWeb Server Stop\nApplication Stop\n(Application Source 업로드)\nApplication Server Start\n(별도 port로 테스트를 위해 Web Server를 staging port로 Start)\nWeb Server Start\nV Save 버튼\n변경된 Server Cluster 상세 설정 내용을 저장한다.\n동기화 상태 조회 Server Cluster의 동기화 상태는 Compare 버튼 을 선택하여 비교 후 그 결과를 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\n동일 또는 유효한 상태인 경우 상태가 초록색 원 아이콘 으로 출력된다.\nServer의 상태가 동일하지 않을 경우 붉은색 원 아이콘 으로 나타나며, 해당 아이콘을 클릭하면 별도의 팝업창이 출력되어 Server별 상세 정보를 확인할 수 있다.\n또한 각 Server 목록에서 Server Name을 클릭하면 해당 Server 상세 화면으로 이동할 수 있다.\nApplication Server의 Server Config 상세\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nApplication Server의 Application 상세\nApplication의 Deploy 상태 비교 결과가 출력된다.\nApplication Server의 Resource 상세\nApplication Server의 Resource 비교 결과가 출력된다.\nApplication Server의 Session 상세\nApplication Server의 Session 설정 비교 결과가 출력된다. 팝업창에는 Master Server에 설정된 세션 정보를 제공한다.\nWeb Server의 Server Config\n설정 파일의 비교 결과가 출력된다. 팝업창에서 파일 명 옆에 있는 Detail 항목의 돋보기 버튼 을 클릭하면 Master서버와 비교하여 현재 설정 파일의 비교결과(최종 수정일자, 설정 파일 내용)를 상세하게 볼 수 있다.\nWeb Server의 Connect to WAS\n해당 Web Server가 Server Cluster에 속한 모든 Application Server에만 연계되어 있을 때 초록색 원 아이콘 상태로 출력되며 그 외의 경우에는 붉은색 원 아이콘 으로 표시된다. 붉은색 원 아이콘 을 클릭하면 별도의 팝업창이 출력되어 상세 정보를 확인할 수 있다.\n팝업창에는 Web Server에 연계되어 있는 Application Server가 모두 Server Cluster에 등록된 Server인지에 대한 상세 정보를 출력한다((Web Server Status). 또한 Server Cluster에 등록된 모든 Application Server가 해당 Web Server에 연계되어 있는지에 대한 상세 정보를 출력한다.(Application Server Status)\n상태 동기화 수행 Server Cluster의 동기화 수행은 [.button]#Sync 버튼#을 선택하여 진행 한다. 그 결과는 각 Server 목록의 아래 컬럼을 통해 확인할 수 있다.\nGraceful Restart Graceful Restart 기능은 처리중인 업무의 처리 종료를 보장하면서 Server Cluster 내 모든 서버에 대한 재기동을 수행할 때 사용된다. 수행시 아래와 같은 절차를 통해 수행된다. (Server Cluster 내 모든 서버에 적용됨)\nGraceful Restart 시작 전\nStart Process 버튼을 클릭하면 Graceful Restart 작업이 시작된다.\nWeb Server Stop 단계\nWeb Server에 대한 Stop을 수행한다. 수행 중인 Thread가 모두 종료된 후 Web Server가 Stop된다.\nApplication Server Stop 단계\nApplication Server에 대한 Stop을 수행한다. 본 단계는 모든 Web Server가 종료된 후 활성화된다.\n소스 배포 (생략 가능) 단계\nApplication Server에 대한 소스 배포(업로드)를 수행한다. 별도의 배포 시스템이 있는 경우 이 단계는 생략 가능하다.\nApplication Server Start 단계\nApplication Server에 대한 Start를 수행한다. 기동 로그를 함께 조회할 수 있다.\nWeb Server를 Staging mode로 Start (생략 가능) 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nWeb Server Start 단계\nWeb Server를 Staging mode로 Start 한다. (본 단계는 생략 가능하다.) 이를 통해 일반 사용자에게 open 하기 전, 운영과 동일한 환경에서 staging port로 업무에 대한 테스트를 수행할 수 있다.\nGraceful Restart 완료\nApplication Server Server Cluster 내 Application Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Application Server의 Master Server 선택, 동기화할 설정파일 지정 및 JDBC Driver 동기화 여부를 설정할 수 있다.\nMaster Server\nServer Cluster내 Application Server 중 Master Server를 지정한다.\nServer Configs for Synchronization\nServer Cluster 내의 Application Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Application Server의 Home 하위의 상대 경로이다.\nSync JDBC Drivers\nManager Repository 경로/lib/datasource/폴더 하위 모든 jar파일을 동기화대상에 포함할지 여부를 선택한다.\nJDBC Driver는 Runtime시 Jar파일 교체에 따른 오류를 방지하기 위해 Sync 대상 서버에 해당 JDBC Driver가 없을 경우에만 동기화 된다.\nApplication 관리 Application Server 목록에서 서버를 선택시 하단의 Application 탭을 통해 선택된 서버의 Application 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Application에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nResource 관리 Application Server 목록에서 서버를 선택시 하단의 DataSource, JMS, JTA 탭을 통해 선택된 서버의 DataSource, JMS, JTA의 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Datasource, JMS, JTA에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nSession 관리 Application Server 목록에서 서버를 선택시 하단의 Session 탭을 통해 선택된 서버의 Session 상세 정보를 확인 할 수 있다.\n제공되는 화면과 기능은 Session에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nApplication Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Application Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 66. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nAll Web Server Sync: Clone후 web서버와 연동 동기화\nAll Web Server Graceful Restart : Clone후 Web서버 재기동 여부\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 application 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Application Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nApplication Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Application Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Application Server의 Server Config, Application, Resource, Session 설정을 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Application Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\n팝업창의 Action 항목에는 Force Restart 버튼 과 Next 버튼 이 제공된다.\nTable 67. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Next 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nTable 68. Rolling Restart 팝업창 버튼 설명 버튼명 기능 Start\n팝업창에 보여지는 대상서버의 재기동을 시작한다. 테이블의 위에서부터 순차적으로 진행된다.\nPause\n재기동작업을 일시 중지한다. 중지 / 기동을 수행중인 경우 수행중인 명령이 중단되지는 않으며, 다음 작업은 대기하게 된다.\nResume\n재기동작업을 재개한다. Pause 전 완료한 작업 이후부터 시작된다.\nForce Restart\n중지가 정상적을 되지 않는경우 본 버튼을 통해 강제 중지후 기동할 수 있다. 재기동 수행중인 서버가 중지 완료될때까지만 화면에 보여진다.\nNext\n현재 재기동중인 서버의 작업이 완료되기 전, 다음 서버의 재기동작업을 바로 진행하고 싶은경우 Next 버튼을 통해 다음 서버의 재기동을 수행할 수 있다. Next 를 수행해도 앞 서버들의 재기동 작업은 계속 수행된다.\nWeb Server Server Cluster 내 Web Server의 목록 및 동기화 대상 정보를 관리하는 탭이다.\n탭 상단의 서버 목록에 대한 상세 정보는 Overview와 동일하다.\n동기화 대상 항목 서버 설정 파일 관리 Config 버튼 을 선택하면 제공되는 팝업창을 통해 Web Server의 Master Server 선택, 동기화 할 설정파일목록을 설정할 수 있다.\nMaster Server :\nServer Cluster내 Web Server 중 Master Server를 지정한다.\nServer Configs for Synchronization :\nServer Cluster 내의 Web Server에서 동일한 내용으로 유지할 파일 목록이다. Server Cluster 생성시 기본적인 파일 목록이 등록되어 있으며 프로젝트 사정에 맞게 파일을 추가/삭제할 수 있다. 파일의 경로는 Web Server의 Home 하위의 상대 경로이다.\nConnector Web Server의 상세 connector정보들을 확인 및 수정 할 수 있다.\nWeb Server 목록에서 서버를 선택시 하단의 Connector 탭을 통해 선택된 서버의 Connector 상세 정보를 확인 할 수 있다. 제공되는 화면과 기능은 Connector에서 기술한 내용과 동일하다. 따라서 기능에 대한 상세 설명은 본 장에서는 생략한다.\nWeb Server 목록 관리 Clone 버튼, Join 버튼 또는 Unjoin 버튼 을 사용하여 Web Server를 Server Cluster에 포함 또는 제외시킬 수 있다.\nClone\nClone 버튼 을 클릭하면 Master서버와 동일한 설정을 가진 새로운 서버를 설치후 Server Cluster에 등록할 수 있다.\nTable 69. Clone 팝업창 항목 설명 항목명 기능 Post Processing Options\nCloned Server Start: Clone후 서버 기동 여부 체크\nNode List\n복제할 서버를 설치할 노드\nServer ID / Clone Service Port\n복제할 Server의 ID와 Service Port 입력\nInclude External Source\n복제하려는 서버의 소스가 서버 외부에 있는데 이 소스까지 복제하려는 경우 Y 선택\nJoin\nJoin 버튼 을 클릭하면 이미 생성한 Web Server 중 등록 가능한 Server를 Server Cluster에 추가한다.\nUnjoin\nUnjoin 버튼 을 클릭하면 Cluster에 등록된 Server를 Cluster목록에서 제거한다.\nWeb Server 동기화 및 비교 Compare\nCompare 버튼 을 클릭하면 Server Cluster 내 Web Server의 동기화 상태를 비교한다.\nSync\nSync 버튼 을 클릭하면 Server Cluster 내 Web Server의 Server Config, Connect was를 동기화한다.\nRolling Restart Rolling Restart는 Server Cluster내에서 Web Server들을 순차적으로 재기동 할 때 사용한다.\n재기동할 서버를 대상으로 수행하는 기능이므로 정지된 서버는 제외한다. 서버 목록에서 대상 서버들을 선택한 후 Rolling Restart 버튼 을 클릭하면 Rolling Restart팝업창이 제공된다.\n팝업창에서 사용자는 Rolling Restart 시작 전 Execution option 영역에서 서버와 서버 사이의 기동 시작 Interval과 Force Stop 여부를 설정 할 수 있다. Rolling Restart 영역에서는 선택된 서버들이 순차적으로 재기동을 수행하는 상태를 확인할 수 있다.\nTable 70. Rolling Restart 팝업창 항목 설명 Node 서버가 설치된 노드명 Server\n서버명\nServer Status\n서버의 현재 기동상태\nStop Status\n서버 정지 작업 상태\nStart Status\n서버 기동 작업 상태\nAction\n재기동 중인 서버의 경우 Force Restart 버튼 과 Skip 버튼 이 제공된다.\nInterval\n서버에 남아있는 처리 시간. Execution Option 영역의 Interval에 설정된 값에서 시작하여 0까지 내려간 후 다음 서버의 재기동을 수행한다.\nElapsed time\n재기동 처리 시간\nSnapshot Overview Tab의 Snapshot 버튼을 클릭하면 Snapshot 생성을 위한 창이 출력되며 OK 버튼을 클릭하면 Server Cluster의 Snapshot이 생성된다.\nSnapshot은 Server Cluster가 동기화 상태인 경우에만 생성할 수 있다.\nSnapshot 탭을 통해 Snapshot 목록을 관리하는 화면을 제공한다. 일자를 입력 받아 Snapshot 이력을 조회한다. Snapshot이력에 대한 자세한 사항을 조회 할 수 있으며, 원하는 시점으로 복원하는 기능도 제공한다.\nSnapshot 목록의 Detail 항목에 있는 목록 버튼 을 클릭하면 해당 snapshot에 대한 상세정보를 조회할 수 있다.\nSnapshot 정보는 각 server별로 관리하므로 특정 Snapshot 생성 이후 Cluster에 추가된 server는 해당 Snapshot으로의 복원 대상에서 제외된다. (이 경우 Snapshot 복원 후 다시 Sync를 수행해야 모든 server가 동일한 구성을 가질 수 있다.) 또한 Snapshot 이후 Cluster에서 특정 server가 삭제되면 해당 server의 Snapshot 정보는 모두 삭제된다. Snapshot을 만들 때 소스코드는 Snapshot에 복사 되지 않으며 복사되는 설정파일은 기본설정파일 과 application설정파일, enterprise.xml 까지만 Snapshot에 포함된다.\nSnapshot을 생성할 경우 디스크 용량에 부하를 줄 수 있으므로 주의하여 생성한다. 또한 생성된 Snapshot은 자동으로 삭제되지 않고 사용자가 직접 삭제해야 한다. 따라서 불필요한 Snapshot을 적절한 시기에 삭제하는 것을 권장한다.\n5.1.5. Scaling Server Cluster 생성시 Enable Scaling 옵션을 True로 선택하면 CSP 또는 Cloud 플랫폼이 제공하는 Auto-Scaling(Infra Scaling)에 따른 서비스 Scaling을 지원한다. 이 기능은 VM의 OS가 Linux이고, VM Instance 생성시 Init-Script (예 : AWS EC2의 UserData)가 제공되는 환경에서만 지원된다.\nCloud환경에서 Scaleing 은 일반적으로 다음과 같은 절차로 수행된다.\nVM Image 생성 (LENA Node, LENA Server 및 Application 등이 포함된 Image)\nVM Init-Script 작성\nLENA Manager에 Scaling Policy 설정\n사전 설정한 Scaling Trigger 조건 (Resource 임계치 조건) 발생시 VM Auto-Scaling Out 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-Out시 Cloud Init-Script에 따라 LENA Node Agent 및 Server의 등록, 설정동기화, License 발급 수행 (LENA 영역)\nResource 임계치가 정상화되면 VM Scale-in 수행 (CSP, Cloud 플랫폼 영역)\nVM Scale-in 후, Node Agent Alive 체크 실패가 LENA Manager에 설정된 횟수 만큼 발생하면, 해당 Node 및 Server를 LENA Manager에서 제거 (LENA 영역)\n다음에서는 위의 절차중 LENA의 Scaling 지원영역과 관련된 Scaling Policy 설정 , VM Init-Script 관련 부분, LENA Node Agent / Server의 등록과 관련된 내용에 대해서 설명한다.\nScaling 기능은 Infra Scaling시 실행되는 Init-Script내에서 필요 환경변수 설정하고 LENA Scaling 실행 명령인 scale.sh 호출함으로서 Scale-Out이 실행된다. Manager에 설정된 Rule에 따라 Node Agent 통신 불가 인식 시 또는 VM 소멸시 stop-agent.sh을 옵션 설정하여 명시적으로 호출할 시 Scale-In이 실행된다.\nScale Out\nScale Out은 환경변수 설정하고 scale.sh을 호출함으로써 수행된다. AWS를 예를들면 AutoScaling그룹의 시작 템플릿에서 UserData에 해당 Script를 작성하여 실행한다. 미리 Manager에 Scaling License가 배포되어 있어야 Scaling License를 다운받아 서버가 정상 기동할 수 있다.\nInit-Script Init-Script에는 필요한 환경변수를 설정하고, scale.sh을 호출하는 절차가 작성된다. Scale Out 관련 scale.sh에서 참조하는 환경 변수는 다음과 같다.\nTable 71. scale.sh 참조 환경변수 환경변수 설명 LENA_MANAGER_ADDRESS\n필수 옵션으로, Node, Server에 대한 Scaling 처리를 수행할 LENA Manager의 서비스 주소로 형식은 {IP주소}:(HttpPort} 이다.\n이 환경변수로 이중화된 Manager에 대한 Fail-Over 설정을 할 수 있다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속이 실패하면 두번째 Manager에 접속을 시도한다. 지정된 시간(기본 10분)동안 Manager와의 접속이 성공할때 까지 과정을 반복적으로 수행한다.\nJAVA_HOME\nNode Agent 및 Server에서 사용할 Java의 설치 위치 이다.\nLENA_CLUSTER_NAME\nServer Cluster 명, Scale된 Server가 등록될 대상 Server Cluster의 이름 이다. 현재 존재하는 Server Cluster명을 기입해야만 정상적으로 Scaling이 수행된다.\nLENA_USER, LENA_GROUP\nNode Agent 및 Server를 기동할 OS 사용자 및 그룹\nLENA_WAS_SCALING\nWAS 서버의 Scaling 수행 여부\nLENA_WAS_HOME\nWAS 서버의 설치 위치\nLENA_WAS_AGENT_PORT\nWAS 서버의 Node Agent 서비스 포트\nLENA_WEB_SCALING\nWeb 서버의 Scaling 실행 여부\nLENA_WEB_HOME\nWeb 서버의 설치 위치\nLENA_WEB_AGENT_PORT\nWeb 서버의 Node Agent 서비스 포트\nLENA_WEB_OPENSSL_VER\nOS에 설치된 OpenSSL의 Version으로, Web서버 기동을 위해 필요하다.\n지원되는 버전은 1.0.1, 1.0.2 , 1.1.1 이고, 기본 값은 1.0.2 이다.\nLENA_IMAGE_TYPE\nVM Image의 유형으로 LENA 패키지만 설치된 'base\u0026#8217;와 Server까지 설치된 'golden' 가 있다. 'base\u0026#8217;는 Scaling Mode 중 'clone\u0026#8217;에 대응되며, 'golden\u0026#8217;은 Scaling Mode중 'sync' / 'nosync\u0026#8217;에 대응된다.\nWAS_CONFIG_DATA\n개별 WAS의 설정정보로 Json 형식으로 정의된다. Session Cluster 정보, Datasource 정보를 설정할 수 있고, 이는 실제 구성된 Server의 설정정보를 변경한다.\n환경 변수 적용 및 scale.sh 호출 예시 (Init-Script) export LENA_MANAGER_ADDRESS=10.200.30.213:7700,10.200.30.214:7700 export LENA_CLUSTER_NAME=cust-g3r export LENA_USER=lena export LENA_GROUP=lena export LENA_WAS_SCALING=Y export LENA_WAS_HOME=/engn001/lena/1.5.0 export LENA_WAS_AGENT_PORT=16800 export LENA_WEB_SCALING=Y export LENA_WEB_HOME=/engn001/lenaw/1.5.0 export LENA_WEB_AGENT_PORT=16900 export LENA_WEB_OPENSSL_VER=1.0.2 export LENA_IMAGE_TYPE=base export WAS_CONFIG_DATA='[ { \u0026quot;server_id\u0026quot;: \u0026quot;comm_core_was-8980\u0026quot;, \u0026quot;session_cluster\u0026quot;: { \u0026quot;primary_port\u0026quot;: \u0026quot;5480\u0026quot;, \u0026quot;secondary_port\u0026quot;: \u0026quot;5480\u0026quot; }, \u0026quot;datasource\u0026quot;: [ { \u0026quot;jndi_name\u0026quot;: \u0026quot;jdbc/petclinic\u0026quot;, \u0026quot;url\u0026quot;: \u0026quot;jdbc:mysql://10.200.30.7:63306/petclinic\u0026quot; } ] } ]' if [ \u0026quot;$LENA_WAS_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WAS_HOME/bin/scale.sh; fi if [ \u0026quot;$LENA_WEB_SCALING\u0026quot; = \u0026quot;Y\u0026quot; ]; then $LENA_WEB_HOME/bin/scale.sh; fi Scale-in\nScale-in은 Scale-Out과정을 통해 등록된 Node와 Server를 해지하는 과정으로 1) Manager의 Scheduler에 의한 Node Agent로 부터 응답이 없는 Node와 해당 Node에 설치된 Server를 자동으로 등록해지하거나 또는 2) Option을 추가한 stop-agent.sh을 직접 호출하여 명시적으로 실행할 수 있다. stop-agent.sh의 옵션 정보는 다음과 같다.\nTable 72. stop-agent.sh의 옵션 정보 옵션 설명 -ur${Manager Address(IP:Port)}\n필수 옵션, Node 또는 Server를 등록해지 (Ur egister)한다.\n입력 파라미터는 Manager의 주소로 형식은 ${IP주소}:${HttpPort} 이다.\n이 옵션은 Manager에 대한 Fail-Over 처리가 가능하다. Manager 주소를 쉼표(\",\")로 구분하였을 경우 첫번째 Manager에 접속을 실패하면 두번째 Manager에 접속을 시도한다.\n-f\n강제 등록해지 여부, 선택사항\n-f 옵션이 설정되었을 경우 Server Cluster에서 등록해지 된다.\n-rt ${time - milliseconds}\n\"Retry Time\" , Optional\n해당시간 만큼 Retry한다. Retry 주기는 3초, 기본 Retry Time은 10초임\n옵션 사용 예시 # Manager에서 Node / Server 정보를 모두 제거 한다. # Manager License 사용량 산정에서 해당 서버의 사용량이 중지된다. stop-agent.sh -ur 10.80.44.55:78700 -f Scaling Overview Scaling 탭을 선택하면 제공되는 화면 상단의 테이블은 Node 타입 별 현재 Scaling 현황을 보여준다.\nInitial Node : 현재 Server Cluster에 포함되어 있는 노드 수\nScaled Node : Scaling 정책에 따라 생성된 노드 수\nToday Event : 오늘 하루 Scaling 이벤트 발생 횟수\nLatest Event : 최근에 발생된 Scaling 이벤트 발생시간\nPolicy Scaling시 적용되는 Naming Rule과 같은 정책 정보를 정의 할 수 있다.\nCommon Policy System : Scaling 적용 시스템 명\nSync Button Enabled : Server Cluster 기능의 Sync버튼 활성화 여부\nScaling Mode : Server Scaling 유형\nnosync : Node와 Server를 등록하고 Cluster에 등록한다.\nsync : Node와 Server를 등록하고 Cluster에 등록 후 Cluster Config 기반 Sync 수행, Scaling 되는 신규 Server에 대해서만 Sync를 수행한다.\nclone : Node를 등록하고 Cluster에 등록 후 Master Server를 복제(Clone)하여 Server를 설치하고 Cluster에 등록 및 Web/WAS Sync 수행\nWeb-WAS Connection Scope : Web-WAS 연계 방식\nnone (Using Proxy) : 별도의 Web-WAS 연계를 수행하지 않음\nJK Mesh - Cluster Servers : Cluster내 서버간의 연계를 수행, Web의 경우 신규등록되는 Web서버와 Cluster내 Server들을 연계, WAS의 경우 신규등록되는 WAS 서버와 Cluster내 Web서버와의 연계, nosync Mode일때는 Web서버에 설정된 LoadBalancer를 동기화 하지않고 LoadBalancer별로 Cluster내 WAS를 연계함으로서 Blue-Green 배포방식을 지원\nJK Mesh - Servers on same machine : 동일 VM 내에 있는 Web-WAS 만을 대상으로 연계 수행\nWAS Node Node Naming Rule : WAS 노드 명명 규칙\nServer Naming Rule : WAS 명명 규칙\nWait For WAS Start Up : WAS가 Scale-Out되었을 때 기동대기 여부이다. 'Y\u0026#8217;인 경우 기동된 후 다음 절차 (예 : WEB 서버 재기동)를 수행한다.\nWait Time for WAS Start Up : 최대 WAS 기동대기 시간. Wait For WAS Start Up이 'Y\u0026#8217;일 경우에도 해당 시간이 지나면 다음 절차를 수행한다.\nWEB Node Node Naming Rule : WEB 노드 명명 규칙\nServer Naming Rule : Web 서버 명명 규칙\n명명규칙에서 사용되는 Convention(예약어)은 다음과 같다.\n#{IP} : 각 단위가 '-'로 구분된 Node 또는 Server IP 주소\n#{IP[4]} : Node 또는 Server의 IP 주소 중 4번째 숫자\n#{PORT} : Node Agent 또는 Server의 HTTP 서비스 주소\n#{MASTER_NAME} : Master Server의 이름\n#{HOSTNAME} : Node 또는 Server가 설치된 VM의 Host명\n#{HOSTNAME[R4]} : VM Host명의 오른쪽 끝 4자리\n해당 항목의 정보를 저장 후 Save 버튼 을 눌러 저장한다.\nWAS Scaling Template / Web Scaling Template Sync모드 Scaling시에 동기화되는 파일 목록과 내용을 조회할 수 있다. 보여지는 File 목록들은 해당 Server Cluster의 Master Server로 부터 Manual 방식으로 복사 하여 생성된다. 화면의 Create 버튼 을 누르면 수동으로 파일이 생성된다. 돋보기 버튼 을 눌러 파일의 상세내용을 조회할 수 있고, 현재 Master Server의 설정파일과 비교한 결과를 확인할 수 있다.\nHistory 날짜 및 시간을 기준으로 Scaling 이벤트의 history를 조회할 수 있다. Scaling이 발생한 날짜를 선택하고 시간을 입력한 후 Search 버튼 을 눌러 해당 시간에 발행한 Scaling Event를 조회한다.\nScaling 기능은 Enterprise Edition에서만 제공되는 기능이다.\n6. Resource 6.1. Database 좌측 메뉴에서 Database를 선택하면 Database Resource 목록이 조회된다.\nFigure 9. Database 목록 조회 화면 6.1.1. Database 등록 Database Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n입력 항목을 입력한다.\nResource Name을 입력한다.\nDriverClassName을 확인 후 원하는 벤더의 드라이버를 선택한다.\nAddress(host/Port) 정보를 입력한다.\nSave 버튼 을 클릭해 저장한다.\n6.1.2. Database 수정 Database Resource 목록에서 수정하려는 Database Resource의 체크박스를 선택한다.\nDatabase Resource의 항목을 수정한 후 저장한다.\n내용이 수정될 경우 해당 Database Resource에 연결된 DataSoruce Resource및 WAS의 설정에 전파되므로, 해당 Database Resource 하위에 연결된 DataSoruce Resource가 존재할 경우 입력창이 기본적으로 Disable 된다. Edit 버튼 을 클릭하면 수정할 수 있다.\n6.2. DataSource 좌측 메뉴에서 DataSource를 선택하면 DataSource Resource 목록이 조회된다.\nFigure 10. DataSource 목록 조회 화면 6.2.1. DataSource 등록 DataSource Resource 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\nResource Name 필드에 논리적인 이름을 입력한다.\nServer Type을 설정한다. Server Type은 Standard, Enterprise 중에 선택하여야 하며, 이 후 같은 Type의 서버에서만 Import하여 사용할 수 있다.\nDataSource의 상세 설정을 한다(\u0026lt;Server DataSource 설정\u0026gt;\u0026gt;의 상세 항목 설명 참고)\nUpload 버튼 을 클릭하여 해당 DataSource의 Driver를 Manager서버에 등록한다. 미리 등록된 Driver는 운영자가 Server에 Import하는 시점에 해당 Server로 전송된다.\nSave 버튼 버튼을 클릭하여 저장한다.\nManager에 업로드 된 JDBC Driver는, 운영자가 Server에 해당 DataSource Resource를 Import하는 시점에 해당 Server로 전송된다. 전송된 JDBC Driver는 {서버홈경로}/lib/datasource 디렉토리에 위치하며 Classpath에 자동으로 등록된다.\n6.2.2. DataSource 수정 DataSource Resource 목록에서 수정하고자 하는 행을 선택하면 DataSource Resource 수정 화면이 표시된다.\n변경하고자 하는 설정을 변경한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 11. DataSource 상세 정보 화면 DataSource Resource 정보를 수정한 후 저장하면 해당 DataSource Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server를 재기동하면 해당 설정이 적용된다.\nStandard Type으로 설정한 DataSource Resource를 Standard 서버에 Import 한 후에 Server Type을 Enterprise로 변경할 수 없다.\nClasspath 등록 후 DataSource Resource 삭제 시, Classpath는 삭제되지 않음에 유의해야 한다.\n6.2.3. DataSource 삭제 DataSource Resource 목록에서 삭제할 DataSource Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer 또는 Application에서 Import하여 Registered Server 또는 Registered Application이 존재하는 경우, 해당 DataSource Resource는 삭제할 수 없다.\n6.2.4. JDBC Driver Upload DataSource Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Driver File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Driver File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Driver File을 Upload한다.\n6.2.5. DataSource Import 생성한 DataSource Resource를 Import해서 사용하고 있는 Server 목록(Scope가 Context, Global, Global + Link인 경우) 또는 Application목록(Scope가 Application인 경우)은 DataSource Resource 상세 조회 시 하단 영역에 표시된다.\nDataSource 상세 화면에서 DataSource Import 하기 Scope가 Context, Global, Global + Link인 DataSource Resource는 자신을 Import하는 Server를 등록할 수 있다.\nDataSource 관리 화면에서 특정 DataSource Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 DataSource를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 DataSource Resource가 Import 된다.\nImport된 DataSource Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 DataSource Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; DataSource 탭을 클릭하면, 해당 Server의 DataSource Resource 목록 조회 및 DataSource Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 DataSource Resource 목록이 조회된다.\nImport 하고자 하는 DataSource Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 DataSource Resource를 Import 한다.\nDataSource Resource를 Import 하게 되면 해당 DataSource Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 DataSource Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; DataSource 화면에서 조회할 수 있다.\nStandard Server에서는 Enterprise Type의 DataSource Resource를 Import 할 수 없다.(목록에 표시되지 않음)\nImport한 DataSource Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; DataSource 화면으로 이동하여 변경한다.\n6.3. JTA 좌측 메뉴에서 JTA를 선택하면 JTA Resource 목록이 조회된다.\nFigure 12. JTA 목록 조회 화면 6.3.1. JTA 등록 JTA 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.3.2. JTA 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 13. JTA 상세 정보 화면 JTA Resource 정보를 수정한 후 저장하게 되면 해당 JTA Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.3.3. JTA 삭제 JTA 목록에서 삭제할 JTA Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JTA Resource를 삭제할 수 없다.\n6.3.4. JTA Import 생성한 JTA Resource를 Import해서 사용하고 있는 Server 목록은 JTA Resource 상세 조회 시 하단 영역에 표시된다.\nJTA 상세 화면에서 JTA Import 하기 JTA 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JTA Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JTA Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JTA Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JTA 탭을 클릭하면, 해당 Server의 JTA Resource 목록 조회 및 JTA Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JTA Resource 목록이 조회된다.\nImport 하고자 하는 JTA Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JTA Resource를 Import 한다.\nJTA Resource를 Import 하게 되면 해당 JTA Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JTA Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JTA 화면에서 조회할 수 있다.\nImport한 JTA Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JTA 화면으로 이동하여 변경한다.\n6.4. JMS 좌측 메뉴에서 JMS를 선택하면 JMS Resource 목록이 조회된다.\nFigure 14. JMS 목록 조회 화면 6.4.1. JMS 등록 JMS 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n등록할 JMS Resource의 유형을 선택하면 하단에 선택한 유형에 맞게 설정 정보가 표시된다.\n설정하고자 하는 값을 입력한다.(상세 설정 값은 \"4.3.7 Server 설정 정보 관리\" 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.4.2. JMS 수정 JMS Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 15. JMS 상세 정보 화면 JMS Resource 정보를 수정한 후 저장하게 되면 해당 JMS Resource 가 사용되는 Server 에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.4.3. JMS 삭제 JMS 목록에서 삭제할 JMS Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 JMS Resource를 삭제할 수 없다.\n6.4.4. JMS Import 생성한 JMS Resource를 Import해서 사용하고 있는 Server 목록은 JMS Resource 상세 조회 시 하단 영역에 표시된다.\nJMS 상세 화면에서 JMS Import 하기 JMS 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nJMS 관리 화면에서 특정 JMS Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리 할 수 있는 창이 출력된다.\n해당 JMS를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 JMS Resource가 Import 된다.\nImport된 JMS Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 JMS Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Resources \u0026gt; JMS 탭을 클릭하면, 해당 Server의 JMS Resource 목록 조회 및 JMS Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 JMS Resource 목록이 조회된다.\nImport 하고자 하는 JMS Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 JMS Resource를 Import 한다.\nJMS Resource를 Import 하게 되면 해당 JMS Resource와 Server 간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 JMS Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; JMS 화면에서 조회할 수 있다.\nImport한 JMS Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; JMS 화면으로 이동하여 변경한다.\n6.5. Application 좌측 메뉴에서 Application를 선택하면 Application Resource 목록이 조회된다.\nFigure 16. Application 목록 조회 화면 6.5.1. Application 등록 Application 목록에서 New 버튼 을 클릭하면 신규 등록 화면이 출력된다.\n설정하고자 하는 값을 입력한다.\nApplication Type이 WAR일 경우에는 추가로 설정할 수 있는 항목이 표시된다.(상세 설정 값은 Application Settings 참고)\nSave 버튼 을 클릭하여 저장한다.\n6.5.2. Application 수정 Application Resource 목록에서 수정하고자 하는 행을 선택하면 수정 화면이 표시된다.\n변경하고자 설정을 입력한다.\nSave 버튼 을 클릭하여 저장한다.\nFigure 17. Application 상세 정보 화면 Application Resource 정보를 수정한 후 저장하게 되면 해당 Resource가 사용되는 Server에 변경된 설정이 전파된다. 설정이 전파된 Server는 재기동하게 되면 해당 설정이 적용된다.\n6.5.3. Application 삭제 Application 목록에서 삭제할 Application Resource의 체크박스를 선택한다.\nDelete 버튼 을 클릭하여 삭제한다.\nServer에서 import하여 Registered Server가 존재하는 경우 해당 Application Resource를 삭제할 수 없다.\n6.5.4. Application Upload Application Resource 등록 혹은 수정 화면에서 Upload 버튼 을 클릭하면 Application File을 Upload 할 수 있는 화면이 출력된다.\n파일선택 버튼 을 클릭하여 Local PC에서 upload 하고자 하는 Application File을 선택한다.\nUpload 버튼 을 클릭하여 Manager로 Application File을 Upload한다.\nApplication Import 생성한 Application Resource를 Import해서 사용하고 있는 Server 목록은, Application Resource 상세 조회 하단 영역에 표시된다.\nApplication 상세 화면에서 Application Import 하기 Application 상세 화면에서 자신을 Import해서 사용하고 있는 Server 목록을 수정할 수 있다.\nApplication 관리 화면에서 특정 Application Resource를 선택하여 상세 정보 화면으로 이동한다.\nEdit Server List 버튼 을 클릭하면 Server를 등록 관리할 수 있는 창이 출력된다.\n해당 Application를 Import 할 Server를 지정해 우측 영역으로 이동시킨다.\nSave 버튼 을 클릭하면 해당 Server에 Application Resource가 Import 된다.\nImport된 Application Resource를 Server에서 삭제하려면, 대상 Server를 좌측 영역으로 이동시킨 후 Save 버튼 을 클릭한다.\n개별 Server에서 Application Import 하기 LENA Manager 상단의 Servers 메뉴를 선택한다.\n좌측에서 개별 Web Application Server \u0026gt; Applications 메뉴를 클릭하면, 해당 Server의 Application Resource 목록 조회 및 Application Resource 추가를 할 수 있는 화면이 출력된다.\nImport 버튼 을 클릭하면 팝업 창에 미리 정의된 Application Resource 목록이 조회된다.\nImport 하고자 하는 Application Resource를 선택한다.\nOK 버튼 을 클릭하여 해당 Application Resource를 Import 한다.\nApplication Resource를 Import 하게 되면 해당 Application Resource와 Server간의 연결정보가 내부적으로 생성된다. 이 연결 정보를 기반으로 Application Resource 수정 시점에 설정 변경 사항이 해당 Server에 전달된다. 연결 정보는 Resource \u0026gt; Application 화면에서 조회할 수 있다.\nImport한 Application Resource 설정은 Server 설정에서 편집할 수 없다.(설정 정보는 볼 수 있지만 수정 불가) 설정을 변경하고자 한다면 Resource \u0026gt; Application 화면으로 이동하여 변경한다.\n7. Diagnostics 7.1. Monitoring Dashboard 7.1.1. 현황 요약 Monitoring Dashboard 화면은 하단에 3개의 탭을 제공하고 있고 선택된 탭에 따라 상단에 제공되는 요약정보가 변경된다.\n탭 별로 제공되는 정보는 다음과 같다.\nNode 탭 등록된 Node별 Server 모니터링 정보 제공\nServer Cluster 탭 Server Cluster 그룹별로 등록된 Server 모니터링 정보 제공\nService Cluster 탭 Service Cluster 그룹별로 등록된 Container 모니터링 정보 제공\n각 정보의 조회 주기를 설정할 수 있으며, WAS의 경우 Function 컬럼에 있는 팝업 버튼 을 클릭하면 상세 모니터링 화면으로 이동할 수 있다.\nMonitoring Dashboard 화면은 다음과 같다.\nFigure 18. Monitoring Dashboard의 Node 탭 화면 Figure 19. Monitoring Dashboard의 Server Cluster 탭 화면 Figure 20. Monitoring Dashboard의 Service Cluster 탭 화면 Service Cluster 탭은 Container Edition에서 제공되는 기능이다.\nMonitoring Dashboard 화면에서 사용된 속성들은 아래와 같다. 사용률 형태로 제공하는 정보의 색상은 Status Range 속성을 이용해 변경할 수 있다. (이 장의 하위 절인 모니터링 기본 설정 참고)\nTable 73. Node 상태 항목 설명 비고 CPU\nNode의CPU 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nMemory\nNode의 Memory 사용률\nDefault 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nDisk\nNode의 Disk 사용률\nEngine이 설치된 Disk 사용률로써 Default 설정값은 60% 미만일 경우 Low, 80% 이상일 경우 High이다.\nTable 74. Application Server 상태 항목 설명 비고 Status\nServer 기동여부, 진단결과발행여부(구급차 아이콘) 및 자동대응수행여부(방패 아이콘)\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap Memory\nApplication Server에서 사용되는 Heap Memory 사용률\nThread Pool\nApplication Server가 Pool로 관리하는 Request Thread 사용률을 Connector(Ajp, Http) 별로 표시\nDataSource\nApplication Server가 Pool로 관리하는 Datasource Connection 사용률\nSession Clustering\nApplication Server에 설정된 Session Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 75. Web Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nCPU\nWeb Server 프로세스의 CPU 사용률\nMemory\nWeb Server 프로세스의 Memory 사용률\nThread\nWeb Server의 Thread 수 (Active / Max)\nConnected WAS\nWeb Server와 연결된 WAS 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\nTable 76. Session Server 상태 항목 설명 비고 Status\nServer 기동여부\nUnknown 상태는 Node Agent를 통해 서버의 상태를 가져올 수 없는 경우에 표시됨\nServer Name\nServer 이름\nHeap\nSession Server에서 사용되는 Heap Memory 사용률\nSession Count\nActive 상태인 Session 비율\nMirror Server\nMirror Server의 정보 및 기동여부\n붉은색은 정지상태, 초록색은 기동상태, 검은색은 시스템외부에 존재하는 서버를 의미\n각 서버를 즉시 제어할 수 있는 기능을 다음과 같이 함께 제공된다.\nTable 77. Application Server 제어 기능 항목 설명 비고 Thread Dump\nThread Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nActive Service Dump\nActive Service Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nHeap Dump\nHeap Dump 생성\n왼쪽 버튼(Server Snapshot(dump)) \u0026gt; Dump List 메뉴 선택 \u0026gt; Dump 파일 다운로드 가능\nForced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nForced Restart\n서버 강제 재시작\n대기 시간 없이 즉시 강제 재시작\nAll Diagnostics Disable\n해당 서버에 적용된 진단/대응 기능을 모두 Disable 처리\nFigure 21. Dump 창 Heap Dump, Thread Dump, Active Service Dump를 생성하고 다운로드 할 수 있다. 일반적으로 Dump는 서버에서 Out Of Memory등의 오류, Thread Pool의 과다 사용, 서비스 지연 등이 발생한 경우 원인 파악을 위해 생성한다.\n생성하려는 Dump 타입에 따라 Thread Dump 버튼 , Active Service Dump 버튼 , Heap Dump 버튼 을 클릭해 Dump를 생성한다. 생성된 Dump는 Web Application Server가 존재하는 Host내 저장되는데, Thread Dump는 {log_home}/logs/tdump, Active Service Dump는 {log_home}/logs/sdump, HeapDump 파일은 Dump파일은 {log_home}/logs/hdump 경로에 저장된다.\nDelete 버튼 을 클릭하여 Dump 파일을 삭제할 수 있다. Download 버튼 을 클릭해 Dump 파일을 다운로드 할 수 있으며, 다운 로드 시 해당 Dump 파일이 시스템 현황 Dump 파일과 함께 zip 형태로 다운로드 된다.\nDump 관리 화면의 항목은 다음과 같다.\nTable 78. Dump 화면 항목 항목 설명 비고 File Name\n생성된 파일 이름\n날짜를 포함한 문자열로 자동 생성된다\nSize\n생성된 파일의 사이즈\nStatus\nDump 수행 시점의 System 및 Server의 상태\nDump 생성 시점의 시스템의 CPU, Memory 정보 및 Web Application Server의 주요 리소스 사용량 정보도 Dump 생성 시 함께 생성한다.\nView 버튼 을 클릭하여 생성된 Status 값을 확인할 수 있다\nTable 79. Web Server제어 기능 항목 설명 비고 Forced Stop\n서버 강제 종료\n대기 시간 없이 즉시 강제 종료\nGraceful Stop\n서버 Graceful 종료\nMonitoring 정보가 표시되지 않는다면 등록된 Node/Server가 실제로 존재하는지, Node/Server와 통신이 잘 되는 상태인지 체크한다.\n7.1.2. 현황 모니터링 상세 Monitoring Dashboard에서 Function 컬럼에 있는 가운데 버튼(View Detail Chart) 을 선택하면 상세한 Thread, Memory, 서비스 정보를 모니터링할 수 있다.\nSystem 창 Web Application Server의 Memory, Thread, Service 정보를 확인할 수 있다.\nFigure 22. System 탭 Memory Chart 실시간 Memory 사용량 정보가 표시된다. 제공하는 정보로는 GC Time(Garbage Collection 소요 시간), GC Count, Heap Used(Total Memory - Free Memory), Total Memory(서버에서 사용중인 총 메모리)가 있다. 차트의 붉은 점선은 사용 가능한 최대 Heap Memory를 의미한다. 따라서 차트에서 Heap Memory 사용량이 일반적인 GC패턴이 아닌 긴 시간동안 연속적으로 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread Chart Web Application Server가 사용자의 요청을 처리하기 위해 Pool 로 관리하고 있는 Request Thread 사용 현황을 볼 수 있는 Line Chart이다. 차트의 붉은 점선은 사용할 수 있는 Request Thread의 최대치를 의미한다. 때문에 차트에서 Request Thread 수가 붉은 점선에 근접할 경우 유의해야 한다.\nRequest Thread의 최대값은 Server 메뉴에서 해당 Web Application Server의 maxThreads 속성을 통해 변경할 수 있다.\nThread List Web Application Server의 모든 Thread를 확인할 수 있다. 출력된 Thread 이름이나 Thread 상태를 기준으로 필터링 할 수 있다. Thread List의 항목은 아래와 같다.\nTable 80. Thread List 항목 항목 설명 비고 Thread ID\n고유 Thread ID\nName\nThread 이름\nStat\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nCPU\n지정된 Thread에 대한 CPU 사용시간\nTx Id\n트랜잭션 ID\nElapsed\nThread가 수행되는데 걸린 시간\nService Name\nThread가 수행한 서비스 이름\n+ 버튼 을 눌러 다음과 같은 상세 정보를 확인할 수 있다.\nTable 81. Thread 상세 정보 항목 항목 설명 비고 threadId\n고유 Thread ID\nthreadName\nThread 이름\nState\nThread 상태\n총 세 가지의 상태가 존재함\nRUNNABLE: 가용 Thread\nWAITING: 다른Thread의 특정 Action 을 수행하기 위해 대기 중인 Thread\nTIMED_WAITING: 명시된 대기시간이 있는 Thread\nthreadCpuTime\n현재 Thread를 포함한 모든 Thread의 CPU 시간\nthreadUserTime\n현재 Thread의 CPU 시간\nblockedCount\nBlock된 합계\nblockedTime\nBlock된 누적 경과시간\nwaitedCount\n대기한 Thread의 합계\nwaitedTime\n대기한 Thread의 누적 경과시간\nlockOwnerId\nlock된 Object를 소유한 Thread의 ID\nlockName\nlock된 Object이름\nlockOwnerName\nlock된 Object를 소유한 Thread의 이름\nstackTrace\nstackTrace\nActive Service List 서비스 정보 및 해당 서비스를 처리하고 있는 Thread 정보를 확인할 수 있다. 해당 정보 내 항목은 Thread List 항목과 유사하며, 다음과 같은 추가 항목이 존재한다.\nTable 82. Active Service List 항목 항목 설명 비고 Sql\n현재 수행 중인 SQL문\nDataSource 창 Application Server에 설정된 DataSource 정보를 확인할 수 있다.\nFigure 23. DataSource 탭 화면 DataSource Chart Active Connection 수와 Idle Connection 수가 Chart에 실시간으로 표시된다. 차트의 붉은 점선은 설정된 최대 Connection 수를 의미한다. Active Connections가 붉은 점선에 근접할 경우 유의해야 한다. 콤보박스에서 DataSource를 선택하여 다른 DataSource를 모니터링 할 수 있다.\n최대 Connection 수는 DataSource 정보 등록화면의 maxConnection 속성을 통해 변경할 수 있다.\nDataSource Information 지정한 Datasource의 설정 정보를 확인할 수 있다.\n7.1.3. 모니터링 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting 메뉴에서 모니터링 기본 설정을 할 수 있다. 설정 항목은 다음과 같다.\nTable 83. 모니터링 관련 기본 설정 항목 항목 설명 기본값 Status Range\nMonitoring Dashboard 에서 Resource의 Low, Middle, High 기준을 설정한다.\n60% 미만일 경우 Low, 60% 이상일 경우 Middle, 80% 이상일 경우 High를 의미한다\nDiagnostics Interval\n진단 주기를 설정한다.\n10000(ms)\nDump Limit\n각 서버의 Dump(Thread/ActiveService/Heap) 디렉토리 별 Dump 개수 제한(0은 무제한을 의미)\n200(개)\n7.2. Analysis Dashboard Analysis Dashboard에서 시스템 단위로 실시간 장애 분석 현황 정보를 제공한다. 제공하는 정보 제공 유형은 아래와 같다.\nPerformance Map\nAnalysis Summary\nInstance Map\nFigure 24. Analysis Dashboard 7.2.1. Performance Map Analysis Dashboard의 좌측 상단에 보이는 Performance Map은 \"Thread \u0026amp; Elapsed\", \"Thread\", \"Elapsed\" 기준으로 시스템의 상태 정보를 각각 제공한다. 각 시스템은 Chart상에서 색깔을 가진 원으로 표시된다. 시스템의 상태 별 색상은 다음과 같다.\nNormal: 녹색\nAnomaly: 주황색(진단 결과로 Anomaly 상황이 검출됨)\nFault: 붉은색(진단 결과로 Fault 상황이 검출됨)\nChart에서 X축과 Y축의 의미는 다음과 같다.\nTable 84. Performance Map Chart의 X, Y축 의미 항목 설명 비고 Thread \u0026amp; Elapsed Chart\nX축: 시스템 내 Web Application Server의 평균 Thread 사용률\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nThread Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server의 평균 Thread 사용률\nElapsed Chart\nX축: 10분 동안의 Time Line\nY 축: 시스템 내 Web Application Server에서 수행되는 서비스의 평균 응답시간\nChart 상단에 표시되는 System 상태 요약 정보는 다음과 같다.\nTable 85. System 상태 요약 정보 항목 항목 설명 비고 Normal\n정상 System의 수\nSlow\n응답 시간이 오래 걸리는 System의 수\nHeavy\nThread pool사용량이 많은 System의 수\nSlow \u0026amp; Heavy\nSlow하고 Heavy한 System의 수\nChart 하단의 슬라이드 바를 조작해 이전 상태 정보를 볼 수 있으며, 이전 10분 아이콘, 다음 10분 아이콘, 일시 정지 아이콘, 재생 아이콘, 현재 시간 이동 아이콘 을 클릭해 시간을 이동할 수 있다. Dashboard에 처음 진입하면 전체 시스템이 표시되며, Chart 내에서 표시되는 시스템이나 범례를 클릭해서 특정 시스템만 선택해 볼 수 있다. 다시 전체 시스템 전체를 보려면 우측 상단의 All System 아이콘 을 클릭한다.\n시스템 아이콘 위에서 마우스 우클릭을 하면 다음과 같은 기능을 수행할 수 있다.\nTable 86. 시스템 아이콘에서 우클릭 시 사용 가능한 기능 항목 설명 비고 Topology View\nTopology View 화면으로 이동\nService Analysis\nSystem Detail 팝업 창 표시\nMonitoring\nMonitoring Dashboard 화면으로 이동\nStatistics\nStatistics 화면으로 이동\n시스템 우클릭 기능 중에 Service Analysis 클릭 시 표시되는 팝업 창은 다음과 같다. WEB, WAS, SESSION 서버의 현재 상태가 좌측에 표시된다. 우측에는 Transaction Heat Map Chart를 볼 수 있으며, 영역을 드래그 하면 상세 정보를 확인할 수 있다.\nFigure 25. System Detail 화면 Transaction 정보는 LENA Dashboard에서 Service Trace 기능을 통해 수집했던 경우에만 남는다.\n다음은 Transaction Heat Map Chart내의 원하는 영역을 드래그 한 후 표시되는 Transaction 목록에서 특정 Transaction을 선택했을 때 볼 수 있는 상세 정보 화면이다.\nFigure 26. Transaction 상세 정보 화면 상세 정보는 CLIENT(사용자 브라우저 관련), WEB(LENA WEB Server 관련), WAS(LENA WEB Application Server 관련) 측면의 데이터로 구성된다. 각 유형 별 정보에서 볼 수 있는 항목은 다음과 같다.\nTable 87. CLIENT 관련 데이터의 항목 항목 설명 비고 domain lookup time\n브라우저가 서버와 접속하기 위한 domain lookup 시간\nconnection time\n브라우저가 서버와 connection 을 맺는 시간\nserver response time\n브라우저가 서버에 요청을 하고 응답을 받은 전체 시간\nrendering time\n브라우저의 화면 rendering 시간\ntotal complete time\n브라우저에서 처리되는 전체 시간\nerror resource(line)\n스크립트 에러 발생 시, 에러가 발생한 라인\nerror content\n스크립트 에러 발생 시, 발생한 에러 내용\nTable 88. WEB 관련 데이터의 항목 항목 설명 비고 elapsed time\nWEB에서 처리 수행 시간\nWAS 관련 데이터의 항목 기본 정보\nTable 89. 기본정보 항목 설명 비고 objName\n요청을 처리한 서버 명\nendtime\n요청 처리 완료 시간\nelapsed\n요청 처리 수행 시간\nservice\n요청 서비스 명\nipaddr\n호출한 아이피 정보\ncpu\nCPU 사용 시간\nsqlCount\n수행된 쿼리 수\nsqlTime\n쿼리 수행 시간\n프로파일 정보\nTable 90. 프로파일 정보 항목 설명 비고 #\n프로파일 단계 순서를 나타내는 인덱스\np#\n내부 단계인 경우 자신이 속한 부모 인덱스\nTIME\n해당 단계가 시작된 시간\nT-GAP\n현재 단계의 시작 시간과 이전 단계의 시작 시간의 차이\nCPU\nCPU 사용 시간\nCONTENTS\n각 단계의 내용\nCLIENT 와 WEB 관련 정보는 E2E 기능이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n프로파일 정보는 WAS에서 프로파일 설정이 ON되어 있어야 수집된다. 부하량을 최소화 하기 위해 기본적으로 OFF되어 있다.\n7.2.2. Analysis Summary 현재 검출된 진단 결과 건수, 오늘 발생한 전체 진단 결과 건수, 지난 날(Default: 1일 전) 발생한 진단 결과 건수의 요약 정보를 보여준다.\nTable 91. 분석 요약 정보 항목 항목 설명 비고 ANOMALY\nFault 상태는 아니지만 주의 깊게 봐야 하는 진단 결과 건수\nFAULT\nFault 상태로 진단된 결과 건수\nRecent Events는 가장 최근에 발생한 진단 결과를 보여주며, 해당 항목을 클릭하면 Report 정보를 확인할 수 있다.\n7.2.3. Instance Map Performance Map에서 특정 시스템을 선택하면, 화면 하단에서 시스템 내 서버 정보 및 진단 결과를 보여주는 Time Line Chart를 볼 수 있다. 서버는 상태에 따라 다른 색으로 표시되며, 특정 서버를 토글 해 우측 Time Line Chart에서 보이거나 안보이게 할 수 있다. 진단 후 Anomaly나 Fault 상황이 검출되면 Time Line에 주황색(Anomaly 상황)이나 붉은색(Fault)으로 표시되는데, 해당 영역을 더블 클릭하면 Report를 확인할 수 있다.\n7.3. Event Dashboard Event Dashboard를 통해 WAS에서 발생한 이벤트 현황 정보를 제공한다.\n이벤트 정보는 WAS에서 생성되어 UDP로 Manager에 전달된다. WAS가 전송한 이벤트 정보는 Manager의 DB에 일정 기간(3달) 동안 보관되며, 해당 이벤트의 상세 SQL 및 Exception Trace 정보는 데이터 크기가 크므로 7일간만 보관된다.\n7.3.1. Event 종류 다음과 같이 4가지 종류의 이벤트가 존재한다.\nWAS의 Out Of Memory Error 발생 이벤트\nWAS의 Full GC 발생 이벤트\nWAS의 Stuck Thread 발생 이벤트\nWAS의 Exception 발생 이벤트\nWAS Exception 이벤트는 아래 두 가지 상황에서 생성되어 Manager로 전송된다.\n사용자 요청에 대해 Servlet의 service 메서드 바깥까지 Exception 이 Throw 되는 경우\n사용자가 설정한 타입의 Exception이 발생한 경우\n7.3.2. Event Dashboard를 통한 Event 관리 LENA Manager 의 Event Dashboard에서 수집된 Event를 관리할 수 있다.\nFigure 27. Event Dashboard 이벤트 발생 추세를 일자 별 바 차트로 확인할 수 있다. 모든 System 대상으로 볼 수 있으며 특정 System이나 Server 등을 지정해 조회할 수 있다. 달력 버튼 을 클릭해 날자를 변경할 수 있다.\n이벤트 목록의 항목은 다음과 같다.\nTable 92. Event List 항목 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함. 4가지 이벤트는 기본적으로 WARNING이며 변경할 수 있음.\nINFO\nWARNING(DEFAULT)\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nSystem Name\n시스템 이름\nMessage\n이벤트 메시지\nError 이벤트는 발생한 Exception 명을, Stuck Thread 이벤트는 Stuck Thread가 발생했음을 알리는 메시지를 남김\nEvent Date\n이벤트 발생 시각\n( 삭제 버튼 )\n이벤트 삭제 시 선택하는 버튼\n개별 이벤트 행을 클릭하면 아래와 같은 Event 상세 정보를 확인할 수 있다.\nFigure 28. Event 상세 정보 화면 Event 상세 정보의 공통 항목은 다음과 같다.\nTable 93. Event 상세 정보의 공통 항목(Event Common Info) 항목 설명 비고 Event Level\n이벤트 수준\n다음 유형이 존재함.\nWARNING\nINFO\nERROR\nCRITICAL\nEvent Type\n이벤트 유형\n다음 유형이 존재함\nOUT-OF-MEMORY\nFULL-GC\nSTUCK-THREAD\nERROR\nTarget Name\n대상 서버 이름\nWAS 이름 또는 Service Cluster 이름\nTarget Type\n대상 서버 유형\n다음 유형이 존재함\nWAS\nSERVICE-CLUSTER\nSystem Name\n시스템 이름\nEvent Date\n이벤트 발생 시각\nEvent 별로 서로 다른 상세 정보 항목은 다음과 같다.\nTable 94. Out Of Memory 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Heap Dump File Name\nOut Of Memory Error 발생 시 자동 생성된 Heap Dump 파일 이름\nTable 95. Full GC 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Full GC Start Time\nFull GC 시작 시각\nFull GC End Time\nFull GC 종료 시각\nPrevious Full GC Start Time\n바로 직전 Full GC 시작 시각\nPrevious Full GC End Time\n바로 직전 Full GC 종료 시각\nMemory Usage Before Full GC (MB)\nFull GC 수행 전 메모리 사용량\nMemory Usage After Full GC (MB)\nFull GC 수행 후 메모리 사용량\nTable 96. Stuck Thread 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nThreshold(ms)\nLenaStuckThreadDetectionValve에 설정한 임계값\nActive Time(ms)\nStuck Thread 감지 시점의 해당 서비스 처리 시간\nStack Trace\nStuck Thread 감지 시점의 Stack Trace\nTable 97. Error 이벤트 상세 정보 항목(Event Detail Info) 항목 설명 비고 Service\n서비스 URL\nHttp Query\n서비스 URL의 get 파라미터\npost 데이터는 보이지 않음\nget 파라미터 키는 표시되지만 값은 Masking 처리되어 표시됨\nRemote Addr\nClient 리모트 주소\nCustom Info\n사용자 정의 코드 정보\n사용자가 커스텀 Servlet Filter를 사용해 지정한 Key, Value\nException Trace\n발생한 Exception의 Trace\n7.4. 통계 7.4.1. 연간 진단/대응 통계 DIAGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 메뉴에서 서버 별 연간 진단 결과를 차트를 통해 제공한다.\nFigure 29. Statistics 화면 위 화면에서 다음과 같은 내용을 확인할 수 있다.\nDiagnostics Calendar\n한 칸이 하루를 의미하며, 연간 통계 차트의 일자에 Mouse Over를 하면 해당 일자에 발생한 진단 횟수를 확인할 수 있다.\nDaily Diagnostics Detail\nDiagnostics Calendar에서 특정 일자를 클릭하면, 화면 하단에 선택한 일자의 시간대 별 진단 발생 그래프가 표시 된다.\n7.4.2. 리포트 진단 및 대응 기능이 수행되면 Report가 자동으로 생성된다. Report는 7일간 보관되며 오래된 Report는 자동으로 삭제된다.\n진단/대응 리포트 목록 DAIGNOSTICS \u0026gt; Statistics \u0026gt; Statistics 화면에서 특정 서버를 선택한 후, Report List 버튼 을 클릭하면 진단/대응 리포트 목록 화면을 볼 수 있다. 진단/대응 리포트 목록 화면은 아래와 같다.\nFigure 30. 진단/대응 리포트 목록 화면 View 버튼 을 선택하여 Report를 확인할 수 있다.\n리포트 공통 정보 Report의 내용은 진단 결과에 따라 다르게 표시되지만, 다음과 같은 공통 정보를 가진다.\nFigure 31. 진단/대응 리포트 화면 위와 같이 이상 현상이 지속된 기간 내에 검출된 진단 결과간의 인과 관계를 도식화해 제공하며, 화면 하단에는 각 진단 결과가 어느 시간대에 생성됐는지 보여준다.\nAnomaly 상황은 진단/대응 Rule에 설정한 설정 내용의 일부만 충족된 상황을 의미하며 주황색으로 표시되고, Fault 상황은 진단/대응 Rule에 설정한 설정 내용의 모두를 만족한 상황을 의미하며 붉은색으로 표시된다.\n리포트 상세 정보 Report 하단의 Time Line에서, 특정 시간대의 특정 진단 유형을 클릭하면 다음과 같이 상세 정보를 확인할 수 있다.\nFigure 32. 진단/대응 리포트 상세 정보 Report 상세 정보의 항목은 다음과 같다.\nTable 98. Report 상세 정보 항목 항목 설명 비고 Root Cause\n원인이 되는 진단 항목\n해당 진단 결과를 야기한 원인이 되는 진단 항목을 의미하며, 만약 해당 진단 결과의 원인이 되는 다른 진단 항목이 존재한다면 다른 진단 항목이 표시됨\nAnalysis Rule\n진단/대응 Rule에 설정된 임계\nFault Analysis Raw Data\n진단 근거가 되는 Back Data\nPre-Action for Fault Tolerance\n수행된 Action 및 Dump 파일 명\nRecommended Solution\n조치 가능한 해결책\n진단/대응 유형 별 Back Data 항목은 다음과 같다.\nRequest Full 진단 Report의 Back Data는, 가장 많이 호출된 5개의 서비스 정보이다.\nTable 99. Request Full 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\n대량 DB Data 요청 진단 Report의 Back Data는, 대량 DB Data 요청을 가장 많이 한 5개의 서비스 정보이다.\nTable 100. 대량 DB Data 요청 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nCount\n해당 서비스 요청 수\nBlocked Count\nBlock된 DB 데이터 조회 건수\nDB Conn Full 진단 Report의 Back Data는, 과다 점유된 DataSource Connection Pool 정보이다.\nTable 101. DB Conn Full 진단 Report의 Back Data 항목 항목 설명 비고 DataSource Name\nDataSource 이름\nDB Connection Pool Usage Rate\nDB Connection Pool 사용률\nLong Transaction 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 102. Long Transaction 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nPeak Control 진단 Report의 Back Data는, 진단 대상 서비스 중에서 가장 오래 걸린 5개의 서비스이다.\nTable 103. Peak Control 진단 Report의 Back Data 항목 항목 설명 비고 Service Name\n서비스 이름\nRequested Count\n해당 서비스 요청 수\nAvg. Elapsed Time\n해당 서비스 평균 응답 시간\nMax Elapsed Time\n해당 서비스 중에서 가장 오래 수행된 서비스의 응답 시간\nMin Elapsed Time\n해당 서비스 중에서 가장 짧게 수행된 서비스의 응답 시간\nOOM 진단 Report의 Back Data는, OOM 발생 여부 및 메모리 사용 정보이다.\nTable 104. OOM 진단 Report의 Back Data 항목 항목 설명 비고 OOM Occurred\nOOM 발생 여부\nHeap Usage Rate\nHeap Memory 사용률\nFull GC Count\nFull GC 발생 횟수\nMemory Leak\nMemory Leak 발생 여부\nHeap Dump\nHeap Dump가 생성된 경우 파일 이름\nHang 진단 Report의 Back Data는, 서버 상태 및 시스템 리소스 정보이다.\nTable 105. Hang 진단 Report의 Back Data 항목 항목 설명 비고 Node CPU Rate\nNode Agent가 측정한 시스템의 CPU 사용률\nNode Memory Rate\nNode Agent가 측정한 시스템의 Memory 사용률\nProcess CPU Rate\n서버의 CPU 사용률\nFull GC Count\n서버의 Full GC 횟수\n7.4.3. 알림 진단/대응을 통해 Report가 생성되면, 다음과 같이 LENA Manager 우측 상단의 종 아이콘 을 통해 확인 가능하다.\nFigure 33. 진단/대응 결과 알림 알림 내용을 선택하면 생성된 Report를 바로 확인할 수 있으며, 알림 내용을 확인하고 더 이상 표시하지 않기를 원한다면 x 버튼 을 클릭한다. 알림이 많은 경우 Manager 우측 상단의 종 아이콘 을 선택한 후 Notifications 화면에서 일괄적으로 확인을 할 수 있다.\nFigure 34. 진단/대응 결과 알림 목록 일괄 확인 Home 아이콘 을 클릭하면 선택한 알림에 대한 진단 이력 화면으로 이동한다. V 아이콘 을 클릭하는 것은 선택한 알림을 확인했다는 것을 의미하며, 이렇게 클릭한 알림은 Manager 우측 상단의 종 아이콘 에 더이상 표시되지 않는다.\nNotifications 화면에서는 1개월 이내의 지난 알림에 대한 이력을 확인할 수 있다. 1개월이 지난 데이터는 자동으로 삭제된다.\n7.5. 진단 및 대응 진단 및 대응 기능을 사용하면, 장애 가능성 사전에 진단하고 적절한 대응을 자동으로 수행하여 Server 안정성을 높일 수 있다.\n진단 기능은 Rule기반으로 Server의 장애 가능성(또는 장애 상황)을 자동으로 판단하는 기능이다.\n대응 기능은 진단 결과를 기반으로 적절한 Server 제어를 통해 장애 상황를 이겨내고 안정적인 서비스를 할 수 있도록 지원하는 기능이다.\n진단 대상 유형은 다음과 같다.\nRequest Pool의 과다 사용(Reqeust Full)\n과도한 서비스 요청으로 Server의 가용한 Request Thread가 모두 소진되면, 서비스 요청이 지연되거나 서비스 불가 상태에 빠질 수 있다. Request Thread 사용량 기반으로 과도한 서비스 요청 여부를 파악하고, 자동으로 해당 요청을 임시 페이지로 우회시켜 Server를 안정적인 상태로 유지한다.\n대량 DB Data 요청(Bulk DB Data Request)\n서비스가 대량 DB 데이터를 처리하는 경우, 메모리를 과도하게 사용하면서 OOM 현상, 잦은 Full GC에 의한 서버 Hang 현상 등이 발생할 수 있다. 서비스의 대량 DB 데이터 요청 여부를 파악하고, 해당 서비스를 강제로 종료시켜 Server를 안정적인 상태로 유지한다.\nDB Connection Pool의 과다 사용(Db Conn Full)\nDB 처리 시간 지연, WAS-DB간 네트워크 지연, DB Lock 등에 의해 DB Connection이 과도하게 점유된 경우, 서비스는 가용 DB Connection을 할당 받을 때까지 지연된다. DB Connection 할당을 기다리는 서비스들이 누적되어 Request Thread Pool을 과도하게 점유하게 되면, 서비스 불능 상태까지 발생할 수 있다. 특정 DataSource의 DB Connection이 모두 소진된 경우, 할당 대기 시간을 짧게 줄이는 방법을 통해 장애를 격리함으로써 Server를 안정적인 상태로 유지한다.\n수행 시간이 긴 서비스(Long Transaction)\n일시적인 네트워크, 연계시스템 문제 등으로 서비스가 지연되거나 수행시간이 원래 긴 서비스가 존재하는 경우, 해당 서비스들이 Server의 가용한 Request Thread를 과도하게 점유하여 다른 서비스 수행에 지장을 줄 수 있다. 오래 걸리는 서비스들의 Request Thread 사용률을 제한하여 다른 서비스들의 QoS를 보장한다.\n서버 동작 불능(Hang)\nServer가 동장 불능 상태인 Hang 상태가 되면 Server에서 수행되는 모든 작업이 중단되는 것은 물론 Server가 설치된 시스템 전체에 영향을 줄 수도 있다. Hang 상태가 검출되면 즉시 재기동해 Server의 장애 상황을 해소하고 시스템 전체 장애 발생을 방지한다.\nOut of Memory 에러 발생(OOM)\n서비스 로직의 오류 또는 과도한 Memory 사용에 의해 Out of Memory(OOM) 에러가 발생할 수 있다. OOM이 발생하면 Server의 정상적인 동작을 보장할 수 없으므로, OOM 발생 여부를 빠르게 파악하여 신속히 자동으로 재기동함으로써 Server 장애 상황을 극복한다.\n사용자 폭주(Peak Control)\nServer의 처리 한계를 넘는 많은 사용자의 요청이 존재하는 경우, 서비스 지연 또는 불능 상태가 될 수 있다. 만약 사용자 요청이 특정 서비스에만 몰린다면 순서대로 진입하도록 요청을 제어하여 안정적인 서비스를 제공하면서도 사용자의 이탈을 막을 수 있다. 또한 다른 서비스 QoS도 보장할 수 있다.\n7.5.1. 진단/대응 Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Diagnostics Rule Setting 메뉴에서 진단/대응 Rule을 설정할 수 있다.\nFigure 35. Diagnostics Rule Setting 화면 진단/대응 유형 별로 Tab으로 구성되어 있으며, 기본적인 Default Rule 이 제공된다. New 버튼 을 클릭해 신규 Rule을 생성하거나, 기존의 Rule을 선택해 수정 및 삭제를 할 수 있다.\n각 진단 항목별로 다음과 같이 두 개의 Default Rule이 제공된다.\n진단 후 Report만 생성하는 Rule\n진단 후 Report 및 Dump를 생성하는 Rule(Action은 Disable되어 제공됨)\n진단 유형 별 Rule 설정 항목을 다음과 같다.\nTable 106. Request Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRequest Pool(%)\nRequest Pool 사용률 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nFAKE-PAGE: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 107. 대량 DB Data 요청 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nRS Count\n서비스 내에서 요청한 DB Data 건수 임계\n10000\nExceptional URI\n진단에서 제외할 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nTHROW-EXCEPTION: Exception을 발생시켜 서비스를 강제로 종료\nNONE\nTable 108. DB Conn Full 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nDB Connection Pool(%)\nDB Connection Pool 사용량 임계\n100\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nDB-CONN-CONTROL: Datasource Connection 할당 대기 시간 동적 변경(대기 시간 설정 가능)\nNONE\nTable 109. Long Transaction 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nElapsed Time(s)\n진단 대상 서비스 수행 시간 임계\n300\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nTarget URI\n대상 서비스 URI\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSERVICE-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\nTable 110. Hang 진단 Rule 항목 설명 기본값 Rule Name\nRule 명\nTimeout(ms)\n서버에 Health Check 시도 후, 응답 대기 시간 임계\n3000(ms)\nRetry Count\n서버에 Health Check 실패 시, 재시도 횟수\n3\nFullGC Duration(s)\nFull GC 횟수를 체크할 시간 간격\n60\nFullGC Count\nFull GC 횟수\n2\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nHang 진단 설정 항목간의 관계는 다음과 같다.\nFault 조건 : 서버 Hang에 의해 Health Check 시도 후 Timeout(s) 만큼 응답 없는 상황이 Retry Count 만큼 반복되면 Fault 상황으로 판단하여 Action을 수행함\nAnomaly 조건 : FullGC Duration(s) 간격 내 FullGC Count 만큼 Full GC 발생 횟수가 많다면 Anomaly 상황으로 판단하여 Action 없이 Waning 리포트만 생성함\nTable 111. OOM 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nOUT OF MEMORY\nOOM 발생 여부(Fault 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nMemory Leak\nMemory Leak 발생 여부(Anomaly 상황으로 판단함)\n별도 설정 없이 발생 여부 검출\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nSHUTDOWN: 서버 종료\nRESTART: 서버 재시작\nNONE\nTable 112. Peak Control 진단 Rule 항목 설명 기본값 Rule Name\nRule 이름\nTarget URI\nPeak Control 대상 서비스 URI\nService Allow Rate(%)\n진단 대상 서비스에게 허용할 Request Thread 사용률 임계\n50\nRelease Rate(%)\n이상 상황 해제 조건이 되는 Request Thread 사용률 임계\n10\nReport\nReport 생성여부(항상 Enable)\nEnable\nDump\n이상으로 판단되면 생성할 Dump 유형\nThread: Thread Dump\nService: Active Service Dump\nEnable\nServer Control\n이상으로 판단되면 수행할 Action\nNONE: 수행 안함\nPEAK-CONTROL: 임시 페이지로 요청을 우회(우회 페이지 지정 가능)\nNONE\n7.5.2. Server Rule 설정 DIAGNOSTICS \u0026gt; Policy \u0026gt; Server Rule Setting 메뉴에서 진단/대응 Rule을 Server에 Mapping하고 Enable/Disable 할 수 있다.\n최초에는 아무 진단 Rule도 Mapping되어 있지 않으므로, Enable/Disable 기능을 수행하기 전에 진단/대응 Rule을 먼저 Mapping해야 한다. 각 서버의 행을 클릭하여 다음과 같이 서버에 진단/대응 Rule을 Mapping 할 수 있다.\nFigure 36. 진단 Rule Mapping 화면 진단/대응 Rule이 Mapping된 이후에는 다음과 같이 Server Rule Setting 화면에서 Rule을 Enable/Disable 할 수 있다.\nFigure 37. Server Rule Setting 화면 Peak Control 진단 Rule만 DIAGNOSTICS \u0026gt; Policy \u0026gt; Peak Control Rule Setting 메뉴에서 설정한다.\n7.6. Trace Trace는 장애 진단을 위해 해당 Request가 LENA Server 간 이동 경로 및 시간을 기록해 원인을 진단 할 수 있게 해준다. LEAN 에서 제공하는 Trace유형은 아래와 같다.\nSession Trace\nEvent Trace\nDIAGNOSTICS \u0026gt; Trace 메뉴의 하위 메뉴를 통해 여러 기능을 사용할 수 있다.\n7.6.1. Session Trace Session 의 Trace 정보(어느 Server에 해당 Session이 존재하는지)를 확인할 수 있다. Session을 찾기 위해서는 Cluster된 Session Server가 기동중이어야 한다.\nFigure 38. Session Trace 화면 조회 결과 항목은 다음과 같다.\nTable 113. Session Trace 조회 결과 항목 항목 설명 비고 Server Type\nServer의 유형\nSession Server: LENA Session Server\nLENA Server: LENA Application Server\nServer Name\nServer 이름\nSession Server인 경우, 검색 대상 Server가 Primary이고 검색 대상 서버의 Slave Server가 Secondary 이다\nCreate Time\nSession 생성 시각\nLast Update Time\nSession이 마지막으로 수정된 시각\nLast Access Time\nServer에 해당 Session을 마지막으로 호출한 시각\nAttribute\nSession Attribute\nContext\nSession의 Application Context\n7.6.2. Event Trace 장애로 판단되는 이벤트가 발생되었을 때, 해당 Request의 Trace 정보를 확인 할 수 있다.\nFigure 39. Event Trace 화면 Trace 정보는 일주일 동안만 보관된다. 이벤트가 발생한 날짜는 검색 조건의 Trace Date에 표시 된다. 검색 결과에서 Status 항목은 발생한 이벤트의 중요도를 의미한다.\nTable 114. Event Trace 검색 결과 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nSESSION ID\n해당 Request의 Session ID\nDetail\n상세정보를 확인할 수 있는 버튼\n검색 결과의 Detail의 상세 조회 버튼 을 누르면 상세 정보를 확인할 수 있다. 각 항목은 다음과 같다.\nTable 115. Event Trace 정보의 상세 정보 항목 항목 설명 비고 Trace Time\n이벤트가 발생한 Request의 처리 종료 시각\nWEB서버의 종료 시각\nUID\nRequest를 호출한 User ID. 한 User가 각각 다른 브라우저를 사용 할 경우 UID는 다르게 처리 됨.\nWEB\nRequest를 처리한 WEB Server\nWAS\nRequest를 처리한 WAS\nEvent\n발생한 Event\nJVMRoute\nRequest를 처리한 WAS의 JVMRoute 값\nSESSION ID\n해당 Request의 SESSION ID\nSession Server\nRequest를 처리한 Session Server\n연결된 WAS의 Primary/Secondary Session Server로 표기됨\nURL\nRequest의 URL\nTrace되는 이벤트는 아래와 같다.(Event Code는 Log 파일을 보면 확인할 수 있다. 화면에서는 코드를 문장으로 풀이해 보여준다.)\nTable 116. Trace되는 이벤트 코드 및 설명 Event Code 설명 비고 sywz\nSession ID와 JVMRoute 정보가 다름.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession ID does not match with JVMRoute.\nwxso\nWAS에 Session정보 없으나 Session Server Session정보 있음.(WAS 장애로 Failover가 되었을 경우 발생 할 수 있음.)\nSession does not exist in Application Server.\nwosx\nWAS에 Session정보가 있으나 Session Server에 Session정보 없음.(Session Server 두 대를 재 기동 했을 경우 발생 할 수 있음.)\nSession does not exist in Session Server.\nwxsx\nWAS에 Session정보 없고, Session Server에 Session정보 없음.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession does not exist in any Server.\nwoxx\nWAS에 Session 정보가 있으나, Primary \u0026amp; Secondary session server와 연결 끊김.(Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nwxxx\nWAS에 Session 정보가 없고, Primary \u0026amp; Secondary session server와 연결 끊김.(WAS에 해당 Session이 Timeout 및 Session Server 두 대 모두 중지 시킨 경우 발생 할 수 있음)\nSession Server does not respond.\nsywz 이벤트와 wxso 이벤트가 한 Request에서 중복 발생되는 경우, 하나의 검색 결과에 두 이벤트가 모두 표시 된다.\n7.6.3. Trace Setting 다음은 Event/Time Trace 설정을 하는 화면이다.\nFigure 40. Trace Setting 화면 Trace 설정 항목은 아래와 같다.\nTable 117. Trace Setting 항목 항목 설명 비고 Trace On/Off\nTrace 여부\n재기동 없이 적용된다\nType\nUDP: Trace 생성 조건이 되면, UDP로 Manager에 Trace 정보를 전송\nLOG: Trace 생성 조건이 되면, Log로 Trace 정보 저장\nALL: Trace 생성 조건이 되면, UDP와 LOG 기능을 모두 사용\nData\nEVENT: Event가 발생한 경우 Trace 기록\nUID: 해당 UID인 Request만을 Trace로 기록\nUID\n입력된 UID인 Request만 Trace로 기록\n7.7. TunA APM TunA APM은 LENA와 TunA APM Tool을 쉽게 연동하여 사용자 애플리케이션의 성능을 편리하게 모니터링 할 수 있는 기능이다. LENA 1.3.2 버전을 기준으로 Linux/Unix OS 및 VM 설치 버전에서 사용할 수 있다.\nDIAGNOSTICS \u0026gt; TunA APM 메뉴의 하위 메뉴를 통해 연동 및 환경 구성을 할 수 있다. TunA APM 메뉴의 구성은 아래와 같다.\nConnection Management\nModule Management\nInstall Management\nHost Management\n7.7.1. Connection Management TunA 수집 서버 및 Web 서버의 IP Address와 Port 정보를 관리한다.\n유저가 입력한 IP Address와 Port 정보를 바탕으로, TunA 수집 서버에 연결이 가능한지 확인하는 테스트를 수행한다.\nTunA 연결 정보 입력 Figure 41. TunA 연결 정보 입력 화면 # 항목 설명 ①\nTunA Address\nTunA 수집 서버의 IP Address를 입력한다.\n②\nTCP Port\nTunA 수집 서버의 TCP Port를 입력한다.\n③\nTunA Web Address\nTunA Web 서버 IP Address를 입력한다.\n④\nHTTP Port\nTunA Web 서버 HTTP Port를 입력한다.\n⑤\nSave Button\n유저가 입력한 ① ~ ④ 항목들에 대한 연결 테스트를 수행하고 정보를 LENA Manager에 저장한다.\nTunA 연결이 성공적으로 완료되면 Save 버튼 대신 화면에 출력되며, 각 버튼을 통해 앞서 입력했던 TunA 연결 정보를 수정 및 삭제할 수 있다.\nFigure 42. TunA 연결 정보 입력 후 Action 컬럼 # 항목 설명 ①\nEdit Button\nTunA 연결 정보를 수정한다.\n②\nDelete Button\nTunA 연결 정보를 삭제한다.\nTunA 사용자 정보 입력 Figure 43. TunA 사용자 정보 입력 화면 항목 설명 Check User Button\nUser ID 컬럼의 Check User 버튼을 통해 TunA 서버에 계정과 시스템 그룹을 생성하기 위한 다이얼로그를 화면에 출력한다.\nFigure 44. TunA 사용자 정보 입력 다이얼로그 화면 # 항목 설명 ①\nUser ID\nTunA에 생성할 계정을 입력한다. 입력한 계정에 Prefix로 'LENA_'가 붙는다.\n계정 이름 규칙 : 계정 이름은 영문자, 숫자, Dash(-), Underscore(_)를 이용하여 구성할 수 있다.\n②\nCheck Button\n입력된 계정이 올바른지 또는 이미 TunA에 등록된 계정인지 검증한다. 이 검증을 마친 후에 System Group을 입력 또는 지정할 수 있다.\nFigure 45. 신규 사용자의 TunA 시스템 그룹 입력 다이얼로그 화면 # 항목 설명 ①\nSystem Group\n신규 사용자의 경우 생성 할 TunA System Group을 입력한다.\n시스템 그룹 이름 규칙 : 시스템 그룹 이름은 영문자, 숫자, Dash(-), Underscore(_)를 이용하여 구성할 수 있다.\n②\nSave Button\n입력한 User ID와 System Group 이름으로 TunA에 계정 및 System Group을 생성한다.\nFigure 46. 기존 사용자의 TunA 시스템 그룹 입력 다이얼로그 화면 항목 설명 System Group\n신규 사용자 경우와는 달리 TunA에 이미 등록되어 있는 사용자 계정을 입력한 경우, 계정이 속해야 할 TunA System Group을 입력하지 않고 선택하여 지정한다.\nTunA 연결 확인 Figure 47. Open TunA 버튼이 활성화 된 모습 TunA Connection Information과 TunA User Information을 통해 필요한 정보가 모두 입력되면 위 첨부된 화면과 같이 TunA와 연결되는 버튼을 사용할 수 있다.\n버튼을 누르면 TunA 화면이 새 창으로 브라우저에 출력된다.\n7.7.2. Module Management TunA Agent 파일을 LENA Manager에 업로드하고 TunA Agent에 대한 환경 설정을 관리한다.\nTunA 에서 제공되는 Agent 파일은 TunA Host Agent와 TunA Java Agent로 구성되어 있으며 각각 tar 압축 파일 형태로 제공되고 있다.\nFigure 48. Agent Module Upload 버튼 # 항목 설명 ①\nHost Agent Upload Button\nTunA Host Agent 파일을 업로드하기 위한 Upload File 다이얼로그를 연다. 파일을 다시 업로드 할 경우 기존에 업로드 되었던 파일을 덮어쓴다.\n②\nJava Agent Upload Button\nTunA Java Agent 파일을 업로드하기 위한 Upload File 다이얼로그를 연다. 파일을 다시 업로드 할 경우 기존에 업로드 되었던 파일을 덮어쓴다.\nFigure 49. Agent Module Upload 후의 화면 # 항목 설명 ①\nLast Updated\nAgent 파일을 업로드한 시각이 표시된다.\n②\nUse Additional Config\n각 Agent에 공통으로 지정할 설정 항목이 있다면 체크한다. 체크박스에 체크하면 본 항목 하단에 Additional Config 항목이 출력되며, 체크박스를 해제하면 Additional Config 항목이 출력되지 않는다.\n③\nAdditional Config\nUse Additional Config에 체크하면 활성화되는 텍스트박스로, 각 Agent에 공통으로 지정할 설정 항목을 작성한다. Install Management 단계에서 Agent 설치 시 본 텍스트박스에 작성된 내용이 환경 설정 파일에 포함되어 설치된다.\n7.7.3. Install Management TunA Host Agent와 TunA Java Agent를 설치할 대상 서버를 관리하고 Agent 파일을 서버에 Install한다.\nFigure 50. Install Management 화면 # 항목 설명 ①\nHost List\nTunA Host Agent 설치를 관리하는 목록이다. Host Agent를 설치 할 수 있는 목록과 Host Agent가 설치된 목록이 출력된다.\n②\nAdd Host Button\nHost List로 관리 될 목록을 조회 및 지정하기 위한 다이얼로그를 연다.\n③\nWAS List\nTunA Java Agent 설치를 관리하는 목록이다. Java Agent를 설치 할 수 있는 목록과 Java Agent가 설치된 목록이 출력된다.\n④\nAdd WAS Button\nWAS List로 관리 될 목록을 조회 및 지정하기 위한 다이얼로그를 연다.\nInstall Management에서는 TunA Agent를 설치할 Host 또는 WAS 서버를 먼저 선택하고 목록(Host List, WAS List)에 추가한다.\nHost List의 추가 / 삭제 / 변경 TunA Host Agent는 Host 당 하나의 Agent를 설치할 수 있다. 따라서 Multi-node인 환경의 경우에는 특정 Node 하나를 선택하여 설치한다.\n설치를 위해 Host List에 Host를 추가한다. Host List Table 하단의 Add Host 버튼을 클릭하여 진행한다.\nFigure 51. Host 추가 다이얼로그 화면 # 항목 설명 ①\nAvaliable host list for TunA\nHost Agent를 설치할 수 있는 Host 목록을 의미한다.\nLENA Manager에 등록 또는 설치된 Node를 포함하는 Host만 확인 할 수 있다.\n②\nAction Checkbox\nHost를 선택하기 위한 체크박스이다.\n③\nNode Selectbox\n추가 / 삭제 / 변경 작업을 수행할 Node를 선택한다.\n④\nAction Status\nNode Selectbox로 선택한 Node에서 어떤 기능이 수행될 지 표시된다. 표시되는 기능은 아래와 같다.\nAdd: Host의 Node를 지정하고 Host List에 추가한다.\nModify: 지정했던 Node를 다른 Node로 변경한다.\nRemove: 해당 Node를 목록에서 삭제한다.\n⑤\nSave Button\n선택 된 Node에 대해 지정한 Action을 수행한다.\nWAS List의 추가 / 삭제 TunA Java Agent는 WAS 당 하나의 Agent를 설치할 수 있다. 설치를 위해 WAS List에 WAS를 추가한다. 이 작업은 WAS List 테이블 하단의 Add WAS 버튼을 눌러 진행한다.\nFigure 52. WAS 추가 다이얼로그 화면 # 항목 설명 ①\nAvailable WAS list for TunA\nWAS Agent를 설치할 수 있는 WAS 목록을 의미한다.\nLENA Manager에 등록 또는 설치된 WAS만 확인 할 수 있다.\n②\nAction Checkbox\nWAS를 선택하기 위한 체크박스이다.\n③\nAction Status\n선택한 WAS에서 어떤 기능이 수행될 지 표시된다. 표시되는 기능은 아래와 같다.\nAdd: WAS를 WAS List에 추가한다.\nRemove: 해당 WAS를 목록에서 지운다.\n④\nSave Button\n선택 된 WAS에 대해 지정한 Action을 수행한다.\nAgent 설치 TunA Agent를 설치하기 위해서는 아래 첨부된 화면과 같이 Host List, WAS List에 Agent가 설치 될 대상이 추가되어있어야 한다.\nFigure 53. Host와 WAS가 설치 대상 목록에 추가된 Install Management 화면 # 항목 설명 ①\nHost List\nTunA Host Agent 설치를 관리하는 목록이다. Host Agent를 설치 할 수 있는 목록과 Host Agent가 설치된 목록이 출력된다.\n②\nInstall Button\nHost에 TunA Host Agent를 설치한다. 설치가 정상적으로 완료되면 Agent가 설치된 시각이 출력된다.\n③\nWAS List\nTunA Java Agent 설치를 관리하는 목록이다. Java Agent를 설치 할 수 있는 목록과 Java Agent가 설치된 목록이 출력된다.\n④\nInstall Button\nWAS에 TunA Java Agent를 설치한다. 설치가 정상적으로 완료되면 Agent가 설치된 시각이 출력된다.\n7.7.4. Host Management Install Management에서 설치 작업을 수행한 TunA Host Agent의 제어 및 개별 환경 설정 관리는 Host Management 에서 수행한다.\nFigure 54. Host Management 화면 # 항목 설명 ①\nHost List\nTunA Host Agent가 설치된 Host 목록을 출력한다.\n②\nHost Action Button\nTunA Host Agent의 상태를 확인하고 제어를 수행하기 위한 다이얼로그를 연다.\n③\nHost Agent Status\nTunA Host Agent의 상태를 표시한다. 표시될 수 있는 상태는 다음과 같다.\nStarted: TunA Host Agent가 기동된 상태이다.\nStopped: TunA Host Agent가 기동 중지상태이다.\n④\nAction Button\nTunA Host Agent를 기동, 중지하거나 삭제한다. 삭제는 TunA Host Agent가 중지 상태일 때만 활성화된다.\n⑤\nConfiguration\nHost Agent의 설정을 수정한다.\n⑥\nSave Button\n수정된 Host Agent의 설정을 저장한다.\n7.7.5. WAS에서의 TunA 설정 Install Management에서 설치 작업을 수행한 TunA Java Agent의 제어 및 개별 환경 설정 관리는 WAS 설정 관리 화면의 TunA 탭에서 수행한다.\nFigure 55. WAS - TunA Tab 화면 # 항목 설명 ①\nTunA Tab\nWAS에 TunA Java Agent가 설치된 경우 화면에 표시된다. TunA Tab 화면에서는 TunA Java Agent를 관리한다.\n②\nEnable TunA Checkbox\nTunA Java Agent의 사용 여부를 체크한다. WAS 기동 시에 본 항목을 반영한다.\n③\nJava Agent Config\nTunA Java Agent의 설정을 확인하고 수정하는 기능을 제공한다.\n④\nDelete Button\nTunA Java Agent를 삭제한다. WAS가 중지 상태일 때에만 활성화된다.\n⑤\nSave Button\nTunA Java Agent 설정을 저장한다.\n8. Topology 각 시스템의 구성현황을 한눈에 알아볼 수 있으며, 설치 및 설정기능을 제공하고, 자원 모니터링 및 기동/중지 제어를 할 수 있다.\nFigure 56. Topolopgy 화면 8.1. 화면 구성 System 영역, 토폴로지 영역, 자원 모니터링 영역, 서비스 트레이싱 영역으로 구분된다.\nSystem 영역\n등록된 System 리스트를 카드 형태로 제공한다.\n카드 내의 시스템 명 좌측의 아이콘은 시스템의 상태를 의미하는데 상태를 표시하는 기준은 시스템을 구성하는 Resource와 진단 결과에 따라 3단계로 나뉘어 나타낸다.\n파란색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Low, 진단 프로세스가 수행되지 않은 상태\n주황색 원 아이콘 : 시스템을 구성하는 모든 서버의 자원 사용량이 Middle 이하 또는 진단 프로세스 수행 결과가 Abnormal 상태\n붉은색 원 아이콘 : 시스템을 구성하는 일부 서버의 자원 사용량이 High 인 경우 또는 진단 프로세스 수행 결과가 Fault 상태\n시스템 명 하단의 시계 아이콘 은 시스템 내의 WAS들의 평균 응답시간을 의미하고, 사용자 아이콘 은 현재 사용자 수(최근 5분 동안) / 오늘 전체 사용자 수를 의미한다.\n자원사용량의 Low, Middle, High에 대한 기준은 DIAGNOSTICS \u0026gt; Policy \u0026gt; Common Rule Setting \u0026gt; Dashboard 항목에서 변경 할 수 있다.\n토폴로지 영역\n시스템 별 노드와 서버 Instance 구성현황을 토폴로지 차트로 보여준다. 각 Node에 설치한 WEB, WAS, Session Server를 설치 및 실행, clustering 을 할 수 있고, 서버 상태 정보를 확인 할 수 있다. 뿐만 아니라 WEB Server-WAS 간 ,WAS-Session Server, WAS-Datasource간에 연동을 설정할 수 있다.\n자원 모니터링 영역\nNode와 Server의 CPU, Memory 등 상세 자원 모니터링 정보를 제공한다.\nService Tracing 영역\n특정 Client IP와 요청 Service Pattern을 기준으로 서비스를 트레이싱하여 Request 수, 평균 응답시간, 서비스 응답 error 수를 확인 할 수 있다.\n시스템목록 우측에 있는 설정 버튼 을 통해 다음의 사항을 변경 할 수 있다.\nChart Refresh Interval : 토폴로지 영역의 데이터 조회 주기\nRefresh Topology Chart : 토폴로지 영역의 차트 그리는 메타데이터 정합성 검증 및 복원\nSystem List System 목록에 보여줄 System 선택 및 순서 변경\nElements Show Endpoint : Endpoint 영역 표시 여부 설정\nShow Edge Info : Edge에 상세정보 표시 여부 설정\nShow Server Name : Server명 표시 여부 설정\nTransparency Node : 토폴로지 영역의 Node 투명도를 설정\nEdge : 토폴로지 영역의 Edge 투명도를 설정\n8.2. 토폴로지 영역 상세 토폴로지에서 뷰 모드에 따라 정보를 구분하여 보여준다.\nView All : 전체 정보를 보여준다.\nLow : 서버의 자원 사용량이 Low 인 인스턴스만 구분하여 보여준다.\nMiddle : 서버의 자원 사용량이 Middle 인 인스턴스만 구분하여 보여준다.\nHigh : 서버의 자원 사용량이 High 인 인스턴스만 구분하여 보여준다.\nStop/unknown : 중지된 인스턴스만 구분하여 보여준다.\n또 Cluster로 단위로 인스턴스들을 활성화하여 보여준다.\n진단기능이 설정되어 있는 WAS의 경우, 자원사용량을 체크하기 이전에 서버상태의 진단 결과가 Abnormal 또는 Fault 인지를 우선적으로 확인한다. 해당 상태로 판단되는 경우에는 High 상태로 표시해준다.\n8.2.1. Control [Edit: OFF] E2E (End to End)관점하에 Client부터 Database까지 상세한 모니터링 정보 및 제어 기능을 제공한다.\nFigure 57. Topolopgy Control [Edit: OFF] CLIENT 영역 Client는 사용자를 말하며, 사용자가 Web서버에 요청을 주고 받는 브라우저 화면 Rendering 시간 및 Script error 내용을 확인 할 수 있다.\nWEB 영역 WEB 영역에서는 설치된 WEB Node 와 WEB 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWeb Node는 Web 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWeb Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWeb Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Memory, Thread 상태 정보를 제공한다.\nWeb Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 3가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Service Control\nService Control은 무중단 적시배포 기능을 제공한다. 이것은 오류 서비스 발생시 이를 수정한 소스를 WAS에 긴급 배포하고 이 WAS를 호출 할 Web 서버(적시서버)를 구성한 후 오류가 발생된 서비스를 요청 받은 Web 서버들이 적시서버로 서비스를 포워딩하여 서비스가 정상적으로 제공되게 하는 방식이다.\n이 기능을 사용하려면 Web Server에서 LSC모듈이 사용되도록 설정이 되어 있어야 한다.(httpd-lsc.conf 파일에서 LscEnable을 On으로 변경 후 서버를 재기동한다.)\n제어시간, 제어조건(Header, Cookie, URL) 및 요청을 forwarding 할 서버(http://IP:Port)를 정의 후 저장하면 정의 된 내용에 따라 실시간으로 들어오는 요청을 해당 서버로 연결하여 서버 재기동 없이 서비스를 제공한다.\nMove to : Configuration\nCluster : Compare, Sync, Snapshot, Graceful Restart\nAPPLICATION 영역 APPLICATION 영역에서는 설치된 WAS Node 와 WAS 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nWAS Node는 WAS가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nWAS Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nWAS Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Thread, Heap 상태 정보를 제공한다.\nWAS Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : Warning, CPU, Memory, Thread, QoS와 기본 정보\n제어 기능\nServer에 대해 크게 4가지 제어 기능을 제공한다.\nServer Control : Start, Stop, Forced Stop\nManual Check : Thread Dump, Active Service Dump, Heap Dump\nMove to : Configuration, Monitoring\nCluster : Compare, Sync, Snapshot, Graceful Restart\nSESSION 영역 SESSION 영역에서는 설치된 Session Node 와 Session 서버 정보를 제공하고 서버의 제어 할 수있다.\n구성정보\nSession Node는 Session 서버가 설치되는 영역으로 노드 별 서버 설치 현황을 확인 할 수 있다.\n모니터링 정보\nSession Node에서는 기본적으로 CPU, Memory, Disk 상태 정보를 제공한다.\nSession Server에 마우스를 갖다 대면 팝업 형태로 서버의 CPU, Session Count, Heap 상태 정보를 제공한다.\nSession Node와 Server를 선택하면 토폴로지 영역 우측에 있는 자원 모니터링 영역에 각각의 실시간 상세 모니터링 정보가 제공된다.\nNode : CPU, Memory, Disc, Network와 기본 정보\nServer : CPU, Memory, Session Count와 기본 정보\n제어 기능\nServer에 대해 크게 2가지 제어 기능을 제공한다.\nServer Control : Start, Stop\nMove to : Configuration\nDB 영역 DB 영역에서는 WAS와 연결된 Database 정보를 제공한다. Database는 RESOURCE 메뉴에서 등록되어 있어야 한다. 노드는 다른 영역과의 동일하게 표현하기 위해 가상의 노드로 표현하고 있다. 각 DB에 대한 모니터링 정보나 제어 기능은 제공하지 않는다.\nEdge 정보 연결선은 각 인스턴스 간, 또는 인스턴스와 Database간의 연결을 의미하며, 서버 평균 응답시간 및 연결된 Connection 수를 나타낸다.\nClient-WEB : Connection 수(Client 브라우저 렌더링 평균 완료 시간(ms)/Web Server 평균응답시간(ms))\nWEB-APPLICATION : Active Connection 수(WAS 평균응답시간(ms))\nAPPLICATION-DB : Active Datasource 사용률 (%)\nEnd to End 모니터링기능은 기본적으로 off상태로 설정되어 있다.\n따라서 Client-WEB, WEB-APPLICATION 사이의 브라우저 렌더링 평균응답시간 또는 Server의 평균응답시간을 보기 위해서는 다음의 순서대로 설정을 해주어야한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\nweb server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n8.2.2. Control [Edit: ON] 토폴로지 영역 우측상단에 Edit 버튼 을 선택하면 편집모드로 전환된다. 여기에서는 시스템 내의 노드와 인스턴스 설치 기능을 제공한다.\nFigure 58. Topolopgy Control [Edit: ON] Node 노드의 설치/수정/삭제 동작 방식은 node와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nNode 버튼 을 선택 후 설치하고자 하는 영역 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n수정\n변경하고자 하는 노드를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 노드를 선택한다.\n우클릭 버튼을 누르면 Hide, Unregister, Uninstall 메뉴 중 원하는 기능을 선택한다.\n노드 삭제시 노드 안에 설치된 서버는 한대도 없어야 한다.\nInstance 서버의 설치/수정/삭제 동작 방식은 server와 동일하다. 따라서 이 장에서는 사용 방식만 설명한다.\n설치\nInstance 버튼 을 선택 후 설치하고자 하는 영역의 노드 위에 마우스를 클릭한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n서버가 하나도 설치되어 있지 않은 노드 목록은 각 영역의 아래에 회색바탕 위에 있는 사각버튼으로 제공된다. 빈 노드에 서버를 설치하고 싶은 경우 해당 노드버튼을 더블클릭한다.\n수정\n변경하고자 하는 서버를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\n삭제하고자 하는 서버를 선택한다.\n우클릭 버튼을 누르면 Unregister, Delete 메뉴 중 원하는 기능을 선택한다.\nEdge Edge는 서버와 서버의 연결을 의미하며 WEB-APPLICATION, APPLICATION-SESSION, APPLICATION-DB 영역 안의 서버들을 연결 할 수 있다.\n연결\nEdge 버튼 을 선택 후 연결하고자 하는 시작서버 선택 후 드래그하여 도착서버와 연결한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\nAPPLICATION-SESSION 간에 연결하는 경우, 실선은 Primary Server, 점선은 Secondary Server를 의미한다.\n연결 정보 변경\n변경하고자 하는 edge를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n연결 해제\n삭제하고자 하는 edge를 선택한다.\n우클릭 버튼의 메뉴인 Delete 버튼을 선택한다.\nCluster CLUSTER 메뉴에서 제공하는 Server Cluster기능을 설정 할 수 있다.\n생성\nCluster 버튼 을 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 입력한다.\nSave 버튼 을 선택한다.\n변경\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역에 해당 정보를 변경한다.\nSave 버튼 을 선택한다.\n삭제\nCluster 버튼 옆 select 박스에서 변경하고자 하는 server cluster를 선택한다.\n화면 우측의 설치 요소 상세정보 영역의 Delete 버튼 을 선택한다.\n8.3. 서비스 트레이싱 영역 상세 특정 서버의 IP 혹은 Service Pattern을 입력 후 Start 버튼 을 선택하면 입력한 정보를 기준으로 서비스를 트레이싱하여 Request 수, error를 확인 할 수 있다. 트레이싱 하는 동안 서비스 트레이싱 영역 우측에 Xlog 정보도 제공하므로 필요에 따라 xlog를 선택하여 상세한 정보를 확인할 수 있다.\n서비스 트레이싱 기능을 사용하기 위해서는 다음의 순서대로 설정을 해주어야 한다.\nmanager.conf 파일에서 diagnostics.e2e.enable=true 로 설정\ntracing 대상 Web server의 httpd.conf 파일에서 httpd-eum.conf 파일주석 해제\n\u0026lt;IfDefine MOD_EUM\u0026gt; #LENA E2E Monitoring Extension settings Include ${INSTALL_PATH}/conf/extra/httpd-eum.conf \u0026lt;-- 이부분 주석 해제 \u0026lt;/IfDefine\u0026gt; tracing 대상 Web server의 eum/eum.properties파일에서 agent_enable값을 true로 수정\ntracing 대상 WAS의 advertiser.conf파일에서 enable.send.profile.info값을 true로 수정\n단, 이 기능은 window OS에서는 지원하지 않는다.\n9. Admin 9.1. IAM Manager의 사용자 관리 및 사용자 별 메뉴 권한 관리 기능을 제공한다.\n9.1.1. Users (사용자 관리) 사용자 목록 ADMIN \u0026gt; Users 메뉴에서 Manager 사용자의 생성, 수정, 삭제 기능을 제공한다.\nFigure 59. Users 화면 사용자 관리의 속성은 아래와 같다.\nTable 118. 사용자 관리 속성 항목(*는 필수값) 설명 비고 Use ID(*)\n사용자 식별자\nUser Name(*)\n사용자 이름\nPassword(*)\n사용자 비밀번호\n비밀번호는 특수문자, 숫자, 영문자 혼합의 최소 8자 이상이어야 한다\nUpdater\n사용자 데이터 수정 및 생성자\nLast Update\n사용자 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n기본적으로 관리자 권한을 가진 계정을 두 개 제공한다.(비상용) 제공되는 계정 외에 사용자를 추가하여 사용하기를 권장한다.\n사용자 등록 New 버튼 을 클릭하여 신규 사용자 등록을 준비한다.\n사용자 ID, 사용자 명, 사용자 패스워드를 입력한다.\n사용자 패스워드는 암호화되어 저장된다.\n패스워드는 글자수가8~20자, 영어 대소문자, 숫자, 특수문자(!@#$%^*+=-) 조합으로 작성한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nPassword 암호화는 해쉬 알고리즘(SHA-512)을 사용한다.\n사용자 수정 수정할 사용자를 선택한다.\n수정 버튼 을 클릭하여 사용자명, 사용자 패스워드를 변경한다.\n사용자 패스워드는 암호화되어 저장된다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\nManager 에 로그인시 7 번 이상 실패하면 해당아이디는 잠김 상태가 되어 사용할 수가 없다.\n잠김 상태를 해제하기 위해서는 사용자 관리 화면에서 해당 아이디의 패스워드를 수정해주어야 한다.\n패스워드 수정을 위해 Manager 에 로그인 한 계정이 없는 경우에는, $LENA_HOME/bin/reset-manager-pw.sh 를 실행하여 패스워드를 수정할 수 있다.\n사용자 삭제 삭제할 사용자를 선택한다.\n삭제 버튼 을 클릭하여 사용자를 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 사용자 정보를 저장한다.\n사용자가 1명 남은 경우는 삭제할 수 없다.\n9.1.2. Auths (권한관리) Manager는 메뉴 별 권한 관리를 위해 권한 그룹을 생성해야 한다. ADMIN \u0026gt; Auths 메뉴를 통해 권한 그룹을 생성, 수정, 삭제할 수 있다.\n권한 목록 Figure 60. Auths 화면 권한 관리의 속성은 아래와 같다.\nTable 119. 권한 관리 속성 항목(*는 필수값) 설명 비고 Auth ID(*)\n권한 식별자\nAuth Name(*)\n권한 이름\nDescription\n등록된 권한에 대한 설명\nUpdater\n권한 데이터 수정 및 생성자\nLast Update\n권한 데이터 수정 및 생성일자\n+ 아이콘\nNew 버튼, 수정 버튼 을 클릭하여 선택된 권한 정보가 변경 중임을 표시\n- 아이콘\n삭제 버튼 을 클릭하여 선택된 권한 정보가 삭제됨을 표시\n권한 생성 New 버튼 을 클릭하여 신규권한 등록을 준비한다.\n권한 ID, 권한 명, 권한 설명을 입력한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다\n권한 수정 수정할 권한을 선택한다.\n수정 버튼 을 클릭하여 권한 명, 권한 설명을 변경 한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n권한 삭제 삭제할 권한을 선택한다.\n삭제 버튼 을 클릭하여 권한을 삭제 가능한 상태로 변경한다.\nSave 버튼 을 클릭하여 권한 정보를 저장한다.\n9.1.3. User-Auth Mapping (사용자 권한 관리) Manager 사용자는 메뉴 사용 권한 획득을 위해 최소한 1개의 그룹에 소속되어 있어야 한다. 관리자는 권한 그룹을 선택하여 사용자를 배속시킬 수 있다. \"권한 관리\" 화면을 통해 등록한 권한 중 하나를 선택하고 여러 셔플 버튼을 사용하여 사용자의 권한을 제어한다.\n사용자 권한 조회 Figure 61. User-Auth Mapping 화면 사용자 권한 관리의 속성은 아래와 같다.\nTable 120. 사용자 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한 관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nID\n사용자 식별자\nName\n사용자 이름\n사용자 권한 맵핑 사용자를 배속시킬 권한을 선택한다.\n권한 선택 시 선택 가능 사용자와 선택된 사용자가 화면에 출력된다.\n선택 가능 사용자를 선택한다.\n사용자를 배속 시키거나 제외 시킨다.\n단일 우측 셔플 버튼 을 클릭하여 선택한 사용자를 배속시킨다.\n전체 우측 셔플 버튼 을 클릭하여 모든 사용자를 배속시킨다.\n단일 좌측 셔플 버튼 을 클릭하여 선택한 사용자를 제외시킨다.\n전체 좌측 셔플 버튼 을 클릭하여 모든 사용자를 제외시킨다.\nSave 버튼 을 클릭하여 사용자 권한 관리 정보를 저장한다.\n9.1.4. Menu-Auth Mapping (메뉴 권한 관리) LENA Manager에서 생성한 권한 별로 접근 가능한 메뉴를 설정할 수 있다. 권한 선택을 통해 생성한 권한 중 메뉴를 설정할 하나의 권한을 선택한다. LENA Manager에 등록된 모든 메뉴를 보여주는 메뉴 목록 중 접근 제어를 설정할 메뉴를 선택하고 메뉴권한을 설정한다.\n메뉴 권한 조회 Figure 62. Menu-Auth Mapping 화면 메뉴 권한 관리의 속성은 아래와 같다.\nTable 121. 메뉴 권한 관리의 속성 항목 설명 비고 권한 명 선택\n\"권한관리\" 화면을 통해 등록한 권한 리스트로 구성된 콤보박스\nMenu Name\nLENA Manager에 등록된 메뉴 중 좌측 메뉴 목록에서 선택한 메뉴 이름\nAuth\n선택한 권한의 메뉴접근가능여부 표시\nDefault \"N\"\n\"SERVER\", \"CLUSTER\", \"RESOURCE\" 메뉴의 하위 화면에서 Node, Server, Server Cluster, Resource 을 추가할 경우 자동으로 \"메뉴 권한 관리\" 화면의 메뉴 목록에 추가한 항목이 조회된다.\n따라서 신규 메뉴를 추가하고 싶을 경우 \"SERVER\", \"CLUSTER\", \"RESOURCE\" 하위 화면에서 각 항목을 등록 및 생성하면 된다.\nServer에 대한 권한을 변경해야 할 경우 아래 메뉴에 동일하게 권한을 반영해야 한다.\n\"SERVER\" 하위의 해당 Server\n\"CLUSTER\" 하위의 해당 Server\n만약 이를 지키지 않고, Server Cluster 하위의 일부 Server 메뉴에 대해 다음과 같이 권한을 설정할 경우를 고려해보자.(예시, 권장사항 아님)\n\"SERVER\" 하위의 해당 Server : 권한 있음\n\"CLUSTER\" 하위의 해당 Server : 권한 없음\n이 경우 메뉴 및 Server Cluster, Server 권한은 아래와 같이 표현된다.\nServer Cluster를 구성하는 Server 개수 : \"CLUSTER\" 하위 Server 권한 기준으로 권한이 있는 Server 개수\nServer Cluster의 하위 메뉴 : \"CLUSTER\" 하위 Server의 메뉴 권한 기준으로 권한이 있는 Server만 보임\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 목록 : Server Cluster의 구성 정보를 나타내야 하므로, \"CLUSTER\" 하위 권한과 무관하게 모든 Server 목록 조회\nServer Cluster의 Overview, Application Server, Web Server 탭에서의 Server 상세 링크 : 개별 Server에 대한 접근이므로, \"SERVER\" 메뉴 하위의 Server 권한이 없는 Server에 대한 접근을 막음\n메뉴 권한 맵핑 권한을 설정할 메뉴를 선택한다.\n권한 선택 시 메뉴에 대한 권한까지 조회된다.\n메뉴 목록에서 권한을 설정할 메뉴를 선택한다.\n메뉴 선택 시 메뉴 권한 목록에 메뉴 권한이 표시된다\n권한 변경이 필요할 경우 Y 혹은 N을 선택한다.\nSave 버튼 을 클릭하여 메뉴 권한 정보를 저장한다.\n9.2. License Manager를 통해 각 Node별 현재 적용된 라이선스를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.2.1. License 목록 License화면을 열면 Node별로 현재 적용된 License의 목록을 조회할 수 있다.\nLicense의 상태는 Status 항목을 살펴보면 확인 할 수 있다.\nFigure 63. License의 목록 화면 9.2.2. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 122. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Standard\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n라이선스의 만료기간 15일 전부터 알림메세지를 제공한다. 알림메세지는 Manager 우측 상단의 종 아이콘 에서 확인 할 수 있다.\n9.2.3. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.2.4. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 64. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh 이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/dev Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Standard CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/dev CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.2.5. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.2.6. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.3. License(Scaling) Manager를 통해 현재 적용된 Manager License를 조회하고 갱신할 수 있는 기능을 제공한다.\n9.3.1. Manager License Manager License의 상태, 사용량, 사용기간을 확인할 수 있다. Upload Manager License 버튼 을 통해 License 파일을 업로드할 수 있다. 업로드된 License 는 Scale-out 시 VM 으로 전송되어 서버 기동시 인증역할을 수행한다.\n9.3.2. License 목록 Node별로 현재 적용된 License의 목록을 조회할 수 있다. License의 상태는 Status 항목을 보면 확인할 수 있다.\nFigure 65. License의 목록 화면 9.3.3. License 상세 License의 목록을 클릭하면 License의 상세 정보를 확인할 수 있다.\n상세 정보 항목은 아래와 같다.\nTable 123. License의 상세 정보 항목 항목 설명 비고 Node Name\nNode 명\nType\n라이선스 구분\nTrial, Enterprise, Standard, Developer\nCustomer Name\n구매 고객사 명\nSystem Name\n설치된 시스템 명\nIssue No\n라이선스 발행번호\nIssue Date\n라이선스 발행일자\nLicense Term\n라이선스 허용 기간\nEngine Path\nLENA Engine 설치 경로\nIP Address\nNode의 IP 주소\nHardware ID\nH/W를 인식하는 ID\nMAC Address 또는 Host명\nContract CPU Core Limit\n계약된 최대 Core 개수\nCPU Core Limit\n실제 측정된 Core 개수\nContract Instance Limit\n계약된 최대 Instance개수\nInstance Limit\n실제 측정된 Instance 개수\nStatus\n라이선스 유효성 여부\n9.3.4. License 업로드 / 복구 업로드 노드목록에서 신규 License 를 적용하고자 하는 노드를 선택하고 목록 하단의 Upload 버튼 을 사용한다. 해당 버튼을 클릭하면 License 업로드 팝업창이 열리는데 이 창에서 발급받은 License 파일을 찾아 업로드 하면 선택한 노드들에 License가 적용된다.\n복구 노드목록에서 License 를 복구하고자 하는 노드를 선택하고 목록 하단의 Restore 버튼 을 사용한다. 해당 버튼을 클릭하면 백업해 두었던 파일로 License가 복구된다.\n9.3.5. License 관련 시스템 현황 체크 License 목록조회 화면에서 Node를 선택하고 Check System Info 버튼 을 클릭하면, License 발급에 필요한 시스템 현황을 확인할 수 있다.\nFigure 66. System Information CLI환경에서도 각 Node별 License 현황을 조회하기 위한 Shell Script를 제공한다. Shell 파일은 ${LENA_HOME}/bin/check-license.sh (Windows 버전의 경우 check-license.bat)이다. 이 Script를 실행한 결과의 사례는 아래와 같다.\ncheck-license.sh 실행 예 [bin]$ ./check-license.sh **************************************************************************** [System Information] Hostname : solweb2 HostAddress : 127.0.0.1 Hardware ID : 52:54:00:E9:AC:A1 ( 52:54:00:E9:AC:A1 ) Engine Path(LENA_HOME) : /engn001/lena/1.3 Node UUID : e46da220-db50-3854-84a0-7b61e1b6e7cd CPU Core : 4 HyperThreading : DISABLED Current Date : 20180705 [License Information] License Status : true [License is valid.] ISSUE_NO : 201807041532438300001 TYPE : Enterprise CUSTOMER_NAME : LG SYSTEM_NAME : CNS SYSTEM_TYPE : PROD HARDWARE_ID : 52:54:00:E9:AC:A1 LENA_HOME : /engn001/lena/1.3 CONTRACT_CPU_CORE_LIMIT : 8 CPU_CORE_LIMIT : 8 CONTRACT_INSTANCE_LIMIT : 8 INSTANCE_LIMIT : 8 START_DATE : 20180501 END_DATE : 20190531 LICENSE_KEY : H2VaDEE9fjFlvHBRsQeGXasYT5l4tBc6ebayNIdtVZ5/lj4/EM0mYf38karMTKgcLLmPMMFa8BOEFt5zRfBc/IiOxlmDgy j0+iq30ABfJoyAhY3nWBVJhBy7h0U3hzJWr1hyCuZMFAHquL4dinwWAqmJeL+jntJKFufD38vdF2YwKEoRNH9dGQnqXZHO U8wQZmN4UHk5YB5/O6YIUfFNGU3wyzjfKCfF9Golu9zQAsSZ358ptjC/TBUy+ccvLa75H32XPxiNSSxytn0hGFbcVc61kv zi7YMNUgnuEyDEQ/dhFKxJ17ijUQBZj5xbFQ9qUTzL1QKGLl+cbYVsr6kvZg== **************************************************************************** 출력되는 항목은 앞 절에서의 설명과 동일하며, License 발급에 필요한 기본정보를 출력하므로 License 발급 요청 시에 활용된다.\n출력 항목 중 \"HyperThreading\" 은 HyperThreading 사용여부를 체크하는 것으로, HyperThreading 사용 시 물리 Core의 2배수로 Core수를 산정한다.\n9.3.6. Host기반 License 체크 설정 License는 계약에 따라 Mac Address 또는 Host명으로 발급대상 H/W를 체크한다. 기본 설정은 Mac Address 기준이므로, Host명 기준으로 License 체크를 실행하기 위해서는 Linux/Unix OS를 기준으로 ${LENA_HOME}/bin에 위치한 start-agent.sh, check-license.sh파일과 각 Application Server의 setenv.sh 파일을 열어서 다음과 같이 수정한다.\nstart-agent.sh 파일 설정 (변수 $JAVA_OPT에 추가) JAVA_OPTS=\u0026quot;$\\{JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; check-license.sh 파일 설정 (다음 항목 주석 해제) _JAVA_OPTS=\u0026quot;$\\{_JAVA_OPTS} -Dlicense.check-type=hostname\u0026quot; 각 Application Server의 setenv.sh 파일 설정 (다음 항목 주석 해제) CATALINA_OPTS=\u0026quot; $\\{CATALINA_OPTS} -Dlicense.check-type=hostname\u0026quot; 9.3.7. 시간 정보 조회 라이선스 목록에서 시간정보를 조회하고 싶은 노드를 선택 후, Check Time Info 버튼 을 클릭하면 선택한 노드들에 대한 시간과 타임존 의 정보를 확인 할 수 있다.\n9.4. Security (서비스 제어) Application Server에 IP또는 URL기반으로 사용자 요청을 제한하는 기능이다.\n9.4.1. Rule Setting (Rule 설정) 특정 IP나 URL에서 요청을 제어하고 싶은 경우 화면을 통해 신규 Rule을 설정한다. 신규 Rule 설정 및 Rule 삭제의 편의성을 제공하기 위해 검색기능을 제공한다. 전체 Application에 적용되는 Server속성은 에러페이지로 처리할 수 있다\nFigure 67. Rule Setting 화면 Rule 목록의 Use 컬럼은 해당 Rule이 Application Server에 적용되어 있는지 여부를 나타낸다.\nRule 추가 시 설정 가능한 속성은 아래와 같다.\nTable 124. Rule 추가 시 설정 가능한 속성 항목(*는 필수값) 설명 비고 Rule Name(*)\n추가하는 Rule의 이름\nDescription\n추가하는 Rule에 대한 설명\nRule Type\n제어할 단위\nIP, URL\nAllow IP(*)\n허가할 요청 IP\n정규식 형태로 입력 가능\nDeny IP(*)\n거부할 요청 IP\n정규식 형태로 입력 가능\nControl Time(*)\nRule을 적용할 시간단위\nError Message(html)(*)\n제어로 인해 Filtering된 요청에 대한 출력할 에러 페이지\n제어유형이 \"IP with DateTime\"인 Rule에 Proxy Server로 중계되는 Application Server 를 적용한다면, Proxy Server의 보안적 특성으로 인해 User IP를 구할 수 없어 Rule 적용이 되지 않을 수 있다.\n생성된 Rule 중 적용된 Rule은 삭제 할 수 없다.\n9.4.2. Rule Applying (Rule 적용) 추가된 Rule 중 하나를 선택하여 Application Server에 적용한다. 적용 편의성을 위해 Rule유형, 적용단위, Rule명에 대한 검색기능을 제공한다.\nRule 목록에서 하나를 선택하여 Rule 적용에서 셔플 버튼들을 이용하여 적용 대상을 선택하고, On/Off 버튼 을 클릭하여 적용 및 저장한다. 적용 대상에서 제외를 하고 싶을 경우에도 셔플 버튼들을 이용하여 제외시킨다.\nFigure 68. Rule Applying 화면 Rule 현황 및 적용 화면에서 사용되는 속성들은 Rule설정 화면과 유사하며 아래의 속성들은 추가적인 속성들이다.\nTable 125. 추가적인 속성 항목 설명 비고 Node Name\n등록된 Node group 하위의 Node 명\nServer Name\n등록된 Node하위의 Server 명\n선택한 Rule에 신규 대상이 추가될 경우 적용 단위에 따라 server.xml 혹은 context.xml 에 추가되고, 적용된 대상에서 제외할 경우 위의 설정 파일에 추가된 Rule 설정이 삭제된다.\n9.4.3. Service Control Log (Rule 적용결과 조회) Rule이 적용된 항목들에 대한 처리 결과가 목록으로 출력된다. 처리 결과 확인의 편의성을 위해 Rule유형, 적용단위, Rule명, 로그시간에 대한 검색기능을 제공한다.\nFigure 69. Service Control Log 화면 처리 목록에서 사용되는 속성들은 아래와 같다.\nTable 126. 로그 정보의 항목 항목 설명 비고 Controlled Date\nRule설정이 적용된 요청의 처리시간\nRemote Address\n처리된 원격지 주소\nRequest URL\n처리된 요청의 URL\nHTTP Method\n처리된 요청의 HTTP Method\nRule 명\n요청을 처리하는데 적용된 Rule 이름\nRule 이력의 경우 Manager의 /conf/manager.conf 설정파일 내 access filter log 취합 Listener 사용여부를 true로 설정해야 한다. Log의 경우 각 서버의 logs 폴더 내 access_filter.log.\"날짜\".txt 파일에 기록되며 주기적으로 Manager 가 각 server 의 log 를 취합하여 Database 에 저장한다. (이때 취합된 Log 는 access_filter_log.\"날짜\".txt.gathered 파일에 backup된다) Database에 취합된 Log는 처리목록 화면에서 확인 가능하다.\nmanager.conf 내 설정 파일 항목의 설정 예는 아래와 같다.\n#access filter log 취합 리스너 사용여부 및 동작주기(초) default는 false, 60 accessfilter.listener=false accessfilter.interval=60 9.5. Patch 설치된 LENA에 대한 기능 개선 및 버그 수정을 위한 패치를 제공한다.\nPatch는 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nPatch 기능은 CLI 및 Management UI를 통하여 실행이 가능하며, 패치 시 서비스에 문제가 발생하는 경우 Restore 기능을 통하여 원복 할 수 있다.\n패치 순서는 다음과 같다.\n패치파일 업로드\nManager 패치 적용\nNode 패치 적용\n서버(Application Server, Session Server) 패치 적용\n패치 Commit\n복구 순서는 다음과 같다.\n서버 패치 복구\nNode 패치 복구\nManager 패치 복구\n복구 Commit\nCLI로 패치하는 방식은 Appendix를 참고한다.\n9.5.1. Overview 패치파일의 업로드 기능을 제공하며, Manager와 각 Node별 Node Agent의 패치 반영상태 정보를 조회한다.\nPatch 파일 업로드 Patch Info 영역에서는 매니저에 업로드 된 패치파일 중, 최상위 버전의 상세정보를 표시한다.\nTable 127. Patch Info 항목 항목 설명 비고 Patch File Ver.\n패치파일의 버전 정보\nRelease Date\n패치파일의 배포 일자\nPatch Note\n상세(노트) 버튼 을 눌러 상세한 패치노트 내용을 조회한다.\n패치노트 팝업표시\n패치파일을 업로드하는 과정은 다음과 같다.\n업로드 버튼 을 클릭한다.\n패치 가능 상태인지를 확인 후 정상이면 패치파일 업로드를 위한 팝업을 띄운다\n패치 가능 상태 조건 Manager에 등록된 Node가 모두 기동상태여야한다.\npatch가 commit상태여야 한다.\nmanager 기준으로 node와 server가 모두 같은 버전이어야 한다.\nmanager에 등록되지 않은 서버가 존재하지 않는다.\nunregister된 서버존재시 manager에 등록\n노드엔진 하위 servers폴더에 서버가 존재시 해당 폴더 삭제\n업로드 할 패치파일을 선택하면 자동으로 업로드가 실행된다.\n업로드 가능한 파일은 zip과 tar.gz이며 이외의 파일을 업로드 할 경우 에러메시지가 출력된다.\nManager Patch Manager Info 영역에서는 Manager의 패치상태를 표시하고, Manager의 패치 및 복구를 실행할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 128. Manager Info 항목 항목 설명 비고 Patch Status\nManager의 패치 적용 상태\n해 아이콘 : Manager가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Manager가 최신 패치를 적용하지 않은(patch available) 상태\nCurrent Ver.\nManager의 현재 버전\nPatch Ver.\nPatch 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nManager Info화면의 History 항목에 표시된 상세(노트) 버튼 을 클릭하면 팝업창을 통해 패치 실행 이력을 확인할 수 있다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다.\nTable 129. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPervious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\nPatch Manager Info 하단에 있는 Patch 버튼 을 클릭하면 최신 패치를 적용한다.\nHandwork에 기술된 내용 패치실행 후 필요한 수작업이므로, 기술된 내용을 실행하여 반영하여야 한다. Handwork 작업 후 팝업창 하단의 체크박스를 해제하면 Manager Patch Info화면의 Handwork 버튼이 흰색으로 변경된다.\nManager 패치를 적용하면 Node와 Server의 패치 적용 후 Commit 버튼 을 누르기 전까지 Node의 설치/등록, Server의 설치/등록/복제 등의 기능을 수행 할 수 없다.\n패치 후 반드시 브라우저 캐시를 삭제하여야 패치버전의 Manager를 사용할 수 있다.\nRestore Manager Info 하단에 있는 Restore 버튼 을 클릭하면 패치 이전 버전으로 복구된다.\n복구는 Manager에 등록된 모든 노드의 패치 상태가 Patch Available 인 경우에 수행한다.\nCommit Manager, Node, Server의 모든 패치를 적용 후 Commit버튼을 눌러 확정한다. 확정 이후에는 이전버전으로 되돌릴 수 없다.\nNode Patch Node Patch Status 영역은 매니저에 등록된 node에 대해서, 최신패치가 적용된 서버의 개수와 패치가 적용되지 않은 서버의 개수를 종합해서 보여준다.\n화면에 표시되는 각 항목에 대한 설명은 아래와 같다\nTable 130. Node Patch Status 항목 항목 설명 비고 Status\nnode의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : Node Agent가 최신 패치를 적용하지 않은(patch available) 상태\n반구 아이콘 : Node Agent는 최신 패치를 적용하였으나, Node 에 설치된 Server에는 최신 패치가 적용되지 않은 상태\n느낌표 아이콘 : Node agent가 lena-manager와 호환이 되지 않는 상태.\nNode name\nnode명\nAddress\nnode의 IP\nNode Version\nNode의 현재 버전\nHistory\nPatch history를 조회하는 버튼\nHandwork 작업이 필요시, 상세(노트) 버튼 은 붉은색으로 표시된다.\nWAS\nWeb Application Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nSession Server\nSession Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch Available : 최신패치가 적용되지 않은 서버의 개수\nNode Patch 버튼 을 클릭하면 제공되는 팝업창에서 Node 선택 후 해당 Node에 대한 패치 또는 복구를 진행 할 수 있다.\nWindow OS 환경에 설치되어 있는 Node는 Manager가 아닌 CLI를 통해 패치를 수행한다.\nServer Cluster Patch Status Server Cluster 별 Patch 현황을 표시한다.\n화면에 표시되는 각 항목에 대한 설명은 다음과 같다.\nTable 131. Server Cluster Patch Status 항목 항목 설명 비고 Status\ncluster의 패치 적용 상태\n해 아이콘 : 모든 서버가 최신패치를 적용한(up to date) 상태\n구름 아이콘 : 일부 서버가 최신 패치를 적용하지 않은(patch available) 상태\nCluster Group\ncluster그룹명\nCluster Name\ncluster이름\nLENA Patch\nApplication Server의 패치상태 정보\nUp To Date : 최신패치가 적용된 서버의 개수\nPatch available : 최신패치가 적용되지 않은 서버의 개수\n9.5.2. WAS Node/Cluster에 포함된 Application Server에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위, cluster 단위)으로 검색한다.\nTable 132. Application Server Patch Status 항목 항목 설명 비고 Patch Status\nApplication Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nApplication Server가 설치되어있는 Node명\nName\nApplication Server 이름\nType\nApplication 서버 타입\nStandard : Application Server Standard Edition\nEnterprise : Application Server Enterprise Edition\nIP\nApplication Server가 설치된 Node의 IP\nHTTP Port\nApplication Server의 HTTP Connector port\nAJP Port\nApplication Server의 AJP Connector port\nStart/Stop\nApplication Server의 기동 및 중지 실행\nCurrent Ver.\nApplication Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 133. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.5.3. Session Server Session Server들에 대해서, 매니저에 업로드 된 최신 패치파일로 패치를 진행하며, 문제발생시 패치 적용 바로 전의 상태로 복원할 수 있는 기능을 제공한다.\n목록 패치를 적용할 서버를 그룹별 조건(node단위)으로 검색한다.\nTable 134. Session Server Patch Status 항목 항목 설명 비고 Patch Status\nSession Server의 패치 적용 상태\n해 아이콘 : 최신패치가 적용된(up to date) 상태\n구름 아이콘 : 최신패치를 적용할 수 있는(patch available) 상태\nNode\nSession Server가 설치되어있는 Node명\nName\nSession Server 이름\nType\nSession 서버 타입\nPort\nSession Server의 port\nStart/Stop\nSession Server의 기동 및 중지 실행\nCurrent Ver.\nSession Server의 현재 설치된 버전정보\nPatch Ver.\n패치를 적용할 버전정보. 최신패치가 적용 된 상태일 경우 ‘N/A’로 표시된다.\n매니저에 upload된 최신 패치버전\nHistory\nServer에 적용한 patch/restore의 이력정보조회\nNode Agent process kill 등의 이유로 동작이 정상적이지 않을 경우는, 해당 node의 Server 정보는 조회되지 않는다.\nPatch 패치적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n패치를 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nPatch 버튼 을 클릭하여 패치를 진행한다. 이때 로그 팝업이 뜨게 되며 패치종료 후 수작업을 진행해야 할 사항이 있을 경우 Handwork 컬럼에 수작업(스페너) 버튼 이 붉은색으로 표기된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 해 아이콘 으로 변경되고, current ver., patch ver.에는 각각 적용한 현재패치버전과 N/A가 표시된다.\nValidation\n서버가 기동상태일 때는 패치 적용 불가\n이미 최신 패치가 적용된 서버에 다시 패치를 적용 불가\n서버에 패치적용 시 해당 Node에 패치를 처음 적용할 경우, 내부적으로 해당 Node의 패치를 먼저 진행 한 뒤에 서버패치를 진행하게 된다.\nRestore 복구적용 전 서버의 중지상태를 확인하고(Start 버튼 활성화된 상태), 중지상태가 아닐 경우 Stop 버튼 을 클릭하여 서버를 중지시킨다.\n복원을 적용할 서버의 체크박스를 체크한다.(복수 체크 가능)\nRestore 버튼 을 클릭하여 복구를 진행한다. 이때 로그 팝업이 뜨게 된다.\n로그 팝업을 닫으면 서버의 patch status 상태가 구름 아이콘 으로 변경되고, current ver., patch ver.에는 각각 이전 버전과 패치파일버전이 표시된다.\nValidation\n서버가 기동상태일 때 복원을 적용 불가\n복원을 한 뒤에, 다시 복원은 불가(매니저를 통한 복원은 1단계만 지원한다.)\n서버에 복원 진행 후 Node에 패치가 적용된 서버가 하나도 없을 경우, 내부적으로 해당 Node의 복원도 함께 진행한다.\n이력조회 상세(노트) 버튼 을 클릭하여 패치/복원에 대한 이력을 가장 최근의 이력부터 5개를 조회한다.\nTable 135. History 항목 항목 설명 비고 Action\n패치/복원 이력을 표시\nPatch Ver.\n패치/복원을 수행한 패치파일의 버전\nPrevious Ver.\n패치/복원을 적용하기 이전의 서버버전\nTimestamp\n패치/복원을 적용한 시간\nLog/Handwork\n상세(노트) 버튼 선택시 실행 결과 로그를 제공한다.\n수작업(스페너) 버튼 선택시 Handwork(추가적으로 필요한 수작업) 내용을 제공한다. Handwork 작업 필요시 해당 버튼은 붉은색으로 표시된다.\n9.6. Preferences 9.6.1. Action Trace Manager를 통해 각 사용자가 수행하는 추가/수정/삭제 작업의 수행 이력은 로그로 남는다. Action Trace에서는 이러한 수행이력을 조회/추적하는 기능을 제공한다.\nFigure 70. Action Trace 화면 이력 조회 조회 조건을 입력 후 클릭하면 이력을 조회할 수 있다. 목록 중 하나를 선택하면 상세정보도 확인할 수 있다.\n조회 화면에 표기되는 항목은 아래와 같다.\nTable 136. 이력 상세 정보 항목 항목 설명 비고 Trace Date\nAction을 수행한 시간\nStatus\nAction 수행 결과\n성공 : Success, 실패 : Fail\nClient IP\nAction을 수행한 사용자의 IP 주소\nUser ID\nAction을 수행한 사용자 ID\nAction\n수행한 활동(Action) 명\nMethod\nAction에 사용된 Method 이름\nRequest\nLENA Manager Http Request URL\nInput\nHttp Request Input 파라미터\n위 항목 중 \"Input\" 은 Request 파라미터를 그대로 저장하기 때문에, Server ID, Node ID, Server Cluster ID가 데이터 관리용 Key값 (일련번호, 캡쳐화면에서 \"serverID=31\"로 표시된 부분)으로 보여진다. 해당 Server/Node/Cluster의 상세정보를 조회하기 위해서는 \"Action Trace Detail\" 정보 하단에 있는 \"Search ID\" 기능을 활용한다. 이 기능의 입출력 항목은 아래와 같다.\nTable 137. Search ID 기능의 입출력 항목 항목 설명 비고 ID\n좌측 Combo : serverId / nodeId / serverCluster Id 중 택일\n우측 : Input 에 있는 ID 값을 입력\n입력항목\nData\n검색된 Server/Node/Cluster 정보\n출력항목\n9.6.2. Documentation LENA 소개자료와 매뉴얼을 다운로드 받을 수 있다.\n9.6.3. Manager Environment Manager 환경 설정을 위한 정보를 제공한다.\nManager Environment Manager 환경 설정 정보 중 env-manager.sh/bat에 저장하는 정보를 제공한다.\nManager Allow IPs : Manager에 접근 가능한 IP항목을 설정한다.\nJava Home Path : Manager에서 사용하는 java home 경로를 설정한다.\nManager Configuration Manager 환경 설정 정보 중 manager.conf에 저장하는 정보를 제공한다.\n기본적으로 제공하는 2가지 항목을 제공한다.\nuse JMX for Server Status : JMX를 통해 서버 상태 정보를 조회할지 여부(default : false)\nuse Server Delete Protection : Manager에서 서버 삭제 기능 사용금지 여부(default : false)\n화면 우측의 설정 버튼 을 클릭하면 상세 정보를 확인 및 변경 할 수 있다.\nTable 138. JMX for Server Status: true 사용시 WAS Status 표시 Status\nStatus 명\n설명\nStarted\nWAS 및 Application 모두 정상 기동 상태\nStarted(Warning)\nWAS 정상 기동, Application 일부(또는 전체) 기동 안 된 상태\nStopped\nWAS 중지 상태\nError\nWAS Status 확인 불가 상태\nMetadata Refresh Topology 메뉴에서 시스템 별 구성정보를 topology 차트로 그리기 위해 사용되는 메타데이터의 정합성 검증 및 복원 기능을 수행한다.\nReset manager address of all registered nodes Manager에 등록된 노드들에게 변경된 Manager Address를 일괄적으로 변경시켜주는 기능을 제공한다.\n9.6.4. Manager HA Manager 이중화에 대한 설정을 관리하고, 이중화 상태에 대한 현황조회를 할 수 있다.\nManager 이중화는 Primary와 Secondary로 구분되어 기동된 LENA Manager간의 Database와 주요 파일들을 동기화 함으로써 Prmary Manager가 비가동시 임시적으로 Secondary Manager 가 Primary의 서비스를 대행하는 기능이다.\nSecondary Manager가 대행하는 서비스의 기능은 다음 두가지 이다.\nServer Cluster - Scaling 서비스\nService Cluster - Server Template 및 License 다운로드\nManager 이중화를 위해서는 각 Manager의 역할에 따라 환경설정 파일인 'env-manager.sh' 파일의 다음 부분을 수정하여 기동하여야 한다.\nLENA Manager 환경변수 파일 (env-manager.sh) 설정 CATALINA_OPTS=\u0026quot; ${CATALINA_OPTS} -Dspring.profiles.active=ha-none\u0026quot; 위 파일에서 설정되는 spring.profiles 프로퍼티의 값은 다음 3가지 설정이 가능하며, 잘못 기입되었을 경우 Manager가 정상기동 되지 않는다.\nha-none : 기본 값으로, 이중화를 하지 않는 단독 실행형 Manager\nha-primary : 이중화시 Primary Manager 역할 수행\nha-secondary : 이중화시 Secondary Manager 역할 수행\nLocal Manager 현재의 Manager 정보를 제공한다. Manager의 역할에 관계없이, 현재의 관리화면을 제공하는 Manager 자신을 Local Manager, 원격지 Manager를 Remote Manager라 칭한다.\nTable 139. Local Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 항상 Active 상태이다.\nStart Time\nLocal Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nLocal Manager에 설정된 Remote Manager의 연결정보가 실제 Remote Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nRemote Manager 원격지 Manager의 정보를 제공한다.\nTable 140. Remote Manager 정보 항목 항목 설명 비고 Status\nServer의 상태로, 정상적으로 연결되어 있을 경우 Active 로 표기되며, 연결되어 있지 않을 경우 InActive로 표기된다.\nStart Time\nRemote Manager 시작시간\nHA Mode\nPrimary 또는 Secondary 여부\nHA Pairing Config\nRemote Manager에 설정된 Remote Manager의 연결정보가 실제 Local Manager의 정보와 일치하는지 표기한다. 비교하는 항목은 주소, Http/Udp 서비스포트, DB 서비스 포트이다.\nPairing 설정 정보가 정상일때 초록색 ○ 아이콘, 비정상일때 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nAddress\nRemote Manager의 주소로 연결정보를 설정할때 사용된다.\nHttp Port\nRemote Manager의 Http 서비스 Port로 연결정보를 설정할때 사용한다.\nConnection Test 버튼 을 눌러 Remote Manager의 Address와 Http Port를 이용하여 실제 Connection이 가능한지 테스트를 할 수 있다.\nPrimary Manager와 Secondary Manager는 Pairing을 통해 상호 동기화를 위한 정보를 설정할 수 있다. Sync Settings 버튼 을 눌러 Remote Manager와 설정정보를 동기화 하는 Paring을 수행할 수 있다.\nLatest Sync Status 이중화된 Manager간 Database 및 File 동기화 최신 이력을 조회할 수 있다.\nTable 141. Latest Sync Status 정보 항목 항목 설명 비고 Type\nDatabase 또는 File\nStatus\n정상일때 초록색 ○ 아이콘, 오류 발생시 붉은색 X 아이콘, Remote와의 연결 불가 일때 붉은색 ! 아이콘 이 표기된다.\nTime\n동기화 시도 시간\nResult\n동기화 성공여부\nMessage\n동기화 수행시 생성된 결과 메시지\n목록 버튼\n목록 버튼 을 눌러 이전 동기화 이력을 조회 할 수 있다. 이력은 총 10개 까지 표기되며, Manager 기동 후의 이력만 표기되고, Remote Manager에서 발생한 동기화 정보는 정상 연결시에만 표기된다.\n10. Appendix 10.1. LENA 시스템 요구사항 LENA를 설치하고 사용하기 위한 최소 요구사항은 다음과 같다.\n구분 JVM CPU Memory Disk Support OS 비고 기본 설치 패키지\nJDK 1.8 이상\n2 Core 이상\n4 GB 이상\nroot를 제외한 용량 10GB 이상\nLinux (centos7 이상) 또는 Windows 7이상\n각 구성요소 설치 파일 제공\n10.2. Manager 지원 브라우저 Manager의 기능을 사용할 수 있는 브라우저로는 Chrome/Edge(버전 70 이상), Firefox(버전 62 이상) 이 있다. IE의 경우 일부기능이 정상적으로 동작하지 않기 때문에 다른 브라우저를 사용하기를 권장한다. 브라우저 권장 최소 사이즈는 1680*900 이다.\n10.3. 지원 Spec별 버전 Specification Version 비고 Java Development Kit (JDK)\n1.8~\nJava Servlet\n3.1\nJava Server Pages (JSP)\n2.3\nExpression Language (EL)\n2.2\nJavaServer Pages Standard Tag Library (JSTL)\n1.2\nEnterprise JavaBeans (EJB)\n3.2\nJava Message Service (JMS)\n1.1\nJava Transaction API (JTA)\n1.2\nJava API for RESTful Services (JAX-RS)\n2.0\nJava API for XML Web Services (JAX-WS)\n2.2\n10.4. Manager DB파일 백업 Manager의 내부데이터 관리를 위한 HSQL DB의 파일은 주기적으로(1일) 백업파일을 생성하고 있다. 생성위치는 ${LENA_HOME}/repository/backup/lena-manager/script 이다.\n기본적으로 30일 이전 백업정보는 삭제하도록 되어 있는데 보관기간을 변경하고 싶은 경우, ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, dbbackup.size=보관기간 을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.5. Manager 의 내부이력 삭제 Manager가 내부적으로 남기는 이력은 주기적으로 삭제하도록 스케쥴링이 되어 있다. 삭제하는 정보는 Action Trace 이력과 Server History 이력이다.\n기본적으로 Action Trace이력은 30일까지만 보관하고, Server History 이력은 90일까지 보관하고 있다. 이 보관기간을 변경하고 싶은 경우 ${LENA_HOME}/conf 폴더 하위에 manager.conf 파일을 열고, actiontrace.size=보관기간, serverhistory.size=보관기간을 입력 후 Manager를 재 기동하면 보관기간을 변경할 수 있다.\n10.6. Manager 의 admin 패스워드 초기화 Manager의 admin사용자 패스워드를 분실하거나 비밀번호 오류횟수가 초과하였을 경우에는 console를 통하여 패스워드를 초기화해야 한다.\nManager가 설치된 장비에 console(telnet or ssh)로 접속한다.\n$LENA_HOME/bin/reset_manager_pw.sh 파일을 실행한다.\n패스워드를 초기화 할 user인 admin을 입력한다.\n초기화할 패스워드를 입력한다. 단, 패스워드는 8자리이상, 알파벳/숫자/특수문자의 조합으로 입력한다. 패스워드는 보안을 위해 console에 표시되지 않는다.\n[bin]$ ./reset-manager-pw.sh ******************************* * LENA Server Install ! * ******************************* +------------------------------------------------------------------------------- | 1. USER_ID is the user id to reset | ex : admin | 2. NEW_PASSWORD is the password to change | - password rule #1 : more than 8 length | - password rule #2 : inclusion of one or more alphabet characters | - password rule #3 : inclusion of one or more numerical digits | - password rule #4 : inclusion of one or more special characters +------------------------------------------------------------------------------- Input USER_ID for installation. (q:quit) administrator Input NEW_PASSWORD for installation. (q:quit) The password has been changed successfully. Execution is completed.!! 10.7. LENA 설치 권장 OS파라미터(CentOS기준) LENA 설치 시 OS파라미터는 max user processes 값을 8192 이상으로 설정하는 것을 권장한다.\nparameter 권장값 기본값 max user processes\n8192\n1024\nopen files\n8192\n1024\nCentOS기준으로 max user processes 설정은 다음과 같이 ‘ulimit –a’ 명령어를 실행하여 확인을 할 수 있다.\n$ ulimit -a + core file size (blocks, -c) 0 + data seg size (kbytes, -d) unlimited + scheduling priority (-e) 0 + file size (blocks, -f) 8192 + pending signals (-i) 14891 + max locked memory (kbytes, -l) 64 + max memory size (kbytes, -m) unlimited + open files (-n) 1024 + pipe size (512 bytes, -p) 8 + POSIX message queues (bytes, -q) 819200 + real-time priority (-r) 0 + stack size (kbytes, -s) 10240 + cpu time (seconds, -t) unlimited + *max user processes (-u) 1024* + virtual memory (kbytes, -v) unlimited + file locks (-x) unlimited CentOS를 기준으로 명령어 ‘ulimit –u’와 ‘ulimit –n’로 프로세스 수와 오픈파일 개수를 설정할 수 있다. 위 변경사항을 영구적으로 반영하기 위해서는 각 유저의 profile (.profile, .bash_profile)에 ulimit 실행명령을 추가하거나, 강제 설정할 수 있다 (CentOS 기준).\n*$ cat $HOME/.bash_profile* *.. (생략)* *ulimit -u 8192* *ulimit -n 8192* 또 다른 설정 방법으로는 /etc/security/limits.conf (CentOS 기준) 파일을 열어서 프로세스 최대수(nproc)와 오픈파일 최대수(nofile)를 설정한다.\n*$ cat /etc/security/limits.conf* *.. (생략)* ** soft nproc 8192* ** hard nproc 8192* ** soft nofile 8192* ** hard nofile 8192* 10.8. LENA 주기적으로 증가하는 파일 항목 경로 삭제주기 월 예상 증가량 비고 Manager정기점검로깅\nLENA_HOME/repository/monitoringDB/maintenance\n6개월\n10MB\n서버 6대 기준의 예상 증가량\n자동삭제\nManager모니터링, 진단리포트\nLENA_HOME/repository/monitoringDB/{yyyyMMdd}\n7일\nN/A\n자동삭제\nManager진단통계\nLENA_HOME/repository/monitoringDB/statistics\n영구\n1MB 이하\nManagerDB백업파일\nLENA_HOME/repository/backup/database\n30일\n100MB 이하\n자동삭제\nManager로그\nLENA_HOME/logs/lena-manager\n30일\n100MB 이하\n자동삭제\nAgent로그\nLENA_HOME/logs/lena-agent\n30일\nN/A\n자동삭제\nInstaller로그\nLENA_HOME/logs/lena-installer\n영구\n1MB 이하\nPatch적용파일\nLENA_HOME/etc/patch\n영구\nN/A\n패치시에만 생성됨\n패치완료후 삭제가능\nPatch백업파일\nLENA_HOME/etc/backup/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\nPatch로그\nLENA_HOME/logs/lena-patcher\n영구\nN/A\n패치시 생성됨\n패치완료후 삭제가능\n서버인스턴스로그\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/logs\n영구\n부하에 따라 판단\n경로변경가능\n서버인스턴스 히스토리\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/history\n영구\nN/A\nManager를 통해 서버설정 변경시에 설정파일 변경분만 생성\n서버인스턴스 스냅샷\n서버인스턴스설치경로\nLENA_HOME/servers/server_id/snapshot\n영구\nN/A\nManager를 통해 Cluster Snapshot을 생성하는 경우만 생성\nWAS 덤프파일\nLENA_HOME/repository/monitoringDB/dump\n영구\nN/A\nManager를 통해 WAS 덤프를 수행하는 경우에만 생성\n10.9. Patch CLI (Command Line Interface) Patch는 설치된 LENA에 대한 기능 개선 및 버그 수정을 위해 제공되는 기능이다. 압축파일 형태로 제공되며, 독립적으로 동작하는 Java프로세스로 동작한다.\nManagement UI를 통해 실행하는 방법은 patch 에서 제공한다. 여기에서는 CLI를 통해 패치 및 복원하는 방법에 대해 설명한다.\n10.9.1. 패치파일 업로드 및 압축해제 전달받은 패치파일을 LENA가 설치된 서버로 FTP등을 이용하여 개별적으로 업로드 한다.\n업로드 한 파일은 아래와 같은 위치에 압축을 해제하고 버전명으로 디렉토리의 명칭을 변경한다.Manager를 통하여 업로드하면 자동으로 해당 경로에 압축이 해제된다.\n노드/서버 패치파일 경로: /engn001/lena/1.3.1/etc/patch/{패치버전} Manager 패치파일 경우: /engn001/lena/1.3.1/repository/patch/{패치버전} 10.9.2. Patch Node Patch patch.sh를 실행하여 Node를 패치한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-node Node 패치과정에서 Node는 재기동 된다.\n[bin]$ ./patch.sh lena-node ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:06:43:915 [INFO] Patch started to lena-node 2018-05-28 14:06:47:075 [INFO] Stopping node-agent ... 2018-05-28 14:06:52:595 [INFO] Starting node-agent 2018-05-28 14:06:52:748 [INFO] Patch completed to lena-node ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140643905 PATCH_TARGET : lena-node PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Manager Patch patch.sh를 실행하여 Manager를 패치한다.\nmanager 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-manager Manager 패치과정에서 Manager는 재기동 된다.\n[bin]$ ./patch.sh lena-manager ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:05:32:752 [INFO] Patch started to manager 2018-05-28 14:05:36:032 [INFO] Stopping manager ... 2018-05-28 14:05:46:062 [INFO] Starting manager 2018-05-28 14:05:47:066 [INFO] Patch completed to manager ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528140532668 PATCH_TARGET : lena-manager PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! Server Patch patch.sh를 실행하여 개별적인 서버를 패치한다.\nnode가 설치된 서버에서 실행하여야 하고, LENA 서버 설치 유형별로 별도로 실행한다. 서버 패치를 위해서는 노드패치가 선행되어야 한다.\nWAS standard type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-se WAS enterprise type 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-ee Session Server 패치 \u0026lt;패치파일압축해제경로\u0026gt;/bin/patch.sh lena-session Table 142. patch.sh의 입력 인수 및 입력 항목 항목 설명 비고 PATCH_TARGET\n패치 타겟 (patch.sh의 인수로 입력)\nlena-node\nlena-manager\nlena-se\nlena-ee\nlena-session\nSERVER_ID\n패치 타겟에 해당하는 서버 ID\nlena-node, lena-manager 패치에는 불필요\n[bin]$ ./patch.sh lena-ee ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:17:18:840 [INFO] Patch started to lena-se Input SERVER_ID for execution. (q:quit) wasEE_9100 ... 2018-05-28 14:17:26:820 [INFO] Saving patch history 2018-05-28 14:17:26:842 [INFO] Patch completed to lena-se ========================= Execution Result ======================== MESSAGE : Patch succeeded RESULT : Success PATCH_HISTORY_ID : patch-20180528141639064 PATCH_TARGET : lena-ee PATCH_VERSION : 1.3.1.1 =================================================================== patch is completed.!! 10.9.3. History history.sh를 실행하여 패치 이력을 확인한다. 기본이력은 원복된 이력은 제외하고 보여주며, 전체이력은 모든 이력을 보여준다.\n기본이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh 전체이력 \u0026lt;패치파일압축해제경로\u0026gt;/bin/history.sh all [bin]$ ./history.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch History 1 lena-node / patch-20180528140643905 - action : PATCH - id : patch-20180528140643905 - target : lena-node - serverId : lena-node - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140643903 - timestamp : 20180528140643905 - restored : false - handwork-status : NO_WORK 2 lena-manager / patch-20180528140532668 - action : PATCH - id : patch-20180528140532668 - target : lena-manager - serverId : lena-manager - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528140532666 - timestamp : 20180528140532668 - restored : false - handwork-status : NEED_WORK - start of handwork-detail ... - end of handwork-detail 3 lena-ee / patch-20180528141639064 - action : PATCH - id : patch-20180528141639064 - target : lena-ee - serverId : wasEE_9100 - oldVersion : 1.3.1.0 - patchVersion : 1.3.1.1 - backupRoot: /engn001/lena/1.2/etc/backup/lena-patcher/backup-20180528141639062 - timestamp : 20180528141639064 - restored : false - handwork-status : NO_WORK history is completed.!! 10.9.4. Restore restore.sh를 실행하여 적용한 패치에 대한 원복을 진행한다. (패치 적용 문제 발생 시)\nRestore를 실행하면 패치 시점에 변경된 파일을 변경이전 상태로 복원한다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/restore.sh \u0026lt;PATCH_HISTORY_ID\u0026gt; (PATCH_HISTORY_ID는 ./ history.sh 로 조회되는 id 값이다.) [bin]$ ./restore.sh patch-20180423130610713 ******************************* * LENA Server Patch ! * ******************************* 2018-05-28 14:40:05:404 [INFO] Restore started to lena-ee ... 2018-05-28 14:40:05:532 [INFO] Restore completed to lena-ee ========================= Execution Result ======================== MESSAGE : Restore succeeded RESULT : Success =================================================================== restore is completed.!! 10.9.5. Version 확인 version.sh를 실행하여 현재 설치된 서버에 대한 패치상태를 확인할 수 있다.\n\u0026lt;패치파일압축해제경로\u0026gt;/bin/version.sh [bin]$ ./version.sh ******************************* * LENA Server Patch ! * ******************************* LENA Patch Information 1. Base Information - Version : 1.3.1.1 (Up to date) - LENA_HOME : /engn001/lena/1.3.1 2. lena-manager 2.1 - id : lena-manager / version : 1.3.1.1 (Up to date) 3. lena-se 3.1 - id : wasSE_9100 / version : 1.3.1.1 (Up to date) 3.2 - id : wasSE_9200 / version : 1.3.1.1 (Up to date) 4. lena-ee 4.1 - id : wasEE_9300 / version : 1.3.1.0 (Patch available to 1.3.1.1) 4.2 - id : wasEE_9400 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5. lena-session 5.1 - id : session_5000 / version : 1.3.1.0 (Patch available to 1.3.1.1) 5.2 - id : session_5500 / version : 1.3.1.0 (Patch available to 1.3.1.1) version is completed.!! 10.10. DBCP 부가 기능 Database 연결 테스트를 통해 Application Server 를 제어하거나, DBCP 에서 수행되는 작업들의 로그를 생성한다.\n환경변수나 JVM Option 으로 설정하며, JVM Option 설정을 우선한다.\n(동일한 옵션이 환경변수와 JVM Option 으로 모두 설정된 경우 JVM Option 값을 따름)\n윈도우 서비스에 Application Server 를 등록하여 사용하는 경우 JVM Option 으로만 설정가능\n10.10.1. Application Server 제어 Application Server 기동시 Database 에 접속 불가하거나, pool 생성, validation 쿼리 실패 등의 이상상태가 감지되면 서버를 종료한다.\nTable 143. DBCP 부가기능, Application Server 제어 환경변수 JVM Option 설명 Default SHUTDOWN_IF_DBCONN_FAIL\nlena.shutdownIfDbConnFail\ntrue 일 경우 Database 연결 / Pool 생성 실패 / validation 쿼리 실패 상황에 서버 종료\nfalse\n10.10.2. DBCP 로깅 Datasouce 생성, Connection 생성, Validation 쿼리 수행, Borrow Connection, Return Connection 에 대한 로깅 / 상세 Stack Trace 로깅\n환경변수 JVM Option 설명 Default DBCPLOG_ON\nlena.dbcplogOn\ntrue 일 경우 Datasource 생성, Connection 생성시 로깅\nfalse\nDBCPLOG_ON_DETAIL\nlena.dbcplogOnDetail\ntrue 일 경우 Validation 쿼리 수행, Borrow Connection, Return Connection 로깅 (DBCPLOG_ON 이 false 이면 작동하지 않음)\nfalse\nDBCPLOG_ON_STACKTRACE\nlena.dbcplogOnStacktrace\ntrue 일 경우 로그에 Stack Trace 정보를 추가한다.\nfalse\nDBCPLOG_MAX_TRACE\nlena.dbcplogMaxTrace\n로그에 출력할 Stack Trace 최대 갯수\n5\nDBCPLOG_EXC_DBCP_PACKAGE\nlena.dbcplogExcDbcpPackage\nStack Trace 에서 dbcp 관련 package 정보 로깅 제외 여부\ntrue\n10.11. Session Server 상세 Application Server의 Session Clustering은 별도의 Session Server를 설치하여 Session을 공유해 Clustering 한다. Session Server는 별도 VM위에서 작동하는 Standalone 모드와 Application Server에 Session Server 모듈을 탑재한 Embedded 모드가 있다.\n10.11.1. Session Server Standalone 모드 설치 설치방법은 “3.5.2. Install\" 항목을 참조한다.\n기동/중지 및 기동여부 확인 기동/중지 및 기동여부 확인은 \"3.5.6 Start/Stop” 에서 확인한다.\n환경설정 Session Server가 설치된 위치를 ${ZODIAC_HOME}이라 칭한다. Session Server는 LENA home 하위 /servers 폴더에 위치한다.\n환경설정 정보는 ${ZODIAC_HOME}/session.conf 에 관리한다. 환경설정으로 변경 가능한 설정 항목은 아래와 같다.\n항목 설명 server_id\nserver ID\nserver_name\nserver Name\nprimary_port\n해당 Session Server의 TCP listening port\nsession_max_count\n최대 HTTP세션수\nserver_recv_queue_size\nSecondary Server나 Application Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\nserver_req_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등)을 담는 Queue size\nresp_queue_size\n타 Server가 요청한 Session 정보에 대한 응답을 담는 Queue size\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다. 각 Application Server 의 설정과 일치시키는 것이 좋다.\nso_timeout\nApplication Server와의 연결에서 read timeout\nthread_request_handler\nrequest Queue 에 쌓은 데이터 처리하는 Thread 개수.\nthread_data_handler\nreceive Queue 에 쌓은 데이터 처리하는 Thread 개수.\ndebug_clustering\nDebug용 Log를 남길지 여부\nenable_auto_was_sync\ntrue로 설정 했을때, 장애 등으로 재 연결된 WAS에 Sync 요청을 보내 WAS의 Session 데이터를 Sync 한다.\nenable_auto_peer_sync\n(장애 등으로) 재 연결된 Secondary Session Server에 Sync 요청을 보내 Slave Session Server의 Session 데이터를 Sync 할지 여부\nserver_expire_sec\n서버에서 HTTP세션 정보를 expire 시키는 시간 (Session Timeout)\n0인 경우, Application에서 설정한 session의 timeout 시간을 사용\nserver_expire_check_sec\nSession Timeout 체크 주기. (단위 : 초)\nsecondary_host\nSecondary 세션서버의 주소\nsecondary_port\nSecondary 세션서버의 주소\nenable_ready_after_sync\nSecondary Server와 Session 데이터를 동기화를 수행한 후에, 연결된 WAS에 Clustering 서비스 제공 가능 상태(Ready)로 전송할지 여부 (true는 동기화 후 ready 상태 전송)\nwait_server_ready_timeout\n해당 시간 이 될 때까지 ready상태(Session Clustering서비스 제공가능 상태) 가 안되면 자동으로 ready 상태를 만들어준다.\nserver_ready_time\n기동 시 Secondary Server와의 연결 대기 시간 (해당 값 * 100 ms).\nmax_logoutset\n최대 로그아웃 된 HTTP 세션 수\nenable_auto_logout_sync\ntrue 인 경우, session entry 정보를 sync 할 때, logout 정보도 같이 sync 한다. (sticky가 아닌 round-robin일 경우 필요하다)\n로그 로그는 ${LENA_HOME}/logs/session-server/lena-[Session Server Name]_[YYYYMMDD].log 로 남는다. 로그를 확인하고자 한다면 ${ZODIAC_HOME}/log.sh 파일을 실행시켜 확인 할 수도 있다.\n[session_5002]$ ./log.sh 5월 09, 2018 02:55:50 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 02:55:54 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33138 5월 09, 2018 02:55:55 오후 [ZODIAC] SERVER_READY, no peer, time=5000 5월 09, 2018 02:59:57 오후 [ZODIAC] Zodiac Stop 5월 09, 2018 03:00:00 오후 [ZODIAC] Zodiac Session Server 1.3.0 20160420 5월 09, 2018 03:00:01 오후 [ZODIAC] TCP listen 5002 5월 09, 2018 03:00:01 오후 [ZODIAC] ACCEPT NODE(Tomcat) /127.0.0.1:33359 5월 09, 2018 03:00:03 오후 [ZODIAC] ACCEPT SERVER /127.0.0.1:46818 5월 09, 2018 03:00:04 오후 [ZODIAC] SYNC[session_5002] recv bulk sessions : #0 recv bulk logout sessions : #0 recv bulk dupInfo : #0 2ms 5월 09, 2018 03:00:04 오후 [ZODIAC] SERVER_READY sync is done 5월 09, 2018 03:00:05 오후 [ZODIAC] TCP Primary name=session_5002 /127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC start 127.0.0.1:5002 5월 09, 2018 03:00:05 오후 [ZODIAC] SYNC Send bulk sessions send to 127.0.0.1:5002 #0 and logout session send : 0 and dupInfo send : 0 Console Zodiac Session Server는 JMX를 통해 Session Server 정보 조회 및 Application Server Sync 명령을 수행 할 수 있다. ${ZODIAC_HOME} 의 console.sh 파일을 실행시켜 Zodiac Session Server의 JMX 기능을 사용한다.\n[session_5002]$ ./console.sh =====zodiac session server JMX Console===== ------------------------------------------------------------ - Usage: ./console.sh \u0026lt;COMMAND\u0026gt; - - \u0026lt;COMMAND\u0026gt; is one of the following: - - 1. was_list - - 2. status - - 3. was_serverq - - 4. was_sync - - It needs WAS ID - - example: ./console.sh was_sync \u0026lt;was id\u0026gt; - - 5. search - - It needs SESSION ID. - - example: ./console.sh search \u0026lt;session id\u0026gt; - ------------------------------------------------------------ 다음은 console.sh의 명령어에 대한 설명이다.\nApplication Server List\n현재 Session Server에 연결된 Application Server List를 보여준다.\nShell명령어 console.sh was_list 를 실행하면 된다.\n[session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}} Session Server Status\n현재 Session Server의 상태 값을 보여준다.\nShell명령어 console.sh status 를 실행하면 된다.\n[session_5002]$ ./console.sh status =====zodiac session server JMX Console===== RUN OPERATION: getStatusString\\{request_getfresh_logout:0,session_count:0,req_lost:0,request_ getfresh_not_new:0,request_getfresh_nodata:0,request_getnew_secondary:0,session_expired:0,request_getnew_logout:0,session_timeout:1800,request_getnew_nodata:0,session_max_count:2000000 ,logout_from_nodes:0,pid:32705,session_recv_lost:0,logout_from_secondary:0,request_getfresh_secondary:0,request_getfresh:0,request_getnew:0,logout_count:0,data_from_nodes:0,resp_lost:0,request_getfresh_data:0,data_from_secondary:0} Session Server ServerQ Status\nZodiac Session Server의 ServerQ 상태를 보여준다. ServerQ는 Session Server에 연결된 Application Server의 접속을 관리하는 모듈이다. 여기서 보여주는 데이터는 Application Server 에서 보내는 Session 정보(data)와 Request 정보(Request)를 담는 Queue 정보이다.\nShell명령어 console.sh was_serverq 를 실행하면 된다.\n[session_5002]$ ./console.sh was_serverq =====zodiac session server JMX Console===== PRINT ATTRIBUTEdataQ.size: 0requestQ.size: 0dataQ.overCnt: 0requestQ.overCnt: 0 Session Id Search\n입력한 Session ID와 일치하는 Session을 가지고 있는 Application Server List 를 보여준다.\nShell명령어 console.sh search [Session ID] 를 실행하면 된다.\n[session_5002]$ ./console.sh search B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285 + =====zodiac session server JMX Console===== RUN OPERATION: search RESULT:\\{'AE4_29100'=\\{lastAccessTime='2018-05-24 15:55:48.503',context='ROOT',attributeNames=[sessiontest.counter, ARGO_DUPLICATION_STATUS],lastUpdateTime='2018-05-24 15:55:48.501',addr='/127.0.0.1:44568',id=B38E30BDE5223BAA0221B9479AF3DDAF.6ef7931859a200285,createTime='2018-05-24 15:55:43.241'}} Application Server Session Sync\nApplication Server의 Session 정보를 Session Server로 sync하는 경우 실행한다.\nShell명령어 console.sh was_sync [Application Server jvmName(was_list에서 jvmName으로 출력되는 값)] 를 실행하면 된다.\n[session_5002]$ [session_5002]$ ./console.sh was_list =====zodiac session server JMX Console===== RUN OPERATION: getServerInfo RESULT:server=\\{addr:/127.0.0.1:54001,name:wasEE7_29100, info:\\{server_name=wasEE7_29100,pid=24915,hostname=solwas4,jvmName=bde0fbb29e8100285,context=/jpetstoreJTA;ROOT;/lena;/EPS;/HelloWorldWeb,type=INSTANCE}}server= \\{addr:/127.0.0.1:33912,name:wasEE3_29100, info:\\{server_name=wasEE3_29100,pid=10607,hostname=solmanager,jvmName=2b2451dd049f00285,context=/jpetstoreJDBC;ROOT;/jpetstore3,type=INSTANCE}}} [session_5002]$ ./console.sh was_sync bde0fbb29e8100285 =====zodiac session server JMX Console===== RUN OPERATION: serverSyncsync complete Session Server failover Session Server는 Primary/Secondary로 구성되어있고, 실시간으로 Session 정보를 동기화 한다. Application Server는 Primary/Secondary Session Server와 접속을 유지하고 있기 때문에 Primary Session Server 장애가 생겼을 경우, 장애 감지 시점 이후부터 Secondary Session Server로 Failover 된다.\n10.11.2. Session Server Embedded 모드 Session Server Embedded 모드는, Application Server 내에 Session Server Module을 내장하는 방식이다.\n환경 설정 Embedded 모드로 Session Server 설정을 하려면 Manager의 Application Server 설정 화면에서 설정하거나 ${LENA_HOME}/servers/[ApplicationServer명]/conf/session.conf 를 수정한다.\n화면에 표시되는 항목에 대한 설명은 아래와 같다.\n항목 설명 비고 Mode\nEmbedded 또는 Standalone Session Server의 Client 모드 선택\nEmbedded Host\nSession Cluster의 Primary서버의 노드명 과 서버명\nEmbedded Port\nSession Cluster의 Primary서버의 서비스 포트\nSecondary Server Host\nSession Cluster의 Secondary 서버의 노드명 과 서버명\nSecondary Server Port\nSession Cluster의 Secondary 서버의 서비스 포트\nMulti Login Control\n다중 로그인 체크 여부\nfalse\nLogout Page (Multi Login)\n다중 로그인시 먼저 로그인 한 사용자에게 표시되는 로그아웃 결과 페이지\nLogout Message (Multi Login)\n다중 로그인시 로그아웃 결과 메시지, ajax Client에게 JSON 타입으로 제공됨\nExpected Page for Multi Check\nManager 에서는 설정할 수 있는 설정 값은 정해져 있다. 기본적으로 default 설정을 따르도록 한다.\n아래는 session.conf 파일로 변경 가능한 환경설정 값이다.\n항목 설명 기본값 enable_clustering\nSession clustering 할지 여부. False면 Session Server에서 session을 find하지 않는다.\nTRUE\ndebug_clustering\ndebug 할지 여부\nFALSE\nprimary_host\nPrimary Session Server의 주소\nEmbedded 모드인 경우에는 Embedded Host 값\n127.0.0.1\nprimary_port\nPrimary Session Server의 port\nEmbedded 모드인 경우에는 Embedded Port 값\n5005\nsecondary_host\nSecondary Session Server의 주소,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용된다.\nEmbedded 모드인 경우에는 Slave Server Host 값\n127.0.0.1\nsecondary_port\nSecondary Session Server의 port,\nApplication Server와 Primary Session Server의 연결이 끊어진 경우에만 사용\nEmbedded 모드인 경우에는 Slave Server Port 값\n5006\nrecv_queue_size\n타 Server로부터 수신한 Session 정보 처리 요청 (최신 정보 변경 / 신규등록, Logout처리) Queue size\n512\nreq_queue_size\n타 Server로부터 수신한 Session정보 요청 (Session정보 요청, 최신 정보 확인 등) Queue size\n512\nresp_queue_size\n타 Server로부터 수신한 Session 정보 요청에 대한 응답을 담는 Queue size\n512\nsend_queue_size\n타 Server로 전송할 Session 정보를 담는 Queue size\n512\nkeep_alive_time\nApplication Server와 Session Server 간의 TCP연결을 유지하기 위해 더미 메세지를 보내는 간격, so_timeout보다 작아야 한다.\n3000\nso_timeout\nSession Server와의 연결에서 read timeout\n8000\ntcp_open_try_interval\nSession Server에 연결이 끊어진 경우 재 연결 시도를 위한 간격\n5000\nfind_timeout\nApplication Server에서 트랜잭션이 세션을 검색할 때 서버 응답을 기다리는 시간 이 시간 동안 서버가 응답이 없으면 Application Server은 해당 세션을 서버가 가지고 있지 않은 것으로 간주한다\n500\nwait_server_ready_cnt\nServer와 통신연결은 되었으나, Server 상태가 ready가 아닌 경우 최대 설정 초만큼 기다린다. -1인 경우 무한대로 기다린다.\n-1\nserver_embedded\nsession server 모듈을 embedded 할지 여부. True면 session server 모듈을 embedded 한다.\nfalse\nmax_logoutset\n로그아웃된 HTTP 세션을 보관하는 set 크기\n20000\ncheck.duplication.login\n중복 로그인 체크 여부\nfalse\n주1) 타 Server : 연결된 Session Server 또는 Cluster된 Application Server\nVersion 1.3.2.0\nLast updated 2022-12-01 10:33:55 +0900 "}]